\hypertarget{classmdt_data_table_manager}{\section{mdt\-Data\-Table\-Manager Class Reference}
\label{classmdt_data_table_manager}\index{mdt\-Data\-Table\-Manager@{mdt\-Data\-Table\-Manager}}
}


Create/manage data sets.  




{\ttfamily \#include $<$mdt\-Data\-Table\-Manager.\-h$>$}



Inheritance diagram for mdt\-Data\-Table\-Manager\-:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=196pt]{classmdt_data_table_manager__inherit__graph}
\end{center}
\end{figure}


Collaboration diagram for mdt\-Data\-Table\-Manager\-:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=196pt]{classmdt_data_table_manager__coll__graph}
\end{center}
\end{figure}
\subsection*{Public Member Functions}
\begin{DoxyCompactItemize}
\item 
\hyperlink{classmdt_data_table_manager_ae63e559f597ae48a36e149afde3a8396}{mdt\-Data\-Table\-Manager} (\hyperlink{class_q_object}{Q\-Object} $\ast$parent=0, Q\-Sql\-Database db=Q\-Sql\-Database())
\item 
\hyperlink{classmdt_data_table_manager_a3a1c225b1aeedad8fc89b126147971ca}{$\sim$mdt\-Data\-Table\-Manager} ()
\begin{DoxyCompactList}\small\item\em Note\-: this will delete internal model. Be avare when referencing pointer returned by model(). \end{DoxyCompactList}\item 
\hyperlink{classmdt_error}{mdt\-Error} \hyperlink{classmdt_data_table_manager_aaeff001bf9a44f890078f5c6f434ec05}{last\-Error} () const 
\begin{DoxyCompactList}\small\item\em Get last error. \end{DoxyCompactList}\item 
void \hyperlink{classmdt_data_table_manager_a368e82d3128e0c5098e09a9555bd65aa}{close} ()
\begin{DoxyCompactList}\small\item\em Close. \end{DoxyCompactList}\item 
bool \hyperlink{classmdt_data_table_manager_a1e19b3f34c1b0a91bcae4396731efc57}{set\-Data\-Set\-Directory} (const Q\-Dir \&dir)
\begin{DoxyCompactList}\small\item\em Set dataset directory. \end{DoxyCompactList}\item 
Q\-Dir \hyperlink{classmdt_data_table_manager_a8fa0924a76e8f3fec9617f690cc4e148}{data\-Set\-Directory} () const 
\begin{DoxyCompactList}\small\item\em Set dataset directory. \end{DoxyCompactList}\item 
const Q\-String \hyperlink{classmdt_data_table_manager_affcbb25ab7308527885c4f3f703e7440}{data\-Set\-Table\-Name} () const 
\begin{DoxyCompactList}\small\item\em Get dataset table name. \end{DoxyCompactList}\item 
bool \hyperlink{classmdt_data_table_manager_ae813c6c4323a1949d489a24c07e914fa}{create\-Data\-Set} (const Q\-Dir \&dir, const Q\-String \&name, \hyperlink{classmdt_sql_schema_table}{mdt\-Sql\-Schema\-Table} \&table, \hyperlink{classmdt_sql_database_manager_a2f5b46d67a88095053a5edfc415c7418}{mdt\-Sql\-Database\-Manager\-::create\-Mode\-\_\-t} mode)
\begin{DoxyCompactList}\small\item\em Create database and table. \end{DoxyCompactList}\item 
Q\-Sql\-Database \hyperlink{classmdt_data_table_manager_a9026c9d3d102246af243b68c815fba04}{database} () const 
\begin{DoxyCompactList}\small\item\em Get internal database instance. \end{DoxyCompactList}\item 
void \hyperlink{classmdt_data_table_manager_a139611cc21836438053226b1d7576201}{enable\-Progress\-Dialog} (bool enable)
\begin{DoxyCompactList}\small\item\em Enable/disable progress dialog. \end{DoxyCompactList}\item 
void \hyperlink{classmdt_data_table_manager_af14013b42dc0f84d37d4d1483f18d8c4}{set\-Csv\-Format} (const Q\-String \&separator, const Q\-String \&data\-Protection, const Q\-String \&comment, const Q\-Char \&escape\-Char, Q\-Byte\-Array eol=\hyperlink{mdt_csv_file_8h_af4d889780ff51b630e15bc9848df527c}{M\-D\-T\-\_\-\-N\-A\-T\-I\-V\-E\-\_\-\-E\-O\-L}, const Q\-Byte\-Array \&encoding=\char`\"{}U\-T\-F-\/8\char`\"{})
\begin{DoxyCompactList}\small\item\em Set C\-S\-V import/export format. \end{DoxyCompactList}\item 
bool \hyperlink{classmdt_data_table_manager_abe733f071ca77579522823598e79dd9a}{export\-To\-Csv\-File} (const Q\-String \&file\-Path, \hyperlink{classmdt_sql_database_manager_a2f5b46d67a88095053a5edfc415c7418}{mdt\-Sql\-Database\-Manager\-::create\-Mode\-\_\-t} mode)
\begin{DoxyCompactList}\small\item\em Export data to a C\-S\-V file. \end{DoxyCompactList}\item 
bool \hyperlink{classmdt_data_table_manager_a668cc3d94e6aa5dab406a0fd319351af}{import\-From\-Csv\-File} (const Q\-String \&csv\-File\-Path, \hyperlink{classmdt_sql_database_manager_a2f5b46d67a88095053a5edfc415c7418}{mdt\-Sql\-Database\-Manager\-::create\-Mode\-\_\-t} mode, const Q\-String \&dir=Q\-String(), const Q\-String\-List \&pk\-Fields=Q\-String\-List())
\begin{DoxyCompactList}\small\item\em Import a C\-S\-V file. \end{DoxyCompactList}\item 
bool \hyperlink{classmdt_data_table_manager_a5c8aaf4f42a50bd0c216ef29adc9d79f}{copy\-Table} (const Q\-String \&source\-Table\-Name, const Q\-String \&destination\-Table\-Name, \hyperlink{classmdt_sql_database_manager_a2f5b46d67a88095053a5edfc415c7418}{mdt\-Sql\-Database\-Manager\-::create\-Mode\-\_\-t} mode, Q\-Sql\-Database source\-Database=Q\-Sql\-Database(), Q\-Sql\-Database destination\-Database=Q\-Sql\-Database())
\begin{DoxyCompactList}\small\item\em Copy a source table to a destination table. \end{DoxyCompactList}\item 
void \hyperlink{classmdt_data_table_manager_a2b38e6a8157183fcbce0770d12e9aa9d}{add\-Field\-Mapping} (const Q\-String \&csv\-Header\-Item, const Q\-String \&field\-Name, const Q\-String \&display\-Text, Q\-Variant\-::\-Type data\-Type, int csv\-Data\-Item\-Start\-Offset=-\/1, int csv\-Data\-Item\-End\-Offset=-\/1)
\begin{DoxyCompactList}\small\item\em Add a mapping between C\-S\-V header part (item) and model field. \end{DoxyCompactList}\item 
void \hyperlink{classmdt_data_table_manager_a10c9f9d57d6c35fa5721906c79376ec4}{clear\-Field\-Map} ()
\begin{DoxyCompactList}\small\item\em Clear fields mapping. \end{DoxyCompactList}\item 
Q\-String\-List \hyperlink{classmdt_data_table_manager_a5cafc38a5570c51757dbac7e8c2fd978}{source\-Header} () const 
\begin{DoxyCompactList}\small\item\em Get the source header. \end{DoxyCompactList}\item 
const Q\-String\-List \hyperlink{classmdt_data_table_manager_a0edc657a7dbcfcf251e6ce27560d40e5}{database\-Header} () const 
\begin{DoxyCompactList}\small\item\em Get database header. \end{DoxyCompactList}\item 
void \hyperlink{classmdt_data_table_manager_aba44e2b905b6fc959306ca9b5a786d84}{set\-Database\-Header\-To\-Model} (Q\-Abstract\-Table\-Model $\ast$model)
\begin{DoxyCompactList}\small\item\em Set database header to model. \end{DoxyCompactList}\item 
Q\-Hash$<$ Q\-String, Q\-String $>$ \hyperlink{classmdt_data_table_manager_ac8884e4e2d58c6f7e3db180aca5a2772}{display\-Texts\-By\-Field\-Names} () const 
\begin{DoxyCompactList}\small\item\em Get display texts referenced by field names. \end{DoxyCompactList}\end{DoxyCompactItemize}
\subsection*{Static Public Member Functions}
\begin{DoxyCompactItemize}
\item 
static Q\-String \hyperlink{classmdt_data_table_manager_aba53817fb6bd1df5850f53424708ffba}{get\-Table\-Name} (const Q\-String \&data\-Set\-Name)
\begin{DoxyCompactList}\small\item\em Remove unalowed chars and suffixe \-\_\-tbl to name to give a table name. \end{DoxyCompactList}\end{DoxyCompactItemize}


\subsection{Detailed Description}
Create/manage data sets. 

Definition at line 47 of file mdt\-Data\-Table\-Manager.\-h.



\subsection{Constructor \& Destructor Documentation}
\hypertarget{classmdt_data_table_manager_ae63e559f597ae48a36e149afde3a8396}{\index{mdt\-Data\-Table\-Manager@{mdt\-Data\-Table\-Manager}!mdt\-Data\-Table\-Manager@{mdt\-Data\-Table\-Manager}}
\index{mdt\-Data\-Table\-Manager@{mdt\-Data\-Table\-Manager}!mdtDataTableManager@{mdt\-Data\-Table\-Manager}}
\subsubsection[{mdt\-Data\-Table\-Manager}]{\setlength{\rightskip}{0pt plus 5cm}mdt\-Data\-Table\-Manager\-::mdt\-Data\-Table\-Manager (
\begin{DoxyParamCaption}
\item[{{\bf Q\-Object} $\ast$}]{parent = {\ttfamily 0}, }
\item[{Q\-Sql\-Database}]{db = {\ttfamily QSqlDatabase()}}
\end{DoxyParamCaption}
)}}\label{classmdt_data_table_manager_ae63e559f597ae48a36e149afde3a8396}


Definition at line 40 of file mdt\-Data\-Table\-Manager.\-cpp.



References M\-D\-T\-\_\-\-N\-A\-T\-I\-V\-E\-\_\-\-E\-O\-L, set\-Csv\-Format(), and mdt\-Sql\-Database\-Manager\-::set\-Database().

\hypertarget{classmdt_data_table_manager_a3a1c225b1aeedad8fc89b126147971ca}{\index{mdt\-Data\-Table\-Manager@{mdt\-Data\-Table\-Manager}!$\sim$mdt\-Data\-Table\-Manager@{$\sim$mdt\-Data\-Table\-Manager}}
\index{$\sim$mdt\-Data\-Table\-Manager@{$\sim$mdt\-Data\-Table\-Manager}!mdtDataTableManager@{mdt\-Data\-Table\-Manager}}
\subsubsection[{$\sim$mdt\-Data\-Table\-Manager}]{\setlength{\rightskip}{0pt plus 5cm}mdt\-Data\-Table\-Manager\-::$\sim$mdt\-Data\-Table\-Manager (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
)}}\label{classmdt_data_table_manager_a3a1c225b1aeedad8fc89b126147971ca}


Note\-: this will delete internal model. Be avare when referencing pointer returned by model(). 



Definition at line 50 of file mdt\-Data\-Table\-Manager.\-cpp.



\subsection{Member Function Documentation}
\hypertarget{classmdt_data_table_manager_a2b38e6a8157183fcbce0770d12e9aa9d}{\index{mdt\-Data\-Table\-Manager@{mdt\-Data\-Table\-Manager}!add\-Field\-Mapping@{add\-Field\-Mapping}}
\index{add\-Field\-Mapping@{add\-Field\-Mapping}!mdtDataTableManager@{mdt\-Data\-Table\-Manager}}
\subsubsection[{add\-Field\-Mapping}]{\setlength{\rightskip}{0pt plus 5cm}void mdt\-Data\-Table\-Manager\-::add\-Field\-Mapping (
\begin{DoxyParamCaption}
\item[{const Q\-String \&}]{csv\-Header\-Item, }
\item[{const Q\-String \&}]{field\-Name, }
\item[{const Q\-String \&}]{display\-Text, }
\item[{Q\-Variant\-::\-Type}]{data\-Type, }
\item[{int}]{csv\-Data\-Item\-Start\-Offset = {\ttfamily -\/1}, }
\item[{int}]{csv\-Data\-Item\-End\-Offset = {\ttfamily -\/1}}
\end{DoxyParamCaption}
)}}\label{classmdt_data_table_manager_a2b38e6a8157183fcbce0770d12e9aa9d}


Add a mapping between C\-S\-V header part (item) and model field. 

Field mapping is used for relationship between C\-S\-V header, model's field name and texts to display in model's header. Internally, \hyperlink{classmdt_field_map}{mdt\-Field\-Map} class is used for this.

During C\-S\-V import, all unspecified maps are automatically created as follow\-:
\begin{DoxyItemize}
\item Data are imported as string (type\-: Q\-Variant\-::\-String)
\item Field name is based on C\-S\-V header item, but unalowed chars are replaced by '\-\_\-'
\item Display text is the C\-S\-V header item.
\item One field is created in model for one C\-S\-V header item (column).
\end{DoxyItemize}

If some of this default behaviour is not what is needed for some fields, it's possible to add a mapping with this method befor calling \hyperlink{classmdt_data_table_manager_a668cc3d94e6aa5dab406a0fd319351af}{import\-From\-Csv\-File()}.

It's also possible to split a C\-S\-V header item to many model fields. To do this, add several mapping with same csv\-Header\-Item, but using each time another field\-Name. To know wich part of a C\-S\-V data item must be stored in witch field, csv\-Data\-Item\-Start\-Offset and csv\-Data\-Item\-End\-Offset must be specified.


\begin{DoxyParams}{Parameters}
{\em csv\-Header\-Item} & C\-S\-V heaer part (column). \\
\hline
{\em field\-Name} & Model's field name to create. \\
\hline
{\em display\-Text} & Text to display in model's header. \\
\hline
{\em data\-Type} & Data will be converted to this data type during import. \\
\hline
{\em csv\-Data\-Item\-Start\-Offset} & If $>$= 0, only data starting at this offset will be imported from C\-S\-V data item into model's field. \\
\hline
{\em csv\-Data\-Item\-End\-Offset} & If $>$= 0, only data until this offset will be imported from C\-S\-V data item into model's field. \\
\hline
\end{DoxyParams}
\begin{DoxySeeAlso}{See Also}
\hyperlink{classmdt_field_map}{mdt\-Field\-Map} 

\hyperlink{classmdt_field_map_item}{mdt\-Field\-Map\-Item} 
\end{DoxySeeAlso}


Definition at line 530 of file mdt\-Data\-Table\-Manager.\-cpp.



References mdt\-Field\-Map\-::add\-Item(), mdt\-Error\-::commit(), mdt\-Error\-::\-Error, M\-D\-T\-\_\-\-E\-R\-R\-O\-R\-\_\-\-S\-E\-T\-\_\-\-S\-R\-C, mdt\-Field\-Map\-Item\-::set\-Data\-Type(), mdt\-Field\-Map\-Item\-::set\-Destination\-Field\-Display\-Text(), mdt\-Field\-Map\-Item\-::set\-Destination\-Field\-Name(), mdt\-Error\-::set\-Error(), mdt\-Field\-Map\-Item\-::set\-Source\-Field\-Data\-End\-Offset(), mdt\-Field\-Map\-Item\-::set\-Source\-Field\-Data\-Start\-Offset(), and mdt\-Field\-Map\-Item\-::set\-Source\-Field\-Name().

\hypertarget{classmdt_data_table_manager_a10c9f9d57d6c35fa5721906c79376ec4}{\index{mdt\-Data\-Table\-Manager@{mdt\-Data\-Table\-Manager}!clear\-Field\-Map@{clear\-Field\-Map}}
\index{clear\-Field\-Map@{clear\-Field\-Map}!mdtDataTableManager@{mdt\-Data\-Table\-Manager}}
\subsubsection[{clear\-Field\-Map}]{\setlength{\rightskip}{0pt plus 5cm}void mdt\-Data\-Table\-Manager\-::clear\-Field\-Map (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
)}}\label{classmdt_data_table_manager_a10c9f9d57d6c35fa5721906c79376ec4}


Clear fields mapping. 

\begin{DoxySeeAlso}{See Also}
\hyperlink{classmdt_data_table_manager_a2b38e6a8157183fcbce0770d12e9aa9d}{add\-Field\-Mapping()} 
\end{DoxySeeAlso}


Definition at line 550 of file mdt\-Data\-Table\-Manager.\-cpp.



References mdt\-Field\-Map\-::clear().



Referenced by mdt\-Tt\-Database\-Schema\-::import\-Database().

\hypertarget{classmdt_data_table_manager_a368e82d3128e0c5098e09a9555bd65aa}{\index{mdt\-Data\-Table\-Manager@{mdt\-Data\-Table\-Manager}!close@{close}}
\index{close@{close}!mdtDataTableManager@{mdt\-Data\-Table\-Manager}}
\subsubsection[{close}]{\setlength{\rightskip}{0pt plus 5cm}void mdt\-Data\-Table\-Manager\-::close (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
)}}\label{classmdt_data_table_manager_a368e82d3128e0c5098e09a9555bd65aa}


Close. 

Will close database. 

Definition at line 59 of file mdt\-Data\-Table\-Manager.\-cpp.



References mdt\-Sql\-Database\-Manager\-::database().



Referenced by copy\-Table(), and import\-From\-Csv\-File().

\hypertarget{classmdt_data_table_manager_a5c8aaf4f42a50bd0c216ef29adc9d79f}{\index{mdt\-Data\-Table\-Manager@{mdt\-Data\-Table\-Manager}!copy\-Table@{copy\-Table}}
\index{copy\-Table@{copy\-Table}!mdtDataTableManager@{mdt\-Data\-Table\-Manager}}
\subsubsection[{copy\-Table}]{\setlength{\rightskip}{0pt plus 5cm}bool mdt\-Data\-Table\-Manager\-::copy\-Table (
\begin{DoxyParamCaption}
\item[{const Q\-String \&}]{source\-Table\-Name, }
\item[{const Q\-String \&}]{destination\-Table\-Name, }
\item[{{\bf mdt\-Sql\-Database\-Manager\-::create\-Mode\-\_\-t}}]{mode, }
\item[{Q\-Sql\-Database}]{source\-Database = {\ttfamily QSqlDatabase()}, }
\item[{Q\-Sql\-Database}]{destination\-Database = {\ttfamily QSqlDatabase()}}
\end{DoxyParamCaption}
)}}\label{classmdt_data_table_manager_a5c8aaf4f42a50bd0c216ef29adc9d79f}


Copy a source table to a destination table. 


\begin{DoxyParams}{Parameters}
{\em source\-Table\-Name} & Name of the source table . \\
\hline
{\em destination\-Table\-Name} & Name of the destination table . \\
\hline
{\em mode} & Behaviour to adopt if destination table allready exists . \\
\hline
{\em source\-Database} & Instance of source database . \\
\hline
{\em destination\-Database} & Instance of destination database . \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
True on success, false if a error occured . Use \hyperlink{classmdt_data_table_manager_aaeff001bf9a44f890078f5c6f434ec05}{last\-Error()} to know what gone wrong in second case . 
\end{DoxyReturn}


Definition at line 373 of file mdt\-Data\-Table\-Manager.\-cpp.



References mdt\-Sql\-Schema\-Table\-::add\-Field(), mdt\-Field\-Map\-::add\-Item(), close(), mdt\-Error\-::commit(), mdt\-Sql\-Database\-Manager\-::create\-Table(), mdt\-Field\-Map\-::destination\-Data\-Row(), mdt\-Error\-::\-Error, mdt\-Field\-Map\-::items\-At\-Source\-Field\-Name(), mdt\-Sql\-Database\-Manager\-::last\-Error(), mdt\-Field\-Map\-::mapped\-Destination\-Fields(), mdt\-Field\-Map\-::mapped\-Source\-Fields(), M\-D\-T\-\_\-\-E\-R\-R\-O\-R\-\_\-\-S\-E\-T\-\_\-\-S\-R\-C, mdt\-Sql\-Database\-Manager\-::set\-Database(), mdt\-Field\-Map\-Item\-::set\-Destination\-Field(), mdt\-Field\-Map\-Item\-::set\-Destination\-Field\-Index(), mdt\-Error\-::set\-Error(), mdt\-Field\-Map\-Item\-::set\-Source\-Field(), mdt\-Field\-Map\-Item\-::set\-Source\-Field\-Index(), mdt\-Field\-Map\-::set\-Source\-Fields(), mdt\-Field\-Map\-Field\-::set\-Sql\-Field(), mdt\-Error\-::set\-System\-Error(), mdt\-Sql\-Schema\-Table\-::set\-Table\-Name(), mdt\-Error\-::text(), and mdt\-Error\-::update\-Text().



Referenced by mdt\-Tt\-Database\-Schema\-::import\-Database().

\hypertarget{classmdt_data_table_manager_ae813c6c4323a1949d489a24c07e914fa}{\index{mdt\-Data\-Table\-Manager@{mdt\-Data\-Table\-Manager}!create\-Data\-Set@{create\-Data\-Set}}
\index{create\-Data\-Set@{create\-Data\-Set}!mdtDataTableManager@{mdt\-Data\-Table\-Manager}}
\subsubsection[{create\-Data\-Set}]{\setlength{\rightskip}{0pt plus 5cm}bool mdt\-Data\-Table\-Manager\-::create\-Data\-Set (
\begin{DoxyParamCaption}
\item[{const Q\-Dir \&}]{dir, }
\item[{const Q\-String \&}]{name, }
\item[{{\bf mdt\-Sql\-Schema\-Table} \&}]{table, }
\item[{{\bf mdt\-Sql\-Database\-Manager\-::create\-Mode\-\_\-t}}]{mode}
\end{DoxyParamCaption}
)}}\label{classmdt_data_table_manager_ae813c6c4323a1949d489a24c07e914fa}


Create database and table. 

Internally, Sqlite is used to store data.

Note\-: this will delete internal model and create a new one. Be avare when referencing pointer returned by model().


\begin{DoxyParams}{Parameters}
{\em dir} & Path or Q\-Dir object to directory in witch to store data. \\
\hline
{\em table} & Schema of the table to create . \\
\hline
{\em name} & Name of the database, connection name (see Q\-Sql\-Database) and file. \\
\hline
{\em mode} & Behaviour to adopt during database/file creation. \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
True on success. 
\end{DoxyReturn}


Definition at line 125 of file mdt\-Data\-Table\-Manager.\-cpp.



References mdt\-Sql\-Database\-Manager\-::create\-Database\-Sqlite(), mdt\-Sql\-Database\-Manager\-::create\-Table(), get\-Table\-Name(), mdt\-Sql\-Database\-Manager\-::last\-Error(), and mdt\-Sql\-Schema\-Table\-::set\-Table\-Name().



Referenced by import\-From\-Csv\-File().

\hypertarget{classmdt_data_table_manager_a9026c9d3d102246af243b68c815fba04}{\index{mdt\-Data\-Table\-Manager@{mdt\-Data\-Table\-Manager}!database@{database}}
\index{database@{database}!mdtDataTableManager@{mdt\-Data\-Table\-Manager}}
\subsubsection[{database}]{\setlength{\rightskip}{0pt plus 5cm}Q\-Sql\-Database mdt\-Data\-Table\-Manager\-::database (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
) const}}\label{classmdt_data_table_manager_a9026c9d3d102246af243b68c815fba04}


Get internal database instance. 



Definition at line 155 of file mdt\-Data\-Table\-Manager.\-cpp.



References mdt\-Sql\-Database\-Manager\-::database().

\hypertarget{classmdt_data_table_manager_a0edc657a7dbcfcf251e6ce27560d40e5}{\index{mdt\-Data\-Table\-Manager@{mdt\-Data\-Table\-Manager}!database\-Header@{database\-Header}}
\index{database\-Header@{database\-Header}!mdtDataTableManager@{mdt\-Data\-Table\-Manager}}
\subsubsection[{database\-Header}]{\setlength{\rightskip}{0pt plus 5cm}const Q\-String\-List mdt\-Data\-Table\-Manager\-::database\-Header (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
) const}}\label{classmdt_data_table_manager_a0edc657a7dbcfcf251e6ce27560d40e5}


Get database header. 



Definition at line 560 of file mdt\-Data\-Table\-Manager.\-cpp.

\hypertarget{classmdt_data_table_manager_a8fa0924a76e8f3fec9617f690cc4e148}{\index{mdt\-Data\-Table\-Manager@{mdt\-Data\-Table\-Manager}!data\-Set\-Directory@{data\-Set\-Directory}}
\index{data\-Set\-Directory@{data\-Set\-Directory}!mdtDataTableManager@{mdt\-Data\-Table\-Manager}}
\subsubsection[{data\-Set\-Directory}]{\setlength{\rightskip}{0pt plus 5cm}Q\-Dir mdt\-Data\-Table\-Manager\-::data\-Set\-Directory (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
) const}}\label{classmdt_data_table_manager_a8fa0924a76e8f3fec9617f690cc4e148}


Set dataset directory. 

\begin{DoxyRefDesc}{Todo}
\item[\hyperlink{todo__todo000002}{Todo}]Not used yet. \end{DoxyRefDesc}


Definition at line 78 of file mdt\-Data\-Table\-Manager.\-cpp.

\hypertarget{classmdt_data_table_manager_affcbb25ab7308527885c4f3f703e7440}{\index{mdt\-Data\-Table\-Manager@{mdt\-Data\-Table\-Manager}!data\-Set\-Table\-Name@{data\-Set\-Table\-Name}}
\index{data\-Set\-Table\-Name@{data\-Set\-Table\-Name}!mdtDataTableManager@{mdt\-Data\-Table\-Manager}}
\subsubsection[{data\-Set\-Table\-Name}]{\setlength{\rightskip}{0pt plus 5cm}const Q\-String mdt\-Data\-Table\-Manager\-::data\-Set\-Table\-Name (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
) const}}\label{classmdt_data_table_manager_affcbb25ab7308527885c4f3f703e7440}


Get dataset table name. 



Definition at line 83 of file mdt\-Data\-Table\-Manager.\-cpp.

\hypertarget{classmdt_data_table_manager_ac8884e4e2d58c6f7e3db180aca5a2772}{\index{mdt\-Data\-Table\-Manager@{mdt\-Data\-Table\-Manager}!display\-Texts\-By\-Field\-Names@{display\-Texts\-By\-Field\-Names}}
\index{display\-Texts\-By\-Field\-Names@{display\-Texts\-By\-Field\-Names}!mdtDataTableManager@{mdt\-Data\-Table\-Manager}}
\subsubsection[{display\-Texts\-By\-Field\-Names}]{\setlength{\rightskip}{0pt plus 5cm}Q\-Hash$<$ Q\-String, Q\-String $>$ mdt\-Data\-Table\-Manager\-::display\-Texts\-By\-Field\-Names (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
) const}}\label{classmdt_data_table_manager_ac8884e4e2d58c6f7e3db180aca5a2772}


Get display texts referenced by field names. 

\begin{DoxyReturn}{Returns}
Q\-Hash with field\-Name as key and display\-Text as value. 
\end{DoxyReturn}


Definition at line 579 of file mdt\-Data\-Table\-Manager.\-cpp.



References mdt\-Field\-Map\-::display\-Texts\-By\-Field\-Names().

\hypertarget{classmdt_data_table_manager_a139611cc21836438053226b1d7576201}{\index{mdt\-Data\-Table\-Manager@{mdt\-Data\-Table\-Manager}!enable\-Progress\-Dialog@{enable\-Progress\-Dialog}}
\index{enable\-Progress\-Dialog@{enable\-Progress\-Dialog}!mdtDataTableManager@{mdt\-Data\-Table\-Manager}}
\subsubsection[{enable\-Progress\-Dialog}]{\setlength{\rightskip}{0pt plus 5cm}void mdt\-Data\-Table\-Manager\-::enable\-Progress\-Dialog (
\begin{DoxyParamCaption}
\item[{bool}]{enable}
\end{DoxyParamCaption}
)}}\label{classmdt_data_table_manager_a139611cc21836438053226b1d7576201}


Enable/disable progress dialog. 

If progress dialog is enabled, some methods will show her progress in a dialog. 

Definition at line 160 of file mdt\-Data\-Table\-Manager.\-cpp.

\hypertarget{classmdt_data_table_manager_abe733f071ca77579522823598e79dd9a}{\index{mdt\-Data\-Table\-Manager@{mdt\-Data\-Table\-Manager}!export\-To\-Csv\-File@{export\-To\-Csv\-File}}
\index{export\-To\-Csv\-File@{export\-To\-Csv\-File}!mdtDataTableManager@{mdt\-Data\-Table\-Manager}}
\subsubsection[{export\-To\-Csv\-File}]{\setlength{\rightskip}{0pt plus 5cm}bool mdt\-Data\-Table\-Manager\-::export\-To\-Csv\-File (
\begin{DoxyParamCaption}
\item[{const Q\-String \&}]{file\-Path, }
\item[{{\bf mdt\-Sql\-Database\-Manager\-::create\-Mode\-\_\-t}}]{mode}
\end{DoxyParamCaption}
)}}\label{classmdt_data_table_manager_abe733f071ca77579522823598e79dd9a}


Export data to a C\-S\-V file. 


\begin{DoxyParams}{Parameters}
{\em file\-Path} & Path to C\-S\-V file \\
\hline
{\em mode} & Behaviour to adopt if C\-S\-V file allready exists. \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
True on successfull export.
\end{DoxyReturn}
\begin{DoxyRefDesc}{Todo}
\item[\hyperlink{todo__todo000003}{Todo}]Add\-: separator, data protection, escape char, E\-O\-L 

Implement ... \end{DoxyRefDesc}


Definition at line 184 of file mdt\-Data\-Table\-Manager.\-cpp.

\hypertarget{classmdt_data_table_manager_aba53817fb6bd1df5850f53424708ffba}{\index{mdt\-Data\-Table\-Manager@{mdt\-Data\-Table\-Manager}!get\-Table\-Name@{get\-Table\-Name}}
\index{get\-Table\-Name@{get\-Table\-Name}!mdtDataTableManager@{mdt\-Data\-Table\-Manager}}
\subsubsection[{get\-Table\-Name}]{\setlength{\rightskip}{0pt plus 5cm}Q\-String mdt\-Data\-Table\-Manager\-::get\-Table\-Name (
\begin{DoxyParamCaption}
\item[{const Q\-String \&}]{data\-Set\-Name}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [static]}}}\label{classmdt_data_table_manager_aba53817fb6bd1df5850f53424708ffba}


Remove unalowed chars and suffixe \-\_\-tbl to name to give a table name. 



Definition at line 88 of file mdt\-Data\-Table\-Manager.\-cpp.



Referenced by create\-Data\-Set().

\hypertarget{classmdt_data_table_manager_a668cc3d94e6aa5dab406a0fd319351af}{\index{mdt\-Data\-Table\-Manager@{mdt\-Data\-Table\-Manager}!import\-From\-Csv\-File@{import\-From\-Csv\-File}}
\index{import\-From\-Csv\-File@{import\-From\-Csv\-File}!mdtDataTableManager@{mdt\-Data\-Table\-Manager}}
\subsubsection[{import\-From\-Csv\-File}]{\setlength{\rightskip}{0pt plus 5cm}bool mdt\-Data\-Table\-Manager\-::import\-From\-Csv\-File (
\begin{DoxyParamCaption}
\item[{const Q\-String \&}]{csv\-File\-Path, }
\item[{{\bf mdt\-Sql\-Database\-Manager\-::create\-Mode\-\_\-t}}]{mode, }
\item[{const Q\-String \&}]{dir = {\ttfamily QString()}, }
\item[{const Q\-String\-List \&}]{pk\-Fields = {\ttfamily QStringList()}}
\end{DoxyParamCaption}
)}}\label{classmdt_data_table_manager_a668cc3d94e6aa5dab406a0fd319351af}


Import a C\-S\-V file. 

Note\-: this will delete internal model and create a new one. Be avare when referencing pointer returned by model().


\begin{DoxyParams}{Parameters}
{\em csv\-File\-Path} & Path to the C\-S\-V file. \\
\hline
{\em mode} & Behaviour to adopt when data table allready exists. \\
\hline
{\em dir} & Destination of the database file. If not defined, csv\-File\-Path's directory is used. \\
\hline
{\em pk\-Fields} & List of fields to considere as part of primary key. If list is empty, one named id\-\_\-\-P\-K will be created. \\
\hline
\end{DoxyParams}
\begin{DoxyPrecond}{Precondition}
All given C\-S\-V header items to use as part of primary key must exit in C\-S\-V file (See pk\-Fields argument). 
\end{DoxyPrecond}


Definition at line 189 of file mdt\-Data\-Table\-Manager.\-cpp.



References mdt\-Sql\-Schema\-Table\-::add\-Field(), mdt\-Field\-Map\-::add\-Item(), mdt\-Csv\-File\-::close(), close(), mdt\-Error\-::commit(), create\-Data\-Set(), mdt\-Field\-Map\-::destination\-Data\-Row(), mdt\-Field\-Map\-::destination\-Header(), mdt\-Error\-::\-Error, mdt\-Sql\-Schema\-Table\-::field\-Count(), mdt\-Field\-Map\-Field\-::get\-Field\-Name(), mdt\-Csv\-File\-::has\-More\-Lines(), mdt\-Field\-Map\-::items\-At\-Source\-Field\-Name(), mdt\-Field\-Map\-::mapped\-Destination\-Fields(), M\-D\-T\-\_\-\-E\-R\-R\-O\-R\-\_\-\-S\-E\-T\-\_\-\-S\-R\-C, mdt\-Csv\-File\-::read\-Header(), mdt\-Csv\-File\-::read\-Line(), mdt\-Field\-Map\-Item\-::set\-Data\-Type(), mdt\-Field\-Map\-Item\-::set\-Destination\-Field\-Display\-Text(), mdt\-Field\-Map\-Item\-::set\-Destination\-Field\-Index(), mdt\-Field\-Map\-Item\-::set\-Destination\-Field\-Name(), mdt\-Error\-::set\-Error(), mdt\-Field\-Map\-Item\-::set\-Source\-Field\-Index(), mdt\-Field\-Map\-Item\-::set\-Source\-Field\-Name(), and mdt\-Error\-::\-Warning.

\hypertarget{classmdt_data_table_manager_aaeff001bf9a44f890078f5c6f434ec05}{\index{mdt\-Data\-Table\-Manager@{mdt\-Data\-Table\-Manager}!last\-Error@{last\-Error}}
\index{last\-Error@{last\-Error}!mdtDataTableManager@{mdt\-Data\-Table\-Manager}}
\subsubsection[{last\-Error}]{\setlength{\rightskip}{0pt plus 5cm}{\bf mdt\-Error} mdt\-Data\-Table\-Manager\-::last\-Error (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
) const}}\label{classmdt_data_table_manager_aaeff001bf9a44f890078f5c6f434ec05}


Get last error. 



Definition at line 54 of file mdt\-Data\-Table\-Manager.\-cpp.



Referenced by mdt\-Tt\-Database\-Schema\-::import\-Database().

\hypertarget{classmdt_data_table_manager_af14013b42dc0f84d37d4d1483f18d8c4}{\index{mdt\-Data\-Table\-Manager@{mdt\-Data\-Table\-Manager}!set\-Csv\-Format@{set\-Csv\-Format}}
\index{set\-Csv\-Format@{set\-Csv\-Format}!mdtDataTableManager@{mdt\-Data\-Table\-Manager}}
\subsubsection[{set\-Csv\-Format}]{\setlength{\rightskip}{0pt plus 5cm}void mdt\-Data\-Table\-Manager\-::set\-Csv\-Format (
\begin{DoxyParamCaption}
\item[{const Q\-String \&}]{separator, }
\item[{const Q\-String \&}]{data\-Protection, }
\item[{const Q\-String \&}]{comment, }
\item[{const Q\-Char \&}]{escape\-Char, }
\item[{Q\-Byte\-Array}]{eol = {\ttfamily {\bf M\-D\-T\-\_\-\-N\-A\-T\-I\-V\-E\-\_\-\-E\-O\-L}}, }
\item[{const Q\-Byte\-Array \&}]{encoding = {\ttfamily \char`\"{}UTF-\/8\char`\"{}}}
\end{DoxyParamCaption}
)}}\label{classmdt_data_table_manager_af14013b42dc0f84d37d4d1483f18d8c4}


Set C\-S\-V import/export format. 


\begin{DoxyParams}{Parameters}
{\em separator} & Separator to use (typical\-: ; ) \\
\hline
{\em data\-Protection} & Data protection (typical\-: " ) \\
\hline
{\em comment} & Comment (typical\-: \# ) \\
\hline
{\em escape\-Char} & Escape char (typical\-: \textbackslash{} ). Note\-: has only effect to escape data\-Protection. \\
\hline
{\em eol} & End of line sequence. Usefull if given file was not written from running platform. \\
\hline
{\em encoding} & Name of the encoding format, for example, U\-T\-F-\/8 If given encoding is not available, U\-T\-F-\/8 is choosen. \\
\hline
\end{DoxyParams}


Definition at line 165 of file mdt\-Data\-Table\-Manager.\-cpp.



References mdt\-Error\-::commit(), M\-D\-T\-\_\-\-E\-R\-R\-O\-R\-\_\-\-S\-E\-T\-\_\-\-S\-R\-C, mdt\-Error\-::set\-Error(), and mdt\-Error\-::\-Warning.



Referenced by mdt\-Data\-Table\-Manager().

\hypertarget{classmdt_data_table_manager_aba44e2b905b6fc959306ca9b5a786d84}{\index{mdt\-Data\-Table\-Manager@{mdt\-Data\-Table\-Manager}!set\-Database\-Header\-To\-Model@{set\-Database\-Header\-To\-Model}}
\index{set\-Database\-Header\-To\-Model@{set\-Database\-Header\-To\-Model}!mdtDataTableManager@{mdt\-Data\-Table\-Manager}}
\subsubsection[{set\-Database\-Header\-To\-Model}]{\setlength{\rightskip}{0pt plus 5cm}void mdt\-Data\-Table\-Manager\-::set\-Database\-Header\-To\-Model (
\begin{DoxyParamCaption}
\item[{Q\-Abstract\-Table\-Model $\ast$}]{model}
\end{DoxyParamCaption}
)}}\label{classmdt_data_table_manager_aba44e2b905b6fc959306ca9b5a786d84}


Set database header to model. 



Definition at line 565 of file mdt\-Data\-Table\-Manager.\-cpp.

\hypertarget{classmdt_data_table_manager_a1e19b3f34c1b0a91bcae4396731efc57}{\index{mdt\-Data\-Table\-Manager@{mdt\-Data\-Table\-Manager}!set\-Data\-Set\-Directory@{set\-Data\-Set\-Directory}}
\index{set\-Data\-Set\-Directory@{set\-Data\-Set\-Directory}!mdtDataTableManager@{mdt\-Data\-Table\-Manager}}
\subsubsection[{set\-Data\-Set\-Directory}]{\setlength{\rightskip}{0pt plus 5cm}bool mdt\-Data\-Table\-Manager\-::set\-Data\-Set\-Directory (
\begin{DoxyParamCaption}
\item[{const Q\-Dir \&}]{dir}
\end{DoxyParamCaption}
)}}\label{classmdt_data_table_manager_a1e19b3f34c1b0a91bcae4396731efc57}


Set dataset directory. 


\begin{DoxyParams}{Parameters}
{\em dir} & Path or Q\-Dir object to directory. \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
True if directory exists. 
\end{DoxyReturn}
\begin{DoxyRefDesc}{Todo}
\item[\hyperlink{todo__todo000001}{Todo}]Not used yet. \end{DoxyRefDesc}


Definition at line 65 of file mdt\-Data\-Table\-Manager.\-cpp.



References mdt\-Error\-::commit(), mdt\-Error\-::\-Error, M\-D\-T\-\_\-\-E\-R\-R\-O\-R\-\_\-\-S\-E\-T\-\_\-\-S\-R\-C, and mdt\-Error\-::set\-Error().

\hypertarget{classmdt_data_table_manager_a5cafc38a5570c51757dbac7e8c2fd978}{\index{mdt\-Data\-Table\-Manager@{mdt\-Data\-Table\-Manager}!source\-Header@{source\-Header}}
\index{source\-Header@{source\-Header}!mdtDataTableManager@{mdt\-Data\-Table\-Manager}}
\subsubsection[{source\-Header}]{\setlength{\rightskip}{0pt plus 5cm}Q\-String\-List mdt\-Data\-Table\-Manager\-::source\-Header (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
) const}}\label{classmdt_data_table_manager_a5cafc38a5570c51757dbac7e8c2fd978}


Get the source header. 



Definition at line 555 of file mdt\-Data\-Table\-Manager.\-cpp.



References mdt\-Field\-Map\-::source\-Header().



The documentation for this class was generated from the following files\-:\begin{DoxyCompactItemize}
\item 
src/mdtdatabase/\hyperlink{mdt_data_table_manager_8h}{mdt\-Data\-Table\-Manager.\-h}\item 
src/mdtdatabase/\hyperlink{mdt_data_table_manager_8cpp}{mdt\-Data\-Table\-Manager.\-cpp}\end{DoxyCompactItemize}
