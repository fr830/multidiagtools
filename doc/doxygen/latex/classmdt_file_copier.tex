\hypertarget{classmdt_file_copier}{
\section{mdtFileCopier Class Reference}
\label{classmdt_file_copier}\index{mdtFileCopier@{mdtFileCopier}}
}


Helper class for file copy.  




{\ttfamily \#include $<$mdtFileCopier.h$>$}

\subsection*{Public Slots}
\begin{DoxyCompactItemize}
\item 
\hypertarget{classmdt_file_copier_ab9a0a4121a3fa0c70652413ad7917714}{
void \hyperlink{classmdt_file_copier_ab9a0a4121a3fa0c70652413ad7917714}{cancelCopy} ()}
\label{classmdt_file_copier_ab9a0a4121a3fa0c70652413ad7917714}

\begin{DoxyCompactList}\small\item\em Cancel running copy (used internally for progress dialog) \end{DoxyCompactList}\end{DoxyCompactItemize}
\subsection*{Signals}
\begin{DoxyCompactItemize}
\item 
void \hyperlink{classmdt_file_copier_a808f01eb2a319e82a9fec5bb978ccb85}{finished} (bool success)
\begin{DoxyCompactList}\small\item\em Emitted when copy process is done. \end{DoxyCompactList}\item 
\hypertarget{classmdt_file_copier_a4c6c815614ab929ebe36f62f09296f25}{
void \hyperlink{classmdt_file_copier_a4c6c815614ab929ebe36f62f09296f25}{newProgressRange} (int min, int max)}
\label{classmdt_file_copier_a4c6c815614ab929ebe36f62f09296f25}

\begin{DoxyCompactList}\small\item\em Emitted when new progress range is set (used internally for proegress dialog) \end{DoxyCompactList}\item 
\hypertarget{classmdt_file_copier_a48c337249ec54bd9f672b079fca3116f}{
void \hyperlink{classmdt_file_copier_a48c337249ec54bd9f672b079fca3116f}{newProgressValue} (int value)}
\label{classmdt_file_copier_a48c337249ec54bd9f672b079fca3116f}

\begin{DoxyCompactList}\small\item\em Emitted when new progress value is set (used internally for proegress dialog) \end{DoxyCompactList}\item 
\hypertarget{classmdt_file_copier_a70626ba282633b15d2bdb398081c71be}{
void \hyperlink{classmdt_file_copier_a70626ba282633b15d2bdb398081c71be}{newProgressLabelText} (const QString \&text)}
\label{classmdt_file_copier_a70626ba282633b15d2bdb398081c71be}

\begin{DoxyCompactList}\small\item\em Emitted when new progress label text is set (used internally for proegress dialog) \end{DoxyCompactList}\item 
\hypertarget{classmdt_file_copier_aad51a259e0e55a67698d599e43dc1264}{
void \hyperlink{classmdt_file_copier_aad51a259e0e55a67698d599e43dc1264}{copyEnded} (const QString \&failedCopies, const QString \&informativeText=QString())}
\label{classmdt_file_copier_aad51a259e0e55a67698d599e43dc1264}

\begin{DoxyCompactList}\small\item\em Emitted when copy is ended or aborted (used internally to display copy result) \end{DoxyCompactList}\end{DoxyCompactItemize}
\subsection*{Public Member Functions}
\begin{DoxyCompactItemize}
\item 
\hypertarget{classmdt_file_copier_a32fc7a1c4d796ce0f3781c24257a0a02}{
{\bfseries mdtFileCopier} (QObject $\ast$parent=0)}
\label{classmdt_file_copier_a32fc7a1c4d796ce0f3781c24257a0a02}

\item 
void \hyperlink{classmdt_file_copier_ad045db0c7b84a7c9505d7ac1704f7413}{setDirectDestOverwrite} (bool directOverwrite)
\begin{DoxyCompactList}\small\item\em Permit direct destination overwrite. \end{DoxyCompactList}\item 
void \hyperlink{classmdt_file_copier_a868ce61ec7d8f590002dd350276413a4}{setDefaultSetup} ()
\begin{DoxyCompactList}\small\item\em Set the default setup. \end{DoxyCompactList}\item 
void \hyperlink{classmdt_file_copier_ad0730aae81b3ba64eec4563390b852a3}{addCopy} (const QString \&srcFilePath, const QString \&destFilePath, bool syncAfterCopy=false, bool checkAfterCopy=false)
\begin{DoxyCompactList}\small\item\em Add a source and destination file path to copy. \end{DoxyCompactList}\item 
bool \hyperlink{classmdt_file_copier_acd5397fbea57f8169a5dddd2809d26cb}{startCopy} ()
\begin{DoxyCompactList}\small\item\em Start the copy. \end{DoxyCompactList}\item 
bool \hyperlink{classmdt_file_copier_adcfa582fe6e1e3420c8285c2301323f6}{waitFinished} ()
\begin{DoxyCompactList}\small\item\em Wait until copies are done. \end{DoxyCompactList}\item 
void \hyperlink{classmdt_file_copier_ad971d6b727c4ceaa1a39bf356d694654}{setTestMode} (bool enable)
\begin{DoxyCompactList}\small\item\em If set true, message boxes will not be displayed, and some default decisions will be taken. \end{DoxyCompactList}\end{DoxyCompactItemize}


\subsection{Detailed Description}
Helper class for file copy. 

When files must be copied in a GUI application, some common situation must be handled:
\begin{DoxyItemize}
\item Display a message box when source file not exists, or cannot be read
\item Ask the user if allready existing destination file must be overwritten
\item Display a progress bar during a long copy
\item ...\par
 This class was made to simplify this process.\par
 The copy is done in a separated thread. Notes:
\item For a simple and efficient copy, it's better to use system provided functions, QFile or others.
\item If a file exists at destination, user will be asked about what to do. But, the ask operation, and the effective copy are not a atomic operation. So it can happen that another process creates the destination, and that file is then overwritten during copy ! 
\end{DoxyItemize}

Definition at line 53 of file mdtFileCopier.h.



\subsection{Member Function Documentation}
\hypertarget{classmdt_file_copier_ad0730aae81b3ba64eec4563390b852a3}{
\index{mdtFileCopier@{mdtFileCopier}!addCopy@{addCopy}}
\index{addCopy@{addCopy}!mdtFileCopier@{mdtFileCopier}}
\subsubsection[{addCopy}]{\setlength{\rightskip}{0pt plus 5cm}void mdtFileCopier::addCopy (
\begin{DoxyParamCaption}
\item[{const QString \&}]{srcFilePath, }
\item[{const QString \&}]{destFilePath, }
\item[{bool}]{syncAfterCopy = {\ttfamily false}, }
\item[{bool}]{checkAfterCopy = {\ttfamily false}}
\end{DoxyParamCaption}
)}}
\label{classmdt_file_copier_ad0730aae81b3ba64eec4563390b852a3}


Add a source and destination file path to copy. 

At this point, the copy is enqueued. To process copy, call \hyperlink{classmdt_file_copier_acd5397fbea57f8169a5dddd2809d26cb}{startCopy()}. \begin{DoxySeeAlso}{See also}
\hyperlink{classmdt_file_copier_acd5397fbea57f8169a5dddd2809d26cb}{startCopy()} 
\end{DoxySeeAlso}


Definition at line 88 of file mdtFileCopier.cpp.

\hypertarget{classmdt_file_copier_a808f01eb2a319e82a9fec5bb978ccb85}{
\index{mdtFileCopier@{mdtFileCopier}!finished@{finished}}
\index{finished@{finished}!mdtFileCopier@{mdtFileCopier}}
\subsubsection[{finished}]{\setlength{\rightskip}{0pt plus 5cm}void mdtFileCopier::finished (
\begin{DoxyParamCaption}
\item[{bool}]{success}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily  \mbox{[}signal\mbox{]}}}}
\label{classmdt_file_copier_a808f01eb2a319e82a9fec5bb978ccb85}


Emitted when copy process is done. 


\begin{DoxyParams}{Parameters}
{\em success} & True on success, false on failure (errors are displayed to the user, and logged with \hyperlink{classmdt_error}{mdtError} system) \\
\hline
\end{DoxyParams}


Definition at line 107 of file moc\_\-mdtFileCopier.cxx.

\hypertarget{classmdt_file_copier_a868ce61ec7d8f590002dd350276413a4}{
\index{mdtFileCopier@{mdtFileCopier}!setDefaultSetup@{setDefaultSetup}}
\index{setDefaultSetup@{setDefaultSetup}!mdtFileCopier@{mdtFileCopier}}
\subsubsection[{setDefaultSetup}]{\setlength{\rightskip}{0pt plus 5cm}void mdtFileCopier::setDefaultSetup (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
)}}
\label{classmdt_file_copier_a868ce61ec7d8f590002dd350276413a4}


Set the default setup. 

Default setup is:
\begin{DoxyItemize}
\item Test mode is diseabled
\item Direct overwrite diseabled, user will be asked if destination allready exists This method is called by constructor. \begin{DoxySeeAlso}{See also}
\hyperlink{classmdt_file_copier_ad971d6b727c4ceaa1a39bf356d694654}{setTestMode()} 

\hyperlink{classmdt_file_copier_ad045db0c7b84a7c9505d7ac1704f7413}{setDirectDestOverwrite()} 
\end{DoxySeeAlso}

\end{DoxyItemize}

Definition at line 82 of file mdtFileCopier.cpp.

\hypertarget{classmdt_file_copier_ad045db0c7b84a7c9505d7ac1704f7413}{
\index{mdtFileCopier@{mdtFileCopier}!setDirectDestOverwrite@{setDirectDestOverwrite}}
\index{setDirectDestOverwrite@{setDirectDestOverwrite}!mdtFileCopier@{mdtFileCopier}}
\subsubsection[{setDirectDestOverwrite}]{\setlength{\rightskip}{0pt plus 5cm}void mdtFileCopier::setDirectDestOverwrite (
\begin{DoxyParamCaption}
\item[{bool}]{directOverwrite}
\end{DoxyParamCaption}
)}}
\label{classmdt_file_copier_ad045db0c7b84a7c9505d7ac1704f7413}


Permit direct destination overwrite. 

If set false, the user will be asked about what to do if destination allready exists. 

Definition at line 77 of file mdtFileCopier.cpp.

\hypertarget{classmdt_file_copier_ad971d6b727c4ceaa1a39bf356d694654}{
\index{mdtFileCopier@{mdtFileCopier}!setTestMode@{setTestMode}}
\index{setTestMode@{setTestMode}!mdtFileCopier@{mdtFileCopier}}
\subsubsection[{setTestMode}]{\setlength{\rightskip}{0pt plus 5cm}void mdtFileCopier::setTestMode (
\begin{DoxyParamCaption}
\item[{bool}]{enable}
\end{DoxyParamCaption}
)}}
\label{classmdt_file_copier_ad971d6b727c4ceaa1a39bf356d694654}


If set true, message boxes will not be displayed, and some default decisions will be taken. 

Used by unit tests. Please never use this flag without you know that it can happen ! 

Definition at line 322 of file mdtFileCopier.cpp.

\hypertarget{classmdt_file_copier_acd5397fbea57f8169a5dddd2809d26cb}{
\index{mdtFileCopier@{mdtFileCopier}!startCopy@{startCopy}}
\index{startCopy@{startCopy}!mdtFileCopier@{mdtFileCopier}}
\subsubsection[{startCopy}]{\setlength{\rightskip}{0pt plus 5cm}bool mdtFileCopier::startCopy (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
)}}
\label{classmdt_file_copier_acd5397fbea57f8169a5dddd2809d26cb}


Start the copy. 

For all enqueued copies, some checks will be done, when ok, copies will then processed.\par
 To know when copy is finished, use \hyperlink{classmdt_file_copier_adcfa582fe6e1e3420c8285c2301323f6}{waitFinished()}, or connect to the \hyperlink{classmdt_file_copier_a808f01eb2a319e82a9fec5bb978ccb85}{finished()} signal. \begin{DoxyReturn}{Returns}
true if copy will be processed, or false if no copy can be done, or user cancelled copy because of some problems. 
\end{DoxyReturn}


Definition at line 97 of file mdtFileCopier.cpp.

\hypertarget{classmdt_file_copier_adcfa582fe6e1e3420c8285c2301323f6}{
\index{mdtFileCopier@{mdtFileCopier}!waitFinished@{waitFinished}}
\index{waitFinished@{waitFinished}!mdtFileCopier@{mdtFileCopier}}
\subsubsection[{waitFinished}]{\setlength{\rightskip}{0pt plus 5cm}bool mdtFileCopier::waitFinished (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
)}}
\label{classmdt_file_copier_adcfa582fe6e1e3420c8285c2301323f6}


Wait until copies are done. 

This function will only return when copy process is done. Internally, a couple of msleep()/process event will be called, so Qt's GUI event loop is not broken, and application will not freeze. \begin{DoxyReturn}{Returns}
True on success, false on failure or abort (errors are displayed to the user, and logged with \hyperlink{classmdt_error}{mdtError} system) 
\end{DoxyReturn}


Definition at line 304 of file mdtFileCopier.cpp.



The documentation for this class was generated from the following files:\begin{DoxyCompactItemize}
\item 
src/mdtutils/mdtFileCopier.h\item 
src/mdtutils/mdtFileCopier.cpp\item 
src/mdtutils/moc\_\-mdtFileCopier.cxx\end{DoxyCompactItemize}
