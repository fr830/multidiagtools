\hypertarget{classmdt_sql_relation}{\section{mdt\-Sql\-Relation Class Reference}
\label{classmdt_sql_relation}\index{mdt\-Sql\-Relation@{mdt\-Sql\-Relation}}
}


Handle parent/child relations between 2 Q\-Sql\-Table\-Models.  




{\ttfamily \#include $<$mdt\-Sql\-Relation.\-h$>$}



Inheritance diagram for mdt\-Sql\-Relation\-:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=162pt]{classmdt_sql_relation__inherit__graph}
\end{center}
\end{figure}


Collaboration diagram for mdt\-Sql\-Relation\-:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=162pt]{classmdt_sql_relation__coll__graph}
\end{center}
\end{figure}
\subsection*{Public Slots}
\begin{DoxyCompactItemize}
\item 
void \hyperlink{classmdt_sql_relation_a39fbecb027a5783277df1cc995485917}{set\-Parent\-Current\-Index} (int index)
\begin{DoxyCompactList}\small\item\em Update child model. \end{DoxyCompactList}\item 
void \hyperlink{classmdt_sql_relation_a4381f7f5bd39337fa5cbccf9b87ff0f6}{set\-Parent\-Current\-Index} (const Q\-Model\-Index \&index)
\begin{DoxyCompactList}\small\item\em Update child model. \end{DoxyCompactList}\item 
void \hyperlink{classmdt_sql_relation_a82a90b12bb78a4b0f9751244f134889d}{set\-Parent\-Current\-Index} (const Q\-Model\-Index \&current, const Q\-Model\-Index \&previous)
\begin{DoxyCompactList}\small\item\em Update child model. \end{DoxyCompactList}\end{DoxyCompactItemize}
\subsection*{Signals}
\begin{DoxyCompactItemize}
\item 
void \hyperlink{classmdt_sql_relation_a86656619d8156638ebfbde2b334d40e2}{child\-Model\-Filter\-Applied} ()
\begin{DoxyCompactList}\small\item\em This signal is emitted once set\-Filter() was called on child model. \end{DoxyCompactList}\item 
void \hyperlink{classmdt_sql_relation_ae30eb691c46263cb4021f55b03d0d111}{child\-Model\-Is\-Empty} ()
\begin{DoxyCompactList}\small\item\em This signal is emitted after \hyperlink{classmdt_sql_relation_a86656619d8156638ebfbde2b334d40e2}{child\-Model\-Filter\-Applied()} if child model becomes empty. \end{DoxyCompactList}\end{DoxyCompactItemize}
\subsection*{Public Member Functions}
\begin{DoxyCompactItemize}
\item 
\hyperlink{classmdt_sql_relation_a65d9602a4663c8c356938ba9a217704f}{mdt\-Sql\-Relation} (\hyperlink{class_q_object}{Q\-Object} $\ast$parent=0)
\begin{DoxyCompactList}\small\item\em Create a empty relation. \end{DoxyCompactList}\item 
\hyperlink{classmdt_sql_relation_a22c7de1daa71abbde33199a08541310b}{$\sim$mdt\-Sql\-Relation} ()
\begin{DoxyCompactList}\small\item\em Destructor. \end{DoxyCompactList}\item 
void \hyperlink{classmdt_sql_relation_a5ac3a82c5d3e33b5e40b86acfe7e2a03}{set\-Parent\-Model} (\hyperlink{class_q_sql_table_model}{Q\-Sql\-Table\-Model} $\ast$model)
\begin{DoxyCompactList}\small\item\em Set the parent model. \end{DoxyCompactList}\item 
void \hyperlink{classmdt_sql_relation_ad74021dcf86c528044bf67220ed36833}{set\-Child\-Model} (\hyperlink{class_q_sql_table_model}{Q\-Sql\-Table\-Model} $\ast$model)
\begin{DoxyCompactList}\small\item\em Set the child model. \end{DoxyCompactList}\item 
bool \hyperlink{classmdt_sql_relation_a5980d1df4582971666ffe1c1d7639799}{add\-Relation} (const Q\-String \&parent\-Field\-Name, const Q\-String \&child\-Field\-Name, bool copy\-Parent\-To\-Child\-On\-Insertion, const Q\-String \&operator\-With\-Previous\-Item=\char`\"{}A\-N\-D\char`\"{})
\begin{DoxyCompactList}\small\item\em Add a relation. \end{DoxyCompactList}\item 
void \hyperlink{classmdt_sql_relation_a01469fb1baf7327ca6ddbcd1595e0d7c}{clear} ()
\begin{DoxyCompactList}\small\item\em Clear relations. \end{DoxyCompactList}\end{DoxyCompactItemize}


\subsection{Detailed Description}
Handle parent/child relations between 2 Q\-Sql\-Table\-Models. 

This is usefull to create data/details forms.

Typical usage\-:
\begin{DoxyItemize}
\item Set the parent and child models, using \hyperlink{classmdt_sql_relation_a5ac3a82c5d3e33b5e40b86acfe7e2a03}{set\-Parent\-Model()} and \hyperlink{classmdt_sql_relation_ad74021dcf86c528044bf67220ed36833}{set\-Child\-Model()}
\item Add parent/child tables fields that must match with \hyperlink{classmdt_sql_relation_a5980d1df4582971666ffe1c1d7639799}{add\-Relation()}
\item Connect the parent view's current\-Xy\-Changed() signal to \hyperlink{classmdt_sql_relation_a39fbecb027a5783277df1cc995485917}{set\-Parent\-Current\-Index()} slot. If you use a Q\-Table\-View, this signal is in its selection\-Model(). For \hyperlink{class_q_data_widget_mapper}{Q\-Data\-Widget\-Mapper}, the current\-Index\-Changed() signal is directly available.
\item If a \hyperlink{class_q_data_widget_mapper}{Q\-Data\-Widget\-Mapper} is used directly on a child model, connect \hyperlink{classmdt_sql_relation_a86656619d8156638ebfbde2b334d40e2}{child\-Model\-Filter\-Applied()} signal to \hyperlink{class_q_data_widget_mapper}{Q\-Data\-Widget\-Mapper}'s to\-First() slot. 
\end{DoxyItemize}

Definition at line 46 of file mdt\-Sql\-Relation.\-h.



\subsection{Constructor \& Destructor Documentation}
\hypertarget{classmdt_sql_relation_a65d9602a4663c8c356938ba9a217704f}{\index{mdt\-Sql\-Relation@{mdt\-Sql\-Relation}!mdt\-Sql\-Relation@{mdt\-Sql\-Relation}}
\index{mdt\-Sql\-Relation@{mdt\-Sql\-Relation}!mdtSqlRelation@{mdt\-Sql\-Relation}}
\subsubsection[{mdt\-Sql\-Relation}]{\setlength{\rightskip}{0pt plus 5cm}mdt\-Sql\-Relation\-::mdt\-Sql\-Relation (
\begin{DoxyParamCaption}
\item[{{\bf Q\-Object} $\ast$}]{parent = {\ttfamily 0}}
\end{DoxyParamCaption}
)}}\label{classmdt_sql_relation_a65d9602a4663c8c356938ba9a217704f}


Create a empty relation. 



Definition at line 28 of file mdt\-Sql\-Relation.\-cpp.

\hypertarget{classmdt_sql_relation_a22c7de1daa71abbde33199a08541310b}{\index{mdt\-Sql\-Relation@{mdt\-Sql\-Relation}!$\sim$mdt\-Sql\-Relation@{$\sim$mdt\-Sql\-Relation}}
\index{$\sim$mdt\-Sql\-Relation@{$\sim$mdt\-Sql\-Relation}!mdtSqlRelation@{mdt\-Sql\-Relation}}
\subsubsection[{$\sim$mdt\-Sql\-Relation}]{\setlength{\rightskip}{0pt plus 5cm}mdt\-Sql\-Relation\-::$\sim$mdt\-Sql\-Relation (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
)}}\label{classmdt_sql_relation_a22c7de1daa71abbde33199a08541310b}


Destructor. 



Definition at line 36 of file mdt\-Sql\-Relation.\-cpp.



References clear().



\subsection{Member Function Documentation}
\hypertarget{classmdt_sql_relation_a5980d1df4582971666ffe1c1d7639799}{\index{mdt\-Sql\-Relation@{mdt\-Sql\-Relation}!add\-Relation@{add\-Relation}}
\index{add\-Relation@{add\-Relation}!mdtSqlRelation@{mdt\-Sql\-Relation}}
\subsubsection[{add\-Relation}]{\setlength{\rightskip}{0pt plus 5cm}bool mdt\-Sql\-Relation\-::add\-Relation (
\begin{DoxyParamCaption}
\item[{const Q\-String \&}]{parent\-Field\-Name, }
\item[{const Q\-String \&}]{child\-Field\-Name, }
\item[{bool}]{copy\-Parent\-To\-Child\-On\-Insertion, }
\item[{const Q\-String \&}]{operator\-With\-Previous\-Item = {\ttfamily \char`\"{}AND\char`\"{}}}
\end{DoxyParamCaption}
)}}\label{classmdt_sql_relation_a5980d1df4582971666ffe1c1d7639799}


Add a relation. 

The parent\-Field\-Name is a field name from the parent table (typically a field from primary key). The child\-Field\-Name is a field from child table (typically a field from foreing keys).

Note that this method will fetch some information about fields in parent and child model (data type, field index, ...), so parent and child models must be set before.


\begin{DoxyParams}{Parameters}
{\em parent\-Field\-Name} & Field of parent model to use in relation (usually P\-K) \\
\hline
{\em child\-Field\-Name} & Field of child model to use in relation (usually F\-K) \\
\hline
{\em copy\-Parent\-To\-Child\-On\-Insertion} & If true, data from parent model will be copied to child model for this fields. (See \hyperlink{classmdt_sql_relation_item}{mdt\-Sql\-Relation\-Item} for details). \\
\hline
{\em operator\-With\-Previous\-Item} & Most of cases, the operator between multiple relation items is A\-N\-D. If another is needed (f.\-ex. O\-R), specify it here. \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
True on succes, false if a field could not be found. 
\end{DoxyReturn}
\begin{DoxyPrecond}{Precondition}
Parent model must be set with \hyperlink{classmdt_sql_relation_a5ac3a82c5d3e33b5e40b86acfe7e2a03}{set\-Parent\-Model()} before using this method. 

Child model must be set with \hyperlink{classmdt_sql_relation_ad74021dcf86c528044bf67220ed36833}{set\-Child\-Model()} before using this method. 
\end{DoxyPrecond}


Definition at line 56 of file mdt\-Sql\-Relation.\-cpp.



References mdt\-Error\-::commit(), mdt\-Error\-::\-Error, M\-D\-T\-\_\-\-D\-A\-T\-A\-B\-A\-S\-E\-\_\-\-E\-R\-R\-O\-R, M\-D\-T\-\_\-\-E\-R\-R\-O\-R\-\_\-\-S\-E\-T\-\_\-\-S\-R\-C, mdt\-Sql\-Relation\-Item\-::set\-Child\-Field(), mdt\-Sql\-Relation\-Item\-::set\-Child\-Field\-Index(), mdt\-Sql\-Relation\-Item\-::set\-Copy\-Parent\-To\-Child\-On\-Insertion(), mdt\-Sql\-Relation\-Item\-::set\-Parent\-Field(), mdt\-Sql\-Relation\-Item\-::set\-Parent\-Field\-Index(), and mdt\-Sql\-Relation\-Item\-::set\-Relation\-Operator\-With\-Previous\-Item().



Referenced by mdt\-Sql\-Form\-::add\-Relation().

\hypertarget{classmdt_sql_relation_a86656619d8156638ebfbde2b334d40e2}{\index{mdt\-Sql\-Relation@{mdt\-Sql\-Relation}!child\-Model\-Filter\-Applied@{child\-Model\-Filter\-Applied}}
\index{child\-Model\-Filter\-Applied@{child\-Model\-Filter\-Applied}!mdtSqlRelation@{mdt\-Sql\-Relation}}
\subsubsection[{child\-Model\-Filter\-Applied}]{\setlength{\rightskip}{0pt plus 5cm}void mdt\-Sql\-Relation\-::child\-Model\-Filter\-Applied (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [signal]}}}\label{classmdt_sql_relation_a86656619d8156638ebfbde2b334d40e2}


This signal is emitted once set\-Filter() was called on child model. 

This can be usefull when update must be done after child model was updated. For example, when using a \hyperlink{class_q_data_widget_mapper}{Q\-Data\-Widget\-Mapper}, connect this signal to \hyperlink{class_q_data_widget_mapper}{Q\-Data\-Widget\-Mapper}'s to\-First() slot. 

Definition at line 113 of file moc\-\_\-mdt\-Sql\-Relation.\-cxx.

\hypertarget{classmdt_sql_relation_ae30eb691c46263cb4021f55b03d0d111}{\index{mdt\-Sql\-Relation@{mdt\-Sql\-Relation}!child\-Model\-Is\-Empty@{child\-Model\-Is\-Empty}}
\index{child\-Model\-Is\-Empty@{child\-Model\-Is\-Empty}!mdtSqlRelation@{mdt\-Sql\-Relation}}
\subsubsection[{child\-Model\-Is\-Empty}]{\setlength{\rightskip}{0pt plus 5cm}void mdt\-Sql\-Relation\-::child\-Model\-Is\-Empty (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [signal]}}}\label{classmdt_sql_relation_ae30eb691c46263cb4021f55b03d0d111}


This signal is emitted after \hyperlink{classmdt_sql_relation_a86656619d8156638ebfbde2b334d40e2}{child\-Model\-Filter\-Applied()} if child model becomes empty. 

Connect this signal to \hyperlink{class_q_data_widget_mapper}{Q\-Data\-Widget\-Mapper}'s revert() slot. \hyperlink{class_q_data_widget_mapper}{Q\-Data\-Widget\-Mapper} will not clear widgets if model becomes empty, so using this signal is a workaround.. 

Definition at line 119 of file moc\-\_\-mdt\-Sql\-Relation.\-cxx.

\hypertarget{classmdt_sql_relation_a01469fb1baf7327ca6ddbcd1595e0d7c}{\index{mdt\-Sql\-Relation@{mdt\-Sql\-Relation}!clear@{clear}}
\index{clear@{clear}!mdtSqlRelation@{mdt\-Sql\-Relation}}
\subsubsection[{clear}]{\setlength{\rightskip}{0pt plus 5cm}void mdt\-Sql\-Relation\-::clear (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
)}}\label{classmdt_sql_relation_a01469fb1baf7327ca6ddbcd1595e0d7c}


Clear relations. 

Will clear all added relations and references to parent and child models. (will not delete models). 

Definition at line 100 of file mdt\-Sql\-Relation.\-cpp.



Referenced by $\sim$mdt\-Sql\-Relation().

\hypertarget{classmdt_sql_relation_ad74021dcf86c528044bf67220ed36833}{\index{mdt\-Sql\-Relation@{mdt\-Sql\-Relation}!set\-Child\-Model@{set\-Child\-Model}}
\index{set\-Child\-Model@{set\-Child\-Model}!mdtSqlRelation@{mdt\-Sql\-Relation}}
\subsubsection[{set\-Child\-Model}]{\setlength{\rightskip}{0pt plus 5cm}void mdt\-Sql\-Relation\-::set\-Child\-Model (
\begin{DoxyParamCaption}
\item[{{\bf Q\-Sql\-Table\-Model} $\ast$}]{model}
\end{DoxyParamCaption}
)}}\label{classmdt_sql_relation_ad74021dcf86c528044bf67220ed36833}


Set the child model. 

Will be used internally to get some informations about fields and get values to generate relation filters.

\begin{DoxyPrecond}{Precondition}
model must be a valid pointer. 
\end{DoxyPrecond}


Definition at line 48 of file mdt\-Sql\-Relation.\-cpp.



Referenced by mdt\-Sql\-Form\-::add\-Child\-Table().

\hypertarget{classmdt_sql_relation_a39fbecb027a5783277df1cc995485917}{\index{mdt\-Sql\-Relation@{mdt\-Sql\-Relation}!set\-Parent\-Current\-Index@{set\-Parent\-Current\-Index}}
\index{set\-Parent\-Current\-Index@{set\-Parent\-Current\-Index}!mdtSqlRelation@{mdt\-Sql\-Relation}}
\subsubsection[{set\-Parent\-Current\-Index}]{\setlength{\rightskip}{0pt plus 5cm}void mdt\-Sql\-Relation\-::set\-Parent\-Current\-Index (
\begin{DoxyParamCaption}
\item[{int}]{index}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [slot]}}}\label{classmdt_sql_relation_a39fbecb027a5783277df1cc995485917}


Update child model. 

\begin{DoxyPrecond}{Precondition}
Parent model must be set with \hyperlink{classmdt_sql_relation_a5ac3a82c5d3e33b5e40b86acfe7e2a03}{set\-Parent\-Model()} before using this method. 

Child model must be set with \hyperlink{classmdt_sql_relation_ad74021dcf86c528044bf67220ed36833}{set\-Child\-Model()} before using this method. 
\end{DoxyPrecond}


Definition at line 108 of file mdt\-Sql\-Relation.\-cpp.



Referenced by mdt\-Abstract\-Sql\-Widget\-::add\-Child\-Widget(), mdt\-Sql\-Form\-::add\-Relation(), and set\-Parent\-Current\-Index().

\hypertarget{classmdt_sql_relation_a4381f7f5bd39337fa5cbccf9b87ff0f6}{\index{mdt\-Sql\-Relation@{mdt\-Sql\-Relation}!set\-Parent\-Current\-Index@{set\-Parent\-Current\-Index}}
\index{set\-Parent\-Current\-Index@{set\-Parent\-Current\-Index}!mdtSqlRelation@{mdt\-Sql\-Relation}}
\subsubsection[{set\-Parent\-Current\-Index}]{\setlength{\rightskip}{0pt plus 5cm}void mdt\-Sql\-Relation\-::set\-Parent\-Current\-Index (
\begin{DoxyParamCaption}
\item[{const Q\-Model\-Index \&}]{index}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [slot]}}}\label{classmdt_sql_relation_a4381f7f5bd39337fa5cbccf9b87ff0f6}


Update child model. 

\begin{DoxyPrecond}{Precondition}
Parent model must be set with \hyperlink{classmdt_sql_relation_a5ac3a82c5d3e33b5e40b86acfe7e2a03}{set\-Parent\-Model()} before using this method. 

Child model must be set with \hyperlink{classmdt_sql_relation_ad74021dcf86c528044bf67220ed36833}{set\-Child\-Model()} before using this method. 
\end{DoxyPrecond}


Definition at line 122 of file mdt\-Sql\-Relation.\-cpp.



References set\-Parent\-Current\-Index().

\hypertarget{classmdt_sql_relation_a82a90b12bb78a4b0f9751244f134889d}{\index{mdt\-Sql\-Relation@{mdt\-Sql\-Relation}!set\-Parent\-Current\-Index@{set\-Parent\-Current\-Index}}
\index{set\-Parent\-Current\-Index@{set\-Parent\-Current\-Index}!mdtSqlRelation@{mdt\-Sql\-Relation}}
\subsubsection[{set\-Parent\-Current\-Index}]{\setlength{\rightskip}{0pt plus 5cm}void mdt\-Sql\-Relation\-::set\-Parent\-Current\-Index (
\begin{DoxyParamCaption}
\item[{const Q\-Model\-Index \&}]{current, }
\item[{const Q\-Model\-Index \&}]{previous}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [slot]}}}\label{classmdt_sql_relation_a82a90b12bb78a4b0f9751244f134889d}


Update child model. 

\begin{DoxyPrecond}{Precondition}
Parent model must be set with \hyperlink{classmdt_sql_relation_a5ac3a82c5d3e33b5e40b86acfe7e2a03}{set\-Parent\-Model()} before using this method. 

Child model must be set with \hyperlink{classmdt_sql_relation_ad74021dcf86c528044bf67220ed36833}{set\-Child\-Model()} before using this method. 
\end{DoxyPrecond}


Definition at line 134 of file mdt\-Sql\-Relation.\-cpp.



References set\-Parent\-Current\-Index().

\hypertarget{classmdt_sql_relation_a5ac3a82c5d3e33b5e40b86acfe7e2a03}{\index{mdt\-Sql\-Relation@{mdt\-Sql\-Relation}!set\-Parent\-Model@{set\-Parent\-Model}}
\index{set\-Parent\-Model@{set\-Parent\-Model}!mdtSqlRelation@{mdt\-Sql\-Relation}}
\subsubsection[{set\-Parent\-Model}]{\setlength{\rightskip}{0pt plus 5cm}void mdt\-Sql\-Relation\-::set\-Parent\-Model (
\begin{DoxyParamCaption}
\item[{{\bf Q\-Sql\-Table\-Model} $\ast$}]{model}
\end{DoxyParamCaption}
)}}\label{classmdt_sql_relation_a5ac3a82c5d3e33b5e40b86acfe7e2a03}


Set the parent model. 

Will be used internally to get some informations about fields and get values to generate relation filters.

\begin{DoxyPrecond}{Precondition}
model must be a valid pointer. 
\end{DoxyPrecond}


Definition at line 41 of file mdt\-Sql\-Relation.\-cpp.



Referenced by mdt\-Sql\-Form\-::add\-Child\-Table().



The documentation for this class was generated from the following files\-:\begin{DoxyCompactItemize}
\item 
src/mdtutilsgui/\hyperlink{mdt_sql_relation_8h}{mdt\-Sql\-Relation.\-h}\item 
src/mdtutilsgui/\hyperlink{mdt_sql_relation_8cpp}{mdt\-Sql\-Relation.\-cpp}\item 
src/mdtutilsgui/\hyperlink{moc__mdt_sql_relation_8cxx}{moc\-\_\-mdt\-Sql\-Relation.\-cxx}\end{DoxyCompactItemize}
