\hypertarget{classmdt_tt_test}{\section{mdt\-Tt\-Test Class Reference}
\label{classmdt_tt_test}\index{mdt\-Tt\-Test@{mdt\-Tt\-Test}}
}


Helper class to manipulate test data.  




{\ttfamily \#include $<$mdt\-Tt\-Test.\-h$>$}



Inheritance diagram for mdt\-Tt\-Test\-:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=144pt]{classmdt_tt_test__inherit__graph}
\end{center}
\end{figure}


Collaboration diagram for mdt\-Tt\-Test\-:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=216pt]{classmdt_tt_test__coll__graph}
\end{center}
\end{figure}
\subsection*{Public Member Functions}
\begin{DoxyCompactItemize}
\item 
\hyperlink{classmdt_tt_test_a607eadd86d30aa34dbd9daaf4c03725c}{mdt\-Tt\-Test} (\hyperlink{class_q_object}{Q\-Object} $\ast$parent, Q\-Sql\-Database db)
\begin{DoxyCompactList}\small\item\em Constructor. \end{DoxyCompactList}\item 
Q\-Variant \hyperlink{classmdt_tt_test_a07249bc1f02d16974af0b171d7e391de}{create\-Test} (const Q\-Variant \&test\-Model\-Id)
\begin{DoxyCompactList}\small\item\em Set test data. \end{DoxyCompactList}\item 
bool \hyperlink{classmdt_tt_test_a816f7197031e96148996333b9c625702}{save\-Test} (const \hyperlink{classmdt_sql_record}{mdt\-Sql\-Record} \&test\-Record, const Q\-List$<$ \hyperlink{classmdt_sql_record}{mdt\-Sql\-Record} $>$ \&test\-Item\-Records)
\begin{DoxyCompactList}\small\item\em Save a test and related test items. \end{DoxyCompactList}\item 
bool \hyperlink{classmdt_tt_test_a8dc26af849b8e928385e5f25697ebb47}{remove\-Test} (const Q\-Variant \&test\-Id)
\begin{DoxyCompactList}\small\item\em Remove a test. \end{DoxyCompactList}\item 
void \hyperlink{classmdt_tt_test_ae8cafeb9cebf1c11ca136a94ba75020c}{reset\-Test\-Item\-Cursor} ()
\begin{DoxyCompactList}\small\item\em Check if more test item is available. \end{DoxyCompactList}\item 
\hyperlink{classmdt_tt_test_item_node_setup_data}{mdt\-Tt\-Test\-Item\-Node\-Setup\-Data} \hyperlink{classmdt_tt_test_a71e868fa2c182b33982276e52f9c4d23}{get\-Setup\-Data} (const Q\-Variant \&test\-Model\-Item\-Id, bool \&ok)
\begin{DoxyCompactList}\small\item\em Go to next test item. \end{DoxyCompactList}\end{DoxyCompactItemize}
\subsection*{Static Public Member Functions}
\begin{DoxyCompactItemize}
\item 
static bool \hyperlink{classmdt_tt_test_a5920961d0f32d37033a184ed76b2cf3d}{is\-In\-Range} (double x, double min, double max=std\-::numeric\-\_\-limits$<$ double $>$\-::max())
\begin{DoxyCompactList}\small\item\em Set test item data. \end{DoxyCompactList}\item 
static bool \hyperlink{classmdt_tt_test_a62a8e5118129566aa897bba3ff079a4e}{is\-In\-Ok\-Range} (double x, double limit\-Min, double limit\-Max)
\begin{DoxyCompactList}\small\item\em Check if x is in O\-K range. \end{DoxyCompactList}\item 
static bool \hyperlink{classmdt_tt_test_a0384aea1eb7edde259888e5fecae976c}{is\-In\-Limit\-Range} (double x, double limit\-Min, double limit\-Max, double fail\-Min, double fail\-Max)
\begin{DoxyCompactList}\small\item\em Check if x is in limit range. \end{DoxyCompactList}\end{DoxyCompactItemize}
\subsection*{Additional Inherited Members}


\subsection{Detailed Description}
Helper class to manipulate test data. 

Typical usage\-:
\begin{DoxyItemize}
\item Do base initialization with setup()
\item Do signal/slot connections
\item Load data from database and start state machines with start() 
\end{DoxyItemize}

Definition at line 54 of file mdt\-Tt\-Test.\-h.



\subsection{Constructor \& Destructor Documentation}
\hypertarget{classmdt_tt_test_a607eadd86d30aa34dbd9daaf4c03725c}{\index{mdt\-Tt\-Test@{mdt\-Tt\-Test}!mdt\-Tt\-Test@{mdt\-Tt\-Test}}
\index{mdt\-Tt\-Test@{mdt\-Tt\-Test}!mdtTtTest@{mdt\-Tt\-Test}}
\subsubsection[{mdt\-Tt\-Test}]{\setlength{\rightskip}{0pt plus 5cm}mdt\-Tt\-Test\-::mdt\-Tt\-Test (
\begin{DoxyParamCaption}
\item[{{\bf Q\-Object} $\ast$}]{parent, }
\item[{Q\-Sql\-Database}]{db}
\end{DoxyParamCaption}
)}}\label{classmdt_tt_test_a607eadd86d30aa34dbd9daaf4c03725c}


Constructor. 



Definition at line 38 of file mdt\-Tt\-Test.\-cpp.



\subsection{Member Function Documentation}
\hypertarget{classmdt_tt_test_a07249bc1f02d16974af0b171d7e391de}{\index{mdt\-Tt\-Test@{mdt\-Tt\-Test}!create\-Test@{create\-Test}}
\index{create\-Test@{create\-Test}!mdtTtTest@{mdt\-Tt\-Test}}
\subsubsection[{create\-Test}]{\setlength{\rightskip}{0pt plus 5cm}Q\-Variant mdt\-Tt\-Test\-::create\-Test (
\begin{DoxyParamCaption}
\item[{const Q\-Variant \&}]{test\-Model\-Id}
\end{DoxyParamCaption}
)}}\label{classmdt_tt_test_a07249bc1f02d16974af0b171d7e391de}


Set test data. 

Will also emit test\-Data\-Changed()

Note\-: data are not sent to database.\-void set\-Test\-Data(const mdt\-Tt\-Test\-Data \& data);

Set test data value

Will also emit test\-Data\-Changed()

Note\-: value is not sent to database.\-void set\-Test\-Data\-Value(const Q\-String \& field\-Name, const Q\-Variant \& value);

Get test data

Returns data from Test\-\_\-view\-Q\-Sql\-Record test\-Data() const;

Get test data value for given field\-Name

Note\-: return cached data (will not get them from database).Q\-Variant test\-Data\-Value(const Q\-String \& field\-Name) const;

Create a new test based on given test\-Model\-Id

Will also create test items.

\begin{DoxyReturn}{Returns}
Test I\-D of created test or a Null value on error.
\end{DoxyReturn}
void mdt\-Tt\-Test\-::set\-Test\-Data(const mdt\-Tt\-Test\-Data\& data) \{ bool new\-Test\-Id;

new\-Test\-Id = (data.\-value(\char`\"{}\-Id\-\_\-\-P\-K\char`\"{}) != pv\-Test\-Data.\-value(\char`\"{}\-Id\-\_\-\-P\-K\char`\"{})); pv\-Test\-Data = data; pv\-Test\-Data\-Are\-Saved = false; if(new\-Test\-Id)\{ /update\-Current\-Test\-Row(data.\-value(\char`\"{}\-Id\-\_\-\-P\-K\char`\"{})); reset\-Test\-Item\-Table\-Models(); \} /emit test\-Data\-Changed(pv\-Test\-Data); \} void mdt\-Tt\-Test\-::set\-Test\-Data\-Value(const Q\-String\& field\-Name, const Q\-Variant\& value) \{ bool new\-Test\-Id = false;

if(field\-Name == \char`\"{}\-Id\-\_\-\-P\-K\char`\"{})\{ new\-Test\-Id = (value != pv\-Test\-Data.\-value(\char`\"{}\-Id\-\_\-\-P\-K\char`\"{})); \} pv\-Test\-Data.\-set\-Value(field\-Name, value); pv\-Test\-Data\-Are\-Saved = false; if(new\-Test\-Id)\{ reset\-Test\-Item\-Table\-Models(); \} /emit test\-Data\-Changed(pv\-Test\-Data); \} Q\-Sql\-Record mdt\-Tt\-Test\-::test\-Data() const \{ return pv\-Test\-View\-Table\-Model-\/$>$record(pv\-Current\-Test\-Row); \} 

Definition at line 85 of file mdt\-Tt\-Test.\-cpp.



References mdt\-Sql\-Record\-::add\-All\-Fields(), mdt\-Tt\-Base\-::add\-Record(), mdt\-Tt\-Base\-::begin\-Transaction(), mdt\-Tt\-Base\-::commit\-Transaction(), mdt\-Tt\-Base\-::database(), mdt\-Sql\-Record\-::last\-Error(), mdt\-Tt\-Base\-::pv\-Last\-Error, mdt\-Tt\-Base\-::rollback\-Transaction(), and mdt\-Sql\-Record\-::set\-Value().

\hypertarget{classmdt_tt_test_a71e868fa2c182b33982276e52f9c4d23}{\index{mdt\-Tt\-Test@{mdt\-Tt\-Test}!get\-Setup\-Data@{get\-Setup\-Data}}
\index{get\-Setup\-Data@{get\-Setup\-Data}!mdtTtTest@{mdt\-Tt\-Test}}
\subsubsection[{get\-Setup\-Data}]{\setlength{\rightskip}{0pt plus 5cm}{\bf mdt\-Tt\-Test\-Item\-Node\-Setup\-Data} mdt\-Tt\-Test\-::get\-Setup\-Data (
\begin{DoxyParamCaption}
\item[{const Q\-Variant \&}]{test\-Model\-Item\-Id, }
\item[{bool \&}]{ok}
\end{DoxyParamCaption}
)}}\label{classmdt_tt_test_a71e868fa2c182b33982276e52f9c4d23}


Go to next test item. 

\begin{DoxyReturn}{Returns}
The test item I\-D
\end{DoxyReturn}
Get setup data for given test model item I\-D

Q\-\_\-\-A\-S\-S\-E\-R\-T(pv\-Test\-Item\-View\-Table\-Model);

Q\-Model\-Index index; int col;

col = pv\-Test\-Item\-View\-Table\-Model-\/$>$field\-Index(\char`\"{}\-Id\-\_\-\-P\-K\char`\"{}); Q\-\_\-\-A\-S\-S\-E\-R\-T(col $>$= 0); index = pv\-Test\-Item\-View\-Table\-Model-\/$>$index(pv\-Current\-Test\-Item\-Row, col);

///\begin{DoxyRefDesc}{Todo}
\item[\hyperlink{todo__todo000077}{Todo}]Provisoire ! col = pv\-Test\-Item\-View\-Table\-Model-\/$>$field\-Index(\char`\"{}\-Sequence\-Number\char`\"{}); Q\-Model\-Index index2; index2 = pv\-Test\-Item\-View\-Table\-Model-\/$>$index(pv\-Current\-Test\-Item\-Row, col); q\-Debug() $<$$<$ \char`\"{}mdt\-Tt\-Test -\/ current seq \#\-: \char`\"{} $<$$<$ pv\-Test\-Item\-View\-Table\-Model-\/$>$data(index2);\end{DoxyRefDesc}


return pv\-Test\-Item\-View\-Table\-Model-\/$>$data(index); 

Definition at line 372 of file mdt\-Tt\-Test.\-cpp.



References mdt\-Tt\-Test\-Item\-Node\-Setup\-Data\-::add\-Node\-Setup\-Data(), mdt\-Tt\-Test\-Node\-Setup\-Data\-::add\-Unit\-Setup(), mdt\-Tt\-Base\-::get\-Data(), mdt\-Tt\-Test\-Node\-Setup\-Data\-::node\-Identification(), mdt\-Tt\-Test\-Node\-Setup\-Data\-::set\-Node\-Identification(), and mdt\-Sql\-Record\-::value().

\hypertarget{classmdt_tt_test_a0384aea1eb7edde259888e5fecae976c}{\index{mdt\-Tt\-Test@{mdt\-Tt\-Test}!is\-In\-Limit\-Range@{is\-In\-Limit\-Range}}
\index{is\-In\-Limit\-Range@{is\-In\-Limit\-Range}!mdtTtTest@{mdt\-Tt\-Test}}
\subsubsection[{is\-In\-Limit\-Range}]{\setlength{\rightskip}{0pt plus 5cm}bool mdt\-Tt\-Test\-::is\-In\-Limit\-Range (
\begin{DoxyParamCaption}
\item[{double}]{x, }
\item[{double}]{limit\-Min, }
\item[{double}]{limit\-Max, }
\item[{double}]{fail\-Min, }
\item[{double}]{fail\-Max}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [static]}}}\label{classmdt_tt_test_a0384aea1eb7edde259888e5fecae976c}


Check if x is in limit range. 

Return true if x is in \mbox{]}fail\-Min;limit\-Min\mbox{]} or in \mbox{[}limit\-Max;fail\-Max\mbox{[} 

Definition at line 310 of file mdt\-Tt\-Test.\-cpp.

\hypertarget{classmdt_tt_test_a62a8e5118129566aa897bba3ff079a4e}{\index{mdt\-Tt\-Test@{mdt\-Tt\-Test}!is\-In\-Ok\-Range@{is\-In\-Ok\-Range}}
\index{is\-In\-Ok\-Range@{is\-In\-Ok\-Range}!mdtTtTest@{mdt\-Tt\-Test}}
\subsubsection[{is\-In\-Ok\-Range}]{\setlength{\rightskip}{0pt plus 5cm}bool mdt\-Tt\-Test\-::is\-In\-Ok\-Range (
\begin{DoxyParamCaption}
\item[{double}]{x, }
\item[{double}]{limit\-Min, }
\item[{double}]{limit\-Max}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [static]}}}\label{classmdt_tt_test_a62a8e5118129566aa897bba3ff079a4e}


Check if x is in O\-K range. 

Return true if x is in \mbox{]}limit\-Min;limit\-Max\mbox{[} 

Definition at line 305 of file mdt\-Tt\-Test.\-cpp.

\hypertarget{classmdt_tt_test_a5920961d0f32d37033a184ed76b2cf3d}{\index{mdt\-Tt\-Test@{mdt\-Tt\-Test}!is\-In\-Range@{is\-In\-Range}}
\index{is\-In\-Range@{is\-In\-Range}!mdtTtTest@{mdt\-Tt\-Test}}
\subsubsection[{is\-In\-Range}]{\setlength{\rightskip}{0pt plus 5cm}bool mdt\-Tt\-Test\-::is\-In\-Range (
\begin{DoxyParamCaption}
\item[{double}]{x, }
\item[{double}]{min, }
\item[{double}]{max = {\ttfamily std\-:\-:numeric\-\_\-limits$<$double$>$\-:\-:max()}}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [static]}}}\label{classmdt_tt_test_a5920961d0f32d37033a184ed76b2cf3d}


Set test item data. 

Set current test item data

Note\-: will not save to database. Use save\-Current\-Test() for that.

Get current test item data

Note\-: will return cached value.

Set measured value to current test item

Will first check if given value has -\/\-O\-L or +\-O\-L flag, and set resulting value to, respectiveley, -\/inf or +inf if true.

The resulting value is then compared to expected one, and result is alos determined.

Finally, all values are stored to current test item, but only cached (see set\-Current\-Test\-Item\-Data()).

Note\-: instrument\-Range\-Min and instrument\-Range\-Max are only informative, they are stored as they are given. For proper limit evaluation, only \hyperlink{classmdt_value}{mdt\-Value}'s flags are used.

Check if x is in range

Return true if x is in \mbox{[}min;max\mbox{]}

Q\-Variant test\-Item\-Id; int test\-Item\-View\-Col; int test\-Item\-Table\-Row, test\-Item\-Table\-Col; Q\-Model\-Index index; if(pv\-Test\-Item\-View\-Table\-Model-\/$>$row\-Count() $<$ 1)\{ return; \} // Get column index of field\-Name test\-Item\-View\-Col = pv\-Test\-Item\-View\-Table\-Model-\/$>$field\-Index(field\-Name); Q\-\_\-\-A\-S\-S\-E\-R\-T(test\-Item\-View\-Col $>$= 0); test\-Item\-Table\-Col = pv\-Test\-Item\-Table\-Model-\/$>$field\-Index(field\-Name); Q\-\_\-\-A\-S\-S\-E\-R\-T(test\-Item\-Table\-Col $>$= 0); // Get corresponding row in Test\-Item\-\_\-view test\-Item\-Id = pv\-Test\-Item\-View\-Table\-Model-\/$>$record(pv\-Current\-Test\-Item\-Row).value(\char`\"{}\-Id\-\_\-\-P\-K\char`\"{}); Q\-\_\-\-A\-S\-S\-E\-R\-T(!test\-Item\-Id.is\-Null()); test\-Item\-Table\-Row = get\-Test\-Item\-Table\-Model\-Index\-Row(test\-Item\-Id); Q\-\_\-\-A\-S\-S\-E\-R\-T(test\-Item\-Table\-Row $>$= 0); // Set value index = pv\-Test\-Item\-View\-Table\-Model-\/$>$index(pv\-Current\-Test\-Item\-Row, test\-Item\-View\-Col); pv\-Test\-Item\-View\-Table\-Model-\/$>$set\-Data(index, data); index = pv\-Test\-Item\-Table\-Model-\/$>$index(test\-Item\-Table\-Row, test\-Item\-Table\-Col); pv\-Test\-Item\-Table\-Model-\/$>$set\-Data(index, data); int test\-Item\-View\-Col; Q\-Model\-Index index;

if(pv\-Test\-Item\-View\-Table\-Model-\/$>$row\-Count() $<$ 1)\{ return Q\-Variant(); \} test\-Item\-View\-Col = pv\-Test\-Item\-View\-Table\-Model-\/$>$field\-Index(field\-Name); Q\-\_\-\-A\-S\-S\-E\-R\-T(test\-Item\-View\-Col $>$= 0); index = pv\-Test\-Item\-View\-Table\-Model-\/$>$index(pv\-Current\-Test\-Item\-Row, test\-Item\-View\-Col);

return pv\-Test\-Item\-View\-Table\-Model-\/$>$data(index); 

Definition at line 299 of file mdt\-Tt\-Test.\-cpp.



Referenced by mdt\-Tt\-Abstract\-Test\-Node\-Calibration\-Tool\-::is\-In\-Range().

\hypertarget{classmdt_tt_test_a8dc26af849b8e928385e5f25697ebb47}{\index{mdt\-Tt\-Test@{mdt\-Tt\-Test}!remove\-Test@{remove\-Test}}
\index{remove\-Test@{remove\-Test}!mdtTtTest@{mdt\-Tt\-Test}}
\subsubsection[{remove\-Test}]{\setlength{\rightskip}{0pt plus 5cm}bool mdt\-Tt\-Test\-::remove\-Test (
\begin{DoxyParamCaption}
\item[{const Q\-Variant \&}]{test\-Id}
\end{DoxyParamCaption}
)}}\label{classmdt_tt_test_a8dc26af849b8e928385e5f25697ebb47}


Remove a test. 

Will also remove test items. 

Definition at line 144 of file mdt\-Tt\-Test.\-cpp.



References mdt\-Tt\-Base\-::begin\-Transaction(), mdt\-Tt\-Base\-::commit\-Transaction(), mdt\-Tt\-Base\-::remove\-Data(), and mdt\-Tt\-Base\-::rollback\-Transaction().

\hypertarget{classmdt_tt_test_ae8cafeb9cebf1c11ca136a94ba75020c}{\index{mdt\-Tt\-Test@{mdt\-Tt\-Test}!reset\-Test\-Item\-Cursor@{reset\-Test\-Item\-Cursor}}
\index{reset\-Test\-Item\-Cursor@{reset\-Test\-Item\-Cursor}!mdtTtTest@{mdt\-Tt\-Test}}
\subsubsection[{reset\-Test\-Item\-Cursor}]{\setlength{\rightskip}{0pt plus 5cm}void mdt\-Tt\-Test\-::reset\-Test\-Item\-Cursor (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
)}}\label{classmdt_tt_test_ae8cafeb9cebf1c11ca136a94ba75020c}


Check if more test item is available. 

Reset the test item cursor

if(pv\-Current\-Test\-Item\-Row $<$ (pv\-Test\-Item\-View\-Table\-Model-\/$>$row\-Count() -\/ 1))\{ return true; \} if(pv\-Test\-Item\-View\-Table\-Model-\/$>$can\-Fetch\-More())\{ pv\-Test\-Item\-View\-Table\-Model-\/$>$fetch\-More(); return true; \} 

Definition at line 336 of file mdt\-Tt\-Test.\-cpp.

\hypertarget{classmdt_tt_test_a816f7197031e96148996333b9c625702}{\index{mdt\-Tt\-Test@{mdt\-Tt\-Test}!save\-Test@{save\-Test}}
\index{save\-Test@{save\-Test}!mdtTtTest@{mdt\-Tt\-Test}}
\subsubsection[{save\-Test}]{\setlength{\rightskip}{0pt plus 5cm}bool mdt\-Tt\-Test\-::save\-Test (
\begin{DoxyParamCaption}
\item[{const {\bf mdt\-Sql\-Record} \&}]{test\-Record, }
\item[{const Q\-List$<$ {\bf mdt\-Sql\-Record} $>$ \&}]{test\-Item\-Records}
\end{DoxyParamCaption}
)}}\label{classmdt_tt_test_a816f7197031e96148996333b9c625702}


Save a test and related test items. 



Definition at line 118 of file mdt\-Tt\-Test.\-cpp.



References mdt\-Tt\-Base\-::begin\-Transaction(), mdt\-Tt\-Base\-::commit\-Transaction(), mdt\-Tt\-Base\-::rollback\-Transaction(), mdt\-Tt\-Base\-::update\-Record(), and mdt\-Sql\-Record\-::value().



The documentation for this class was generated from the following files\-:\begin{DoxyCompactItemize}
\item 
src/mdttools/mdttesttool/\hyperlink{mdt_tt_test_8h}{mdt\-Tt\-Test.\-h}\item 
src/mdttools/mdttesttool/\hyperlink{mdt_tt_test_8cpp}{mdt\-Tt\-Test.\-cpp}\end{DoxyCompactItemize}
