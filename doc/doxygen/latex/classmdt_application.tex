\hypertarget{classmdt_application}{
\section{mdtApplication Class Reference}
\label{classmdt_application}\index{mdtApplication@{mdtApplication}}
}


Main application.  




{\ttfamily \#include $<$mdtApplication.h$>$}



Inheritance diagram for mdtApplication:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=182pt]{classmdt_application__inherit__graph}
\end{center}
\end{figure}


Collaboration diagram for mdtApplication:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=238pt]{classmdt_application__coll__graph}
\end{center}
\end{figure}
\subsection*{Public Slots}
\begin{DoxyCompactItemize}
\item 
void \hyperlink{classmdt_application_a60cf66d3ebe17d1e60a7dcc26410494d}{changeLanguage} (const QLocale \&locale=QLocale())
\begin{DoxyCompactList}\small\item\em Change the application language. \end{DoxyCompactList}\item 
void \hyperlink{classmdt_application_a7eec3fbe97863cb4a938fa58a5135b1b}{changeLanguage} (QAction $\ast$action)
\begin{DoxyCompactList}\small\item\em Change the application language (overload) \end{DoxyCompactList}\end{DoxyCompactItemize}
\subsection*{Signals}
\begin{DoxyCompactItemize}
\item 
\hypertarget{classmdt_application_a4200ade3b0b295ea8b0cb5239d967610}{
void \hyperlink{classmdt_application_a4200ade3b0b295ea8b0cb5239d967610}{languageChanged} ()}
\label{classmdt_application_a4200ade3b0b295ea8b0cb5239d967610}

\begin{DoxyCompactList}\small\item\em Emitted when language was changed using \hyperlink{classmdt_application_a60cf66d3ebe17d1e60a7dcc26410494d}{changeLanguage()} \end{DoxyCompactList}\end{DoxyCompactItemize}
\subsection*{Public Member Functions}
\begin{DoxyCompactItemize}
\item 
\hypertarget{classmdt_application_ab6268414770ee9239c83677c15a67f75}{
{\bfseries mdtApplication} (int \&argc, char $\ast$$\ast$argv, bool GUIenabled=true)}
\label{classmdt_application_ab6268414770ee9239c83677c15a67f75}

\item 
bool \hyperlink{classmdt_application_a3b8798416e730f85e419566442adb77b}{init} (bool allowMultipleInstances=false, int dialogErrorLevelsMask=0)
\begin{DoxyCompactList}\small\item\em Some initializations. \end{DoxyCompactList}\item 
void \hyperlink{classmdt_application_a79dbb5f3d889d7cd9b8909a4eb8bcce1}{setApplicationVersion} (int versionMajor, int versionMinor, int versionMicro)
\begin{DoxyCompactList}\small\item\em Build the application version with numeric values. \end{DoxyCompactList}\item 
void \hyperlink{classmdt_application_ab5279a8c25923ab4c570670b8a41d599}{addTranslationsDirectory} (const QString \&directory)
\begin{DoxyCompactList}\small\item\em Add a directory that contains translations files in search paths. \end{DoxyCompactList}\item 
QMap$<$ QString, QString $>$ \& \hyperlink{classmdt_application_a9ce5b5c3ca36a76ad0acc3913ce8f89a}{availableTranslations} ()
\begin{DoxyCompactList}\small\item\em Get the list of available translations. \end{DoxyCompactList}\item 
QString \& \hyperlink{classmdt_application_a531e64266be58b3a10608b21ae6afedb}{currentTranslationKey} ()
\begin{DoxyCompactList}\small\item\em Get the current translation key. \end{DoxyCompactList}\item 
void \hyperlink{classmdt_application_af4ff7f4cbb1c93a35f06ea197e3dde42}{installTranslator} (QTranslator $\ast$translator)
\begin{DoxyCompactList}\small\item\em Adds the translator to the list of translators to be used for translations. \end{DoxyCompactList}\item 
void \hyperlink{classmdt_application_ae83acc410a132b9972d6e961e0c79b0d}{removeCurrentTranslators} ()
\begin{DoxyCompactList}\small\item\em Remove installed translators. \end{DoxyCompactList}\end{DoxyCompactItemize}
\subsection*{Static Public Member Functions}
\begin{DoxyCompactItemize}
\item 
static \hyperlink{classmdt_application}{mdtApplication} $\ast$ \hyperlink{classmdt_application_a365ac79934070b0e5a42d2c7cd9b076d}{instance} ()
\begin{DoxyCompactList}\small\item\em Get the instance of \hyperlink{classmdt_application}{mdtApplication}. \end{DoxyCompactList}\item 
static QString \hyperlink{classmdt_application_af17bb16e420c91af3d0ad1970714388c}{systemDataDirPath} ()
\begin{DoxyCompactList}\small\item\em Get data dir path. \end{DoxyCompactList}\item 
\hypertarget{classmdt_application_a936beeeb6d56d5d669a478f248d80c7d}{
static const QDir \hyperlink{classmdt_application_a936beeeb6d56d5d669a478f248d80c7d}{cacheDir} ()}
\label{classmdt_application_a936beeeb6d56d5d669a478f248d80c7d}

\begin{DoxyCompactList}\small\item\em Get cache directory. \end{DoxyCompactList}\item 
\hypertarget{classmdt_application_ad5318086812dad2c2870e294703caa51}{
static QString \hyperlink{classmdt_application_ad5318086812dad2c2870e294703caa51}{mdtLibVersion} ()}
\label{classmdt_application_ad5318086812dad2c2870e294703caa51}

\begin{DoxyCompactList}\small\item\em Get the multi diag tools library version. \end{DoxyCompactList}\end{DoxyCompactItemize}


\subsection{Detailed Description}
Main application. 

NOTE: manage directories better (with, f.ex, a member containing search paths ..) NOTE: Mutex for static members..

\begin{DoxySeeAlso}{See also}
QApplication 

\hyperlink{class_qt_single_application}{QtSingleApplication} 
\end{DoxySeeAlso}


Definition at line 47 of file mdtApplication.h.



\subsection{Member Function Documentation}
\hypertarget{classmdt_application_ab5279a8c25923ab4c570670b8a41d599}{
\index{mdtApplication@{mdtApplication}!addTranslationsDirectory@{addTranslationsDirectory}}
\index{addTranslationsDirectory@{addTranslationsDirectory}!mdtApplication@{mdtApplication}}
\subsubsection[{addTranslationsDirectory}]{\setlength{\rightskip}{0pt plus 5cm}void mdtApplication::addTranslationsDirectory (
\begin{DoxyParamCaption}
\item[{const QString \&}]{directory}
\end{DoxyParamCaption}
)}}
\label{classmdt_application_ab5279a8c25923ab4c570670b8a41d599}


Add a directory that contains translations files in search paths. 

If given directory exists (and is accessible), it will be added to search paths. \begin{DoxyPrecond}{Precondition}
The \hyperlink{classmdt_error_out}{mdtErrorOut} system must be initialized before using this method, this is done by \hyperlink{classmdt_application_a3b8798416e730f85e419566442adb77b}{init()}. 
\end{DoxyPrecond}


Definition at line 149 of file mdtApplication.cpp.

\hypertarget{classmdt_application_a9ce5b5c3ca36a76ad0acc3913ce8f89a}{
\index{mdtApplication@{mdtApplication}!availableTranslations@{availableTranslations}}
\index{availableTranslations@{availableTranslations}!mdtApplication@{mdtApplication}}
\subsubsection[{availableTranslations}]{\setlength{\rightskip}{0pt plus 5cm}QMap$<$ QString, QString $>$ \& mdtApplication::availableTranslations (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
)}}
\label{classmdt_application_a9ce5b5c3ca36a76ad0acc3913ce8f89a}


Get the list of available translations. 

The key contains the language suffix, like en , that can be reused with \hyperlink{classmdt_application_a60cf66d3ebe17d1e60a7dcc26410494d}{changeLanguage()}. The list is built during \hyperlink{classmdt_application_a3b8798416e730f85e419566442adb77b}{init()}. 

Definition at line 162 of file mdtApplication.cpp.

\hypertarget{classmdt_application_a7eec3fbe97863cb4a938fa58a5135b1b}{
\index{mdtApplication@{mdtApplication}!changeLanguage@{changeLanguage}}
\index{changeLanguage@{changeLanguage}!mdtApplication@{mdtApplication}}
\subsubsection[{changeLanguage}]{\setlength{\rightskip}{0pt plus 5cm}void mdtApplication::changeLanguage (
\begin{DoxyParamCaption}
\item[{QAction $\ast$}]{action}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily  \mbox{[}slot\mbox{]}}}}
\label{classmdt_application_a7eec3fbe97863cb4a938fa58a5135b1b}


Change the application language (overload) 

To make this slot work, the QAction must contain the language key (like en, fr, de, ...) in the data section. \begin{DoxyPrecond}{Precondition}
action must be a valid pointer. 
\end{DoxyPrecond}


Definition at line 210 of file mdtApplication.cpp.

\hypertarget{classmdt_application_a60cf66d3ebe17d1e60a7dcc26410494d}{
\index{mdtApplication@{mdtApplication}!changeLanguage@{changeLanguage}}
\index{changeLanguage@{changeLanguage}!mdtApplication@{mdtApplication}}
\subsubsection[{changeLanguage}]{\setlength{\rightskip}{0pt plus 5cm}void mdtApplication::changeLanguage (
\begin{DoxyParamCaption}
\item[{const QLocale \&}]{locale = {\ttfamily QLocale()}}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily  \mbox{[}slot\mbox{]}}}}
\label{classmdt_application_a60cf66d3ebe17d1e60a7dcc26410494d}


Change the application language. 

This will remove installed translators, and install language speficifed translators. Whenn translation files could not be loaded, the application should fall back to source code's language. If no parameters are given, system's language will be used. By default, the .qm translation files are searched in system's data directory. It's possible to add other search paths using otherQmDirectories parameter.

\begin{DoxyPrecond}{Precondition}
The error system must be initalized before using this method (this is done by \hyperlink{classmdt_application_a3b8798416e730f85e419566442adb77b}{init()} ). 
\end{DoxyPrecond}


Definition at line 191 of file mdtApplication.cpp.

\hypertarget{classmdt_application_a531e64266be58b3a10608b21ae6afedb}{
\index{mdtApplication@{mdtApplication}!currentTranslationKey@{currentTranslationKey}}
\index{currentTranslationKey@{currentTranslationKey}!mdtApplication@{mdtApplication}}
\subsubsection[{currentTranslationKey}]{\setlength{\rightskip}{0pt plus 5cm}QString \& mdtApplication::currentTranslationKey (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
)}}
\label{classmdt_application_a531e64266be58b3a10608b21ae6afedb}


Get the current translation key. 

The translation key could be en, de, fr, ... 

Definition at line 167 of file mdtApplication.cpp.

\hypertarget{classmdt_application_a3b8798416e730f85e419566442adb77b}{
\index{mdtApplication@{mdtApplication}!init@{init}}
\index{init@{init}!mdtApplication@{mdtApplication}}
\subsubsection[{init}]{\setlength{\rightskip}{0pt plus 5cm}bool mdtApplication::init (
\begin{DoxyParamCaption}
\item[{bool}]{allowMultipleInstances = {\ttfamily false}, }
\item[{int}]{dialogErrorLevelsMask = {\ttfamily 0}}
\end{DoxyParamCaption}
)}}
\label{classmdt_application_a3b8798416e730f85e419566442adb77b}


Some initializations. 

Several things are done here:
\begin{DoxyItemize}
\item Check if another instance is running (if allowMultipleInstances Instance is false)
\item Search the system data directory
\item Init the home directories structure
\item Init the error system
\item Load translation files and set language according system settings. 
\begin{DoxyParams}{Parameters}
{\em allowMultipleInstances} & If true, multiple instance of application is allowed (but NOT multiple instance of \hyperlink{classmdt_application}{mdtApplication} in program !) \\
\hline
{\em dialogErrorLevelsMask} & Set the mask of errors that are displayed as dialogs in GUI. By default, no error (geven by \hyperlink{classmdt_error_out}{mdtErrorOut}) are displayed in GUI. \\
\hline
\end{DoxyParams}
\begin{DoxySeeAlso}{See also}
\hyperlink{classmdt_error_out_afa76bdf497b750829277566ec07d44d8}{mdtErrorOut::setDialogLevelsMask()} 

\hyperlink{classmdt_error_out}{mdtErrorOut} 
\end{DoxySeeAlso}

\end{DoxyItemize}

qDebug() $<$$<$ \char`\"{}mdtApplication , data dir: \char`\"{} $<$$<$ pvSystemDataDirPath;

qDebug() $<$$<$ \char`\"{}mdtApplication , log dir: \char`\"{} $<$$<$ pvLogDirPath;

if(!mdtErrorOut::init(pvLogDirPath + \char`\"{}/\char`\"{} + logFileName))\{

addTranslationsDirectory(pvSystemDataDirPath + \char`\"{}/i18n\char`\"{}); 



Definition at line 44 of file mdtApplication.cpp.

\hypertarget{classmdt_application_af4ff7f4cbb1c93a35f06ea197e3dde42}{
\index{mdtApplication@{mdtApplication}!installTranslator@{installTranslator}}
\index{installTranslator@{installTranslator}!mdtApplication@{mdtApplication}}
\subsubsection[{installTranslator}]{\setlength{\rightskip}{0pt plus 5cm}void mdtApplication::installTranslator (
\begin{DoxyParamCaption}
\item[{QTranslator $\ast$}]{translator}
\end{DoxyParamCaption}
)}}
\label{classmdt_application_af4ff7f4cbb1c93a35f06ea197e3dde42}


Adds the translator to the list of translators to be used for translations. 

Note: this method overloads QCoreApplication::installTranslator() . The difference is that it adds new translator to a list, and delete it all in destructor. Internally, it calls QApplication::installTranslator(). To keep trace of installed translators, you should allways use this method, and never mix calls with, for example, qApp-\/$>$\hyperlink{classmdt_application_af4ff7f4cbb1c93a35f06ea197e3dde42}{installTranslator()} or QCoreApplication::installTranslator() \begin{DoxyPrecond}{Precondition}
translator must point to a valid object. 
\end{DoxyPrecond}


Definition at line 172 of file mdtApplication.cpp.

\hypertarget{classmdt_application_a365ac79934070b0e5a42d2c7cd9b076d}{
\index{mdtApplication@{mdtApplication}!instance@{instance}}
\index{instance@{instance}!mdtApplication@{mdtApplication}}
\subsubsection[{instance}]{\setlength{\rightskip}{0pt plus 5cm}{\bf mdtApplication} $\ast$ mdtApplication::instance (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily  \mbox{[}static\mbox{]}}}}
\label{classmdt_application_a365ac79934070b0e5a42d2c7cd9b076d}


Get the instance of \hyperlink{classmdt_application}{mdtApplication}. 

This function, and returned pointer, should be used with care in multi-\/thread applicatopn ! 

Definition at line 126 of file mdtApplication.cpp.

\hypertarget{classmdt_application_ae83acc410a132b9972d6e961e0c79b0d}{
\index{mdtApplication@{mdtApplication}!removeCurrentTranslators@{removeCurrentTranslators}}
\index{removeCurrentTranslators@{removeCurrentTranslators}!mdtApplication@{mdtApplication}}
\subsubsection[{removeCurrentTranslators}]{\setlength{\rightskip}{0pt plus 5cm}void mdtApplication::removeCurrentTranslators (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
)}}
\label{classmdt_application_ae83acc410a132b9972d6e961e0c79b0d}


Remove installed translators. 

This will romove all translators installed with \hyperlink{classmdt_application_af4ff7f4cbb1c93a35f06ea197e3dde42}{installTranslator()}. \begin{DoxySeeAlso}{See also}
\hyperlink{classmdt_application_af4ff7f4cbb1c93a35f06ea197e3dde42}{installTranslator()} 
\end{DoxySeeAlso}


Definition at line 180 of file mdtApplication.cpp.

\hypertarget{classmdt_application_a79dbb5f3d889d7cd9b8909a4eb8bcce1}{
\index{mdtApplication@{mdtApplication}!setApplicationVersion@{setApplicationVersion}}
\index{setApplicationVersion@{setApplicationVersion}!mdtApplication@{mdtApplication}}
\subsubsection[{setApplicationVersion}]{\setlength{\rightskip}{0pt plus 5cm}void mdtApplication::setApplicationVersion (
\begin{DoxyParamCaption}
\item[{int}]{versionMajor, }
\item[{int}]{versionMinor, }
\item[{int}]{versionMicro}
\end{DoxyParamCaption}
)}}
\label{classmdt_application_a79dbb5f3d889d7cd9b8909a4eb8bcce1}


Build the application version with numeric values. 

Create a string with versionMajor.versionMinor.versionMicro , and calls QApplication::setApplicationVersion(). 

Definition at line 112 of file mdtApplication.cpp.

\hypertarget{classmdt_application_af17bb16e420c91af3d0ad1970714388c}{
\index{mdtApplication@{mdtApplication}!systemDataDirPath@{systemDataDirPath}}
\index{systemDataDirPath@{systemDataDirPath}!mdtApplication@{mdtApplication}}
\subsubsection[{systemDataDirPath}]{\setlength{\rightskip}{0pt plus 5cm}QString mdtApplication::systemDataDirPath (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily  \mbox{[}static\mbox{]}}}}
\label{classmdt_application_af17bb16e420c91af3d0ad1970714388c}


Get data dir path. 



return \hyperlink{classmdt_application_a365ac79934070b0e5a42d2c7cd9b076d}{instance()}-\/$>$pvSystemDataDirPath; 



Definition at line 133 of file mdtApplication.cpp.



The documentation for this class was generated from the following files:\begin{DoxyCompactItemize}
\item 
src/mdtutils/mdtApplication.h\item 
src/mdtutils/mdtApplication.cpp\end{DoxyCompactItemize}
