\hypertarget{classmdt_device}{\section{mdt\-Device Class Reference}
\label{classmdt_device}\index{mdt\-Device@{mdt\-Device}}
}


class \hyperlink{classmdt_device_ios_segment}{mdt\-Device\-Ios\-Segment};  




{\ttfamily \#include $<$mdt\-Device.\-h$>$}



Inheritance diagram for mdt\-Device\-:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classmdt_device__inherit__graph}
\end{center}
\end{figure}


Collaboration diagram for mdt\-Device\-:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=218pt]{classmdt_device__coll__graph}
\end{center}
\end{figure}
\subsection*{Public Types}
\begin{DoxyCompactItemize}
\item 
enum \hyperlink{classmdt_device_a8bcf508fbd38a8f0b235e8a9b00319f6}{State\-\_\-t} \{ \hyperlink{classmdt_device_a8bcf508fbd38a8f0b235e8a9b00319f6aef70e46fd3bbc21e3e1f0b6815e750c0}{State\-\_\-t\-::\-Disconnected}, 
\hyperlink{classmdt_device_a8bcf508fbd38a8f0b235e8a9b00319f6ae321c53b354930ba96f0243e652df458}{State\-\_\-t\-::\-Connecting}, 
\hyperlink{classmdt_device_a8bcf508fbd38a8f0b235e8a9b00319f6ae7d31fc0602fb2ede144d18cdffd816b}{State\-\_\-t\-::\-Ready}, 
\hyperlink{classmdt_device_a8bcf508fbd38a8f0b235e8a9b00319f6a902b0d55fddef6f8d651fe1035b7d4bd}{State\-\_\-t\-::\-Error}
 \}
\begin{DoxyCompactList}\small\item\em State of device. \end{DoxyCompactList}\end{DoxyCompactItemize}
\subsection*{Public Slots}
\begin{DoxyCompactItemize}
\item 
void \hyperlink{classmdt_device_a14634fec6cd6bae810562b3bd88a5c05}{run\-Queries} ()
\begin{DoxyCompactList}\small\item\em Queries to send periodically. \end{DoxyCompactList}\end{DoxyCompactItemize}
\subsection*{Signals}
\begin{DoxyCompactItemize}
\item 
void \hyperlink{classmdt_device_aedb66d14aeaba33cdfd6458281ee9862}{state\-Changed} (\hyperlink{classmdt_device_a8bcf508fbd38a8f0b235e8a9b00319f6}{State\-\_\-t} state)
\begin{DoxyCompactList}\small\item\em Emitted when state has changed. \end{DoxyCompactList}\item 
void \hyperlink{classmdt_device_a3fbc6e71241e2e9daa2d8557f870c03c}{status\-Message\-Changed} (const Q\-String \&message, const Q\-String \&details, int timeout)
\begin{DoxyCompactList}\small\item\em Emitted when a new status message is to display. \end{DoxyCompactList}\end{DoxyCompactItemize}
\subsection*{Public Member Functions}
\begin{DoxyCompactItemize}
\item 
\hyperlink{classmdt_device_a6d501791e7243358cc61b144254b80db}{mdt\-Device} (Q\-Object $\ast$parent=0)
\begin{DoxyCompactList}\small\item\em Construct a device object. \end{DoxyCompactList}\item 
virtual \hyperlink{classmdt_device_ac2a9cfd6042f3f9d8da4e84f044d3f4a}{$\sim$mdt\-Device} ()
\begin{DoxyCompactList}\small\item\em Destructor. \end{DoxyCompactList}\item 
void \hyperlink{classmdt_device_a80186f1aa6fbdc13f1652de978c35518}{set\-Name} (const Q\-String \&\hyperlink{classmdt_device_a7ad893c6885dbaef5a6cb980bfe627e0}{name})
\begin{DoxyCompactList}\small\item\em Set the device name. \end{DoxyCompactList}\item 
Q\-String \hyperlink{classmdt_device_a7ad893c6885dbaef5a6cb980bfe627e0}{name} () const 
\begin{DoxyCompactList}\small\item\em Get device name. \end{DoxyCompactList}\item 
void \hyperlink{classmdt_device_af6fddf7fba1f54e481a4f3445db64d98}{set\-Identification} (const Q\-Variant \&id)
\begin{DoxyCompactList}\small\item\em Set device identification. \end{DoxyCompactList}\item 
Q\-Variant \hyperlink{classmdt_device_a54845e1af6f6f98de7de79c3df9ac7b5}{identification} () const 
\begin{DoxyCompactList}\small\item\em Get device identification. \end{DoxyCompactList}\item 
virtual bool \hyperlink{classmdt_device_ac57bc624391a4035b20bfd29dbbea7da}{connect\-To\-Device} (const \hyperlink{classmdt_device_address}{mdt\-Device\-Address} \&address)
\begin{DoxyCompactList}\small\item\em Search and connect to physical device. \end{DoxyCompactList}\item 
void \hyperlink{classmdt_device_a2b694a37d9464d27214bdeceec220998}{disconnect\-From\-Device} ()
\begin{DoxyCompactList}\small\item\em Disconnect from device. \end{DoxyCompactList}\item 
void \hyperlink{classmdt_device_aa241c40514683254990e742cf1bbb155}{set\-Back\-To\-Ready\-State\-Timeout} (int timeout)
\begin{DoxyCompactList}\small\item\em Set back to ready state timeout. \end{DoxyCompactList}\item 
virtual bool \hyperlink{classmdt_device_a326ca430ec756d5e1203f70b7be4b58e}{is\-Ready} ()
\begin{DoxyCompactList}\small\item\em Check if device is ready. \end{DoxyCompactList}\item 
void \hyperlink{classmdt_device_a721c5bf2cfa0eef5304333f08da182f7}{start} (int query\-Interval)
\begin{DoxyCompactList}\small\item\em Start periodic device querying. \end{DoxyCompactList}\item 
void \hyperlink{classmdt_device_adc7ff8f01d68506283a3d0cc6bc25407}{stop} ()
\begin{DoxyCompactList}\small\item\em Stop periodic device querying. \end{DoxyCompactList}\item 
void \hyperlink{classmdt_device_a0d6416888307cbfc5fcd7c22fc0039d7}{wait} (int t)
\begin{DoxyCompactList}\small\item\em Wait some time without breaking main event loop. \end{DoxyCompactList}\item 
\hyperlink{classmdt_error}{mdt\-Error} \hyperlink{classmdt_device_a79ca328ff9e9f413a38c1cc9c9267cee}{last\-Error} () const 
\begin{DoxyCompactList}\small\item\em Get last error. \end{DoxyCompactList}\item 
\hyperlink{classmdt_device_a8bcf508fbd38a8f0b235e8a9b00319f6}{State\-\_\-t} \hyperlink{classmdt_device_ad7fb4c3cafc87cba9eca588ad226f662}{current\-State} () const 
\begin{DoxyCompactList}\small\item\em Get current state. \end{DoxyCompactList}\end{DoxyCompactItemize}
\subsection*{Protected Member Functions}
\begin{DoxyCompactItemize}
\item 
Q\-String \hyperlink{classmdt_device_add9f8ec2f944b5c5f92a97424a194177}{device\-Id\-String} () const 
\begin{DoxyCompactList}\small\item\em Get device identification string. \end{DoxyCompactList}\item 
virtual bool \hyperlink{classmdt_device_acba50968d201ad95c4eaa2ab2ed48b4f}{queries\-Sequence} ()
\begin{DoxyCompactList}\small\item\em Sequence of queries to send periodically. \end{DoxyCompactList}\item 
void \hyperlink{classmdt_device_ad2025928441ddca71523ed52a02e89e4}{set\-Current\-State} (\hyperlink{classmdt_device_a8bcf508fbd38a8f0b235e8a9b00319f6}{State\-\_\-t} state)
\begin{DoxyCompactList}\small\item\em Set current state. \end{DoxyCompactList}\item 
virtual void \hyperlink{classmdt_device_ad2646ad2fb99b40c9f303b24a7ee971e}{state\-Changed\-Event} (\hyperlink{classmdt_device_a8bcf508fbd38a8f0b235e8a9b00319f6}{State\-\_\-t} new\-State)
\begin{DoxyCompactList}\small\item\em Called when current state has changed. \end{DoxyCompactList}\item 
virtual void \hyperlink{classmdt_device_afe3dec5b38bb5db7f5f6f250caa5f577}{disconnect\-From\-Device\-Event} ()
\begin{DoxyCompactList}\small\item\em Called by \hyperlink{classmdt_device_a2b694a37d9464d27214bdeceec220998}{disconnect\-From\-Device()} \end{DoxyCompactList}\item 
virtual void \hyperlink{classmdt_device_a30b8db129316183a10d38a569d431c92}{name\-Changed\-Event} (const Q\-String \&new\-Name)
\begin{DoxyCompactList}\small\item\em Called by \hyperlink{classmdt_device_a80186f1aa6fbdc13f1652de978c35518}{set\-Name()} \end{DoxyCompactList}\end{DoxyCompactItemize}
\subsection*{Protected Attributes}
\begin{DoxyCompactItemize}
\item 
\hyperlink{classmdt_error}{mdt\-Error} \hyperlink{classmdt_device_ab54221195bbf9363f7e7f10ef38a3909}{pv\-Last\-Error}
\begin{DoxyCompactList}\small\item\em Last error object. \end{DoxyCompactList}\end{DoxyCompactItemize}


\subsection{Detailed Description}
class \hyperlink{classmdt_device_ios_segment}{mdt\-Device\-Ios\-Segment}; 

Base class for a device connected to a port

Querying a device can be done several ways. Some devices sends a confirmation after each query.

Some queries (f.\-ex. read a input value or state) give a result after query. In some applications, we need to display the reult priodically. In other application, we need to send the query and wait on result before we can continue. This base class gives a interface for these two cases.

At basis, all query methods are not blocking by default. The normal way is to connect \hyperlink{classmdt_port_manager_a416a24db1048e9f66aef27ea810954d2}{mdt\-Port\-Manager\-::new\-Transaction\-Done()} to decode\-Readen\-Frame() slot (must be done in subclass). This way, a query will be sent to device and method returns. When device returns a result, \hyperlink{classmdt_port_manager}{mdt\-Port\-Manager} will send the new\-Transaction\-Done() signal, and decoding will be processed in decode\-Readen\-Frame() and I/\-O's are updated.

Because the blocking behaviour is sometimes needed, the concept of transaction was implemented in \hyperlink{classmdt_port_manager}{mdt\-Port\-Manager}. At first, we tell the query method (for example get\-Analog\-Input\-Value() ) that we will wait on a reply by setting the wait\-On\-Reply flag. Then, the query is sent to device and a transaction I\-D is added to a list (see \hyperlink{classmdt_port_manager}{mdt\-Port\-Manager} for details). At next, wait\-Transaction\-Done() is called, and finally result is returned. Note that wait\-Transaction\-Done() will not breack the Qt's event loop because it uses the \hyperlink{classmdt_port_manager_aaa85e0200aba0e0f4392dfe01abae2cf}{mdt\-Port\-Manager\-::wait()} method (see documentation of \hyperlink{classmdt_port_manager}{mdt\-Port\-Manager} for details).

If it is needed to continiusly update the representation of device's inputs (digital/analog I/\-O, voltage, temperature, ...), two things can happen\-:
\begin{DoxyItemize}
\item 1) Used port can receive data continiusly (f.\-ex. R\-S232) and device send data automatically
\item 2) Used port need that a request is sent for each read (T\-C\-P, U\-S\-B, ...) or device need such request Continous update is typical usefull for a G\-U\-I representing a real device.
\end{DoxyItemize}

A other usage is automated sequence. In this case, the sequence will tell when it need to set a output and when a input value is reuqierd.

A device can accept one or many request before results must be read. This depends most case on used port and protocol.

It can be useful to find on witch port a device is attached (f.\-ex. setup of a automated test application). For this, \hyperlink{classmdt_device_ac57bc624391a4035b20bfd29dbbea7da}{connect\-To\-Device()} was introduced.

A device can have several states (ready, busy, disconnected, ...). To help the application programmer to keep consistency, this states are updated in this class using \hyperlink{classmdt_port_manager}{mdt\-Port\-Manager} 's state machine. This state machine is based on \hyperlink{class_q_state_machine}{Q\-State\-Machine}.

Notes about I/\-O container\-: In first version of \hyperlink{classmdt_device}{mdt\-Device}, I/\-O container (\hyperlink{classmdt_device_ios}{mdt\-Device\-Ios} object) was handled by caller. Experience showed that this was a bad solution. Now, the container is created, and destroyed, by \hyperlink{classmdt_device}{mdt\-Device} itself. To deal with I/\-O container, some methods are available\-:
\begin{DoxyItemize}
\item add\-Input(mdt\-Analog\-Io $\ast$) \-: add a analog input.
\item add\-Inputs(\-Q\-List$<$mdt\-Analog\-Io$\ast$$>$ \&) \-: add a list of analog inputs.
\item add\-Output(mdt\-Analog\-Io $\ast$) \-: add a analog output.
\item add\-Outputs(\-Q\-List$<$mdt\-Analog\-Io$\ast$$>$ \&) \-: add a list of analog outputs.
\item add\-Input(mdt\-Digital\-Io $\ast$) \-: add a digital input.
\item add\-Inputs(\-Q\-List$<$mdt\-Digital\-Io$\ast$$>$ \&) \-: add a list of digital inputs.
\item add\-Output(mdt\-Digital\-Io $\ast$) \-: add a digital output.
\item add\-Outputs(\-Q\-List$<$mdt\-Digital\-Io$\ast$$>$ \&) \-: add a list of digital outputs.
\item ios() \-: access I/\-O container.
\item delete\-Ios() \-: delete all I/\-O in container. 
\end{DoxyItemize}

Definition at line 109 of file mdt\-Device.\-h.



\subsection{Member Enumeration Documentation}
\hypertarget{classmdt_device_a8bcf508fbd38a8f0b235e8a9b00319f6}{\index{mdt\-Device@{mdt\-Device}!State\-\_\-t@{State\-\_\-t}}
\index{State\-\_\-t@{State\-\_\-t}!mdtDevice@{mdt\-Device}}
\subsubsection[{State\-\_\-t}]{\setlength{\rightskip}{0pt plus 5cm}enum {\bf mdt\-Device\-::\-State\-\_\-t}\hspace{0.3cm}{\ttfamily [strong]}}}\label{classmdt_device_a8bcf508fbd38a8f0b235e8a9b00319f6}


State of device. 

\begin{Desc}
\item[Enumerator]\par
\begin{description}
\index{Disconnected@{Disconnected}!mdt\-Device@{mdt\-Device}}\index{mdt\-Device@{mdt\-Device}!Disconnected@{Disconnected}}\item[{\em 
\hypertarget{classmdt_device_a8bcf508fbd38a8f0b235e8a9b00319f6aef70e46fd3bbc21e3e1f0b6815e750c0}{Disconnected}\label{classmdt_device_a8bcf508fbd38a8f0b235e8a9b00319f6aef70e46fd3bbc21e3e1f0b6815e750c0}
}]Device is disconnected \index{Connecting@{Connecting}!mdt\-Device@{mdt\-Device}}\index{mdt\-Device@{mdt\-Device}!Connecting@{Connecting}}\item[{\em 
\hypertarget{classmdt_device_a8bcf508fbd38a8f0b235e8a9b00319f6ae321c53b354930ba96f0243e652df458}{Connecting}\label{classmdt_device_a8bcf508fbd38a8f0b235e8a9b00319f6ae321c53b354930ba96f0243e652df458}
}]A connection is about to be established with the device \index{Ready@{Ready}!mdt\-Device@{mdt\-Device}}\index{mdt\-Device@{mdt\-Device}!Ready@{Ready}}\item[{\em 
\hypertarget{classmdt_device_a8bcf508fbd38a8f0b235e8a9b00319f6ae7d31fc0602fb2ede144d18cdffd816b}{Ready}\label{classmdt_device_a8bcf508fbd38a8f0b235e8a9b00319f6ae7d31fc0602fb2ede144d18cdffd816b}
}]Device attached/connection established, ready for processing \index{Error@{Error}!mdt\-Device@{mdt\-Device}}\index{mdt\-Device@{mdt\-Device}!Error@{Error}}\item[{\em 
\hypertarget{classmdt_device_a8bcf508fbd38a8f0b235e8a9b00319f6a902b0d55fddef6f8d651fe1035b7d4bd}{Error}\label{classmdt_device_a8bcf508fbd38a8f0b235e8a9b00319f6a902b0d55fddef6f8d651fe1035b7d4bd}
}]A unhandled error occured \end{description}
\end{Desc}


Definition at line 117 of file mdt\-Device.\-h.



\subsection{Constructor \& Destructor Documentation}
\hypertarget{classmdt_device_a6d501791e7243358cc61b144254b80db}{\index{mdt\-Device@{mdt\-Device}!mdt\-Device@{mdt\-Device}}
\index{mdt\-Device@{mdt\-Device}!mdtDevice@{mdt\-Device}}
\subsubsection[{mdt\-Device}]{\setlength{\rightskip}{0pt plus 5cm}mdt\-Device\-::mdt\-Device (
\begin{DoxyParamCaption}
\item[{Q\-Object $\ast$}]{parent = {\ttfamily 0}}
\end{DoxyParamCaption}
)}}\label{classmdt_device_a6d501791e7243358cc61b144254b80db}


Construct a device object. 



Definition at line 27 of file mdt\-Device.\-cpp.



References run\-Queries(), and set\-Name().

\hypertarget{classmdt_device_ac2a9cfd6042f3f9d8da4e84f044d3f4a}{\index{mdt\-Device@{mdt\-Device}!$\sim$mdt\-Device@{$\sim$mdt\-Device}}
\index{$\sim$mdt\-Device@{$\sim$mdt\-Device}!mdtDevice@{mdt\-Device}}
\subsubsection[{$\sim$mdt\-Device}]{\setlength{\rightskip}{0pt plus 5cm}mdt\-Device\-::$\sim$mdt\-Device (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [virtual]}}}\label{classmdt_device_ac2a9cfd6042f3f9d8da4e84f044d3f4a}


Destructor. 

Will disconnect from device and delete I/\-O container. 

Definition at line 47 of file mdt\-Device.\-cpp.



References disconnect\-From\-Device().



\subsection{Member Function Documentation}
\hypertarget{classmdt_device_ac57bc624391a4035b20bfd29dbbea7da}{\index{mdt\-Device@{mdt\-Device}!connect\-To\-Device@{connect\-To\-Device}}
\index{connect\-To\-Device@{connect\-To\-Device}!mdtDevice@{mdt\-Device}}
\subsubsection[{connect\-To\-Device}]{\setlength{\rightskip}{0pt plus 5cm}bool mdt\-Device\-::connect\-To\-Device (
\begin{DoxyParamCaption}
\item[{const {\bf mdt\-Device\-Address} \&}]{address}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [virtual]}}}\label{classmdt_device_ac57bc624391a4035b20bfd29dbbea7da}


Search and connect to physical device. 

Will scan available ports and open the first port that has device attached matching request.


\begin{DoxyParams}{Parameters}
{\em dev\-Info} & Requested device's informations. \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
A error listed in \hyperlink{classmdt_abstract_port_ad4121bb930c95887e77f8bafa065a85e}{mdt\-Abstract\-Port\-::error\-\_\-t} (No\-Error on success)
\end{DoxyReturn}
Note\-: default implementation does nothing and returns allways a Unhandled\-Error. See subclass documentation for more details.\-virtual \hyperlink{classmdt_abstract_port_ad4121bb930c95887e77f8bafa065a85e}{mdt\-Abstract\-Port\-::error\-\_\-t} connect\-To\-Device(const mdt\-Device\-Info \&dev\-Info);

Connect to physical device

Note\-: default implementation does nothing and returns allways false. See subclass documentation for more details. 

Definition at line 74 of file mdt\-Device.\-cpp.

\hypertarget{classmdt_device_ad7fb4c3cafc87cba9eca588ad226f662}{\index{mdt\-Device@{mdt\-Device}!current\-State@{current\-State}}
\index{current\-State@{current\-State}!mdtDevice@{mdt\-Device}}
\subsubsection[{current\-State}]{\setlength{\rightskip}{0pt plus 5cm}{\bf State\-\_\-t} mdt\-Device\-::current\-State (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
) const\hspace{0.3cm}{\ttfamily [inline]}}}\label{classmdt_device_ad7fb4c3cafc87cba9eca588ad226f662}


Get current state. 



Definition at line 244 of file mdt\-Device.\-h.



Referenced by run\-Queries(), mdt\-Multi\-Io\-Device\-::set\-Analog\-Output\-Value(), and mdt\-Multi\-Io\-Device\-::set\-Digital\-Output\-Value().

\hypertarget{classmdt_device_add9f8ec2f944b5c5f92a97424a194177}{\index{mdt\-Device@{mdt\-Device}!device\-Id\-String@{device\-Id\-String}}
\index{device\-Id\-String@{device\-Id\-String}!mdtDevice@{mdt\-Device}}
\subsubsection[{device\-Id\-String}]{\setlength{\rightskip}{0pt plus 5cm}Q\-String mdt\-Device\-::device\-Id\-String (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
) const\hspace{0.3cm}{\ttfamily [inline]}, {\ttfamily [protected]}}}\label{classmdt_device_add9f8ec2f944b5c5f92a97424a194177}


Get device identification string. 

Can be used for error messages. Returns a string with "Device 'device\-Name' \-: " 

Definition at line 264 of file mdt\-Device.\-h.



References name().



Referenced by mdt\-Device\-U3606\-A\-::setup\-Low\-Resistance\-Measure(), mdt\-Device\-U3606\-A\-::setup\-Resistance\-Measure(), and mdt\-Device\-U3606\-A\-::setup\-Voltage\-Dc\-Measure().

\hypertarget{classmdt_device_a2b694a37d9464d27214bdeceec220998}{\index{mdt\-Device@{mdt\-Device}!disconnect\-From\-Device@{disconnect\-From\-Device}}
\index{disconnect\-From\-Device@{disconnect\-From\-Device}!mdtDevice@{mdt\-Device}}
\subsubsection[{disconnect\-From\-Device}]{\setlength{\rightskip}{0pt plus 5cm}void mdt\-Device\-::disconnect\-From\-Device (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
)}}\label{classmdt_device_a2b694a37d9464d27214bdeceec220998}


Disconnect from device. 

Will stop periodic querying ( see \hyperlink{classmdt_device_adc7ff8f01d68506283a3d0cc6bc25407}{stop()} ).

Will also call \hyperlink{classmdt_device_afe3dec5b38bb5db7f5f6f250caa5f577}{disconnect\-From\-Device\-Event()}. 

Definition at line 80 of file mdt\-Device.\-cpp.



References disconnect\-From\-Device\-Event(), and stop().



Referenced by $\sim$mdt\-Device().

\hypertarget{classmdt_device_afe3dec5b38bb5db7f5f6f250caa5f577}{\index{mdt\-Device@{mdt\-Device}!disconnect\-From\-Device\-Event@{disconnect\-From\-Device\-Event}}
\index{disconnect\-From\-Device\-Event@{disconnect\-From\-Device\-Event}!mdtDevice@{mdt\-Device}}
\subsubsection[{disconnect\-From\-Device\-Event}]{\setlength{\rightskip}{0pt plus 5cm}virtual void mdt\-Device\-::disconnect\-From\-Device\-Event (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [inline]}, {\ttfamily [protected]}, {\ttfamily [virtual]}}}\label{classmdt_device_afe3dec5b38bb5db7f5f6f250caa5f577}


Called by \hyperlink{classmdt_device_a2b694a37d9464d27214bdeceec220998}{disconnect\-From\-Device()} 

Must be reimplemented in subclass to disconnect from device, stop threads, close port, ...

This default implementation does nothing, it's also not necessery to call this base function from subclass. 

Reimplemented in \hyperlink{classmdt_device_scpi_a32498c40ac609ac157cb332bc4e7ac51}{mdt\-Device\-Scpi}.



Definition at line 313 of file mdt\-Device.\-h.



Referenced by disconnect\-From\-Device().

\hypertarget{classmdt_device_a54845e1af6f6f98de7de79c3df9ac7b5}{\index{mdt\-Device@{mdt\-Device}!identification@{identification}}
\index{identification@{identification}!mdtDevice@{mdt\-Device}}
\subsubsection[{identification}]{\setlength{\rightskip}{0pt plus 5cm}Q\-Variant mdt\-Device\-::identification (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
) const\hspace{0.3cm}{\ttfamily [inline]}}}\label{classmdt_device_a54845e1af6f6f98de7de79c3df9ac7b5}


Get device identification. 



Definition at line 152 of file mdt\-Device.\-h.

\hypertarget{classmdt_device_a326ca430ec756d5e1203f70b7be4b58e}{\index{mdt\-Device@{mdt\-Device}!is\-Ready@{is\-Ready}}
\index{is\-Ready@{is\-Ready}!mdtDevice@{mdt\-Device}}
\subsubsection[{is\-Ready}]{\setlength{\rightskip}{0pt plus 5cm}virtual bool mdt\-Device\-::is\-Ready (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [inline]}, {\ttfamily [virtual]}}}\label{classmdt_device_a326ca430ec756d5e1203f70b7be4b58e}


Check if device is ready. 

This default implementation returns allways false.

Note\-: \hyperlink{classmdt_device_a326ca430ec756d5e1203f70b7be4b58e}{is\-Ready()} should return true only if device it ready for querying. 

Definition at line 206 of file mdt\-Device.\-h.



Referenced by start().

\hypertarget{classmdt_device_a79ca328ff9e9f413a38c1cc9c9267cee}{\index{mdt\-Device@{mdt\-Device}!last\-Error@{last\-Error}}
\index{last\-Error@{last\-Error}!mdtDevice@{mdt\-Device}}
\subsubsection[{last\-Error}]{\setlength{\rightskip}{0pt plus 5cm}{\bf mdt\-Error} mdt\-Device\-::last\-Error (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
) const\hspace{0.3cm}{\ttfamily [inline]}}}\label{classmdt_device_a79ca328ff9e9f413a38c1cc9c9267cee}


Get last error. 

\begin{DoxyRefDesc}{Todo}
\item[\hyperlink{todo__todo000010}{Todo}]Not completly used currently, must be implemented in this class + subclasses . \end{DoxyRefDesc}


Definition at line 237 of file mdt\-Device.\-h.



References pv\-Last\-Error.

\hypertarget{classmdt_device_a7ad893c6885dbaef5a6cb980bfe627e0}{\index{mdt\-Device@{mdt\-Device}!name@{name}}
\index{name@{name}!mdtDevice@{mdt\-Device}}
\subsubsection[{name}]{\setlength{\rightskip}{0pt plus 5cm}Q\-String mdt\-Device\-::name (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
) const}}\label{classmdt_device_a7ad893c6885dbaef5a6cb980bfe627e0}


Get device name. 



Definition at line 59 of file mdt\-Device.\-cpp.



Referenced by mdt\-Device\-Modbus\-Wago\-::detect\-Ios(), device\-Id\-String(), mdt\-Device\-Modbus\-Wago\-Module\-::device\-Name(), mdt\-Multi\-Io\-Device\-::get\-Analog\-Input\-Value(), mdt\-Multi\-Io\-Device\-::get\-Analog\-Input\-Value\-At(), mdt\-Multi\-Io\-Device\-::get\-Analog\-Output\-Value(), mdt\-Multi\-Io\-Device\-::get\-Analog\-Output\-Value\-At(), mdt\-Multi\-Io\-Device\-::get\-Digital\-Input\-Value(), mdt\-Multi\-Io\-Device\-::get\-Digital\-Input\-Value\-At(), mdt\-Multi\-Io\-Device\-::get\-Digital\-Output\-Value(), mdt\-Multi\-Io\-Device\-::get\-Digital\-Output\-Value\-At(), mdt\-Device\-Modbus\-Wago\-::is\-Wago750(), mdt\-Device\-Modbus\-Wago\-Module\-::read\-Registers(), mdt\-Device\-Modbus\-Wago\-Module\-::read\-Status\-Bytes(), mdt\-Multi\-Io\-Device\-::set\-Analog\-Output\-Value(), mdt\-Multi\-Io\-Device\-::set\-Analog\-Output\-Value\-At(), mdt\-Multi\-Io\-Device\-::set\-Digital\-Output\-Value(), mdt\-Multi\-Io\-Device\-::set\-Digital\-Output\-Value\-At(), set\-Name(), mdt\-Device\-Modbus\-Wago\-Module\-::write\-Control\-Bytes(), and mdt\-Device\-Modbus\-Wago\-Module\-::write\-Registers().

\hypertarget{classmdt_device_a30b8db129316183a10d38a569d431c92}{\index{mdt\-Device@{mdt\-Device}!name\-Changed\-Event@{name\-Changed\-Event}}
\index{name\-Changed\-Event@{name\-Changed\-Event}!mdtDevice@{mdt\-Device}}
\subsubsection[{name\-Changed\-Event}]{\setlength{\rightskip}{0pt plus 5cm}virtual void mdt\-Device\-::name\-Changed\-Event (
\begin{DoxyParamCaption}
\item[{const Q\-String \&}]{new\-Name}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [inline]}, {\ttfamily [protected]}, {\ttfamily [virtual]}}}\label{classmdt_device_a30b8db129316183a10d38a569d431c92}


Called by \hyperlink{classmdt_device_a80186f1aa6fbdc13f1652de978c35518}{set\-Name()} 

Can be reimplemented in subclass if some actions are needed when name has changed.

This default implementation does nothing, it's also not necessery to call this base function from subclass. 

Reimplemented in \hyperlink{classmdt_device_scpi_a750ebbf843bad40b442a9d965c6f0e44}{mdt\-Device\-Scpi}.



Definition at line 325 of file mdt\-Device.\-h.



Referenced by set\-Name().

\hypertarget{classmdt_device_acba50968d201ad95c4eaa2ab2ed48b4f}{\index{mdt\-Device@{mdt\-Device}!queries\-Sequence@{queries\-Sequence}}
\index{queries\-Sequence@{queries\-Sequence}!mdtDevice@{mdt\-Device}}
\subsubsection[{queries\-Sequence}]{\setlength{\rightskip}{0pt plus 5cm}bool mdt\-Device\-::queries\-Sequence (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [protected]}, {\ttfamily [virtual]}}}\label{classmdt_device_acba50968d201ad95c4eaa2ab2ed48b4f}


Sequence of queries to send periodically. 

This method is called from \hyperlink{classmdt_device_a14634fec6cd6bae810562b3bd88a5c05}{run\-Queries()}.

\begin{DoxyReturn}{Returns}
true if all queries are sent successfully.
\end{DoxyReturn}
Subclass notes\-:\par

\begin{DoxyItemize}
\item This default implementation does nothing and allways returns false.
\item This method can be reimplemented periodic queries must be sent to device. 
\end{DoxyItemize}

Reimplemented in \hyperlink{classmdt_device_modbus_a3b83b926ed1f9c3bdf7024de2745c285}{mdt\-Device\-Modbus}.



Definition at line 123 of file mdt\-Device.\-cpp.



Referenced by run\-Queries().

\hypertarget{classmdt_device_a14634fec6cd6bae810562b3bd88a5c05}{\index{mdt\-Device@{mdt\-Device}!run\-Queries@{run\-Queries}}
\index{run\-Queries@{run\-Queries}!mdtDevice@{mdt\-Device}}
\subsubsection[{run\-Queries}]{\setlength{\rightskip}{0pt plus 5cm}void mdt\-Device\-::run\-Queries (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [slot]}}}\label{classmdt_device_a14634fec6cd6bae810562b3bd88a5c05}


Queries to send periodically. 

This slot is periodically called after a call of \hyperlink{classmdt_device_a721c5bf2cfa0eef5304333f08da182f7}{start()}. 

Definition at line 115 of file mdt\-Device.\-cpp.



References current\-State(), queries\-Sequence(), and Ready.



Referenced by mdt\-Device().

\hypertarget{classmdt_device_aa241c40514683254990e742cf1bbb155}{\index{mdt\-Device@{mdt\-Device}!set\-Back\-To\-Ready\-State\-Timeout@{set\-Back\-To\-Ready\-State\-Timeout}}
\index{set\-Back\-To\-Ready\-State\-Timeout@{set\-Back\-To\-Ready\-State\-Timeout}!mdtDevice@{mdt\-Device}}
\subsubsection[{set\-Back\-To\-Ready\-State\-Timeout}]{\setlength{\rightskip}{0pt plus 5cm}void mdt\-Device\-::set\-Back\-To\-Ready\-State\-Timeout (
\begin{DoxyParamCaption}
\item[{int}]{timeout}
\end{DoxyParamCaption}
)}}\label{classmdt_device_aa241c40514683254990e742cf1bbb155}


Set back to ready state timeout. 

After some event (device disconnected, response timeout, ...) the state can be changed from Ready to another.

Note\-: if state is different than Ready, the slots set\-Analog\-Output\-Value(int) and set\-Digital\-Output\-State(int) will return immediately, without trying to send a request.

In some application, it can be usefull that state comes back automatically to ready.


\begin{DoxyParams}{Parameters}
{\em timeout} & Time before go back to ready state \mbox{[}ms\mbox{]} If timeout is $<$ 0, device still in current state, and set\-State\-Ready() can be used. \\
\hline
\end{DoxyParams}


Definition at line 86 of file mdt\-Device.\-cpp.



Referenced by mdt\-Device\-Modbus\-::mdt\-Device\-Modbus().

\hypertarget{classmdt_device_ad2025928441ddca71523ed52a02e89e4}{\index{mdt\-Device@{mdt\-Device}!set\-Current\-State@{set\-Current\-State}}
\index{set\-Current\-State@{set\-Current\-State}!mdtDevice@{mdt\-Device}}
\subsubsection[{set\-Current\-State}]{\setlength{\rightskip}{0pt plus 5cm}void mdt\-Device\-::set\-Current\-State (
\begin{DoxyParamCaption}
\item[{{\bf mdt\-Device\-::\-State\-\_\-t}}]{state}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [protected]}}}\label{classmdt_device_ad2025928441ddca71523ed52a02e89e4}


Set current state. 

Will call \hyperlink{classmdt_device_ad2646ad2fb99b40c9f303b24a7ee971e}{state\-Changed\-Event()} and emit \hyperlink{classmdt_device_aedb66d14aeaba33cdfd6458281ee9862}{state\-Changed()} signal.

Subclass must call tis function to update current state. 

Definition at line 128 of file mdt\-Device.\-cpp.



References Ready, state\-Changed(), and state\-Changed\-Event().

\hypertarget{classmdt_device_af6fddf7fba1f54e481a4f3445db64d98}{\index{mdt\-Device@{mdt\-Device}!set\-Identification@{set\-Identification}}
\index{set\-Identification@{set\-Identification}!mdtDevice@{mdt\-Device}}
\subsubsection[{set\-Identification}]{\setlength{\rightskip}{0pt plus 5cm}void mdt\-Device\-::set\-Identification (
\begin{DoxyParamCaption}
\item[{const Q\-Variant \&}]{id}
\end{DoxyParamCaption}
)}}\label{classmdt_device_af6fddf7fba1f54e481a4f3445db64d98}


Set device identification. 



Definition at line 64 of file mdt\-Device.\-cpp.

\hypertarget{classmdt_device_a80186f1aa6fbdc13f1652de978c35518}{\index{mdt\-Device@{mdt\-Device}!set\-Name@{set\-Name}}
\index{set\-Name@{set\-Name}!mdtDevice@{mdt\-Device}}
\subsubsection[{set\-Name}]{\setlength{\rightskip}{0pt plus 5cm}void mdt\-Device\-::set\-Name (
\begin{DoxyParamCaption}
\item[{const Q\-String \&}]{name}
\end{DoxyParamCaption}
)}}\label{classmdt_device_a80186f1aa6fbdc13f1652de978c35518}


Set the device name. 

Will also call \hyperlink{classmdt_device_a30b8db129316183a10d38a569d431c92}{name\-Changed\-Event()} 

Definition at line 53 of file mdt\-Device.\-cpp.



References name(), and name\-Changed\-Event().



Referenced by mdt\-Device(), and mdt\-Modbus\-Io\-Tool\-::mdt\-Modbus\-Io\-Tool().

\hypertarget{classmdt_device_a721c5bf2cfa0eef5304333f08da182f7}{\index{mdt\-Device@{mdt\-Device}!start@{start}}
\index{start@{start}!mdtDevice@{mdt\-Device}}
\subsubsection[{start}]{\setlength{\rightskip}{0pt plus 5cm}void mdt\-Device\-::start (
\begin{DoxyParamCaption}
\item[{int}]{query\-Interval}
\end{DoxyParamCaption}
)}}\label{classmdt_device_a721c5bf2cfa0eef5304333f08da182f7}


Start periodic device querying. 

Internally, the \hyperlink{classmdt_device_a14634fec6cd6bae810562b3bd88a5c05}{run\-Queries()} slot will be called each query\-Interval of time.

Note\-: if device is ready, querying starts immediatly, else it will start once device becomes ready.

\begin{DoxySeeAlso}{See Also}
\hyperlink{classmdt_device_a326ca430ec756d5e1203f70b7be4b58e}{is\-Ready()} 
\end{DoxySeeAlso}

\begin{DoxyParams}{Parameters}
{\em query\-Interval} & Query interval \mbox{[}ms\mbox{]} \\
\hline
\end{DoxyParams}


Definition at line 91 of file mdt\-Device.\-cpp.



References is\-Ready().



Referenced by mdt\-Modbus\-Io\-Tool\-::mdt\-Modbus\-Io\-Tool().

\hypertarget{classmdt_device_aedb66d14aeaba33cdfd6458281ee9862}{\index{mdt\-Device@{mdt\-Device}!state\-Changed@{state\-Changed}}
\index{state\-Changed@{state\-Changed}!mdtDevice@{mdt\-Device}}
\subsubsection[{state\-Changed}]{\setlength{\rightskip}{0pt plus 5cm}void mdt\-Device\-::state\-Changed (
\begin{DoxyParamCaption}
\item[{{\bf State\-\_\-t}}]{state}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [signal]}}}\label{classmdt_device_aedb66d14aeaba33cdfd6458281ee9862}


Emitted when state has changed. 



Referenced by mdt\-Device\-Modbus\-::mdt\-Device\-Modbus(), and set\-Current\-State().

\hypertarget{classmdt_device_ad2646ad2fb99b40c9f303b24a7ee971e}{\index{mdt\-Device@{mdt\-Device}!state\-Changed\-Event@{state\-Changed\-Event}}
\index{state\-Changed\-Event@{state\-Changed\-Event}!mdtDevice@{mdt\-Device}}
\subsubsection[{state\-Changed\-Event}]{\setlength{\rightskip}{0pt plus 5cm}virtual void mdt\-Device\-::state\-Changed\-Event (
\begin{DoxyParamCaption}
\item[{{\bf State\-\_\-t}}]{new\-State}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [inline]}, {\ttfamily [protected]}, {\ttfamily [virtual]}}}\label{classmdt_device_ad2646ad2fb99b40c9f303b24a7ee971e}


Called when current state has changed. 

Can be reimplemented in subclass if some actions are needed when state has changed.

This default implementation does nothing, it's also not necessery to call this base function from subclass. 

Reimplemented in \hyperlink{classmdt_multi_io_device_ae2cc456c53e1b5f792b9073ad15bb1b3}{mdt\-Multi\-Io\-Device}.



Definition at line 301 of file mdt\-Device.\-h.



Referenced by set\-Current\-State().

\hypertarget{classmdt_device_a3fbc6e71241e2e9daa2d8557f870c03c}{\index{mdt\-Device@{mdt\-Device}!status\-Message\-Changed@{status\-Message\-Changed}}
\index{status\-Message\-Changed@{status\-Message\-Changed}!mdtDevice@{mdt\-Device}}
\subsubsection[{status\-Message\-Changed}]{\setlength{\rightskip}{0pt plus 5cm}void mdt\-Device\-::status\-Message\-Changed (
\begin{DoxyParamCaption}
\item[{const Q\-String \&}]{message, }
\item[{const Q\-String \&}]{details, }
\item[{int}]{timeout}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [signal]}}}\label{classmdt_device_a3fbc6e71241e2e9daa2d8557f870c03c}


Emitted when a new status message is to display. 

Typically used with \hyperlink{classmdt_port_status_widget}{mdt\-Port\-Status\-Widget} 

Referenced by mdt\-Device\-Modbus\-::mdt\-Device\-Modbus().

\hypertarget{classmdt_device_adc7ff8f01d68506283a3d0cc6bc25407}{\index{mdt\-Device@{mdt\-Device}!stop@{stop}}
\index{stop@{stop}!mdtDevice@{mdt\-Device}}
\subsubsection[{stop}]{\setlength{\rightskip}{0pt plus 5cm}void mdt\-Device\-::stop (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
)}}\label{classmdt_device_adc7ff8f01d68506283a3d0cc6bc25407}


Stop periodic device querying. 



Definition at line 100 of file mdt\-Device.\-cpp.



Referenced by disconnect\-From\-Device().

\hypertarget{classmdt_device_a0d6416888307cbfc5fcd7c22fc0039d7}{\index{mdt\-Device@{mdt\-Device}!wait@{wait}}
\index{wait@{wait}!mdtDevice@{mdt\-Device}}
\subsubsection[{wait}]{\setlength{\rightskip}{0pt plus 5cm}void mdt\-Device\-::wait (
\begin{DoxyParamCaption}
\item[{int}]{t}
\end{DoxyParamCaption}
)}}\label{classmdt_device_a0d6416888307cbfc5fcd7c22fc0039d7}


Wait some time without breaking main event loop. 


\begin{DoxyParams}{Parameters}
{\em t} & time \mbox{[}ms\mbox{]} \\
\hline
\end{DoxyParams}


Definition at line 106 of file mdt\-Device.\-cpp.



Referenced by mdt\-Device\-Modbus\-Wago\-Module\-::wait().



\subsection{Member Data Documentation}
\hypertarget{classmdt_device_ab54221195bbf9363f7e7f10ef38a3909}{\index{mdt\-Device@{mdt\-Device}!pv\-Last\-Error@{pv\-Last\-Error}}
\index{pv\-Last\-Error@{pv\-Last\-Error}!mdtDevice@{mdt\-Device}}
\subsubsection[{pv\-Last\-Error}]{\setlength{\rightskip}{0pt plus 5cm}{\bf mdt\-Error} mdt\-Device\-::pv\-Last\-Error\hspace{0.3cm}{\ttfamily [protected]}}}\label{classmdt_device_ab54221195bbf9363f7e7f10ef38a3909}


Last error object. 



Definition at line 271 of file mdt\-Device.\-h.



Referenced by mdt\-Device\-Scpi\-::connect\-To\-Device(), mdt\-Multi\-Io\-Device\-::get\-Analog\-Input\-Value(), mdt\-Multi\-Io\-Device\-::get\-Analog\-Input\-Value\-At(), mdt\-Multi\-Io\-Device\-::get\-Analog\-Output\-Value(), mdt\-Multi\-Io\-Device\-::get\-Analog\-Output\-Value\-At(), mdt\-Multi\-Io\-Device\-::get\-Digital\-Input\-Value(), mdt\-Multi\-Io\-Device\-::get\-Digital\-Input\-Value\-At(), mdt\-Multi\-Io\-Device\-::get\-Digital\-Output\-Value(), mdt\-Multi\-Io\-Device\-::get\-Digital\-Output\-Value\-At(), mdt\-Device\-U3606\-A\-::get\-Measure\-Value(), last\-Error(), mdt\-Device\-Scpi\-::send\-Command(), mdt\-Device\-Scpi\-::send\-Query(), mdt\-Multi\-Io\-Device\-::set\-Analog\-Output\-Value(), mdt\-Multi\-Io\-Device\-::set\-Analog\-Output\-Value\-At(), mdt\-Multi\-Io\-Device\-::set\-Digital\-Output\-Value(), mdt\-Multi\-Io\-Device\-::set\-Digital\-Output\-Value\-At(), mdt\-Device\-U3606\-A\-::setup\-Low\-Resistance\-Measure(), mdt\-Device\-U3606\-A\-::setup\-Resistance\-Measure(), and mdt\-Device\-U3606\-A\-::setup\-Voltage\-Dc\-Measure().



The documentation for this class was generated from the following files\-:\begin{DoxyCompactItemize}
\item 
src/mdtdevice/\hyperlink{mdt_device_8h}{mdt\-Device.\-h}\item 
src/mdtdevice/\hyperlink{mdt_device_8cpp}{mdt\-Device.\-cpp}\end{DoxyCompactItemize}
