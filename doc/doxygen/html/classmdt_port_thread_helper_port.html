<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>Multi diag tools: mdtPortThreadHelperPort Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body onload='searchBox.OnSelectItem(0);'>
<!-- Generated by Doxygen 1.7.4 -->
<script type="text/javascript"><!--
var searchBox = new SearchBox("searchBox", "search",false,'Search');
--></script>
<div id="top">
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">Multi diag tools</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li class="current"><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li id="searchli">
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="annotated.html"><span>Class&#160;List</span></a></li>
      <li><a href="classes.html"><span>Class&#160;Index</span></a></li>
      <li><a href="inherits.html"><span>Class&#160;Hierarchy</span></a></li>
      <li><a href="functions.html"><span>Class&#160;Members</span></a></li>
    </ul>
  </div>
</div>
<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a>  </div>
  <div class="headertitle">
<div class="title">mdtPortThreadHelperPort Class Reference</div>  </div>
</div>
<div class="contents">
<!-- doxytag: class="mdtPortThreadHelperPort" --><!-- doxytag: inherits="mdtPortThreadHelper" -->
<p>Helper class for <a class="el" href="classmdt_port_thread.html">mdtPortThread</a> and subclasses.  
 <a href="classmdt_port_thread_helper_port.html#details">More...</a></p>

<p><code>#include &lt;<a class="el" href="mdt_port_thread_helper_port_8h_source.html">mdtPortThreadHelperPort.h</a>&gt;</code></p>
<div class="dynheader">
Inheritance diagram for mdtPortThreadHelperPort:</div>
<div class="dyncontent">
<div class="center"><img src="classmdt_port_thread_helper_port__inherit__graph.png" border="0" usemap="#mdt_port_thread_helper_port_inherit__map" alt="Inheritance graph"/></div>
<map name="mdt_port_thread_helper_port_inherit__map" id="mdt_port_thread_helper_port_inherit__map">
<area shape="rect" id="node2" href="classmdt_port_thread_helper.html" title="Helper class for mdtPortThread and subclasses." alt="" coords="17,5,164,35"/></map>
<center><span class="legend">[<a href="graph_legend.html">legend</a>]</span></center></div>
<div class="dynheader">
Collaboration diagram for mdtPortThreadHelperPort:</div>
<div class="dyncontent">
<div class="center"><img src="classmdt_port_thread_helper_port__coll__graph.png" border="0" usemap="#mdt_port_thread_helper_port_coll__map" alt="Collaboration graph"/></div>
<map name="mdt_port_thread_helper_port_coll__map" id="mdt_port_thread_helper_port_coll__map">
<area shape="rect" id="node2" href="classmdt_port_thread_helper.html" title="Helper class for mdtPortThread and subclasses." alt="" coords="67,309,213,339"/><area shape="rect" id="node4" href="classmdt_port_thread.html" title="mdtPortThread" alt="" coords="87,197,193,227"/><area shape="rect" id="node6" href="classmdt_abstract_port.html" title="Base class for port I/O." alt="" coords="5,101,123,131"/><area shape="rect" id="node8" href="classmdt_port_config.html" title="mdtPortConfig" alt="" coords="11,5,117,35"/><area shape="rect" id="node10" href="classmdt_frame.html" title="Provide an array of bytes." alt="" coords="217,197,297,227"/></map>
<center><span class="legend">[<a href="graph_legend.html">legend</a>]</span></center></div>

<p><a href="classmdt_port_thread_helper_port-members.html">List of all members.</a></p>
<table class="memberdecls">
<tr><td colspan="2"><h2><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ab037d6f41e9f19145f06a964701181a3"></a><!-- doxytag: member="mdtPortThreadHelperPort::mdtPortThreadHelperPort" ref="ab037d6f41e9f19145f06a964701181a3" args="(QObject *parent=0)" -->
&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmdt_port_thread_helper_port.html#ab037d6f41e9f19145f06a964701181a3">mdtPortThreadHelperPort</a> (QObject *parent=0)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Constructor. <br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="afd9117d9a6b4f6769fc3ab0c9fa4a1e8"></a><!-- doxytag: member="mdtPortThreadHelperPort::~mdtPortThreadHelperPort" ref="afd9117d9a6b4f6769fc3ab0c9fa4a1e8" args="()" -->
&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmdt_port_thread_helper_port.html#afd9117d9a6b4f6769fc3ab0c9fa4a1e8">~mdtPortThreadHelperPort</a> ()</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Destructor. <br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="classmdt_abstract_port.html#ad4121bb930c95887e77f8bafa065a85e">mdtAbstractPort::error_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmdt_port_thread_helper_port.html#a0404d78ce7372c4732e48197d4e88e3c">reconnect</a> (bool notify)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Reconnect.  <a href="#a0404d78ce7372c4732e48197d4e88e3c"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmdt_port_thread_helper_port.html#a9b908f7675a9f5ab28f306bba282f68f">readFromPort</a> (bool emitNewFrameReaden)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Read data from port.  <a href="#a9b908f7675a9f5ab28f306bba282f68f"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmdt_port_thread_helper_port.html#a1d5cda8a61575825c3acd8b72f00fc6f">writeDataToPort</a> (int maxSize)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Write data to port.  <a href="#a1d5cda8a61575825c3acd8b72f00fc6f"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="classmdt_abstract_port.html#ad4121bb930c95887e77f8bafa065a85e">mdtAbstractPort::error_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmdt_port_thread_helper_port.html#a25c35855dc9e8edc489a9efad8d293f7">writeToPort</a> (bool bytePerByteWrite, int interByteTime, int maxWriteTry=10)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Write a complete frame to port.  <a href="#a25c35855dc9e8edc489a9efad8d293f7"></a><br/></td></tr>
</table>
<hr/><a name="details" id="details"></a><h2>Detailed Description</h2>
<div class="textblock"><p>Helper class for <a class="el" href="classmdt_port_thread.html">mdtPortThread</a> and subclasses. </p>
<p>This class is helpfull for blocking API based only on <a class="el" href="classmdt_abstract_port.html" title="Base class for port I/O.">mdtAbstractPort</a>. </p>

<p>Definition at line <a class="el" href="mdt_port_thread_helper_port_8h_source.html#l00031">31</a> of file <a class="el" href="mdt_port_thread_helper_port_8h_source.html">mdtPortThreadHelperPort.h</a>.</p>
</div><hr/><h2>Member Function Documentation</h2>
<a class="anchor" id="a9b908f7675a9f5ab28f306bba282f68f"></a><!-- doxytag: member="mdtPortThreadHelperPort::readFromPort" ref="a9b908f7675a9f5ab28f306bba282f68f" args="(bool emitNewFrameReaden)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int mdtPortThreadHelperPort::readFromPort </td>
          <td>(</td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>emitNewFrameReaden</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Read data from port. </p>
<p>This is a helper method to read data from port and to store chunk of data into a frame.</p>
<p>Note about port mutex handling:<br/>
 The port mutex must be locked before calling this method. Internally, it will be unlocked during wait, and will be locked again. So, the port mutex is allways locked when this method returns.</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">emitNewFrameReaden</td><td>If true, <a class="el" href="classmdt_port_thread_helper.html#a751006665ed9f110ade8ced5264a5f50" title="Emited when a new frame is available.">newFrameReaden()</a> will be emitted each time a complete frame was generated. </td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>The number of frames completed during the process. This can be helpful for query/reply protocols in witch the standard reply should be one frame. On error, one of the <a class="el" href="classmdt_abstract_port.html#ad4121bb930c95887e77f8bafa065a85e" title="Error.">mdtAbstractPort::error_t</a> is returned and thread must handle error itself.</dd></dl>
<dl class="pre"><dt><b>Precondition:</b></dt><dd>Port must be set with <a class="el" href="classmdt_port_thread_helper.html#a4127c0b28dc63df06b5a36a4be8b3bb7" title="Set the port instance.">mdtPortThreadHelper::setPort()</a>. </dd>
<dd>
Thread must be set with <a class="el" href="classmdt_port_thread_helper.html#af6c9d2cb2e9e922942236068bf634b0b" title="Set the thread instance.">mdtPortThreadHelper::setThread()</a>. </dd></dl>

<p>Definition at line <a class="el" href="mdt_port_thread_helper_port_8cpp_source.html#l00059">59</a> of file <a class="el" href="mdt_port_thread_helper_port_8cpp_source.html">mdtPortThreadHelperPort.cpp</a>.</p>

</div>
</div>
<a class="anchor" id="a0404d78ce7372c4732e48197d4e88e3c"></a><!-- doxytag: member="mdtPortThreadHelperPort::reconnect" ref="a0404d78ce7372c4732e48197d4e88e3c" args="(bool notify)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classmdt_abstract_port.html#ad4121bb930c95887e77f8bafa065a85e">mdtAbstractPort::error_t</a> mdtPortThreadHelperPort::reconnect </td>
          <td>(</td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>notify</em></td><td>)</td>
          <td><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Reconnect. </p>
<p>This implementation calls <a class="el" href="classmdt_port_thread.html#abee1d2f9b67ca37cfd13e108ca978b36" title="Try to reconnect to device/peer.">mdtPortThread::reconnect()</a> .</p>
<dl class="pre"><dt><b>Precondition:</b></dt><dd>Port must be set with <a class="el" href="classmdt_port_thread_helper.html#a4127c0b28dc63df06b5a36a4be8b3bb7" title="Set the port instance.">mdtPortThreadHelper::setPort()</a>. </dd>
<dd>
Thread must be set with <a class="el" href="classmdt_port_thread_helper.html#af6c9d2cb2e9e922942236068bf634b0b" title="Set the thread instance.">mdtPortThreadHelper::setThread()</a>. </dd></dl>

<p>Reimplemented from <a class="el" href="classmdt_port_thread_helper.html#a1d0874434ae6442610e2bc685be6458f">mdtPortThreadHelper</a>.</p>

<p>Definition at line <a class="el" href="mdt_port_thread_helper_port_8cpp_source.html#l00050">50</a> of file <a class="el" href="mdt_port_thread_helper_port_8cpp_source.html">mdtPortThreadHelperPort.cpp</a>.</p>

</div>
</div>
<a class="anchor" id="a1d5cda8a61575825c3acd8b72f00fc6f"></a><!-- doxytag: member="mdtPortThreadHelperPort::writeDataToPort" ref="a1d5cda8a61575825c3acd8b72f00fc6f" args="(int maxSize)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int mdtPortThreadHelperPort::writeDataToPort </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>maxSize</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Write data to port. </p>
<p>This is a helper method to write some data from a frame to the port.</p>
<p>Signal <a class="el" href="classmdt_port_thread_helper.html#a80df5929776f6c617b96f2184e2bc96d" title="Emitted when a write process begins.">writeProcessBegin()</a> is emitted.</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">maxSize</td><td>If &gt;= 0, maxSize will be written, else the frame size will be considered. </td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>Amount of bytes written or a <a class="el" href="classmdt_abstract_port.html#ad4121bb930c95887e77f8bafa065a85e" title="Error.">mdtAbstractPort::error_t</a> error.</dd></dl>
<dl class="pre"><dt><b>Precondition:</b></dt><dd>Port must be set with <a class="el" href="classmdt_port_thread_helper.html#a4127c0b28dc63df06b5a36a4be8b3bb7" title="Set the port instance.">mdtPortThreadHelper::setPort()</a>. </dd>
<dd>
Thread must be set with <a class="el" href="classmdt_port_thread_helper.html#af6c9d2cb2e9e922942236068bf634b0b" title="Set the thread instance.">mdtPortThreadHelper::setThread()</a>. </dd></dl>

<p>Definition at line <a class="el" href="mdt_port_thread_helper_port_8cpp_source.html#l00094">94</a> of file <a class="el" href="mdt_port_thread_helper_port_8cpp_source.html">mdtPortThreadHelperPort.cpp</a>.</p>

</div>
</div>
<a class="anchor" id="a25c35855dc9e8edc489a9efad8d293f7"></a><!-- doxytag: member="mdtPortThreadHelperPort::writeToPort" ref="a25c35855dc9e8edc489a9efad8d293f7" args="(bool bytePerByteWrite, int interByteTime, int maxWriteTry=10)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classmdt_abstract_port.html#ad4121bb930c95887e77f8bafa065a85e">mdtAbstractPort::error_t</a> mdtPortThreadHelperPort::writeToPort </td>
          <td>(</td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>bytePerByteWrite</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>interByteTime</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>maxWriteTry</em> = <code>10</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Write a complete frame to port. </p>
<p>This is a helper method to write a frame to the port. Internally, it will call <a class="el" href="classmdt_abstract_port.html#a35e4686f50e2c53c7e3618cf2c485d92" title="Wait until data can be written to port.">mdtAbstractPort::waitEventWriteReady()</a> before writing.</p>
<p>Note that frame will be put back to write pool after complete write, cancel, flush or error. That says that frame will not be valid after call of this method.</p>
<p>Note about port mutex handling:<br/>
 The port mutex must be locked before calling this method. Internally, it will be unlocked during wait, and will be locked again. So, the port mutex is allways locked when this method returns.</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">bytePerByteWrite</td><td>If true, one byte will be written once. </td></tr>
    <tr><td class="paramname">interByteTime</td><td>Time between each byte write [ms] (has only effect if bytePerByteWrite is true) </td></tr>
    <tr><td class="paramname">maxWriteTry</td><td>Some port can return 0 byte or a timeout error if busy. If this happens, this method will sleep some time an try a write call again until write call works successfull or maxWriteTry is reached.</td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>NoError on success or a <a class="el" href="classmdt_abstract_port.html#ad4121bb930c95887e77f8bafa065a85e" title="Error.">mdtAbstractPort::error_t</a> error (See also <a class="el" href="classmdt_port_thread_helper.html#a84871009b6128912f7d3869b14e37aa2" title="Handle common write errors.">mdtPortThreadHelper::handleCommonWriteErrors()</a> ).</dd></dl>
<dl class="pre"><dt><b>Precondition:</b></dt><dd>Port must be set with <a class="el" href="classmdt_port_thread_helper.html#a4127c0b28dc63df06b5a36a4be8b3bb7" title="Set the port instance.">mdtPortThreadHelper::setPort()</a>. </dd>
<dd>
Thread must be set with <a class="el" href="classmdt_port_thread_helper.html#af6c9d2cb2e9e922942236068bf634b0b" title="Set the thread instance.">mdtPortThreadHelper::setThread()</a>. </dd></dl>

<p>Definition at line <a class="el" href="mdt_port_thread_helper_port_8cpp_source.html#l00124">124</a> of file <a class="el" href="mdt_port_thread_helper_port_8cpp_source.html">mdtPortThreadHelperPort.cpp</a>.</p>

</div>
</div>
<hr/>The documentation for this class was generated from the following files:<ul>
<li>src/mdtport/<a class="el" href="mdt_port_thread_helper_port_8h_source.html">mdtPortThreadHelperPort.h</a></li>
<li>src/mdtport/<a class="el" href="mdt_port_thread_helper_port_8cpp_source.html">mdtPortThreadHelperPort.cpp</a></li>
</ul>
</div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Classes</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Namespaces</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Enumerator</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<hr class="footer"/><address class="footer"><small>Generated on Mon Sep 2 2013 18:16:10 for Multi diag tools by&#160;
<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.7.4 </small></address>
</body>
</html>
