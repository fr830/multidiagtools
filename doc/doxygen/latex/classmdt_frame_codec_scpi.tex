\hypertarget{classmdt_frame_codec_scpi}{
\section{mdtFrameCodecScpi Class Reference}
\label{classmdt_frame_codec_scpi}\index{mdtFrameCodecScpi@{mdtFrameCodecScpi}}
}


\#include $<$QVariant$>$  




{\ttfamily \#include $<$mdtFrameCodecScpi.h$>$}



Inheritance diagram for mdtFrameCodecScpi:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=224pt]{classmdt_frame_codec_scpi__inherit__graph}
\end{center}
\end{figure}


Collaboration diagram for mdtFrameCodecScpi:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=190pt]{classmdt_frame_codec_scpi__coll__graph}
\end{center}
\end{figure}
\subsection*{Public Types}
\begin{DoxyCompactItemize}
\item 
enum \hyperlink{classmdt_frame_codec_scpi_a2dbce7589140e915f3e253c3523b3b9a}{query\_\-type\_\-t} \{ \par
\hyperlink{classmdt_frame_codec_scpi_a2dbce7589140e915f3e253c3523b3b9aa80aaf6e25ad52710c5f61c6d734a0897}{QT\_\-UNKNOW} =  0, 
\hyperlink{classmdt_frame_codec_scpi_a2dbce7589140e915f3e253c3523b3b9aae429676cb0129c2cb9179baf00d7e082}{QT\_\-VALUE}, 
\hyperlink{classmdt_frame_codec_scpi_a2dbce7589140e915f3e253c3523b3b9aa0f4f3edfd4d8b84dcbbff566de1278df}{QT\_\-SINGLE\_\-VALUE\_\-FLT}, 
\hyperlink{classmdt_frame_codec_scpi_a2dbce7589140e915f3e253c3523b3b9aa889641e5713b59c1d91a9cc607745bc9}{QT\_\-IDN}, 
\par
\hyperlink{classmdt_frame_codec_scpi_a2dbce7589140e915f3e253c3523b3b9aa6e1b9ed9dff72df39e3b3fc88611e4a5}{QT\_\-ERR}, 
\hyperlink{classmdt_frame_codec_scpi_a2dbce7589140e915f3e253c3523b3b9aa3df0e44b2eeacfad6f93ac9201db101d}{QT\_\-CONF}
 \}
\begin{DoxyCompactList}\small\item\em Query type. \end{DoxyCompactList}\item 
enum \hyperlink{classmdt_frame_codec_scpi_a0562eccf33d8cf62e7a73a748a70c475}{waveform\_\-format\_\-t} \{ \hyperlink{classmdt_frame_codec_scpi_a0562eccf33d8cf62e7a73a748a70c475a7f4b47afe74504dea43bb04c8c6fbe58}{WORD}, 
\hyperlink{classmdt_frame_codec_scpi_a0562eccf33d8cf62e7a73a748a70c475aad91226f87cea7fab38f5cc7618f424c}{BYTE}, 
\hyperlink{classmdt_frame_codec_scpi_a0562eccf33d8cf62e7a73a748a70c475a957445cd510a5c4e6964e9b79e73af4d}{ASCII}
 \}
\begin{DoxyCompactList}\small\item\em Format of waveform data. \end{DoxyCompactList}\end{DoxyCompactItemize}
\subsection*{Public Member Functions}
\begin{DoxyCompactItemize}
\item 
bool \hyperlink{classmdt_frame_codec_scpi_a37a1703b6daee6f6bf91c6afb46191b3}{decodeValues} (const QByteArray \&data, QString sep=\char`\"{}:\char`\"{})
\begin{DoxyCompactList}\small\item\em Decode SCPI value(s) \end{DoxyCompactList}\item 
\hyperlink{classmdt_value}{mdtValue} \hyperlink{classmdt_frame_codec_scpi_ad2d7b41d0b3413074d770c5f512bee12}{decodeSingleValueDouble} (const QByteArray \&data)
\begin{DoxyCompactList}\small\item\em Decode a signle value in double floating format. \end{DoxyCompactList}\item 
\hyperlink{classmdt_value}{mdtValue} \hyperlink{classmdt_frame_codec_scpi_a90d550cfe0ed5605c63a064359fc762d}{checkFloatingValueValidity} (double x) const 
\begin{DoxyCompactList}\small\item\em Check the validity of a floating value. \end{DoxyCompactList}\item 
bool \hyperlink{classmdt_frame_codec_scpi_ac928eac971706f5c78f36d0ae4dc0c42}{decodeFunctionParameters} (const QByteArray \&data)
\begin{DoxyCompactList}\small\item\em Decode reply of type function/parameter. \end{DoxyCompactList}\item 
bool \hyperlink{classmdt_frame_codec_scpi_a6ddd1b8e23252dc7f03c279a030cb36f}{decodeIdn} (const QByteArray \&data)
\begin{DoxyCompactList}\small\item\em Decode the IDN answer. \end{DoxyCompactList}\item 
bool \hyperlink{classmdt_frame_codec_scpi_a3ae1183cbe26272a7a025e89fc961042}{decodeScpiVersion} (const QByteArray \&data)
\begin{DoxyCompactList}\small\item\em Decode the SCPI version returned by SYSTem:VERSion? query. \end{DoxyCompactList}\item 
bool \hyperlink{classmdt_frame_codec_scpi_a9e38d8afadc7ff37821620feea6b0899}{decodeError} (const QByteArray \&data)
\begin{DoxyCompactList}\small\item\em Decode error answer. \end{DoxyCompactList}\item 
bool \hyperlink{classmdt_frame_codec_scpi_a4b07da48ad126c56db050a379700ac2b}{decodeIEEEblock} (const QByteArray \&data, \hyperlink{classmdt_frame_codec_scpi_a0562eccf33d8cf62e7a73a748a70c475}{waveform\_\-format\_\-t} format)
\begin{DoxyCompactList}\small\item\em Decode a IEEE block. \end{DoxyCompactList}\end{DoxyCompactItemize}
\subsection*{Protected Member Functions}
\begin{DoxyCompactItemize}
\item 
bool \hyperlink{classmdt_frame_codec_scpi_aa6596dc898438be704191ad282d02100}{decodeIEEEdataAscii} (const QByteArray \&data)
\begin{DoxyCompactList}\small\item\em Decode a array of ASCII values. \end{DoxyCompactList}\item 
bool \hyperlink{classmdt_frame_codec_scpi_ab70c6c3d2d91ddff065952b6c2db8345}{decodeIEEEdataByte} (const QByteArray \&data)
\begin{DoxyCompactList}\small\item\em Decode a array of BYTE values. \end{DoxyCompactList}\end{DoxyCompactItemize}


\subsection{Detailed Description}
\#include $<$QVariant$>$ 

Decode SCPI data 

Definition at line 30 of file mdtFrameCodecScpi.h.



\subsection{Member Enumeration Documentation}
\hypertarget{classmdt_frame_codec_scpi_a2dbce7589140e915f3e253c3523b3b9a}{
\index{mdtFrameCodecScpi@{mdtFrameCodecScpi}!query\_\-type\_\-t@{query\_\-type\_\-t}}
\index{query\_\-type\_\-t@{query\_\-type\_\-t}!mdtFrameCodecScpi@{mdtFrameCodecScpi}}
\subsubsection[{query\_\-type\_\-t}]{\setlength{\rightskip}{0pt plus 5cm}enum {\bf mdtFrameCodecScpi::query\_\-type\_\-t}}}
\label{classmdt_frame_codec_scpi_a2dbce7589140e915f3e253c3523b3b9a}


Query type. 

\begin{Desc}
\item[Enumerator: ]\par
\begin{description}
\index{QT\_\-UNKNOW@{QT\_\-UNKNOW}!mdtFrameCodecScpi@{mdtFrameCodecScpi}}\index{mdtFrameCodecScpi@{mdtFrameCodecScpi}!QT\_\-UNKNOW@{QT\_\-UNKNOW}}\item[{\em 
\hypertarget{classmdt_frame_codec_scpi_a2dbce7589140e915f3e253c3523b3b9aa80aaf6e25ad52710c5f61c6d734a0897}{
QT\_\-UNKNOW}
\label{classmdt_frame_codec_scpi_a2dbce7589140e915f3e253c3523b3b9aa80aaf6e25ad52710c5f61c6d734a0897}
}]Initial or unknown query/response type \index{QT\_\-VALUE@{QT\_\-VALUE}!mdtFrameCodecScpi@{mdtFrameCodecScpi}}\index{mdtFrameCodecScpi@{mdtFrameCodecScpi}!QT\_\-VALUE@{QT\_\-VALUE}}\item[{\em 
\hypertarget{classmdt_frame_codec_scpi_a2dbce7589140e915f3e253c3523b3b9aae429676cb0129c2cb9179baf00d7e082}{
QT\_\-VALUE}
\label{classmdt_frame_codec_scpi_a2dbce7589140e915f3e253c3523b3b9aae429676cb0129c2cb9179baf00d7e082}
}]Device returns one or more value(s) (int, double, date or string) \index{QT\_\-SINGLE\_\-VALUE\_\-FLT@{QT\_\-SINGLE\_\-VALUE\_\-FLT}!mdtFrameCodecScpi@{mdtFrameCodecScpi}}\index{mdtFrameCodecScpi@{mdtFrameCodecScpi}!QT\_\-SINGLE\_\-VALUE\_\-FLT@{QT\_\-SINGLE\_\-VALUE\_\-FLT}}\item[{\em 
\hypertarget{classmdt_frame_codec_scpi_a2dbce7589140e915f3e253c3523b3b9aa0f4f3edfd4d8b84dcbbff566de1278df}{
QT\_\-SINGLE\_\-VALUE\_\-FLT}
\label{classmdt_frame_codec_scpi_a2dbce7589140e915f3e253c3523b3b9aa0f4f3edfd4d8b84dcbbff566de1278df}
}]Device returns a floating value \index{QT\_\-IDN@{QT\_\-IDN}!mdtFrameCodecScpi@{mdtFrameCodecScpi}}\index{mdtFrameCodecScpi@{mdtFrameCodecScpi}!QT\_\-IDN@{QT\_\-IDN}}\item[{\em 
\hypertarget{classmdt_frame_codec_scpi_a2dbce7589140e915f3e253c3523b3b9aa889641e5713b59c1d91a9cc607745bc9}{
QT\_\-IDN}
\label{classmdt_frame_codec_scpi_a2dbce7589140e915f3e253c3523b3b9aa889641e5713b59c1d91a9cc607745bc9}
}]IDN query or response \index{QT\_\-ERR@{QT\_\-ERR}!mdtFrameCodecScpi@{mdtFrameCodecScpi}}\index{mdtFrameCodecScpi@{mdtFrameCodecScpi}!QT\_\-ERR@{QT\_\-ERR}}\item[{\em 
\hypertarget{classmdt_frame_codec_scpi_a2dbce7589140e915f3e253c3523b3b9aa6e1b9ed9dff72df39e3b3fc88611e4a5}{
QT\_\-ERR}
\label{classmdt_frame_codec_scpi_a2dbce7589140e915f3e253c3523b3b9aa6e1b9ed9dff72df39e3b3fc88611e4a5}
}]ERRor query or response \index{QT\_\-CONF@{QT\_\-CONF}!mdtFrameCodecScpi@{mdtFrameCodecScpi}}\index{mdtFrameCodecScpi@{mdtFrameCodecScpi}!QT\_\-CONF@{QT\_\-CONF}}\item[{\em 
\hypertarget{classmdt_frame_codec_scpi_a2dbce7589140e915f3e253c3523b3b9aa3df0e44b2eeacfad6f93ac9201db101d}{
QT\_\-CONF}
\label{classmdt_frame_codec_scpi_a2dbce7589140e915f3e253c3523b3b9aa3df0e44b2eeacfad6f93ac9201db101d}
}]CONFigure query or response type \end{description}
\end{Desc}



Definition at line 36 of file mdtFrameCodecScpi.h.

\hypertarget{classmdt_frame_codec_scpi_a0562eccf33d8cf62e7a73a748a70c475}{
\index{mdtFrameCodecScpi@{mdtFrameCodecScpi}!waveform\_\-format\_\-t@{waveform\_\-format\_\-t}}
\index{waveform\_\-format\_\-t@{waveform\_\-format\_\-t}!mdtFrameCodecScpi@{mdtFrameCodecScpi}}
\subsubsection[{waveform\_\-format\_\-t}]{\setlength{\rightskip}{0pt plus 5cm}enum {\bf mdtFrameCodecScpi::waveform\_\-format\_\-t}}}
\label{classmdt_frame_codec_scpi_a0562eccf33d8cf62e7a73a748a70c475}


Format of waveform data. 

\begin{Desc}
\item[Enumerator: ]\par
\begin{description}
\index{WORD@{WORD}!mdtFrameCodecScpi@{mdtFrameCodecScpi}}\index{mdtFrameCodecScpi@{mdtFrameCodecScpi}!WORD@{WORD}}\item[{\em 
\hypertarget{classmdt_frame_codec_scpi_a0562eccf33d8cf62e7a73a748a70c475a7f4b47afe74504dea43bb04c8c6fbe58}{
WORD}
\label{classmdt_frame_codec_scpi_a0562eccf33d8cf62e7a73a748a70c475a7f4b47afe74504dea43bb04c8c6fbe58}
}]16 bit data resolution \index{BYTE@{BYTE}!mdtFrameCodecScpi@{mdtFrameCodecScpi}}\index{mdtFrameCodecScpi@{mdtFrameCodecScpi}!BYTE@{BYTE}}\item[{\em 
\hypertarget{classmdt_frame_codec_scpi_a0562eccf33d8cf62e7a73a748a70c475aad91226f87cea7fab38f5cc7618f424c}{
BYTE}
\label{classmdt_frame_codec_scpi_a0562eccf33d8cf62e7a73a748a70c475aad91226f87cea7fab38f5cc7618f424c}
}]8 bit data resolution \index{ASCII@{ASCII}!mdtFrameCodecScpi@{mdtFrameCodecScpi}}\index{mdtFrameCodecScpi@{mdtFrameCodecScpi}!ASCII@{ASCII}}\item[{\em 
\hypertarget{classmdt_frame_codec_scpi_a0562eccf33d8cf62e7a73a748a70c475a957445cd510a5c4e6964e9b79e73af4d}{
ASCII}
\label{classmdt_frame_codec_scpi_a0562eccf33d8cf62e7a73a748a70c475a957445cd510a5c4e6964e9b79e73af4d}
}]ASCII float represented data \end{description}
\end{Desc}



Definition at line 47 of file mdtFrameCodecScpi.h.



\subsection{Member Function Documentation}
\hypertarget{classmdt_frame_codec_scpi_a90d550cfe0ed5605c63a064359fc762d}{
\index{mdtFrameCodecScpi@{mdtFrameCodecScpi}!checkFloatingValueValidity@{checkFloatingValueValidity}}
\index{checkFloatingValueValidity@{checkFloatingValueValidity}!mdtFrameCodecScpi@{mdtFrameCodecScpi}}
\subsubsection[{checkFloatingValueValidity}]{\setlength{\rightskip}{0pt plus 5cm}{\bf mdtValue} mdtFrameCodecScpi::checkFloatingValueValidity (
\begin{DoxyParamCaption}
\item[{double}]{x}
\end{DoxyParamCaption}
) const}}
\label{classmdt_frame_codec_scpi_a90d550cfe0ed5605c63a064359fc762d}


Check the validity of a floating value. 

Check validity regarding SCPI-\/99, sections 7.2.1.4 (-\/infinity, +infinity) and 7.2.1.5 (NaN).

\begin{DoxyReturn}{Returns}
A \hyperlink{classmdt_value}{mdtValue} that contains data of type Double. If x is NaN, a invalid \hyperlink{classmdt_value}{mdtValue} is returned.QVariant \hyperlink{classmdt_frame_codec_scpi_a90d550cfe0ed5605c63a064359fc762d}{checkFloatingValueValidity(double x) const};
\end{DoxyReturn}
QVariant \hyperlink{classmdt_frame_codec_scpi_a90d550cfe0ed5605c63a064359fc762d}{mdtFrameCodecScpi::checkFloatingValueValidity(double x) const} \{ Check about NaN if(qAbs(x -\/ pvNan) $<$= FLT\_\-EPSILON)\{ return QVariant(); \} Check about -\/OL and OL if((x $<$= (pvNinfinity+FLT\_\-EPSILON))$|$$|$(x $>$= (pvInfinity-\/FLT\_\-EPSILON)))\{ return QVariant(); \}

return x; \} 

Definition at line 195 of file mdtFrameCodecScpi.cpp.

\hypertarget{classmdt_frame_codec_scpi_a9e38d8afadc7ff37821620feea6b0899}{
\index{mdtFrameCodecScpi@{mdtFrameCodecScpi}!decodeError@{decodeError}}
\index{decodeError@{decodeError}!mdtFrameCodecScpi@{mdtFrameCodecScpi}}
\subsubsection[{decodeError}]{\setlength{\rightskip}{0pt plus 5cm}bool mdtFrameCodecScpi::decodeError (
\begin{DoxyParamCaption}
\item[{const QByteArray \&}]{data}
\end{DoxyParamCaption}
)}}
\label{classmdt_frame_codec_scpi_a9e38d8afadc7ff37821620feea6b0899}


Decode error answer. 

When decode was done successfully, error is available with \hyperlink{classmdt_frame_codec_af3353b74e1ab64ad7cc764dcaf22e7e8}{values()}:
\begin{DoxyItemize}
\item Item 0 is the error number
\item Item 1 is the error message string
\item After item 1 are device's specific messages (if exists) 
\end{DoxyItemize}

Definition at line 348 of file mdtFrameCodecScpi.cpp.

\hypertarget{classmdt_frame_codec_scpi_ac928eac971706f5c78f36d0ae4dc0c42}{
\index{mdtFrameCodecScpi@{mdtFrameCodecScpi}!decodeFunctionParameters@{decodeFunctionParameters}}
\index{decodeFunctionParameters@{decodeFunctionParameters}!mdtFrameCodecScpi@{mdtFrameCodecScpi}}
\subsubsection[{decodeFunctionParameters}]{\setlength{\rightskip}{0pt plus 5cm}bool mdtFrameCodecScpi::decodeFunctionParameters (
\begin{DoxyParamCaption}
\item[{const QByteArray \&}]{data}
\end{DoxyParamCaption}
)}}
\label{classmdt_frame_codec_scpi_ac928eac971706f5c78f36d0ae4dc0c42}


Decode reply of type function/parameter. 

Typical query that returns $<$function$>$ $<$parameters$>$ form is CONFigure?. See SCPI-\/99 , chap. 3.

After successfull decode, \hyperlink{classmdt_frame_codec_af3353b74e1ab64ad7cc764dcaf22e7e8}{values()} contains:
\begin{DoxyItemize}
\item Index 0: Function as string
\item Index $>$1 (if available): parameters in converted form (double, int, ...). Note: if a parameter is a floating value, it's possible that it is invalid (+/-\/inf, Nan). 
\end{DoxyItemize}

value = checkFloatingValueValidity(value.toDouble()); 



Definition at line 218 of file mdtFrameCodecScpi.cpp.

\hypertarget{classmdt_frame_codec_scpi_a6ddd1b8e23252dc7f03c279a030cb36f}{
\index{mdtFrameCodecScpi@{mdtFrameCodecScpi}!decodeIdn@{decodeIdn}}
\index{decodeIdn@{decodeIdn}!mdtFrameCodecScpi@{mdtFrameCodecScpi}}
\subsubsection[{decodeIdn}]{\setlength{\rightskip}{0pt plus 5cm}bool mdtFrameCodecScpi::decodeIdn (
\begin{DoxyParamCaption}
\item[{const QByteArray \&}]{data}
\end{DoxyParamCaption}
)}}
\label{classmdt_frame_codec_scpi_a6ddd1b8e23252dc7f03c279a030cb36f}


Decode the IDN answer. 

When decode was done, the values are available with \hyperlink{classmdt_frame_codec_af3353b74e1ab64ad7cc764dcaf22e7e8}{values()} 

Definition at line 282 of file mdtFrameCodecScpi.cpp.

\hypertarget{classmdt_frame_codec_scpi_a4b07da48ad126c56db050a379700ac2b}{
\index{mdtFrameCodecScpi@{mdtFrameCodecScpi}!decodeIEEEblock@{decodeIEEEblock}}
\index{decodeIEEEblock@{decodeIEEEblock}!mdtFrameCodecScpi@{mdtFrameCodecScpi}}
\subsubsection[{decodeIEEEblock}]{\setlength{\rightskip}{0pt plus 5cm}bool mdtFrameCodecScpi::decodeIEEEblock (
\begin{DoxyParamCaption}
\item[{const QByteArray \&}]{data, }
\item[{{\bf mdtFrameCodecScpi::waveform\_\-format\_\-t}}]{format}
\end{DoxyParamCaption}
)}}
\label{classmdt_frame_codec_scpi_a4b07da48ad126c56db050a379700ac2b}


Decode a IEEE block. 

NOTE: not implemented yet ! 

Definition at line 391 of file mdtFrameCodecScpi.cpp.

\hypertarget{classmdt_frame_codec_scpi_aa6596dc898438be704191ad282d02100}{
\index{mdtFrameCodecScpi@{mdtFrameCodecScpi}!decodeIEEEdataAscii@{decodeIEEEdataAscii}}
\index{decodeIEEEdataAscii@{decodeIEEEdataAscii}!mdtFrameCodecScpi@{mdtFrameCodecScpi}}
\subsubsection[{decodeIEEEdataAscii}]{\setlength{\rightskip}{0pt plus 5cm}bool mdtFrameCodecScpi::decodeIEEEdataAscii (
\begin{DoxyParamCaption}
\item[{const QByteArray \&}]{data}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily  \mbox{[}protected\mbox{]}}}}
\label{classmdt_frame_codec_scpi_aa6596dc898438be704191ad282d02100}


Decode a array of ASCII values. 

\begin{Desc}
\item[\hyperlink{todo__todo000050}{Todo}]Not implemented yet \end{Desc}


qDebug() $<$$<$ \char`\"{}Data: \char`\"{} $<$$<$ items;

qDebug() $<$$<$ \char`\"{}Values: \char`\"{} $<$$<$ pvValues; 



Definition at line 467 of file mdtFrameCodecScpi.cpp.

\hypertarget{classmdt_frame_codec_scpi_ab70c6c3d2d91ddff065952b6c2db8345}{
\index{mdtFrameCodecScpi@{mdtFrameCodecScpi}!decodeIEEEdataByte@{decodeIEEEdataByte}}
\index{decodeIEEEdataByte@{decodeIEEEdataByte}!mdtFrameCodecScpi@{mdtFrameCodecScpi}}
\subsubsection[{decodeIEEEdataByte}]{\setlength{\rightskip}{0pt plus 5cm}bool mdtFrameCodecScpi::decodeIEEEdataByte (
\begin{DoxyParamCaption}
\item[{const QByteArray \&}]{data}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily  \mbox{[}protected\mbox{]}}}}
\label{classmdt_frame_codec_scpi_ab70c6c3d2d91ddff065952b6c2db8345}


Decode a array of BYTE values. 

\begin{Desc}
\item[\hyperlink{todo__todo000051}{Todo}]Not implemented yet \end{Desc}


int len = data.size()-\/1; // Last item is the term char

qDebug() $<$$<$ \char`\"{}data\mbox{[}\char`\"{} $<$$<$ i $<$$<$ \char`\"{}\mbox{]}: \char`\"{} $<$$<$ (qint8)data.at(i) $<$$<$ \char`\"{} ,  0x\char`\"{} $<$$<$ hex $<$$<$ (qint8)data.at(i) $<$$<$ \char`\"{} , flt: \char`\"{} $<$$<$ (double)data.at(i)/127.0; 



Definition at line 489 of file mdtFrameCodecScpi.cpp.

\hypertarget{classmdt_frame_codec_scpi_a3ae1183cbe26272a7a025e89fc961042}{
\index{mdtFrameCodecScpi@{mdtFrameCodecScpi}!decodeScpiVersion@{decodeScpiVersion}}
\index{decodeScpiVersion@{decodeScpiVersion}!mdtFrameCodecScpi@{mdtFrameCodecScpi}}
\subsubsection[{decodeScpiVersion}]{\setlength{\rightskip}{0pt plus 5cm}bool mdtFrameCodecScpi::decodeScpiVersion (
\begin{DoxyParamCaption}
\item[{const QByteArray \&}]{data}
\end{DoxyParamCaption}
)}}
\label{classmdt_frame_codec_scpi_a3ae1183cbe26272a7a025e89fc961042}


Decode the SCPI version returned by SYSTem:VERSion? query. 

After successfull decode, values will be stored as follow:
\begin{DoxyItemize}
\item Index 0: SCPI year as integer
\item Index 1: SCPI revision 
\end{DoxyItemize}

Definition at line 306 of file mdtFrameCodecScpi.cpp.

\hypertarget{classmdt_frame_codec_scpi_ad2d7b41d0b3413074d770c5f512bee12}{
\index{mdtFrameCodecScpi@{mdtFrameCodecScpi}!decodeSingleValueDouble@{decodeSingleValueDouble}}
\index{decodeSingleValueDouble@{decodeSingleValueDouble}!mdtFrameCodecScpi@{mdtFrameCodecScpi}}
\subsubsection[{decodeSingleValueDouble}]{\setlength{\rightskip}{0pt plus 5cm}{\bf mdtValue} mdtFrameCodecScpi::decodeSingleValueDouble (
\begin{DoxyParamCaption}
\item[{const QByteArray \&}]{data}
\end{DoxyParamCaption}
)}}
\label{classmdt_frame_codec_scpi_ad2d7b41d0b3413074d770c5f512bee12}


Decode a signle value in double floating format. 

This method returns a QVariant. QVariant's internal data is converted to double. If value is not valid, the QVariant is cleared, so it is possible to check this with QVariant::isValid().

\begin{DoxyReturn}{Returns}
A \hyperlink{classmdt_value}{mdtValue} that contains data of type Double if decode and conversion to double could be done, else a invalid mdtValue.QVariant \hyperlink{classmdt_frame_codec_scpi_ad2d7b41d0b3413074d770c5f512bee12}{decodeSingleValueDouble(const QByteArray \&data)};
\end{DoxyReturn}
QVariant \hyperlink{classmdt_frame_codec_scpi_ad2d7b41d0b3413074d770c5f512bee12}{mdtFrameCodecScpi::decodeSingleValueDouble(const QByteArray \&data)} \{ QVariant value;

Store raw data in local QString constainer pvAsciiData = data; Remove white spaces at begin and end \hyperlink{classmdt_frame_codec_ascii_a0e8b9664e1451400e1b955c5180c0de8}{trim()}; remove EofSeq if(!removeEofSeq())\{ return value; \} Case of no data if(pvAsciiData.size() $<$ 1)\{ \hyperlink{classmdt_error}{mdtError} e(MDT\_\-FRAME\_\-DECODE\_\-ERROR, \char`\"{}Frame contains no data\char`\"{} , mdtError::Warning); MDT\_\-ERROR\_\-SET\_\-SRC(e, \char`\"{}mdtFrameCodecScpi\char`\"{}); e.commit(); return value; \} Convert and check value = pvAsciiData; if(value.canConvert(QVariant::Double))\{ if(value.convert(QVariant::Double))\{ value.setValue(checkFloatingValueValidity(value.toDouble())); return value; /return checkFloatingValueValidity(value.toDouble()); \} \}

return QVariant(); \} 

Definition at line 149 of file mdtFrameCodecScpi.cpp.

\hypertarget{classmdt_frame_codec_scpi_a37a1703b6daee6f6bf91c6afb46191b3}{
\index{mdtFrameCodecScpi@{mdtFrameCodecScpi}!decodeValues@{decodeValues}}
\index{decodeValues@{decodeValues}!mdtFrameCodecScpi@{mdtFrameCodecScpi}}
\subsubsection[{decodeValues}]{\setlength{\rightskip}{0pt plus 5cm}bool mdtFrameCodecScpi::decodeValues (
\begin{DoxyParamCaption}
\item[{const QByteArray \&}]{data, }
\item[{QString}]{sep = {\ttfamily \char`\"{}:\char`\"{}}}
\end{DoxyParamCaption}
)}}
\label{classmdt_frame_codec_scpi_a37a1703b6daee6f6bf91c6afb46191b3}


Decode SCPI value(s) 

After decode is done, values are available with \hyperlink{classmdt_frame_codec_af3353b74e1ab64ad7cc764dcaf22e7e8}{values()}.

Internally, \hyperlink{classmdt_frame_codec_ascii_aca3ccdf0bc617747e99ed1672344b880}{mdtFrameCodecAscii::convertData()} is used for conversion. Additionnaly, if decoded type is double, the validity is checked with \hyperlink{classmdt_frame_codec_scpi_a90d550cfe0ed5605c63a064359fc762d}{checkFloatingValueValidity()}.


\begin{DoxyParams}{Parameters}
{\em data} & String that contains one value, or many separated by sep. \\
\hline
{\em sep} & Values separator.\\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
True if decode could be done.
\end{DoxyReturn}
Errors are logged with the \hyperlink{classmdt_error}{mdtError} system. 

double fltValue;

fltValue = value.toDouble(); Check about Nan if(qAbs(fltValue -\/ pvNan) $<$= FLT\_\-EPSILON)\{ value.clear(); \}else\{ Check about -\/OL and OL if((fltValue $<$= (pvNinfinity+FLT\_\-EPSILON))$|$$|$(fltValue $>$= (pvInfinity-\/FLT\_\-EPSILON)))\{ value.clear(); \} \}

value = checkFloatingValueValidity(value.toDouble()); value.setValue(checkFloatingValueValidity(value.toDouble())); 



Definition at line 46 of file mdtFrameCodecScpi.cpp.



The documentation for this class was generated from the following files:\begin{DoxyCompactItemize}
\item 
src/mdtutils/mdtFrameCodecScpi.h\item 
src/mdtutils/mdtFrameCodecScpi.cpp\end{DoxyCompactItemize}
