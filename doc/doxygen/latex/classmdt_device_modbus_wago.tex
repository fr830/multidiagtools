\hypertarget{classmdt_device_modbus_wago}{\section{mdt\-Device\-Modbus\-Wago Class Reference}
\label{classmdt_device_modbus_wago}\index{mdt\-Device\-Modbus\-Wago@{mdt\-Device\-Modbus\-Wago}}
}


{\ttfamily \#include $<$mdt\-Device\-Modbus\-Wago.\-h$>$}



Inheritance diagram for mdt\-Device\-Modbus\-Wago\-:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=202pt]{classmdt_device_modbus_wago__inherit__graph}
\end{center}
\end{figure}


Collaboration diagram for mdt\-Device\-Modbus\-Wago\-:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classmdt_device_modbus_wago__coll__graph}
\end{center}
\end{figure}
\subsection*{Public Member Functions}
\begin{DoxyCompactItemize}
\item 
\hyperlink{classmdt_device_modbus_wago_a31abb03678a8afe2e6bf7c03e5e92726}{mdt\-Device\-Modbus\-Wago} (Q\-Object $\ast$parent=0)
\begin{DoxyCompactList}\small\item\em Constructor. \end{DoxyCompactList}\item 
\hyperlink{classmdt_device_modbus_wago_a8a13bfe3028d8c286d4233ea0ce0b2a8}{$\sim$mdt\-Device\-Modbus\-Wago} ()
\begin{DoxyCompactList}\small\item\em Destructor. \end{DoxyCompactList}\item 
bool \hyperlink{classmdt_device_modbus_wago_a5831a91162736cc01f35e7dd2c01852a}{connect\-To\-Device} ()
\begin{DoxyCompactList}\small\item\em Connect to physical device. \end{DoxyCompactList}\item 
bool \hyperlink{classmdt_device_modbus_wago_a5a0a92aa5334b4926f693344928a9d38}{connect\-To\-Device} (const \hyperlink{classmdt_modbus_hw_node_id}{mdt\-Modbus\-Hw\-Node\-Id} \&hw\-Node\-Id, const Q\-String \&\hyperlink{classmdt_device_a3aa589ecae0fa3deed61431d07db9276}{alias}=Q\-String(), int scan\-Timeout=500, int port=502)
\begin{DoxyCompactList}\small\item\em Connect to physical device with given hardware node I\-D. \end{DoxyCompactList}\item 
bool \hyperlink{classmdt_device_modbus_wago_a6f01ba89d90ddfbcaa0cbda1885d22f1}{is\-Wago750} ()
\begin{DoxyCompactList}\small\item\em Check if device is a Wago 750 series. \end{DoxyCompactList}\item 
int \hyperlink{classmdt_device_modbus_wago_ad812b7ee3a2f2677cddde205da5ec787}{analog\-Outputs\-Count} ()
\begin{DoxyCompactList}\small\item\em Get number of analog outputs. \end{DoxyCompactList}\item 
int \hyperlink{classmdt_device_modbus_wago_a9da56c13404fd9243c5920ff2ef8bd15}{analog\-Inputs\-Count} ()
\begin{DoxyCompactList}\small\item\em Get number of analog inputs. \end{DoxyCompactList}\item 
int \hyperlink{classmdt_device_modbus_wago_a6711c4e486c3b103b187102685e091cc}{digital\-Outputs\-Count} ()
\begin{DoxyCompactList}\small\item\em Get number of digital outputs. \end{DoxyCompactList}\item 
int \hyperlink{classmdt_device_modbus_wago_ad51fd45858e62c597ba8fc2bf3e877bd}{digital\-Inputs\-Count} ()
\begin{DoxyCompactList}\small\item\em Get number of digital inputs. \end{DoxyCompactList}\item 
bool \hyperlink{classmdt_device_modbus_wago_aae46b00317190b70a59080e9b2917ed6}{detect\-Ios} (const Q\-Map$<$ int, \hyperlink{classmdt_device_modbus_wago_module}{mdt\-Device\-Modbus\-Wago\-Module} $\ast$ $>$ special\-Modules=Q\-Map$<$ int, \hyperlink{classmdt_device_modbus_wago_module}{mdt\-Device\-Modbus\-Wago\-Module} $\ast$ $>$())
\begin{DoxyCompactList}\small\item\em Query device about filed bus + I/\-Os setup. \end{DoxyCompactList}\end{DoxyCompactItemize}
\subsection*{Additional Inherited Members}


\subsection{Detailed Description}


Definition at line 35 of file mdt\-Device\-Modbus\-Wago.\-h.



\subsection{Constructor \& Destructor Documentation}
\hypertarget{classmdt_device_modbus_wago_a31abb03678a8afe2e6bf7c03e5e92726}{\index{mdt\-Device\-Modbus\-Wago@{mdt\-Device\-Modbus\-Wago}!mdt\-Device\-Modbus\-Wago@{mdt\-Device\-Modbus\-Wago}}
\index{mdt\-Device\-Modbus\-Wago@{mdt\-Device\-Modbus\-Wago}!mdtDeviceModbusWago@{mdt\-Device\-Modbus\-Wago}}
\subsubsection[{mdt\-Device\-Modbus\-Wago}]{\setlength{\rightskip}{0pt plus 5cm}mdt\-Device\-Modbus\-Wago\-::mdt\-Device\-Modbus\-Wago (
\begin{DoxyParamCaption}
\item[{Q\-Object $\ast$}]{parent = {\ttfamily 0}}
\end{DoxyParamCaption}
)}}\label{classmdt_device_modbus_wago_a31abb03678a8afe2e6bf7c03e5e92726}


Constructor. 



Definition at line 39 of file mdt\-Device\-Modbus\-Wago.\-cpp.

\hypertarget{classmdt_device_modbus_wago_a8a13bfe3028d8c286d4233ea0ce0b2a8}{\index{mdt\-Device\-Modbus\-Wago@{mdt\-Device\-Modbus\-Wago}!$\sim$mdt\-Device\-Modbus\-Wago@{$\sim$mdt\-Device\-Modbus\-Wago}}
\index{$\sim$mdt\-Device\-Modbus\-Wago@{$\sim$mdt\-Device\-Modbus\-Wago}!mdtDeviceModbusWago@{mdt\-Device\-Modbus\-Wago}}
\subsubsection[{$\sim$mdt\-Device\-Modbus\-Wago}]{\setlength{\rightskip}{0pt plus 5cm}mdt\-Device\-Modbus\-Wago\-::$\sim$mdt\-Device\-Modbus\-Wago (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
)}}\label{classmdt_device_modbus_wago_a8a13bfe3028d8c286d4233ea0ce0b2a8}


Destructor. 



Definition at line 44 of file mdt\-Device\-Modbus\-Wago.\-cpp.



\subsection{Member Function Documentation}
\hypertarget{classmdt_device_modbus_wago_a9da56c13404fd9243c5920ff2ef8bd15}{\index{mdt\-Device\-Modbus\-Wago@{mdt\-Device\-Modbus\-Wago}!analog\-Inputs\-Count@{analog\-Inputs\-Count}}
\index{analog\-Inputs\-Count@{analog\-Inputs\-Count}!mdtDeviceModbusWago@{mdt\-Device\-Modbus\-Wago}}
\subsubsection[{analog\-Inputs\-Count}]{\setlength{\rightskip}{0pt plus 5cm}int mdt\-Device\-Modbus\-Wago\-::analog\-Inputs\-Count (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
)}}\label{classmdt_device_modbus_wago_a9da56c13404fd9243c5920ff2ef8bd15}


Get number of analog inputs. 

Note\-: calling this method will query the device

\begin{DoxyReturn}{Returns}
Number of analog inputs, or $<$ 0 on error 
\end{DoxyReturn}


Definition at line 110 of file mdt\-Device\-Modbus\-Wago.\-cpp.



References mdt\-Device\-Modbus\-::get\-Register\-Values(), and mdt\-Device\-Modbus\-::register\-Values().



Referenced by detect\-Ios().

\hypertarget{classmdt_device_modbus_wago_ad812b7ee3a2f2677cddde205da5ec787}{\index{mdt\-Device\-Modbus\-Wago@{mdt\-Device\-Modbus\-Wago}!analog\-Outputs\-Count@{analog\-Outputs\-Count}}
\index{analog\-Outputs\-Count@{analog\-Outputs\-Count}!mdtDeviceModbusWago@{mdt\-Device\-Modbus\-Wago}}
\subsubsection[{analog\-Outputs\-Count}]{\setlength{\rightskip}{0pt plus 5cm}int mdt\-Device\-Modbus\-Wago\-::analog\-Outputs\-Count (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
)}}\label{classmdt_device_modbus_wago_ad812b7ee3a2f2677cddde205da5ec787}


Get number of analog outputs. 

Note\-: calling this method will query the device

\begin{DoxyReturn}{Returns}
Number of analog outputs, or $<$ 0 on error 
\end{DoxyReturn}


Definition at line 99 of file mdt\-Device\-Modbus\-Wago.\-cpp.



References mdt\-Device\-Modbus\-::get\-Register\-Values(), and mdt\-Device\-Modbus\-::register\-Values().



Referenced by detect\-Ios().

\hypertarget{classmdt_device_modbus_wago_a5831a91162736cc01f35e7dd2c01852a}{\index{mdt\-Device\-Modbus\-Wago@{mdt\-Device\-Modbus\-Wago}!connect\-To\-Device@{connect\-To\-Device}}
\index{connect\-To\-Device@{connect\-To\-Device}!mdtDeviceModbusWago@{mdt\-Device\-Modbus\-Wago}}
\subsubsection[{connect\-To\-Device}]{\setlength{\rightskip}{0pt plus 5cm}bool mdt\-Device\-Modbus\-Wago\-::connect\-To\-Device (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [virtual]}}}\label{classmdt_device_modbus_wago_a5831a91162736cc01f35e7dd2c01852a}


Connect to physical device. 

Connect to device set with \hyperlink{classmdt_device_a3fdad460ae0eac5710b13e400156cb1d}{set\-Device\-Address()}. It will be checked that device is a Wago 750 field bus coupler. If device address contains a valid hardware node I\-D, it will also be checked that it matches, else it will be ignored.

\begin{DoxySeeAlso}{See Also}
\hyperlink{classmdt_device_a3fdad460ae0eac5710b13e400156cb1d}{mdt\-Device\-::set\-Device\-Address()}. 
\end{DoxySeeAlso}


Reimplemented from \hyperlink{classmdt_device_modbus_ae8634515742f3ed42dc52dfaa8d65313}{mdt\-Device\-Modbus}.



Definition at line 49 of file mdt\-Device\-Modbus\-Wago.\-cpp.



References mdt\-Error\-::commit(), mdt\-Device\-Modbus\-::connect\-To\-Device(), mdt\-Device\-::device\-Id\-String(), mdt\-Device\-::disconnect\-From\-Device(), mdt\-Error\-::\-Error, is\-Wago750(), M\-D\-T\-\_\-\-E\-R\-R\-O\-R\-\_\-\-S\-E\-T\-\_\-\-S\-R\-C, mdt\-Device\-::pv\-Last\-Error, and mdt\-Error\-::set\-Error().

\hypertarget{classmdt_device_modbus_wago_a5a0a92aa5334b4926f693344928a9d38}{\index{mdt\-Device\-Modbus\-Wago@{mdt\-Device\-Modbus\-Wago}!connect\-To\-Device@{connect\-To\-Device}}
\index{connect\-To\-Device@{connect\-To\-Device}!mdtDeviceModbusWago@{mdt\-Device\-Modbus\-Wago}}
\subsubsection[{connect\-To\-Device}]{\setlength{\rightskip}{0pt plus 5cm}bool mdt\-Device\-Modbus\-Wago\-::connect\-To\-Device (
\begin{DoxyParamCaption}
\item[{const {\bf mdt\-Modbus\-Hw\-Node\-Id} \&}]{hw\-Node\-Id, }
\item[{const Q\-String \&}]{alias = {\ttfamily QString()}, }
\item[{int}]{scan\-Timeout = {\ttfamily 500}, }
\item[{int}]{port = {\ttfamily 502}}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [virtual]}}}\label{classmdt_device_modbus_wago_a5a0a92aa5334b4926f693344928a9d38}


Connect to physical device with given hardware node I\-D. 

Will search a M\-O\-D\-B\-U\-S/\-T\-C\-P device on network that has requested hardware node I\-D, starting with cached known hosts. It will also be checked that device is a Wago 750 field bus coupler.


\begin{DoxyParams}{Parameters}
{\em hw\-Node\-Id} & Hardware node I\-D \\
\hline
{\em alias} & Alias to give. Will be ignored if empty \\
\hline
{\em scan\-Timeout} & Time to wait during scan before considering device is not reachable \mbox{[}ms\mbox{]} \\
\hline
{\em port} & Port. M\-O\-D\-B\-U\-S/\-T\-C\-P default port is 502. \\
\hline
\end{DoxyParams}


Reimplemented from \hyperlink{classmdt_device_modbus_ad6996c61045f2b0247cf19359e3d269d}{mdt\-Device\-Modbus}.



Definition at line 67 of file mdt\-Device\-Modbus\-Wago.\-cpp.



References mdt\-Device\-Modbus\-::connect\-To\-Device().

\hypertarget{classmdt_device_modbus_wago_aae46b00317190b70a59080e9b2917ed6}{\index{mdt\-Device\-Modbus\-Wago@{mdt\-Device\-Modbus\-Wago}!detect\-Ios@{detect\-Ios}}
\index{detect\-Ios@{detect\-Ios}!mdtDeviceModbusWago@{mdt\-Device\-Modbus\-Wago}}
\subsubsection[{detect\-Ios}]{\setlength{\rightskip}{0pt plus 5cm}bool mdt\-Device\-Modbus\-Wago\-::detect\-Ios (
\begin{DoxyParamCaption}
\item[{const Q\-Map$<$ int, {\bf mdt\-Device\-Modbus\-Wago\-Module} $\ast$ $>$}]{special\-Modules = {\ttfamily QMap$<$int,~{\bf mdt\-Device\-Modbus\-Wago\-Module}$\ast$$>$()}}
\end{DoxyParamCaption}
)}}\label{classmdt_device_modbus_wago_aae46b00317190b70a59080e9b2917ed6}


Query device about filed bus + I/\-Os setup. 

For some special configurable modules, channels count and process image format can vary. Because some of these parameters cannot be readen from module via M\-O\-D\-B\-U\-S, a instance of a module object with corresponding setup must be given as argument. (It's also possible to specify only the special modules. Internally, setup regarding register word returned from fieldbus coupler will be used for positions that are not present in the map).


\begin{DoxyParams}{Parameters}
{\em special\-Modules} & Map with module position as key and special module object as value. Note\-: position 0 is the fieldbus coupler, so module position starts at 1. Module objects contained in the map are not deleted in this method. \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
True on success. A failure is mostly due to a communication error, an unsupported fieldbus coupler, a unsupported module or a mistmatch with a special module configuration. 
\end{DoxyReturn}


Definition at line 143 of file mdt\-Device\-Modbus\-Wago.\-cpp.



References mdt\-Multi\-Io\-Device\-::add\-Inputs(), mdt\-Multi\-Io\-Device\-::add\-Outputs(), mdt\-Device\-Modbus\-Wago\-Module\-::analog\-Inputs(), analog\-Inputs\-Count(), mdt\-Device\-Modbus\-Wago\-Module\-::analog\-Outputs(), analog\-Outputs\-Count(), mdt\-Device\-Modbus\-Wago\-Module\-::clear(), mdt\-Error\-::commit(), mdt\-Multi\-Io\-Device\-::delete\-Ios(), mdt\-Device\-::device\-Id\-String(), mdt\-Device\-Modbus\-Wago\-Module\-::digital\-Inputs(), digital\-Inputs\-Count(), mdt\-Device\-Modbus\-Wago\-Module\-::digital\-Outputs(), digital\-Outputs\-Count(), mdt\-Error\-::\-Error, mdt\-Device\-Modbus\-::get\-Register\-Values(), mdt\-Multi\-Io\-Device\-::ios(), mdt\-Device\-Modbus\-Wago\-Module\-::last\-Error(), M\-D\-T\-\_\-\-E\-R\-R\-O\-R\-\_\-\-S\-E\-T\-\_\-\-S\-R\-C, mdt\-Device\-Modbus\-Wago\-Module\-::next\-Module\-First\-Ai\-Address(), mdt\-Device\-Modbus\-Wago\-Module\-::next\-Module\-First\-Ao\-Address\-Read(), mdt\-Device\-Modbus\-Wago\-Module\-::next\-Module\-First\-Ao\-Address\-Write(), mdt\-Device\-Modbus\-Wago\-Module\-::next\-Module\-First\-Di\-Address(), mdt\-Device\-Modbus\-Wago\-Module\-::next\-Module\-First\-Do\-Address\-Read(), mdt\-Device\-Modbus\-Wago\-Module\-::next\-Module\-First\-Do\-Address\-Write(), mdt\-Device\-::pv\-Last\-Error, mdt\-Device\-Modbus\-::register\-Values(), mdt\-Error\-::set\-Error(), mdt\-Device\-Modbus\-Wago\-Module\-::setup\-From\-Register\-Word(), mdt\-Device\-Modbus\-Wago\-Module\-::type(), mdt\-Device\-Modbus\-Wago\-Module\-::\-Unknown, and mdt\-Device\-Modbus\-Wago\-Module\-::update\-Addresses().

\hypertarget{classmdt_device_modbus_wago_ad51fd45858e62c597ba8fc2bf3e877bd}{\index{mdt\-Device\-Modbus\-Wago@{mdt\-Device\-Modbus\-Wago}!digital\-Inputs\-Count@{digital\-Inputs\-Count}}
\index{digital\-Inputs\-Count@{digital\-Inputs\-Count}!mdtDeviceModbusWago@{mdt\-Device\-Modbus\-Wago}}
\subsubsection[{digital\-Inputs\-Count}]{\setlength{\rightskip}{0pt plus 5cm}int mdt\-Device\-Modbus\-Wago\-::digital\-Inputs\-Count (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
)}}\label{classmdt_device_modbus_wago_ad51fd45858e62c597ba8fc2bf3e877bd}


Get number of digital inputs. 

Note\-: calling this method will query the device

\begin{DoxyReturn}{Returns}
Number of digital inputs, or $<$ 0 on error 
\end{DoxyReturn}


Definition at line 132 of file mdt\-Device\-Modbus\-Wago.\-cpp.



References mdt\-Device\-Modbus\-::get\-Register\-Values(), and mdt\-Device\-Modbus\-::register\-Values().



Referenced by detect\-Ios().

\hypertarget{classmdt_device_modbus_wago_a6711c4e486c3b103b187102685e091cc}{\index{mdt\-Device\-Modbus\-Wago@{mdt\-Device\-Modbus\-Wago}!digital\-Outputs\-Count@{digital\-Outputs\-Count}}
\index{digital\-Outputs\-Count@{digital\-Outputs\-Count}!mdtDeviceModbusWago@{mdt\-Device\-Modbus\-Wago}}
\subsubsection[{digital\-Outputs\-Count}]{\setlength{\rightskip}{0pt plus 5cm}int mdt\-Device\-Modbus\-Wago\-::digital\-Outputs\-Count (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
)}}\label{classmdt_device_modbus_wago_a6711c4e486c3b103b187102685e091cc}


Get number of digital outputs. 

Note\-: calling this method will query the device

\begin{DoxyReturn}{Returns}
Number of digital outputs, or $<$ 0 on error 
\end{DoxyReturn}


Definition at line 121 of file mdt\-Device\-Modbus\-Wago.\-cpp.



References mdt\-Device\-Modbus\-::get\-Register\-Values(), and mdt\-Device\-Modbus\-::register\-Values().



Referenced by detect\-Ios().

\hypertarget{classmdt_device_modbus_wago_a6f01ba89d90ddfbcaa0cbda1885d22f1}{\index{mdt\-Device\-Modbus\-Wago@{mdt\-Device\-Modbus\-Wago}!is\-Wago750@{is\-Wago750}}
\index{is\-Wago750@{is\-Wago750}!mdtDeviceModbusWago@{mdt\-Device\-Modbus\-Wago}}
\subsubsection[{is\-Wago750}]{\setlength{\rightskip}{0pt plus 5cm}bool mdt\-Device\-Modbus\-Wago\-::is\-Wago750 (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
)}}\label{classmdt_device_modbus_wago_a6f01ba89d90ddfbcaa0cbda1885d22f1}


Check if device is a Wago 750 series. 



Definition at line 78 of file mdt\-Device\-Modbus\-Wago.\-cpp.



References mdt\-Error\-::commit(), mdt\-Device\-::device\-Id\-String(), mdt\-Device\-Modbus\-::get\-Register\-Values(), mdt\-Error\-::\-Info, M\-D\-T\-\_\-\-D\-E\-V\-I\-C\-E\-\_\-\-E\-R\-R\-O\-R, M\-D\-T\-\_\-\-E\-R\-R\-O\-R\-\_\-\-S\-E\-T\-\_\-\-S\-R\-C, and mdt\-Device\-Modbus\-::register\-Values().



Referenced by connect\-To\-Device().



The documentation for this class was generated from the following files\-:\begin{DoxyCompactItemize}
\item 
src/mdtdevice/\hyperlink{mdt_device_modbus_wago_8h}{mdt\-Device\-Modbus\-Wago.\-h}\item 
src/mdtdevice/\hyperlink{mdt_device_modbus_wago_8cpp}{mdt\-Device\-Modbus\-Wago.\-cpp}\end{DoxyCompactItemize}
