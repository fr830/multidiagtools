<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>Multi diag tools: mdtPortManager Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body onload='searchBox.OnSelectItem(0);'>
<!-- Generated by Doxygen 1.7.4 -->
<script type="text/javascript"><!--
var searchBox = new SearchBox("searchBox", "search",false,'Search');
--></script>
<div id="top">
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">Multi diag tools</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li class="current"><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li id="searchli">
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="annotated.html"><span>Class&#160;List</span></a></li>
      <li><a href="classes.html"><span>Class&#160;Index</span></a></li>
      <li><a href="inherits.html"><span>Class&#160;Hierarchy</span></a></li>
      <li><a href="functions.html"><span>Class&#160;Members</span></a></li>
    </ul>
  </div>
</div>
<div class="header">
  <div class="summary">
<a href="#pub-types">Public Types</a> &#124;
<a href="#pub-slots">Public Slots</a> &#124;
<a href="#signals">Signals</a> &#124;
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pro-slots">Protected Slots</a> &#124;
<a href="#pro-methods">Protected Member Functions</a> &#124;
<a href="#pro-attribs">Protected Attributes</a>  </div>
  <div class="headertitle">
<div class="title">mdtPortManager Class Reference</div>  </div>
</div>
<div class="contents">
<!-- doxytag: class="mdtPortManager" -->
<p>Port manager base class.  
 <a href="classmdt_port_manager.html#details">More...</a></p>

<p><code>#include &lt;<a class="el" href="mdt_port_manager_8h_source.html">mdtPortManager.h</a>&gt;</code></p>
<div class="dynheader">
Inheritance diagram for mdtPortManager:</div>
<div class="dyncontent">
<div class="center"><img src="classmdt_port_manager__inherit__graph.png" border="0" usemap="#mdt_port_manager_inherit__map" alt="Inheritance graph"/></div>
<map name="mdt_port_manager_inherit__map" id="mdt_port_manager_inherit__map">
<area shape="rect" id="node3" href="classmdt_modbus_tcp_port_manager.html" title="MODBUS/TCP port manager." alt="" coords="5,83,192,112"/><area shape="rect" id="node5" href="classmdt_serial_port_manager.html" title="Serial port manager class." alt="" coords="216,83,365,112"/><area shape="rect" id="node7" href="classmdt_usb_port_manager.html" title="Helper class that simplify access to USB port API." alt="" coords="389,83,531,112"/><area shape="rect" id="node9" href="classmdt_usbtmc_port_manager.html" title="USBTMC port manager." alt="" coords="379,160,541,189"/></map>
<center><span class="legend">[<a href="graph_legend.html">legend</a>]</span></center></div>
<div class="dynheader">
Collaboration diagram for mdtPortManager:</div>
<div class="dyncontent">
<div class="center"><img src="classmdt_port_manager__coll__graph.png" border="0" usemap="#mdt_port_manager_coll__map" alt="Collaboration graph"/></div>
<map name="mdt_port_manager_coll__map" id="mdt_port_manager_coll__map">
<area shape="rect" id="node2" href="classmdt_port_manager_state_machine.html" title="State machine for port manager." alt="" coords="61,360,258,389"/><area shape="rect" id="node4" href="classmdt_state_machine.html" title="Extend Qt&#39;s QStateMachine." alt="" coords="137,183,259,212"/><area shape="rect" id="node6" href="classmdt_state.html" title="Representation of a state in mdtStateMachine." alt="" coords="37,5,111,35"/><area shape="rect" id="node9" href="classmdt_port_thread.html" title="mdtPortThread" alt="" coords="369,360,475,389"/><area shape="rect" id="node11" href="classmdt_abstract_port.html" title="Base class for port I/O." alt="" coords="298,183,415,212"/><area shape="rect" id="node13" href="classmdt_port_config.html" title="mdtPortConfig" alt="" coords="303,5,410,35"/><area shape="rect" id="node15" href="classmdt_port_info.html" title="Contains informations about a port." alt="" coords="499,360,590,389"/></map>
<center><span class="legend">[<a href="graph_legend.html">legend</a>]</span></center></div>

<p><a href="classmdt_port_manager-members.html">List of all members.</a></p>
<table class="memberdecls">
<tr><td colspan="2"><h2><a name="pub-types"></a>
Public Types</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">enum &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmdt_port_manager.html#a9448339d7f08ca5e18b904df25b382da">state_t</a> { <br/>
&#160;&#160;<a class="el" href="classmdt_port_manager.html#a9448339d7f08ca5e18b904df25b382daabac9679c411402c9db01399ecb72b84d">PortClosed</a> =  0, 
<a class="el" href="classmdt_port_manager.html#a9448339d7f08ca5e18b904df25b382daadbd7b0395c62e9ae38525c5dc5ba44a6">Stopped</a>, 
<a class="el" href="classmdt_port_manager.html#a9448339d7f08ca5e18b904df25b382daaca288962f5cb3d352f44f4e4c15f14d2">Starting</a>, 
<a class="el" href="classmdt_port_manager.html#a9448339d7f08ca5e18b904df25b382daa1c68525fc2c4d94e39a73d1a4bea0476">Stopping</a>, 
<br/>
&#160;&#160;<a class="el" href="classmdt_port_manager.html#a9448339d7f08ca5e18b904df25b382daaa7af1c561e17e65982c027de942d4a75">Running</a>, 
<a class="el" href="classmdt_port_manager.html#a9448339d7f08ca5e18b904df25b382daa2440f5bfc7ae5c78db1598ef6d3d394c">PortError</a>, 
<a class="el" href="classmdt_port_manager.html#a9448339d7f08ca5e18b904df25b382daa3a3b42b9d783381f3c7447086503fde6">PortReady</a>, 
<a class="el" href="classmdt_port_manager.html#a9448339d7f08ca5e18b904df25b382daa4004253e25d51b1e628bb5006dbbd153">Disconnected</a>, 
<br/>
&#160;&#160;<a class="el" href="classmdt_port_manager.html#a9448339d7f08ca5e18b904df25b382daa89e805c9c75c39ecc8371d5f38131227">Connecting</a>, 
<a class="el" href="classmdt_port_manager.html#a9448339d7f08ca5e18b904df25b382daa3c3620c8eb4ddb126568053e3d49195f">Connected</a>, 
<a class="el" href="classmdt_port_manager.html#a9448339d7f08ca5e18b904df25b382daaf2ba40e19587c3a98235ee96a4acf20e">Ready</a>, 
<a class="el" href="classmdt_port_manager.html#a9448339d7f08ca5e18b904df25b382daa5da3fa5dd98a264ecb4a37a1983ea0ff">Busy</a>
<br/>
 }</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">State of device.  <a href="classmdt_port_manager.html#a9448339d7f08ca5e18b904df25b382da">More...</a><br/></td></tr>
<tr><td colspan="2"><h2><a name="pub-slots"></a>
Public Slots</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmdt_port_manager.html#a1d185e9bb610aee16ccd9499ae7bff0d">abort</a> ()</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Cancel read and write operations.  <a href="#a1d185e9bb610aee16ccd9499ae7bff0d"></a><br/></td></tr>
<tr><td colspan="2"><h2><a name="signals"></a>
Signals</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmdt_port_manager.html#a416a24db1048e9f66aef27ea810954d2">newTransactionDone</a> (<a class="el" href="classmdt_port_transaction.html">mdtPortTransaction</a> *transaction)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Emitted each time a transaction is done.  <a href="#a416a24db1048e9f66aef27ea810954d2"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmdt_port_manager.html#a6f6c6f8a8430d8631a08c765565db9ab">statusMessageChanged</a> (const QString &amp;message, const QString &amp;details, int timeout)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Emitted when a new status message is to display.  <a href="#a6f6c6f8a8430d8631a08c765565db9ab"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a01da0634bc52a71c0df0d83fc166eeda"></a><!-- doxytag: member="mdtPortManager::stateChanged" ref="a01da0634bc52a71c0df0d83fc166eeda" args="(int stateId)" -->
void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmdt_port_manager.html#a01da0634bc52a71c0df0d83fc166eeda">stateChanged</a> (int stateId)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Emitted each time the state changed. <br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmdt_port_manager.html#ae00d513ed335fbd203852dcb7180005c">stateChangedForUi</a> (int stateId, const QString &amp;stateText, int ledColorId, bool ledIsOn)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Emitted only if a state that must be notified is entered.  <a href="#ae00d513ed335fbd203852dcb7180005c"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmdt_port_manager.html#ae77c1b24291797704488beda0009c57a">pmPortClosedEvent</a> ()</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Sent when port was closed.  <a href="#ae77c1b24291797704488beda0009c57a"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmdt_port_manager.html#aa12ccb053b3ce050a2482a957b28222e">pmStartThreadsEvent</a> ()</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Sent when threads must be started.  <a href="#aa12ccb053b3ce050a2482a957b28222e"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmdt_port_manager.html#a7b81ee6491167fa17574d840720d9b33">pmStopThreadsEvent</a> ()</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Sent when threads must be stopped.  <a href="#a7b81ee6491167fa17574d840720d9b33"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmdt_port_manager.html#a6dd5529e6de23897fe5082ee4a33fa3d">pmAllThreadsReadyEvent</a> ()</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Sent when all threads are ready.  <a href="#a6dd5529e6de23897fe5082ee4a33fa3d"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmdt_port_manager.html#a1bfd4d20867ecae2cad1b95b52860b12">pmAllThreadsStoppedEvent</a> ()</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Sent when all threads are stopped.  <a href="#a1bfd4d20867ecae2cad1b95b52860b12"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmdt_port_manager.html#a94d3fa4a26f8686449313a54003f0b4d">pmUnhandledErrorEvent</a> ()</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Sent when a unhandled error occured.  <a href="#a94d3fa4a26f8686449313a54003f0b4d"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmdt_port_manager.html#a04fb1d09af226677cacd6f0e485d9810">pmConnectingEvent</a> ()</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Sent when connection with device beginns.  <a href="#a04fb1d09af226677cacd6f0e485d9810"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmdt_port_manager.html#a871ec7f9676a12c84196404285cf2161">pmConnectedEvent</a> ()</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Sent when connection with device is established.  <a href="#a871ec7f9676a12c84196404285cf2161"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmdt_port_manager.html#ab4667ac04a31166eeb7b5f92893b16db">pmDisconnectedEvent</a> ()</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Sent when connection with device was lost/closed.  <a href="#ab4667ac04a31166eeb7b5f92893b16db"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmdt_port_manager.html#a57fc083d7db52279ec6b990b75705552">pmConnectionFailedEvent</a> ()</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Sent when connection failed on startup or after max try.  <a href="#a57fc083d7db52279ec6b990b75705552"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmdt_port_manager.html#a5959d4025f4903eef0ea65c350f6f9b3">pmBusyEvent</a> ()</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Sent when device is busy (or other slow down reason..)  <a href="#a5959d4025f4903eef0ea65c350f6f9b3"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmdt_port_manager.html#aa23c17048773e345778e7d6393f630db">pmReadyEvent</a> ()</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Sent when device and communication becomes ready again.  <a href="#aa23c17048773e345778e7d6393f630db"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmdt_port_manager.html#a0be3429f901fc9bf4adee196035d2cee">pmTransactionTimeoutEvent</a> ()</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Sent when a transaction timeout occured.  <a href="#a0be3429f901fc9bf4adee196035d2cee"></a><br/></td></tr>
<tr><td colspan="2"><h2><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmdt_port_manager.html#a5ec36523089b7528d973e29cdbc64d01">mdtPortManager</a> (QObject *parent=0)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Contruct a port manager.  <a href="#a5ec36523089b7528d973e29cdbc64d01"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmdt_port_manager.html#adf797f8fd7a3ffdc000890a224e4c1b6">~mdtPortManager</a> ()</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Destructor.  <a href="#adf797f8fd7a3ffdc000890a224e4c1b6"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual QList&lt; <a class="el" href="classmdt_port_info.html">mdtPortInfo</a> * &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmdt_port_manager.html#ad56afb411ab5468005fca04767557ece">scan</a> ()</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Scan for available ports.  <a href="#ad56afb411ab5468005fca04767557ece"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmdt_port_manager.html#afcd156b2d0c9d340999935efb6cd8cb6">setPort</a> (<a class="el" href="classmdt_abstract_port.html">mdtAbstractPort</a> *port)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Set port object.  <a href="#afcd156b2d0c9d340999935efb6cd8cb6"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmdt_port_manager.html#a3107b7121dfe5b9686d9b3b3a48a0af0">lockPortMutex</a> ()</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Lock the port's mutex.  <a href="#a3107b7121dfe5b9686d9b3b3a48a0af0"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmdt_port_manager.html#a882e6bf95dac9cd4ab8cc93ecc524874">unlockPortMutex</a> ()</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Unlock port's mutex.  <a href="#a882e6bf95dac9cd4ab8cc93ecc524874"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmdt_port_manager.html#a39cb4af4aedc0b6b7c4d4f53002c3fd1">detachPort</a> (bool deletePort, bool deleteThreads)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Detach port.  <a href="#a39cb4af4aedc0b6b7c4d4f53002c3fd1"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmdt_port_manager.html#ab62591409d019a4a2576b4310c411b8f">addThread</a> (<a class="el" href="classmdt_port_thread.html">mdtPortThread</a> *thread)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Add a thread and assign it to port.  <a href="#ab62591409d019a4a2576b4310c411b8f"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="classmdt_port_thread.html">mdtPortThread</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmdt_port_manager.html#ad9233b5156a45f2684783317d75fdf9b">readThread</a> ()</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns instance of reader thread.  <a href="#ad9233b5156a45f2684783317d75fdf9b"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="classmdt_port_thread.html">mdtPortThread</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmdt_port_manager.html#af44b6e9876e6687b1d4fe7e05ffd5a91">writeThread</a> ()</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns instance of writer thread.  <a href="#af44b6e9876e6687b1d4fe7e05ffd5a91"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmdt_port_manager.html#aaa0a474183bcae0fff4fb9ef43023c25">removeThreads</a> (bool releaseMemory)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Detach threads from port and remove threads.  <a href="#aaa0a474183bcae0fff4fb9ef43023c25"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmdt_port_manager.html#af1fb103ffafc227337a59c7e82f44fbc">start</a> ()</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Start port manager.  <a href="#af1fb103ffafc227337a59c7e82f44fbc"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmdt_port_manager.html#aacbf87cc3d9c37c87e21696f8a6514bd">stop</a> ()</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Stop port manager.  <a href="#aacbf87cc3d9c37c87e21696f8a6514bd"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmdt_port_manager.html#a2b2ed690cbba9f544c6ac1b46684e59a">setPortName</a> (const QString &amp;portName)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Set port name.  <a href="#a2b2ed690cbba9f544c6ac1b46684e59a"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmdt_port_manager.html#a7e2ef93ec2731e66aa2b2d5f7ce9bc1c">setPortInfo</a> (<a class="el" href="classmdt_port_info.html">mdtPortInfo</a> info)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Set port info.  <a href="#a7e2ef93ec2731e66aa2b2d5f7ce9bc1c"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a88109b455fc5a5f5adf0636f7450143e"></a><!-- doxytag: member="mdtPortManager::portInfo" ref="a88109b455fc5a5f5adf0636f7450143e" args="()" -->
<a class="el" href="classmdt_port_info.html">mdtPortInfo</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmdt_port_manager.html#a88109b455fc5a5f5adf0636f7450143e">portInfo</a> ()</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Get current port info. <br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="af4fcab6aaad98d74aeabfc972da1d406"></a><!-- doxytag: member="mdtPortManager::portName" ref="af4fcab6aaad98d74aeabfc972da1d406" args="() const " -->
QString&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmdt_port_manager.html#af4fcab6aaad98d74aeabfc972da1d406">portName</a> () const </td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Get current port name. <br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual <a class="el" href="classmdt_port_config.html">mdtPortConfig</a> &amp;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmdt_port_manager.html#a9cf3ea2da38f81682695b37448712ffd">config</a> ()</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Get the port's config object.  <a href="#a9cf3ea2da38f81682695b37448712ffd"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="classmdt_port_config.html">mdtPortConfig</a> &amp;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmdt_port_manager.html#a735b7dc766fc2f45fb2cf9772c4201b0">config</a> () const </td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Get the port's config object.  <a href="#a735b7dc766fc2f45fb2cf9772c4201b0"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmdt_port_manager.html#a9adb5098766c9df588bc9978b00c5eb2">setKeepTransactionsDone</a> (bool keep)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Force transactions done to be keeped.  <a href="#a9adb5098766c9df588bc9978b00c5eb2"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a798ce0939234870ae3b9995108e54380"></a><!-- doxytag: member="mdtPortManager::keepTransactionsDone" ref="a798ce0939234870ae3b9995108e54380" args="() const " -->
bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmdt_port_manager.html#a798ce0939234870ae3b9995108e54380">keepTransactionsDone</a> () const </td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Get the keepTransactionsDone flag. <br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="classmdt_port_transaction.html">mdtPortTransaction</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmdt_port_manager.html#a75ebd3d1859e3ed38b9558981e53aac4">getNewTransaction</a> ()</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Get a new transaction.  <a href="#a75ebd3d1859e3ed38b9558981e53aac4"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmdt_port_manager.html#a5fea4a9b8e94d38e8ec699dba05c7ca8">restoreTransaction</a> (<a class="el" href="classmdt_port_transaction.html">mdtPortTransaction</a> *transaction)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Restore a transaction into pool.  <a href="#a5fea4a9b8e94d38e8ec699dba05c7ca8"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmdt_port_manager.html#ad98399edba146af5cf32a9002094385c">sendData</a> (<a class="el" href="classmdt_port_transaction.html">mdtPortTransaction</a> *transaction)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Send data on port.  <a href="#ad98399edba146af5cf32a9002094385c"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmdt_port_manager.html#a445b27f0819158f67f1bd548cdd2fedf">sendData</a> (const QByteArray &amp;data, bool queryReplyMode=false)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Send data to port.  <a href="#a445b27f0819158f67f1bd548cdd2fedf"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmdt_port_manager.html#a5551802de2c08632078f2cc0e2607913">waitTransactionDone</a> (int id)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Wait until a transaction is done.  <a href="#a5551802de2c08632078f2cc0e2607913"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmdt_port_manager.html#af60f089baded850018cbb90645c8e547">waitOneTransactionDone</a> ()</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Wait until current transaction is done.  <a href="#af60f089baded850018cbb90645c8e547"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmdt_port_manager.html#aaa85e0200aba0e0f4392dfe01abae2cf">wait</a> (int ms)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Wait for some time.  <a href="#aaa85e0200aba0e0f4392dfe01abae2cf"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">QByteArray&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmdt_port_manager.html#a830ae182d06dd6a52c43a7f45b9240ac">readenFrame</a> (int id)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Get data by frame ID.  <a href="#a830ae182d06dd6a52c43a7f45b9240ac"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">QList&lt; QByteArray &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmdt_port_manager.html#addd5dcae9644cea42a9871205af41796">readenFrames</a> ()</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Get all readen data.  <a href="#addd5dcae9644cea42a9871205af41796"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmdt_port_manager.html#ac0844a5cd4043a95a479d458ac7ce590">flushIn</a> (bool flushPortManagerBuffers, bool flushPortBuffers)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Flush input buffers.  <a href="#ac0844a5cd4043a95a479d458ac7ce590"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmdt_port_manager.html#a4c44ce6ec40c4afc6be441c10d7ee827">flushIn</a> ()</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Flush input buffers.  <a href="#a4c44ce6ec40c4afc6be441c10d7ee827"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmdt_port_manager.html#a3f0c2722a41c49de2bea9013bccd049c">flushOut</a> (bool flushPortManagerBuffers, bool flushPortBuffers)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Flush output buffers.  <a href="#a3f0c2722a41c49de2bea9013bccd049c"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmdt_port_manager.html#ab34018a9653a5af784fa7da06a9e50d3">flushOut</a> ()</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Flush output buffers.  <a href="#ab34018a9653a5af784fa7da06a9e50d3"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmdt_port_manager.html#a97b91e7c1641836eb6afb47fd244a18e">flush</a> (bool flushPortManagerBuffers, bool flushPortBuffers)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Flush I/O buffers.  <a href="#a97b91e7c1641836eb6afb47fd244a18e"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmdt_port_manager.html#a3eab774008d7530ae341ce9c38265d65">flush</a> ()</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Flush I/O buffers.  <a href="#a3eab774008d7530ae341ce9c38265d65"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a59241d9e6b6ee71e6c1aeb3e6c0ca81a"></a><!-- doxytag: member="mdtPortManager::currentState" ref="a59241d9e6b6ee71e6c1aeb3e6c0ca81a" args="() const " -->
<a class="el" href="classmdt_port_manager.html#a9448339d7f08ca5e18b904df25b382da">state_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmdt_port_manager.html#a59241d9e6b6ee71e6c1aeb3e6c0ca81a">currentState</a> () const </td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Get current state. <br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmdt_port_manager.html#a0c460b47b12e38e708321be79f6343d8">notifyCurrentState</a> ()</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Notify the current state.  <a href="#a0c460b47b12e38e708321be79f6343d8"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmdt_port_manager.html#a6dc2798324521d177fb8f79d4f6c5f0f">isReady</a> () const </td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Check if port manager is ready.  <a href="#a6dc2798324521d177fb8f79d4f6c5f0f"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmdt_port_manager.html#aeecbec49376838ab3547729636166d97">isClosed</a> () const </td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Check if port is closed.  <a href="#aeecbec49376838ab3547729636166d97"></a><br/></td></tr>
<tr><td colspan="2"><h2><a name="pro-slots"></a>
Protected Slots</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmdt_port_manager.html#a4fcc8f0699b655156e661bb3de6056cc">fromThreadNewFrameReaden</a> ()</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Called by the read thread whenn a complete frame was readen.  <a href="#a4fcc8f0699b655156e661bb3de6056cc"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmdt_port_manager.html#a7e45b8e3475e5182ed12218616664d07">onThreadsErrorOccured</a> (int error)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Manage errors comming from port threads.  <a href="#a7e45b8e3475e5182ed12218616664d07"></a><br/></td></tr>
<tr><td colspan="2"><h2><a name="pro-methods"></a>
Protected Member Functions</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmdt_port_manager.html#aab594613e8985590c835194efbc27b5e">openPort</a> ()</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Open the port.  <a href="#aab594613e8985590c835194efbc27b5e"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmdt_port_manager.html#ace8065f1f5083041ee7f65c2892bc77d">closePort</a> ()</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Close the port.  <a href="#ace8065f1f5083041ee7f65c2892bc77d"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a3f1d25b2441c467c0de9908c73422a93"></a><!-- doxytag: member="mdtPortManager::setCurrentTransactionId" ref="a3f1d25b2441c467c0de9908c73422a93" args="(int id)" -->
void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmdt_port_manager.html#a3f1d25b2441c467c0de9908c73422a93">setCurrentTransactionId</a> (int id)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Set the current transaction ID. <br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a19abf29c8948cde0337d67c9722c25aa"></a><!-- doxytag: member="mdtPortManager::currentTransactionId" ref="a19abf29c8948cde0337d67c9722c25aa" args="() const " -->
int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmdt_port_manager.html#a19abf29c8948cde0337d67c9722c25aa">currentTransactionId</a> () const </td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Get the current transaction ID. <br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a4d009936a0a5130f3bfecb69fee4ce42"></a><!-- doxytag: member="mdtPortManager::incrementCurrentTransactionId" ref="a4d009936a0a5130f3bfecb69fee4ce42" args="(int min=0, int max=INT_MAX)" -->
void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmdt_port_manager.html#a4d009936a0a5130f3bfecb69fee4ce42">incrementCurrentTransactionId</a> (int min=0, int max=INT_MAX)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Increment current transaction ID. <br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmdt_port_manager.html#ac04a12f8aa20ba04695083afce45a6cc">waitTransactionPossible</a> ()</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Wait until transaction pending queue has less than maximum possible items.  <a href="#ac04a12f8aa20ba04695083afce45a6cc"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmdt_port_manager.html#ac58ed84e0e9230d1931557bc4bbe8a50">addTransactionPending</a> (<a class="el" href="classmdt_port_transaction.html">mdtPortTransaction</a> *transaction)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Add a transaction to pending queue.  <a href="#ac58ed84e0e9230d1931557bc4bbe8a50"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="classmdt_port_transaction.html">mdtPortTransaction</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmdt_port_manager.html#a18478707a9be7638b06cde48ced48297">transactionPending</a> (int id)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Take pending transaction matching id.  <a href="#a18478707a9be7638b06cde48ced48297"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a85b87522eb9ec9b80ff24e3ad2ef4a00"></a><!-- doxytag: member="mdtPortManager::flushTransactionsPending" ref="a85b87522eb9ec9b80ff24e3ad2ef4a00" args="()" -->
void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmdt_port_manager.html#a85b87522eb9ec9b80ff24e3ad2ef4a00">flushTransactionsPending</a> ()</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Restore all transactions pending to pool. <br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmdt_port_manager.html#a4b584d9005316be9991e6026e4c5e5a4">addTransactionDone</a> (<a class="el" href="classmdt_port_transaction.html">mdtPortTransaction</a> *transaction)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Add a transaction to the DONE queue.  <a href="#a4b584d9005316be9991e6026e4c5e5a4"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a3293066f4c3ed2e4b116f28dca8c5d64"></a><!-- doxytag: member="mdtPortManager::transactionsDoneContains" ref="a3293066f4c3ed2e4b116f28dca8c5d64" args="(int id) const " -->
bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmdt_port_manager.html#a3293066f4c3ed2e4b116f28dca8c5d64">transactionsDoneContains</a> (int id) const </td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Check if a transaction with given ID exists in done queue. <br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="classmdt_port_transaction.html">mdtPortTransaction</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmdt_port_manager.html#a5869bcf6774a86fb9d3b00a0d4211bb5">transactionDone</a> (int id)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Take transaction from DONE queue matching id.  <a href="#a5869bcf6774a86fb9d3b00a0d4211bb5"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="aad801de5f93a3619d98b7ea3cae6b999"></a><!-- doxytag: member="mdtPortManager::flushTransactionsDone" ref="aad801de5f93a3619d98b7ea3cae6b999" args="()" -->
void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmdt_port_manager.html#aad801de5f93a3619d98b7ea3cae6b999">flushTransactionsDone</a> ()</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Restore all transactions done to pool. <br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmdt_port_manager.html#adeeba5a216174fcc1d01446a9537f40e">startTransactionTimer</a> (int timeout)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Start transaction timer.  <a href="#adeeba5a216174fcc1d01446a9537f40e"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmdt_port_manager.html#a1467c0bd28612ae3116f5daba08c0b84">stopTransactionTimer</a> ()</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Stop transaction timer.  <a href="#a1467c0bd28612ae3116f5daba08c0b84"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmdt_port_manager.html#a04fc12f0dc02e981cac8dc56539e63d2">transactionTimeoutOccured</a> () const </td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Check if a transaction timeout occured.  <a href="#a04fc12f0dc02e981cac8dc56539e63d2"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmdt_port_manager.html#a84d37b380080eb26e56c68424dedd958">commitFrames</a> ()</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Emit signals for each done transactions.  <a href="#a84d37b380080eb26e56c68424dedd958"></a><br/></td></tr>
<tr><td colspan="2"><h2><a name="pro-attribs"></a>
Protected Attributes</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="af856162aab4f1c5202c1dfb330fae538"></a><!-- doxytag: member="mdtPortManager::pvPort" ref="af856162aab4f1c5202c1dfb330fae538" args="" -->
<a class="el" href="classmdt_abstract_port.html">mdtAbstractPort</a> *&#160;</td><td class="memItemRight" valign="bottom"><b>pvPort</b></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a8e0d49b789f8b01d469e84b487799573"></a><!-- doxytag: member="mdtPortManager::pvThreads" ref="a8e0d49b789f8b01d469e84b487799573" args="" -->
QList&lt; <a class="el" href="classmdt_port_thread.html">mdtPortThread</a> * &gt;&#160;</td><td class="memItemRight" valign="bottom"><b>pvThreads</b></td></tr>
</table>
<hr/><a name="details" id="details"></a><h2>Detailed Description</h2>
<div class="textblock"><p>Port manager base class. </p>
<dl class="todo"><dt><b><a class="el" href="todo.html#_todo000040">Todo:</a></b></dt><dd>Port manager has no raison to inherit QThread -&gt; make it inherit QObject </dd></dl>
<p>Manages a port based on <a class="el" href="classmdt_abstract_port.html" title="Base class for port I/O.">mdtAbstractPort</a> an several threads based on <a class="el" href="classmdt_port_thread.html">mdtPortThread</a>. The goal is to hide the complexity of the port API.</p>
<p>Example: </p>
<div class="fragment"><pre class="fragment"> <a class="code" href="classmdt_port_manager.html" title="Port manager base class.">mdtPortManager</a> m;
 <a class="code" href="classmdt_port.html">mdtPort</a> *port;
 <a class="code" href="classmdt_port_config.html">mdtPortConfig</a> *<a class="code" href="classmdt_port_manager.html#a9cf3ea2da38f81682695b37448712ffd" title="Get the port&#39;s config object.">config</a>;
 QList&lt;QByteArray&gt; responses;

 <span class="comment">// Setup</span>
 config = <span class="keyword">new</span> <a class="code" href="classmdt_port_config.html">mdtPortConfig</a>;
 config-&gt;<a class="code" href="classmdt_port_config.html#a627adcb87d26757238f844db19fc248d" title="Set frame type.">setFrameType</a>(<a class="code" href="classmdt_frame.html#af936e37d5fe4c066c0fb0161fafd4a17ac649559564652abbe656b97d4a84b722">mdtFrame::FT_ASCII</a>);
 config-&gt;<a class="code" href="classmdt_port_config.html#a3c5e1c444a18da7d68430bd1c14030f4" title="Set the end of frame sequence (applies on ASCII frames)">setEndOfFrameSeq</a>(<span class="stringliteral">&quot;$&quot;</span>);

 <span class="comment">// Init port</span>
 port = <span class="keyword">new</span> <a class="code" href="classmdt_port.html">mdtPort</a>;
 port-&gt;<a class="code" href="classmdt_abstract_port.html#a48bdc0a8057c3b119763643098cf798f" title="Set configuration.">setConfig</a>(config);

 <span class="comment">// Init port manager - We wand blocking mode</span>
 m.setTransactionsDisabled(<span class="keyword">true</span>);
 m.<a class="code" href="classmdt_port_manager.html#afcd156b2d0c9d340999935efb6cd8cb6" title="Set port object.">setPort</a>(port);
 m.<a class="code" href="classmdt_port_manager.html#ab62591409d019a4a2576b4310c411b8f" title="Add a thread and assign it to port.">addThread</a>(mew <a class="code" href="classmdt_port_write_thread.html">mdtPortWriteThread</a>);
 m.<a class="code" href="classmdt_port_manager.html#ab62591409d019a4a2576b4310c411b8f" title="Add a thread and assign it to port.">addThread</a>(mew <a class="code" href="classmdt_port_read_thread.html" title="Reader thread for port I/O.">mdtPortReadThread</a>);
 m.<a class="code" href="classmdt_port_manager.html#a2b2ed690cbba9f544c6ac1b46684e59a" title="Set port name.">setPortName</a>(<span class="stringliteral">&quot;/dev/xyz&quot;</span>));

 <span class="comment">// Start port manager - Will open port, start threads and return once port manager is ready</span>
 <span class="keywordflow">if</span>(!m.<a class="code" href="classmdt_port_manager.html#af1fb103ffafc227337a59c7e82f44fbc" title="Start port manager.">start</a>()){
  <span class="comment">// Handle error</span>
 }

 <span class="comment">// Send some data</span>
 <span class="keywordflow">if</span>(!m.writeData(<span class="stringliteral">&quot;Test$&quot;</span>)){
  <span class="comment">// Handle error</span>
 }

 <span class="comment">// Wait on answer - Timout: 1500 [ms]</span>
 <span class="keywordflow">if</span>(!m.waitReadenFrame(1500)){
  <span class="comment">// Timout , handle error</span>
 }

 <span class="comment">// Do something with received data</span>
 responses = m.<a class="code" href="classmdt_port_manager.html#addd5dcae9644cea42a9871205af41796" title="Get all readen data.">readenFrames</a>();
 <span class="keywordflow">for</span>(<span class="keywordtype">int</span> i=0; i&lt;responses.size(); i++){
  qDebug() &lt;&lt; responses.at(i);
 }

 <span class="comment">// Stop port manager</span>
 m.<a class="code" href="classmdt_port_manager.html#aacbf87cc3d9c37c87e21696f8a6514bd" title="Stop port manager.">stop</a>();

 <span class="comment">// Cleanup - detachPort() will delete port and threads objects</span>
 m.<a class="code" href="classmdt_port_manager.html#a39cb4af4aedc0b6b7c4d4f53002c3fd1" title="Detach port.">detachPort</a>(<span class="keyword">true</span>, <span class="keyword">true</span>);
 <span class="keyword">delete</span> <a class="code" href="classmdt_port_manager.html#a9cf3ea2da38f81682695b37448712ffd" title="Get the port&#39;s config object.">config</a>;
</pre></div><p>A (recommended) alternative is to disable frames enqueuing and use the newReadenFrame(QByteArray) signal.</p>
<ul>
<li>Disable enqueuing with setTransactionsDisabled(false)</li>
<li>Connect newReadenFrame(QByteArray) to a slot</li>
</ul>
<p>---------------------------------------------------</p>
<p>Manage a port based on <a class="el" href="classmdt_abstract_port.html" title="Base class for port I/O.">mdtAbstractPort</a> and related threads. Goal is to hide complexity of <a class="el" href="classmdt_abstract_port.html" title="Base class for port I/O.">mdtAbstractPort</a> API.</p>
<p>Depending on application, it's possible to use a event approach, or also a blocking approach with wait methods.</p>
<p>Some protocols support frame identifier (like MODBUS/TCP, USBTMC, or others), and other don't (for example raw bytes transfert on a serial port). For this reason, the concept of transactions is aodpted here. A transaction is based on <a class="el" href="classmdt_port_transaction.html" title="Store port transaction identifications data.">mdtPortTransaction</a> class. It was introduced for protocols that support identification, and can store some other meta data, usefull to decode a reply.</p>
<p>This base class can be used directly for ports that supports raw transfers. For specific protocol, it can be subclassed.</p>
<dl class="todo"><dt><b><a class="el" href="todo.html#_todo000041">Todo:</a></b></dt><dd>Document init, open, close, ...</dd></dl>
<p>Now, we can see the data transfer workflow:</p>
<ul>
<li>1) Wait until it's possible to send some data with waitOnWriteReady()</li>
<li>2) Get a new transaction with <a class="el" href="classmdt_port_manager.html#a75ebd3d1859e3ed38b9558981e53aac4" title="Get a new transaction.">getNewTransaction()</a> , and setup it as needed (see remarks below).</li>
<li>3) Send data using writeData(mdtPortTransaction*). This will set the currentTransactionId to the ID given in transaction.</li>
<li>4a) If you choosed a blocking approach, use <a class="el" href="classmdt_port_manager.html#a5551802de2c08632078f2cc0e2607913" title="Wait until a transaction is done.">waitTransactionDone()</a>.</li>
<li>4b) If you choosed a event approach, connect the <a class="el" href="classmdt_port_manager.html#a5869bcf6774a86fb9d3b00a0d4211bb5" title="Take transaction from DONE queue matching id.">transactionDone()</a> signal to a slot. Each time a transaction is done, you will receive a transaction.</li>
<li>5) Get the transaction with <a class="el" href="classmdt_port_manager.html#a5869bcf6774a86fb9d3b00a0d4211bb5" title="Take transaction from DONE queue matching id.">transactionDone()</a>.</li>
<li>6) Restore transaction with <a class="el" href="classmdt_port_manager.html#a5fea4a9b8e94d38e8ec699dba05c7ca8" title="Restore a transaction into pool.">restoreTransaction()</a>.</li>
</ul>
<p>Steps 2) and 3) can be done once by using writeData(const QByteArray&amp;, bool). Steps 5) and 6) can be done once by using getReadenData(int).</p>
<p>Here is a little example of the simple approach: </p>
<div class="fragment"><pre class="fragment"> <a class="code" href="classmdt_port_manager.html" title="Port manager base class.">mdtPortManager</a> m;
 <span class="keywordtype">int</span> transactionId;
 <span class="comment">// Setup...</span>

 <span class="comment">// Wait until we can write</span>
 <span class="keywordflow">if</span>(!waitOnWriteReady()){
   <span class="comment">// Handle error</span>
 }

 <span class="comment">// Send data to port</span>
 transactionId = writeData(<span class="stringliteral">&quot;SomeData&quot;</span>, <span class="keyword">true</span>);
 <span class="keywordflow">if</span>(transactionId &lt; 0){
   <span class="comment">// Handle error</span>
 }

 <span class="comment">// Wait until data come in</span>
 <span class="keywordflow">if</span>(<a class="code" href="classmdt_port_manager.html#a5551802de2c08632078f2cc0e2607913" title="Wait until a transaction is done.">waitTransactionDone</a>(transactionId)){
   <span class="comment">// Handle error</span>
 }

 <span class="comment">// Get only data for a specific transaction (should be used only for protocols that support transaction)</span>
 qDebug() &lt;&lt; <a class="code" href="classmdt_port_manager.html#a830ae182d06dd6a52c43a7f45b9240ac" title="Get data by frame ID.">readenFrame</a>(transactionId);
 <span class="comment">// Get all received data</span>
 qDebug() &lt;&lt; <a class="code" href="classmdt_port_manager.html#addd5dcae9644cea42a9871205af41796" title="Get all readen data.">readenFrames</a>();
</pre></div><p>Internally, once data was send to port's write queue, the transaction is stored in the pending transactions queue.</p>
<p>Dealing with incomming data: In above example, 2 methods are shown to get incomming data:</p>
<ul>
<li><a class="el" href="classmdt_port_manager.html#a830ae182d06dd6a52c43a7f45b9240ac" title="Get data by frame ID.">readenFrame(int)</a> : will work with protocols that support frame ID. See specific port manager subclass for details.</li>
<li><a class="el" href="classmdt_port_manager.html#addd5dcae9644cea42a9871205af41796" title="Get all readen data.">readenFrames()</a> : see below.</li>
</ul>
<p>If we are using a protocol that not support frame ID, it's possible that we receive data each time, also without sending any request. This must be handled in <a class="el" href="classmdt_port_manager.html#a4fcc8f0699b655156e661bb3de6056cc" title="Called by the read thread whenn a complete frame was readen.">fromThreadNewFrameReaden()</a> slot. In this <a class="el" href="classmdt_port_manager.html" title="Port manager base class.">mdtPortManager</a> class, the following will happen:</p>
<ul>
<li>When sending data with writeData(const QByteArray&amp;, bool), current transaction ID will be incremented with <a class="el" href="classmdt_port_manager.html#a4d009936a0a5130f3bfecb69fee4ce42" title="Increment current transaction ID.">incrementCurrentTransactionId()</a>.</li>
<li>In <a class="el" href="classmdt_port_manager.html#a4fcc8f0699b655156e661bb3de6056cc" title="Called by the read thread whenn a complete frame was readen.">fromThreadNewFrameReaden()</a> slot, <a class="el" href="classmdt_port_manager.html#a19abf29c8948cde0337d67c9722c25aa" title="Get the current transaction ID.">currentTransactionId()</a> is used to get pending transaction with <a class="el" href="classmdt_port_manager.html#a18478707a9be7638b06cde48ced48297" title="Take pending transaction matching id.">transactionPending()</a>. If it was found, frame's data is copied, and transaction is moved to done queue. If not found, a new transaction is taken with <a class="el" href="classmdt_port_manager.html#a75ebd3d1859e3ed38b9558981e53aac4" title="Get a new transaction.">getNewTransaction()</a>, frame's data is copied, and transaction is enqueued to done queue with <a class="el" href="classmdt_port_manager.html#a4b584d9005316be9991e6026e4c5e5a4" title="Add a transaction to the DONE queue.">addTransactionDone()</a>.</li>
<li><a class="el" href="classmdt_port_manager.html#addd5dcae9644cea42a9871205af41796" title="Get all readen data.">readenFrames()</a> will return a list of data that comes from transactions Done list. Current transaction ID will be restet to 0.</li>
</ul>
<p>The Query/Reply mode: port manager is able to handle event or blocking mode in same time. This cause a problem for done transactions handling. For example, when we choosed the event based aproach for a transaction, port manager will emit the <a class="el" href="classmdt_port_manager.html#a416a24db1048e9f66aef27ea810954d2" title="Emitted each time a transaction is done.">newTransactionDone(mdtPortTransaction*)</a> signal, then restore transaction back to pool. When we choosed blocking approach, port manager will also emit <a class="el" href="classmdt_port_manager.html#a416a24db1048e9f66aef27ea810954d2" title="Emitted each time a transaction is done.">newTransactionDone(mdtPortTransaction*)</a> signal, wich can be usefull to keep, for example, a GUI coherent in each mode. But here, the transaction must not be restored directly, but only once data was readen with <a class="el" href="classmdt_port_manager.html#a830ae182d06dd6a52c43a7f45b9240ac" title="Get data by frame ID.">readenFrame()</a> or <a class="el" href="classmdt_port_manager.html#addd5dcae9644cea42a9871205af41796" title="Get all readen data.">readenFrames()</a>. To handle this, <a class="el" href="classmdt_port_manager.html#a84d37b380080eb26e56c68424dedd958" title="Emit signals for each done transactions.">commitFrames()</a> will use <a class="el" href="classmdt_port_transaction.html#a9da1cc7a191cd21a2e532d277aa3c628" title="Get the query/reply mode flag.">mdtPortTransaction::isQueryReplyMode()</a>. </p>

<p>Definition at line <a class="el" href="mdt_port_manager_8h_source.html#l00197">197</a> of file <a class="el" href="mdt_port_manager_8h_source.html">mdtPortManager.h</a>.</p>
</div><hr/><h2>Member Enumeration Documentation</h2>
<a class="anchor" id="a9448339d7f08ca5e18b904df25b382da"></a><!-- doxytag: member="mdtPortManager::state_t" ref="a9448339d7f08ca5e18b904df25b382da" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">enum <a class="el" href="classmdt_port_manager.html#a9448339d7f08ca5e18b904df25b382da">mdtPortManager::state_t</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>State of device. </p>
<p>States are handled by <a class="el" href="classmdt_port_manager_state_machine.html" title="State machine for port manager.">mdtPortManagerStateMachine</a> </p>
<dl><dt><b>Enumerator: </b></dt><dd><table border="0" cellspacing="2" cellpadding="0">
<tr><td valign="top"><em><a class="anchor" id="a9448339d7f08ca5e18b904df25b382daabac9679c411402c9db01399ecb72b84d"></a><!-- doxytag: member="PortClosed" ref="a9448339d7f08ca5e18b904df25b382daabac9679c411402c9db01399ecb72b84d" args="" -->PortClosed</em>&nbsp;</td><td>
<p>Port is closed </p>
</td></tr>
<tr><td valign="top"><em><a class="anchor" id="a9448339d7f08ca5e18b904df25b382daadbd7b0395c62e9ae38525c5dc5ba44a6"></a><!-- doxytag: member="Stopped" ref="a9448339d7f08ca5e18b904df25b382daadbd7b0395c62e9ae38525c5dc5ba44a6" args="" -->Stopped</em>&nbsp;</td><td>
<p>Threads are stopped and port is closing </p>
</td></tr>
<tr><td valign="top"><em><a class="anchor" id="a9448339d7f08ca5e18b904df25b382daaca288962f5cb3d352f44f4e4c15f14d2"></a><!-- doxytag: member="Starting" ref="a9448339d7f08ca5e18b904df25b382daaca288962f5cb3d352f44f4e4c15f14d2" args="" -->Starting</em>&nbsp;</td><td>
<p>Threads are starting </p>
</td></tr>
<tr><td valign="top"><em><a class="anchor" id="a9448339d7f08ca5e18b904df25b382daa1c68525fc2c4d94e39a73d1a4bea0476"></a><!-- doxytag: member="Stopping" ref="a9448339d7f08ca5e18b904df25b382daa1c68525fc2c4d94e39a73d1a4bea0476" args="" -->Stopping</em>&nbsp;</td><td>
<p>Threads are stopping </p>
</td></tr>
<tr><td valign="top"><em><a class="anchor" id="a9448339d7f08ca5e18b904df25b382daaa7af1c561e17e65982c027de942d4a75"></a><!-- doxytag: member="Running" ref="a9448339d7f08ca5e18b904df25b382daaa7af1c561e17e65982c027de942d4a75" args="" -->Running</em>&nbsp;</td><td>
<p>Global state (sub machine) </p>
</td></tr>
<tr><td valign="top"><em><a class="anchor" id="a9448339d7f08ca5e18b904df25b382daa2440f5bfc7ae5c78db1598ef6d3d394c"></a><!-- doxytag: member="PortError" ref="a9448339d7f08ca5e18b904df25b382daa2440f5bfc7ae5c78db1598ef6d3d394c" args="" -->PortError</em>&nbsp;</td><td>
<p>A unhandled error occured - Threads will be stopped and port closed </p>
</td></tr>
<tr><td valign="top"><em><a class="anchor" id="a9448339d7f08ca5e18b904df25b382daa3a3b42b9d783381f3c7447086503fde6"></a><!-- doxytag: member="PortReady" ref="a9448339d7f08ca5e18b904df25b382daa3a3b42b9d783381f3c7447086503fde6" args="" -->PortReady</em>&nbsp;</td><td>
<p>Port is open and threads are running. At this point, communication is possible if not connection is required (f.ex. serial port terminal) </p>
</td></tr>
<tr><td valign="top"><em><a class="anchor" id="a9448339d7f08ca5e18b904df25b382daa4004253e25d51b1e628bb5006dbbd153"></a><!-- doxytag: member="Disconnected" ref="a9448339d7f08ca5e18b904df25b382daa4004253e25d51b1e628bb5006dbbd153" args="" -->Disconnected</em>&nbsp;</td><td>
<p>Port is ready, but not connected to device </p>
</td></tr>
<tr><td valign="top"><em><a class="anchor" id="a9448339d7f08ca5e18b904df25b382daa89e805c9c75c39ecc8371d5f38131227"></a><!-- doxytag: member="Connecting" ref="a9448339d7f08ca5e18b904df25b382daa89e805c9c75c39ecc8371d5f38131227" args="" -->Connecting</em>&nbsp;</td><td>
<p>Trying to connect to device </p>
</td></tr>
<tr><td valign="top"><em><a class="anchor" id="a9448339d7f08ca5e18b904df25b382daa3c3620c8eb4ddb126568053e3d49195f"></a><!-- doxytag: member="Connected" ref="a9448339d7f08ca5e18b904df25b382daa3c3620c8eb4ddb126568053e3d49195f" args="" -->Connected</em>&nbsp;</td><td>
<p>Global state (sub machine) </p>
</td></tr>
<tr><td valign="top"><em><a class="anchor" id="a9448339d7f08ca5e18b904df25b382daaf2ba40e19587c3a98235ee96a4acf20e"></a><!-- doxytag: member="Ready" ref="a9448339d7f08ca5e18b904df25b382daaf2ba40e19587c3a98235ee96a4acf20e" args="" -->Ready</em>&nbsp;</td><td>
<p>Port is ready and connection to device was made. Communication is possible </p>
</td></tr>
<tr><td valign="top"><em><a class="anchor" id="a9448339d7f08ca5e18b904df25b382daa5da3fa5dd98a264ecb4a37a1983ea0ff"></a><!-- doxytag: member="Busy" ref="a9448339d7f08ca5e18b904df25b382daa5da3fa5dd98a264ecb4a37a1983ea0ff" args="" -->Busy</em>&nbsp;</td><td>
<p>Port is up and device is connected but cannot accept requests for the moment </p>
</td></tr>
</table>
</dd>
</dl>

<p>Definition at line <a class="el" href="mdt_port_manager_8h_source.html#l00207">207</a> of file <a class="el" href="mdt_port_manager_8h_source.html">mdtPortManager.h</a>.</p>

</div>
</div>
<hr/><h2>Constructor &amp; Destructor Documentation</h2>
<a class="anchor" id="a5ec36523089b7528d973e29cdbc64d01"></a><!-- doxytag: member="mdtPortManager::mdtPortManager" ref="a5ec36523089b7528d973e29cdbc64d01" args="(QObject *parent=0)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">mdtPortManager::mdtPortManager </td>
          <td>(</td>
          <td class="paramtype">QObject *&#160;</td>
          <td class="paramname"><em>parent</em> = <code>0</code></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Contruct a port manager. </p>
<p>keepTransactionsDone flag will be unset (set false). </p>

<p>Definition at line <a class="el" href="mdt_port_manager_8cpp_source.html#l00032">32</a> of file <a class="el" href="mdt_port_manager_8cpp_source.html">mdtPortManager.cpp</a>.</p>

</div>
</div>
<a class="anchor" id="adf797f8fd7a3ffdc000890a224e4c1b6"></a><!-- doxytag: member="mdtPortManager::~mdtPortManager" ref="adf797f8fd7a3ffdc000890a224e4c1b6" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">mdtPortManager::~mdtPortManager </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Destructor. </p>
<p>If a port was set, the manager will stop (if running), and port will be closed (if open).</p>
<p>Note that port set by <a class="el" href="classmdt_port_manager.html#afcd156b2d0c9d340999935efb6cd8cb6" title="Set port object.">setPort()</a> and threads are not deleted. This is because port and threads are set by subclass, or from application. </p>

<p>Definition at line <a class="el" href="mdt_port_manager_8cpp_source.html#l00059">59</a> of file <a class="el" href="mdt_port_manager_8cpp_source.html">mdtPortManager.cpp</a>.</p>

</div>
</div>
<hr/><h2>Member Function Documentation</h2>
<a class="anchor" id="a1d185e9bb610aee16ccd9499ae7bff0d"></a><!-- doxytag: member="mdtPortManager::abort" ref="a1d185e9bb610aee16ccd9499ae7bff0d" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void mdtPortManager::abort </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td><code> [virtual, slot]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Cancel read and write operations. </p>
<p>Default implementation calls <a class="el" href="classmdt_abstract_port.html#abde440c49b95833f821e1333c40a7398" title="Flush read/write buffers.">mdtAbstractPort::flush()</a>. </p>

<p>Definition at line <a class="el" href="mdt_port_manager_8cpp_source.html#l00596">596</a> of file <a class="el" href="mdt_port_manager_8cpp_source.html">mdtPortManager.cpp</a>.</p>

</div>
</div>
<a class="anchor" id="ab62591409d019a4a2576b4310c411b8f"></a><!-- doxytag: member="mdtPortManager::addThread" ref="ab62591409d019a4a2576b4310c411b8f" args="(mdtPortThread *thread)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void mdtPortManager::addThread </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classmdt_port_thread.html">mdtPortThread</a> *&#160;</td>
          <td class="paramname"><em>thread</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Add a thread and assign it to port. </p>
<dl class="pre"><dt><b>Precondition:</b></dt><dd>Port must be set with setPort before using this method </dd>
<dd>
Manager must no running </dd>
<dd>
Port manager must be closed (see <a class="el" href="classmdt_port_manager.html#aeecbec49376838ab3547729636166d97" title="Check if port is closed.">isClosed()</a> ). </dd></dl>

<p>Definition at line <a class="el" href="mdt_port_manager_8cpp_source.html#l00122">122</a> of file <a class="el" href="mdt_port_manager_8cpp_source.html">mdtPortManager.cpp</a>.</p>

</div>
</div>
<a class="anchor" id="a4b584d9005316be9991e6026e4c5e5a4"></a><!-- doxytag: member="mdtPortManager::addTransactionDone" ref="a4b584d9005316be9991e6026e4c5e5a4" args="(mdtPortTransaction *transaction)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void mdtPortManager::addTransactionDone </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classmdt_port_transaction.html">mdtPortTransaction</a> *&#160;</td>
          <td class="paramname"><em>transaction</em></td><td>)</td>
          <td><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Add a transaction to the DONE queue. </p>
<dl class="pre"><dt><b>Precondition:</b></dt><dd>transaction must be a valid pointer. </dd></dl>

<p>Definition at line <a class="el" href="mdt_port_manager_8cpp_source.html#l00720">720</a> of file <a class="el" href="mdt_port_manager_8cpp_source.html">mdtPortManager.cpp</a>.</p>

</div>
</div>
<a class="anchor" id="ac58ed84e0e9230d1931557bc4bbe8a50"></a><!-- doxytag: member="mdtPortManager::addTransactionPending" ref="ac58ed84e0e9230d1931557bc4bbe8a50" args="(mdtPortTransaction *transaction)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void mdtPortManager::addTransactionPending </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classmdt_port_transaction.html">mdtPortTransaction</a> *&#160;</td>
          <td class="paramname"><em>transaction</em></td><td>)</td>
          <td><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Add a transaction to pending queue. </p>
<p>Add a existing transaction to the pending queue. A transaction can be requested with <a class="el" href="classmdt_port_manager.html#a75ebd3d1859e3ed38b9558981e53aac4" title="Get a new transaction.">getNewTransaction()</a>.</p>
<dl class="pre"><dt><b>Precondition:</b></dt><dd>transaction must be a valid pointer. </dd>
<dd>
transaction ID must not allready exist in queue. </dd></dl>

<p><p>qDebug() &lt;&lt; "Add transaction pending: " &lt;&lt; transaction &lt;&lt; " , ID: " &lt;&lt; transaction-&gt;id() &lt;&lt; " data: " &lt;&lt; transaction-&gt;data(); </p>
</p>

<p>Definition at line <a class="el" href="mdt_port_manager_8cpp_source.html#l00675">675</a> of file <a class="el" href="mdt_port_manager_8cpp_source.html">mdtPortManager.cpp</a>.</p>

</div>
</div>
<a class="anchor" id="ace8065f1f5083041ee7f65c2892bc77d"></a><!-- doxytag: member="mdtPortManager::closePort" ref="ace8065f1f5083041ee7f65c2892bc77d" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void mdtPortManager::closePort </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Close the port. </p>
<p>If port was never set (with <a class="el" href="classmdt_port_manager.html#afcd156b2d0c9d340999935efb6cd8cb6" title="Set port object.">setPort()</a> ), this method does nothing. </p>

<p>Definition at line <a class="el" href="mdt_port_manager_8cpp_source.html#l00618">618</a> of file <a class="el" href="mdt_port_manager_8cpp_source.html">mdtPortManager.cpp</a>.</p>

</div>
</div>
<a class="anchor" id="a84d37b380080eb26e56c68424dedd958"></a><!-- doxytag: member="mdtPortManager::commitFrames" ref="a84d37b380080eb26e56c68424dedd958" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void mdtPortManager::commitFrames </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Emit signals for each done transactions. </p>
<p>Will emit <a class="el" href="classmdt_port_manager.html#a416a24db1048e9f66aef27ea810954d2" title="Emitted each time a transaction is done.">newTransactionDone(mdtPortTransaction*)</a> for each transaction found in done queue.</p>
<p>If queryReplyMode and keepTransactionsDone are not set, the transaction is restored back to pool, else it will be restored only after a call of <a class="el" href="classmdt_port_manager.html#a830ae182d06dd6a52c43a7f45b9240ac" title="Get data by frame ID.">readenFrame()</a> or <a class="el" href="classmdt_port_manager.html#addd5dcae9644cea42a9871205af41796" title="Get all readen data.">readenFrames()</a>. </p>

<p>Definition at line <a class="el" href="mdt_port_manager_8cpp_source.html#l00791">791</a> of file <a class="el" href="mdt_port_manager_8cpp_source.html">mdtPortManager.cpp</a>.</p>

</div>
</div>
<a class="anchor" id="a9cf3ea2da38f81682695b37448712ffd"></a><!-- doxytag: member="mdtPortManager::config" ref="a9cf3ea2da38f81682695b37448712ffd" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classmdt_port_config.html">mdtPortConfig</a> &amp; mdtPortManager::config </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Get the port's config object. </p>
<p>Usefull to alter internal port configuration</p>
<dl class="pre"><dt><b>Precondition:</b></dt><dd>Port must be set with <a class="el" href="classmdt_port_manager.html#afcd156b2d0c9d340999935efb6cd8cb6" title="Set port object.">setPort()</a> before use of this method. </dd></dl>

<p>Reimplemented in <a class="el" href="classmdt_serial_port_manager.html#a4b8ab7b9d53966a1887d9ce8557b8416">mdtSerialPortManager</a>.</p>

<p>Definition at line <a class="el" href="mdt_port_manager_8cpp_source.html#l00264">264</a> of file <a class="el" href="mdt_port_manager_8cpp_source.html">mdtPortManager.cpp</a>.</p>

</div>
</div>
<a class="anchor" id="a735b7dc766fc2f45fb2cf9772c4201b0"></a><!-- doxytag: member="mdtPortManager::config" ref="a735b7dc766fc2f45fb2cf9772c4201b0" args="() const " -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classmdt_port_config.html">mdtPortConfig</a> &amp; mdtPortManager::config </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Get the port's config object. </p>
<p>Usefull to read internal port configuration</p>
<dl class="pre"><dt><b>Precondition:</b></dt><dd>Port must be set with <a class="el" href="classmdt_port_manager.html#afcd156b2d0c9d340999935efb6cd8cb6" title="Set port object.">setPort()</a> before use of this method. </dd></dl>

<p>Definition at line <a class="el" href="mdt_port_manager_8cpp_source.html#l00271">271</a> of file <a class="el" href="mdt_port_manager_8cpp_source.html">mdtPortManager.cpp</a>.</p>

</div>
</div>
<a class="anchor" id="a39cb4af4aedc0b6b7c4d4f53002c3fd1"></a><!-- doxytag: member="mdtPortManager::detachPort" ref="a39cb4af4aedc0b6b7c4d4f53002c3fd1" args="(bool deletePort, bool deleteThreads)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void mdtPortManager::detachPort </td>
          <td>(</td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>deletePort</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>deleteThreads</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Detach port. </p>
<p>Will detach port from each thread and from port manager. If port was not set, this method does nothing. If manager is running, it will be stopped. If port is open, it will be closed.</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">deletePort</td><td>If true, the port object that was set with <a class="el" href="classmdt_port_manager.html#afcd156b2d0c9d340999935efb6cd8cb6" title="Set port object.">setPort()</a> will be deleted. </td></tr>
    <tr><td class="paramname">deleteThreads</td><td>If true, each thread added with <a class="el" href="classmdt_port_manager.html#ab62591409d019a4a2576b4310c411b8f" title="Add a thread and assign it to port.">addThread()</a> will be deleted. </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="mdt_port_manager_8cpp_source.html#l00102">102</a> of file <a class="el" href="mdt_port_manager_8cpp_source.html">mdtPortManager.cpp</a>.</p>

</div>
</div>
<a class="anchor" id="a97b91e7c1641836eb6afb47fd244a18e"></a><!-- doxytag: member="mdtPortManager::flush" ref="a97b91e7c1641836eb6afb47fd244a18e" args="(bool flushPortManagerBuffers, bool flushPortBuffers)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void mdtPortManager::flush </td>
          <td>(</td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>flushPortManagerBuffers</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>flushPortBuffers</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Flush I/O buffers. </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">flushPortManagerBuffers</td><td>If true, port manager buffers will be cleared. (Has no effect in this implementation, but some subclass can have output buffers). </td></tr>
    <tr><td class="paramname">flushPortBuffers</td><td>If true, port's buffers will be cleared. </td></tr>
  </table>
  </dd>
</dl>
<dl class="pre"><dt><b>Precondition:</b></dt><dd>Port must be set with <a class="el" href="classmdt_port_manager.html#afcd156b2d0c9d340999935efb6cd8cb6" title="Set port object.">setPort()</a> before calling this method. </dd></dl>

<p>Definition at line <a class="el" href="mdt_port_manager_8cpp_source.html#l00552">552</a> of file <a class="el" href="mdt_port_manager_8cpp_source.html">mdtPortManager.cpp</a>.</p>

</div>
</div>
<a class="anchor" id="a3eab774008d7530ae341ce9c38265d65"></a><!-- doxytag: member="mdtPortManager::flush" ref="a3eab774008d7530ae341ce9c38265d65" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void mdtPortManager::flush </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Flush I/O buffers. </p>
<dl class="pre"><dt><b>Precondition:</b></dt><dd>Port must be set with <a class="el" href="classmdt_port_manager.html#afcd156b2d0c9d340999935efb6cd8cb6" title="Set port object.">setPort()</a> before calling this method. </dd></dl>

<p>Definition at line <a class="el" href="mdt_port_manager_8cpp_source.html#l00563">563</a> of file <a class="el" href="mdt_port_manager_8cpp_source.html">mdtPortManager.cpp</a>.</p>

</div>
</div>
<a class="anchor" id="ac0844a5cd4043a95a479d458ac7ce590"></a><!-- doxytag: member="mdtPortManager::flushIn" ref="ac0844a5cd4043a95a479d458ac7ce590" args="(bool flushPortManagerBuffers, bool flushPortBuffers)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void mdtPortManager::flushIn </td>
          <td>(</td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>flushPortManagerBuffers</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>flushPortBuffers</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Flush input buffers. </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">flushPortManagerBuffers</td><td>If true, port manager buffers (transactions done and pending) will be cleared. </td></tr>
    <tr><td class="paramname">flushPortBuffers</td><td>If true, port's buffers will be cleared. </td></tr>
  </table>
  </dd>
</dl>
<dl class="pre"><dt><b>Precondition:</b></dt><dd>Port must be set with <a class="el" href="classmdt_port_manager.html#afcd156b2d0c9d340999935efb6cd8cb6" title="Set port object.">setPort()</a> before calling this method. </dd></dl>

<p>Reimplemented in <a class="el" href="classmdt_usb_port_manager.html#a982256ed17db155e1c95d544683a6dba">mdtUsbPortManager</a>.</p>

<p>Definition at line <a class="el" href="mdt_port_manager_8cpp_source.html#l00518">518</a> of file <a class="el" href="mdt_port_manager_8cpp_source.html">mdtPortManager.cpp</a>.</p>

</div>
</div>
<a class="anchor" id="a4c44ce6ec40c4afc6be441c10d7ee827"></a><!-- doxytag: member="mdtPortManager::flushIn" ref="a4c44ce6ec40c4afc6be441c10d7ee827" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void mdtPortManager::flushIn </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Flush input buffers. </p>
<p>Will flush portmanger and port's buffers.</p>
<p>Internally, <a class="el" href="classmdt_port_manager.html#ac0844a5cd4043a95a479d458ac7ce590" title="Flush input buffers.">flushIn(bool, bool)</a> is called. </p>

<p>Definition at line <a class="el" href="mdt_port_manager_8cpp_source.html#l00535">535</a> of file <a class="el" href="mdt_port_manager_8cpp_source.html">mdtPortManager.cpp</a>.</p>

</div>
</div>
<a class="anchor" id="ab34018a9653a5af784fa7da06a9e50d3"></a><!-- doxytag: member="mdtPortManager::flushOut" ref="ab34018a9653a5af784fa7da06a9e50d3" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void mdtPortManager::flushOut </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Flush output buffers. </p>
<p>Will flush portmanger and port's buffers.</p>
<p>Internally, <a class="el" href="classmdt_port_manager.html#a3f0c2722a41c49de2bea9013bccd049c" title="Flush output buffers.">flushOut(bool, bool)</a> is called. </p>

<p>Definition at line <a class="el" href="mdt_port_manager_8cpp_source.html#l00547">547</a> of file <a class="el" href="mdt_port_manager_8cpp_source.html">mdtPortManager.cpp</a>.</p>

</div>
</div>
<a class="anchor" id="a3f0c2722a41c49de2bea9013bccd049c"></a><!-- doxytag: member="mdtPortManager::flushOut" ref="a3f0c2722a41c49de2bea9013bccd049c" args="(bool flushPortManagerBuffers, bool flushPortBuffers)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void mdtPortManager::flushOut </td>
          <td>(</td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>flushPortManagerBuffers</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>flushPortBuffers</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Flush output buffers. </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">flushPortManagerBuffers</td><td>If true, port manager buffers will be cleared. (Has no effect in this implementation, but some subclass can have output buffers). </td></tr>
    <tr><td class="paramname">flushPortBuffers</td><td>If true, port's buffers will be cleared. </td></tr>
  </table>
  </dd>
</dl>
<dl class="pre"><dt><b>Precondition:</b></dt><dd>Port must be set with <a class="el" href="classmdt_port_manager.html#afcd156b2d0c9d340999935efb6cd8cb6" title="Set port object.">setPort()</a> before calling this method. </dd></dl>

<p>Reimplemented in <a class="el" href="classmdt_usb_port_manager.html#ab723086376175c40635df44adf358985">mdtUsbPortManager</a>.</p>

<p>Definition at line <a class="el" href="mdt_port_manager_8cpp_source.html#l00540">540</a> of file <a class="el" href="mdt_port_manager_8cpp_source.html">mdtPortManager.cpp</a>.</p>

</div>
</div>
<a class="anchor" id="a4fcc8f0699b655156e661bb3de6056cc"></a><!-- doxytag: member="mdtPortManager::fromThreadNewFrameReaden" ref="a4fcc8f0699b655156e661bb3de6056cc" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void mdtPortManager::fromThreadNewFrameReaden </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td><code> [protected, virtual, slot]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Called by the read thread whenn a complete frame was readen. </p>
<p>This variant will add data to transactions done queue. If pending transactions queue contains <a class="el" href="classmdt_port_manager.html#a19abf29c8948cde0337d67c9722c25aa" title="Get the current transaction ID.">currentTransactionId()</a>, it will be removed.</p>
<p>For subclass that handle frames with IDs, this method must be reimplemented. The normal way is to get the frame in pending queue with <a class="el" href="classmdt_port_manager.html#a18478707a9be7638b06cde48ced48297" title="Take pending transaction matching id.">transactionPending()</a>. For frames with ID that not exists in pending queue, it must be choosen to discard them, or adopt another behaviour.</p>
<dl class="see"><dt><b>See also:</b></dt><dd><a class="el" href="classmdt_port_thread.html">mdtPortThread</a></dd></dl>
<dl class="todo"><dt><b><a class="el" href="todo.html#_todo000039">Todo:</a></b></dt><dd>A méditer: </dd></dl>
<p>- Lock le mutex</p>
<ul>
<li>Prendre les frames disponibles (-&gt; sdans une liste ...)</li>
<li>Libéréer le mutex</li>
<li>Effectier les traitements</li>
<li>Lock le mutex</li>
<li>Restituer les frames</li>
<li>Libéréer le mutex </li>
</ul>

<p>Reimplemented in <a class="el" href="classmdt_modbus_tcp_port_manager.html#ad941ea607f00db54aa6deb2866a539e9">mdtModbusTcpPortManager</a>, and <a class="el" href="classmdt_usbtmc_port_manager.html#aca42b343ae1f6a324e6e45968f03bbea">mdtUsbtmcPortManager</a>.</p>

<p>Definition at line <a class="el" href="mdt_port_manager_8cpp_source.html#l00816">816</a> of file <a class="el" href="mdt_port_manager_8cpp_source.html">mdtPortManager.cpp</a>.</p>

</div>
</div>
<a class="anchor" id="a75ebd3d1859e3ed38b9558981e53aac4"></a><!-- doxytag: member="mdtPortManager::getNewTransaction" ref="a75ebd3d1859e3ed38b9558981e53aac4" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classmdt_port_transaction.html">mdtPortTransaction</a> * mdtPortManager::getNewTransaction </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Get a new transaction. </p>
<p>If transactions pool is empty, a new transaction is created. Note that each transaction should be put back in pool with <a class="el" href="classmdt_port_manager.html#a5fea4a9b8e94d38e8ec699dba05c7ca8" title="Restore a transaction into pool.">restoreTransaction()</a>. In most cases, if a method that uses transactions fails, the transaction must be restored with <a class="el" href="classmdt_port_manager.html#a5fea4a9b8e94d38e8ec699dba05c7ca8" title="Restore a transaction into pool.">restoreTransaction()</a>. See writeData(mdtPortTransaction*), writeData(const QByteArray&amp;), <a class="el" href="classmdt_port_manager.html#a85b87522eb9ec9b80ff24e3ad2ef4a00" title="Restore all transactions pending to pool.">flushTransactionsPending()</a>, <a class="el" href="classmdt_port_manager.html#aad801de5f93a3619d98b7ea3cae6b999" title="Restore all transactions done to pool.">flushTransactionsDone()</a>, <a class="el" href="classmdt_port_manager.html#a830ae182d06dd6a52c43a7f45b9240ac" title="Get data by frame ID.">readenFrame()</a> and <a class="el" href="classmdt_port_manager.html#addd5dcae9644cea42a9871205af41796" title="Get all readen data.">readenFrames()</a> for details about restoration of transaction.</p>
<dl class="return"><dt><b>Returns:</b></dt><dd>A empty transaction (<a class="el" href="classmdt_port_transaction.html#a5f7b04df58291d52e61c5bd1b7f7bb7f" title="Clear transaction.">mdtPortTransaction::clear()</a> is called internally).</dd></dl>
<dl class="post"><dt><b>Postcondition:</b></dt><dd>Returned transaction is valid (never Null). </dd></dl>

<p>Definition at line <a class="el" href="mdt_port_manager_8cpp_source.html#l00288">288</a> of file <a class="el" href="mdt_port_manager_8cpp_source.html">mdtPortManager.cpp</a>.</p>

</div>
</div>
<a class="anchor" id="aeecbec49376838ab3547729636166d97"></a><!-- doxytag: member="mdtPortManager::isClosed" ref="aeecbec49376838ab3547729636166d97" args="() const " -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool mdtPortManager::isClosed </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Check if port is closed. </p>
<p>Returns true if threads are all stopped and port is closed </p>

<p>Definition at line <a class="el" href="mdt_port_manager_8cpp_source.html#l00591">591</a> of file <a class="el" href="mdt_port_manager_8cpp_source.html">mdtPortManager.cpp</a>.</p>

</div>
</div>
<a class="anchor" id="a6dc2798324521d177fb8f79d4f6c5f0f"></a><!-- doxytag: member="mdtPortManager::isReady" ref="a6dc2798324521d177fb8f79d4f6c5f0f" args="() const " -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool mdtPortManager::isReady </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const<code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Check if port manager is ready. </p>
<p>Internally, the currentState is used to check if port manager is ready. This implementation returns true if currentState is PortReady or Ready.</p>
<p>For some port type, it can be mandatory to be connected to device before any data can be transferred. In such case, reimplement this method. </p>

<p>Reimplemented in <a class="el" href="classmdt_modbus_tcp_port_manager.html#a5477eb7e8d57c5a42004046b426e39b6">mdtModbusTcpPortManager</a>, and <a class="el" href="classmdt_usbtmc_port_manager.html#a0b90ceb0bbf424222ec878a355d206d7">mdtUsbtmcPortManager</a>.</p>

<p>Definition at line <a class="el" href="mdt_port_manager_8cpp_source.html#l00582">582</a> of file <a class="el" href="mdt_port_manager_8cpp_source.html">mdtPortManager.cpp</a>.</p>

</div>
</div>
<a class="anchor" id="a3107b7121dfe5b9686d9b3b3a48a0af0"></a><!-- doxytag: member="mdtPortManager::lockPortMutex" ref="a3107b7121dfe5b9686d9b3b3a48a0af0" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void mdtPortManager::lockPortMutex </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Lock the port's mutex. </p>
<p>This method will check a internal flag before locking port's mutex. If the flag syas that mutex is allready locked, a warning is logged with <a class="el" href="classmdt_error.html" title="mdtError contains informations about a error that occured">mdtError</a> system. Then, this method reurns without locking the port mutex again.</p>
<dl class="pre"><dt><b>Precondition:</b></dt><dd>Port must be set with setPort before using this method </dd></dl>

<p>Definition at line <a class="el" href="mdt_port_manager_8cpp_source.html#l00080">80</a> of file <a class="el" href="mdt_port_manager_8cpp_source.html">mdtPortManager.cpp</a>.</p>

</div>
</div>
<a class="anchor" id="a416a24db1048e9f66aef27ea810954d2"></a><!-- doxytag: member="mdtPortManager::newTransactionDone" ref="a416a24db1048e9f66aef27ea810954d2" args="(mdtPortTransaction *transaction)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void mdtPortManager::newTransactionDone </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classmdt_port_transaction.html">mdtPortTransaction</a> *&#160;</td>
          <td class="paramname"><em>transaction</em></td><td>)</td>
          <td><code> [signal]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Emitted each time a transaction is done. </p>
<p>Note: the transaction pointer is only valid for one call, do not store it for later usage. Connect this signal to a slot that runs in GUI thread only.</p>
<p>This signal is emited by <a class="el" href="classmdt_port_manager.html#a84d37b380080eb26e56c68424dedd958" title="Emit signals for each done transactions.">commitFrames()</a>. </p>

</div>
</div>
<a class="anchor" id="a0c460b47b12e38e708321be79f6343d8"></a><!-- doxytag: member="mdtPortManager::notifyCurrentState" ref="a0c460b47b12e38e708321be79f6343d8" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void mdtPortManager::notifyCurrentState </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Notify the current state. </p>
<p>Will force to emit <a class="el" href="classmdt_port_manager.html#a01da0634bc52a71c0df0d83fc166eeda" title="Emitted each time the state changed.">stateChanged()</a> and <a class="el" href="classmdt_port_manager.html#ae00d513ed335fbd203852dcb7180005c" title="Emitted only if a state that must be notified is entered.">stateChangedForUi()</a> .</p>
<p>Can be usefull during application setup, because some initial states (like PortClosed) are directly notified, probably before signals are connected to application slots. </p>

<p>Definition at line <a class="el" href="mdt_port_manager_8cpp_source.html#l00575">575</a> of file <a class="el" href="mdt_port_manager_8cpp_source.html">mdtPortManager.cpp</a>.</p>

</div>
</div>
<a class="anchor" id="a7e45b8e3475e5182ed12218616664d07"></a><!-- doxytag: member="mdtPortManager::onThreadsErrorOccured" ref="a7e45b8e3475e5182ed12218616664d07" args="(int error)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void mdtPortManager::onThreadsErrorOccured </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>error</em></td><td>)</td>
          <td><code> [protected, virtual, slot]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Manage errors comming from port threads. </p>
<p>This implementation will handle some common errors, change the current state emiting transistion signal. If state has changed, <a class="el" href="classmdt_port_manager.html#a01da0634bc52a71c0df0d83fc166eeda" title="Emitted each time the state changed.">stateChanged()</a> signal is emited.</p>
<p>Handled errors are:</p>
<ul>
<li>NoError: go to ready state.</li>
<li>WriteCanceled: flush pending transaction with <a class="el" href="classmdt_port_manager.html#a85b87522eb9ec9b80ff24e3ad2ef4a00" title="Restore all transactions pending to pool.">flushTransactionsPending()</a> and go to warning state.</li>
<li>WriteTimeout: flush pending transaction with <a class="el" href="classmdt_port_manager.html#a85b87522eb9ec9b80ff24e3ad2ef4a00" title="Restore all transactions pending to pool.">flushTransactionsPending()</a> and go to busy state.</li>
<li>WritePoolEmpty: go to busy state.</li>
<li>ReadCanceled: flush pending transaction with <a class="el" href="classmdt_port_manager.html#a85b87522eb9ec9b80ff24e3ad2ef4a00" title="Restore all transactions pending to pool.">flushTransactionsPending()</a>, done transactions with <a class="el" href="classmdt_port_manager.html#aad801de5f93a3619d98b7ea3cae6b999" title="Restore all transactions done to pool.">flushTransactionsDone()</a> and go to warning state.</li>
<li>ReadTimeout: flush pending transaction with <a class="el" href="classmdt_port_manager.html#a85b87522eb9ec9b80ff24e3ad2ef4a00" title="Restore all transactions pending to pool.">flushTransactionsPending()</a>, done transactions with <a class="el" href="classmdt_port_manager.html#aad801de5f93a3619d98b7ea3cae6b999" title="Restore all transactions done to pool.">flushTransactionsDone()</a> and go to busy state.</li>
<li>ReadPoolEmpty: go to busy state.</li>
<li>Disconnected: flush pending transaction with <a class="el" href="classmdt_port_manager.html#a85b87522eb9ec9b80ff24e3ad2ef4a00" title="Restore all transactions pending to pool.">flushTransactionsPending()</a>, done transactions with <a class="el" href="classmdt_port_manager.html#aad801de5f93a3619d98b7ea3cae6b999" title="Restore all transactions done to pool.">flushTransactionsDone()</a> and go to disconnected state.</li>
<li>Connecting: go to connecting state.</li>
</ul>
<p>For other errors, including UnhandledError, pending transactions are flushed with <a class="el" href="classmdt_port_manager.html#a85b87522eb9ec9b80ff24e3ad2ef4a00" title="Restore all transactions pending to pool.">flushTransactionsPending()</a>, done transactions are flushed with <a class="el" href="classmdt_port_manager.html#aad801de5f93a3619d98b7ea3cae6b999" title="Restore all transactions done to pool.">flushTransactionsDone()</a> and state will become error state.</p>
<p>For other cases, the subclass can reimplement this method. Dont forget to emit transistion signals. </p>

<p><p>emit(handledError());</p>
<p>emit(handledError());</p>
<p>case <a class="el" href="classmdt_abstract_port.html#ad4121bb930c95887e77f8bafa065a85ea44eaa84d8f888f4f9d5c814291e54079">mdtAbstractPort::ControlCanceled</a>: emit(handledError()); break;</p>
<p><a class="el" href="classmdt_port_manager.html#a85b87522eb9ec9b80ff24e3ad2ef4a00" title="Restore all transactions pending to pool.">flushTransactionsPending()</a>; <a class="el" href="classmdt_port_manager.html#aad801de5f93a3619d98b7ea3cae6b999" title="Restore all transactions done to pool.">flushTransactionsDone()</a>;</p>
<p><a class="el" href="classmdt_port_manager.html#a85b87522eb9ec9b80ff24e3ad2ef4a00" title="Restore all transactions pending to pool.">flushTransactionsPending()</a>;</p>
<p>case <a class="el" href="classmdt_abstract_port.html#ad4121bb930c95887e77f8bafa065a85eabdb5a36cd2c7dd2dcf59e996fc4922c9">mdtAbstractPort::ControlTimeout</a>: emit(busy()); break;</p>
<p>case <a class="el" href="classmdt_abstract_port.html#ad4121bb930c95887e77f8bafa065a85ea6e24e272af4da51c84eef5825c5cd712">mdtAbstractPort::UnhandledError</a>: emit(unhandledError()); break;</p>
<p>emit(unhandledError()); </p>
</p>

<p>Reimplemented in <a class="el" href="classmdt_usb_port_manager.html#ad6cbef2c218efe73fdad6d5f598f743f">mdtUsbPortManager</a>.</p>

<p>Definition at line <a class="el" href="mdt_port_manager_8cpp_source.html#l00861">861</a> of file <a class="el" href="mdt_port_manager_8cpp_source.html">mdtPortManager.cpp</a>.</p>

</div>
</div>
<a class="anchor" id="aab594613e8985590c835194efbc27b5e"></a><!-- doxytag: member="mdtPortManager::openPort" ref="aab594613e8985590c835194efbc27b5e" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool mdtPortManager::openPort </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td><code> [protected, virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Open the port. </p>
<p>Will try to open port defined with <a class="el" href="classmdt_port_manager.html#a2b2ed690cbba9f544c6ac1b46684e59a" title="Set port name.">setPortName()</a> or <a class="el" href="classmdt_port_manager.html#a7e2ef93ec2731e66aa2b2d5f7ce9bc1c" title="Set port info.">setPortInfo()</a></p>
<dl class="return"><dt><b>Returns:</b></dt><dd>True on success, false else. </dd></dl>
<dl class="pre"><dt><b>Precondition:</b></dt><dd>Port must be set with <a class="el" href="classmdt_port_manager.html#afcd156b2d0c9d340999935efb6cd8cb6" title="Set port object.">setPort()</a> before use of this method. </dd></dl>
<dl class="todo"><dt><b><a class="el" href="todo.html#_todo000042">Todo:</a></b></dt><dd>Should return <a class="el" href="classmdt_abstract_port.html#ad4121bb930c95887e77f8bafa065a85e" title="Error.">mdtAbstractPort::error_t</a> </dd></dl>

<p><dl class="todo"><dt><b><a class="el" href="todo.html#_todo000038">Todo:</a></b></dt><dd>Handle and/or display error &lt;- Note: no graphical dialog here ! Or.. yes ? </dd></dl>
</p>

<p>Definition at line <a class="el" href="mdt_port_manager_8cpp_source.html#l00603">603</a> of file <a class="el" href="mdt_port_manager_8cpp_source.html">mdtPortManager.cpp</a>.</p>

</div>
</div>
<a class="anchor" id="a6dd5529e6de23897fe5082ee4a33fa3d"></a><!-- doxytag: member="mdtPortManager::pmAllThreadsReadyEvent" ref="a6dd5529e6de23897fe5082ee4a33fa3d" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void mdtPortManager::pmAllThreadsReadyEvent </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td><code> [signal]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Sent when all threads are ready. </p>
<p>Used by state machine </p>

</div>
</div>
<a class="anchor" id="a1bfd4d20867ecae2cad1b95b52860b12"></a><!-- doxytag: member="mdtPortManager::pmAllThreadsStoppedEvent" ref="a1bfd4d20867ecae2cad1b95b52860b12" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void mdtPortManager::pmAllThreadsStoppedEvent </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td><code> [signal]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Sent when all threads are stopped. </p>
<p>Used by state machine </p>

</div>
</div>
<a class="anchor" id="a5959d4025f4903eef0ea65c350f6f9b3"></a><!-- doxytag: member="mdtPortManager::pmBusyEvent" ref="a5959d4025f4903eef0ea65c350f6f9b3" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void mdtPortManager::pmBusyEvent </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td><code> [signal]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Sent when device is busy (or other slow down reason..) </p>
<p>Used by state machine </p>

</div>
</div>
<a class="anchor" id="a871ec7f9676a12c84196404285cf2161"></a><!-- doxytag: member="mdtPortManager::pmConnectedEvent" ref="a871ec7f9676a12c84196404285cf2161" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void mdtPortManager::pmConnectedEvent </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td><code> [signal]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Sent when connection with device is established. </p>
<p>Used by state machine </p>

</div>
</div>
<a class="anchor" id="a04fb1d09af226677cacd6f0e485d9810"></a><!-- doxytag: member="mdtPortManager::pmConnectingEvent" ref="a04fb1d09af226677cacd6f0e485d9810" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void mdtPortManager::pmConnectingEvent </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td><code> [signal]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Sent when connection with device beginns. </p>
<p>Used by state machine </p>

</div>
</div>
<a class="anchor" id="a57fc083d7db52279ec6b990b75705552"></a><!-- doxytag: member="mdtPortManager::pmConnectionFailedEvent" ref="a57fc083d7db52279ec6b990b75705552" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void mdtPortManager::pmConnectionFailedEvent </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td><code> [signal]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Sent when connection failed on startup or after max try. </p>
<p>Used by state machine </p>

</div>
</div>
<a class="anchor" id="ab4667ac04a31166eeb7b5f92893b16db"></a><!-- doxytag: member="mdtPortManager::pmDisconnectedEvent" ref="ab4667ac04a31166eeb7b5f92893b16db" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void mdtPortManager::pmDisconnectedEvent </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td><code> [signal]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Sent when connection with device was lost/closed. </p>
<p>Used by state machine </p>

</div>
</div>
<a class="anchor" id="ae77c1b24291797704488beda0009c57a"></a><!-- doxytag: member="mdtPortManager::pmPortClosedEvent" ref="ae77c1b24291797704488beda0009c57a" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void mdtPortManager::pmPortClosedEvent </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td><code> [signal]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Sent when port was closed. </p>
<p>Used by state machine </p>

</div>
</div>
<a class="anchor" id="aa23c17048773e345778e7d6393f630db"></a><!-- doxytag: member="mdtPortManager::pmReadyEvent" ref="aa23c17048773e345778e7d6393f630db" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void mdtPortManager::pmReadyEvent </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td><code> [signal]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Sent when device and communication becomes ready again. </p>
<p>Used by state machine </p>

</div>
</div>
<a class="anchor" id="aa12ccb053b3ce050a2482a957b28222e"></a><!-- doxytag: member="mdtPortManager::pmStartThreadsEvent" ref="aa12ccb053b3ce050a2482a957b28222e" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void mdtPortManager::pmStartThreadsEvent </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td><code> [signal]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Sent when threads must be started. </p>
<p>Used by state machine </p>

</div>
</div>
<a class="anchor" id="a7b81ee6491167fa17574d840720d9b33"></a><!-- doxytag: member="mdtPortManager::pmStopThreadsEvent" ref="a7b81ee6491167fa17574d840720d9b33" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void mdtPortManager::pmStopThreadsEvent </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td><code> [signal]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Sent when threads must be stopped. </p>
<p>Used by state machine </p>

</div>
</div>
<a class="anchor" id="a0be3429f901fc9bf4adee196035d2cee"></a><!-- doxytag: member="mdtPortManager::pmTransactionTimeoutEvent" ref="a0be3429f901fc9bf4adee196035d2cee" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void mdtPortManager::pmTransactionTimeoutEvent </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td><code> [signal]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Sent when a transaction timeout occured. </p>
<p>A transaction timeout can be notified by a port thread, or/and internall transaction timer.</p>
<dl class="see"><dt><b>See also:</b></dt><dd><a class="el" href="classmdt_port_manager.html#a04fc12f0dc02e981cac8dc56539e63d2" title="Check if a transaction timeout occured.">transactionTimeoutOccured()</a> </dd>
<dd>
onTransactionTimeoutOccured() </dd>
<dd>
<a class="el" href="classmdt_port_manager.html#adeeba5a216174fcc1d01446a9537f40e" title="Start transaction timer.">startTransactionTimer()</a> </dd>
<dd>
<a class="el" href="classmdt_port_manager.html#a1467c0bd28612ae3116f5daba08c0b84" title="Stop transaction timer.">stopTransactionTimer()</a> </dd></dl>

</div>
</div>
<a class="anchor" id="a94d3fa4a26f8686449313a54003f0b4d"></a><!-- doxytag: member="mdtPortManager::pmUnhandledErrorEvent" ref="a94d3fa4a26f8686449313a54003f0b4d" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void mdtPortManager::pmUnhandledErrorEvent </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td><code> [signal]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Sent when a unhandled error occured. </p>
<p>Used by state machine </p>

</div>
</div>
<a class="anchor" id="a830ae182d06dd6a52c43a7f45b9240ac"></a><!-- doxytag: member="mdtPortManager::readenFrame" ref="a830ae182d06dd6a52c43a7f45b9240ac" args="(int id)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">QByteArray mdtPortManager::readenFrame </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>id</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Get data by frame ID. </p>
<p>The frame ID is a protocol specific identification. F.ex. in MODBUS/TCP, the transaction ID is used, or bTag for USBTMC.</p>
<p>If found, the frame is removed from done queue. (A second call with same ID will return a empty QByteArray).</p>
<p>If ID was not found, a empty QByteArray is returned. </p>

<p>Definition at line <a class="el" href="mdt_port_manager_8cpp_source.html#l00488">488</a> of file <a class="el" href="mdt_port_manager_8cpp_source.html">mdtPortManager.cpp</a>.</p>

</div>
</div>
<a class="anchor" id="addd5dcae9644cea42a9871205af41796"></a><!-- doxytag: member="mdtPortManager::readenFrames" ref="addd5dcae9644cea42a9871205af41796" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">QList&lt; QByteArray &gt; mdtPortManager::readenFrames </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Get all readen data. </p>
<p>Note that calling this methode will clear the internal queue. (A second call will return a empty list). </p>

<p>Definition at line <a class="el" href="mdt_port_manager_8cpp_source.html#l00501">501</a> of file <a class="el" href="mdt_port_manager_8cpp_source.html">mdtPortManager.cpp</a>.</p>

</div>
</div>
<a class="anchor" id="ad9233b5156a45f2684783317d75fdf9b"></a><!-- doxytag: member="mdtPortManager::readThread" ref="ad9233b5156a45f2684783317d75fdf9b" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classmdt_port_thread.html">mdtPortThread</a> * mdtPortManager::readThread </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Returns instance of reader thread. </p>
<p>Note that a Null pointer can be returned </p>

<p>Definition at line <a class="el" href="mdt_port_manager_8cpp_source.html#l00146">146</a> of file <a class="el" href="mdt_port_manager_8cpp_source.html">mdtPortManager.cpp</a>.</p>

</div>
</div>
<a class="anchor" id="aaa0a474183bcae0fff4fb9ef43023c25"></a><!-- doxytag: member="mdtPortManager::removeThreads" ref="aaa0a474183bcae0fff4fb9ef43023c25" args="(bool releaseMemory)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void mdtPortManager::removeThreads </td>
          <td>(</td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>releaseMemory</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Detach threads from port and remove threads. </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">releaseMemory</td><td>If true, all threads are deleted </td></tr>
  </table>
  </dd>
</dl>
<dl class="pre"><dt><b>Precondition:</b></dt><dd>Port manager must be closed (see <a class="el" href="classmdt_port_manager.html#aeecbec49376838ab3547729636166d97" title="Check if port is closed.">isClosed()</a> ). </dd></dl>

<p>Definition at line <a class="el" href="mdt_port_manager_8cpp_source.html#l00156">156</a> of file <a class="el" href="mdt_port_manager_8cpp_source.html">mdtPortManager.cpp</a>.</p>

</div>
</div>
<a class="anchor" id="a5fea4a9b8e94d38e8ec699dba05c7ca8"></a><!-- doxytag: member="mdtPortManager::restoreTransaction" ref="a5fea4a9b8e94d38e8ec699dba05c7ca8" args="(mdtPortTransaction *transaction)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void mdtPortManager::restoreTransaction </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classmdt_port_transaction.html">mdtPortTransaction</a> *&#160;</td>
          <td class="paramname"><em>transaction</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Restore a transaction into pool. </p>
<dl class="pre"><dt><b>Precondition:</b></dt><dd>transaction must be a valid pointer (not Null) </dd>
<dd>
One transaction must be commited once (avoid corrupted double free) </dd></dl>

<p><p>qDebug() &lt;&lt; "Restore transaction: " &lt;&lt; transaction &lt;&lt; " , ID: " &lt;&lt; transaction-&gt;id() &lt;&lt; " data: " &lt;&lt; transaction-&gt;data(); </p>
</p>

<p>Definition at line <a class="el" href="mdt_port_manager_8cpp_source.html#l00310">310</a> of file <a class="el" href="mdt_port_manager_8cpp_source.html">mdtPortManager.cpp</a>.</p>

</div>
</div>
<a class="anchor" id="ad56afb411ab5468005fca04767557ece"></a><!-- doxytag: member="mdtPortManager::scan" ref="ad56afb411ab5468005fca04767557ece" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">QList&lt; <a class="el" href="classmdt_port_info.html">mdtPortInfo</a> * &gt; mdtPortManager::scan </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Scan for available ports. </p>
<p>This method is implemented is port's specific subclass. Default implementation returns a empty list.</p>
<p>Note that returned list must be freed by user after usage. (for.ex. with qDeletAll() and QList::clear() ). </p>

<p>Reimplemented in <a class="el" href="classmdt_usb_port_manager.html#a3a2370c3a2d0353a880bf9b777728c3b">mdtUsbPortManager</a>, <a class="el" href="classmdt_usbtmc_port_manager.html#a992d1227810186d3c7dc166452e2e3b6">mdtUsbtmcPortManager</a>, and <a class="el" href="classmdt_serial_port_manager.html#a791572f869d1d605d0c4658ca4187260">mdtSerialPortManager</a>.</p>

<p>Definition at line <a class="el" href="mdt_port_manager_8cpp_source.html#l00067">67</a> of file <a class="el" href="mdt_port_manager_8cpp_source.html">mdtPortManager.cpp</a>.</p>

</div>
</div>
<a class="anchor" id="ad98399edba146af5cf32a9002094385c"></a><!-- doxytag: member="mdtPortManager::sendData" ref="ad98399edba146af5cf32a9002094385c" args="(mdtPortTransaction *transaction)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int mdtPortManager::sendData </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classmdt_port_transaction.html">mdtPortTransaction</a> *&#160;</td>
          <td class="paramname"><em>transaction</em></td><td>)</td>
          <td><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Send data on port. </p>
<p>At first, this method waits until the ready state is set calling <a class="el" href="classmdt_port_manager.html#a6dc2798324521d177fb8f79d4f6c5f0f" title="Check if port manager is ready.">isReady()</a> , a frame is available in port's write frames pool, and until a transaction is possible (see <a class="el" href="classmdt_port_manager.html#ac04a12f8aa20ba04695083afce45a6cc" title="Wait until transaction pending queue has less than maximum possible items.">waitTransactionPossible()</a> ). This wait will not break event loop, so no GUI freeze occurs. If port manager is stopped during this wait (unhandled error, stop request), this method returns.</p>
<p>Then, data contained in transaction will be passed to the mdtPort's write queue by copy. This method returns immediatly after enqueue, and don't wait until data was written.</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">transaction</td><td>Transaction used to send data. Following members are used by this method:<ul>
<li>id : transaction will be added to pending transactions with this id, and currentTransactionId will be set with it.</li>
<li>data : will be sent to port.</li>
<li>isQueryReplyMode : if true, the transaction will be keeped in transactions done queue until <a class="el" href="classmdt_port_manager.html#a830ae182d06dd6a52c43a7f45b9240ac" title="Get data by frame ID.">readenFrame()</a> or <a class="el" href="classmdt_port_manager.html#addd5dcae9644cea42a9871205af41796" title="Get all readen data.">readenFrames()</a> is called. Note: it's possible to force keeping all incomming data (wich also owerwrite this flag) by setting the global keepTransactionsDone flag.</li>
</ul>
</td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>Transaction ID on success or value &lt; 0 on error. In this implementation, the only possible error is <a class="el" href="classmdt_abstract_port.html#ad4121bb930c95887e77f8bafa065a85eae50ff4a9393507ad39005ddc7d5be42f">mdtAbstractPort::WriteCanceled</a>, witch typically occurs when port manager stops. Some subclass can return a frame ID on success, or a other error. See subclass documentation for details. Note: on failure, the transaction is restored to pool. </dd></dl>
<dl class="pre"><dt><b>Precondition:</b></dt><dd>Port must be set with <a class="el" href="classmdt_port_manager.html#afcd156b2d0c9d340999935efb6cd8cb6" title="Set port object.">setPort()</a> before use of this method. </dd>
<dd>
transaction must be a valid pointer, and not allready exists in transactions pending or transactions done queue.</dd></dl>
<p>Subclass notes:<br/>
 This method can be reimplemented in subclass if needed. Typically usefull if some encoding is needed before the frame is submitted to port. A frame must be taken from port's write frames pool with <a class="el" href="classmdt_abstract_port.html#abf093b67fddebffa4f3c52277b9a8cf7" title="Get the write frames Queue pool.">mdtAbstractPort::writeFramesPool()</a> dequeue() method (see Qt's QQueue documentation for more details on dequeue() ), then added to port's write queue with <a class="el" href="classmdt_abstract_port.html#a9a69eb2fc07d551ab37c011487fa319d" title="Add a frame to write.">mdtAbstractPort::addFrameToWrite()</a> . If protocol supports frame identification (like MODBUS's transaction ID or USBTMC's bTag), it should be returned here and incremented using <a class="el" href="classmdt_port_manager.html#a4d009936a0a5130f3bfecb69fee4ce42" title="Increment current transaction ID.">incrementCurrentTransactionId()</a>. </p>

<p>Reimplemented in <a class="el" href="classmdt_modbus_tcp_port_manager.html#a208a3b2522795974836fd8aef406725a">mdtModbusTcpPortManager</a>, and <a class="el" href="classmdt_usbtmc_port_manager.html#a205901666c797055bee1902bd1e1e09c">mdtUsbtmcPortManager</a>.</p>

<p>Definition at line <a class="el" href="mdt_port_manager_8cpp_source.html#l00319">319</a> of file <a class="el" href="mdt_port_manager_8cpp_source.html">mdtPortManager.cpp</a>.</p>

</div>
</div>
<a class="anchor" id="a445b27f0819158f67f1bd548cdd2fedf"></a><!-- doxytag: member="mdtPortManager::sendData" ref="a445b27f0819158f67f1bd548cdd2fedf" args="(const QByteArray &amp;data, bool queryReplyMode=false)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int mdtPortManager::sendData </td>
          <td>(</td>
          <td class="paramtype">const QByteArray &amp;&#160;</td>
          <td class="paramname"><em>data</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>queryReplyMode</em> = <code>false</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Send data to port. </p>
<p>Will increment the current transaction ID, get a new transaction, setup it and finally send it with <a class="el" href="classmdt_port_manager.html#ad98399edba146af5cf32a9002094385c" title="Send data on port.">sendData(mdtPortTransaction*)</a>.</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">data</td><td>Data to write. </td></tr>
    <tr><td class="paramname">queryReplyMode</td><td>If true, reply will be keeped in transactions done queue until <a class="el" href="classmdt_port_manager.html#a830ae182d06dd6a52c43a7f45b9240ac" title="Get data by frame ID.">readenFrame()</a> or <a class="el" href="classmdt_port_manager.html#addd5dcae9644cea42a9871205af41796" title="Get all readen data.">readenFrames()</a> is called. If false, behaviour depends on keepTransactionsDone flag.</td></tr>
  </table>
  </dd>
</dl>
<dl class="see"><dt><b>See also:</b></dt><dd><a class="el" href="classmdt_port_manager.html#ad98399edba146af5cf32a9002094385c" title="Send data on port.">sendData(mdtPortTransaction*)</a> </dd></dl>

<p>Reimplemented in <a class="el" href="classmdt_modbus_tcp_port_manager.html#ac6ffcccbba23b1bda5cba2ae347793ba">mdtModbusTcpPortManager</a>.</p>

<p>Definition at line <a class="el" href="mdt_port_manager_8cpp_source.html#l00365">365</a> of file <a class="el" href="mdt_port_manager_8cpp_source.html">mdtPortManager.cpp</a>.</p>

</div>
</div>
<a class="anchor" id="a9adb5098766c9df588bc9978b00c5eb2"></a><!-- doxytag: member="mdtPortManager::setKeepTransactionsDone" ref="a9adb5098766c9df588bc9978b00c5eb2" args="(bool keep)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void mdtPortManager::setKeepTransactionsDone </td>
          <td>(</td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>keep</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Force transactions done to be keeped. </p>
<p>If keep is true, <a class="el" href="classmdt_port_manager.html#a84d37b380080eb26e56c68424dedd958" title="Emit signals for each done transactions.">commitFrames()</a> will ignore the <a class="el" href="classmdt_port_transaction.html#a9da1cc7a191cd21a2e532d277aa3c628" title="Get the query/reply mode flag.">mdtPortTransaction::isQueryReplyMode()</a> and allways keep transactions in done queue until <a class="el" href="classmdt_port_manager.html#a830ae182d06dd6a52c43a7f45b9240ac" title="Get data by frame ID.">readenFrame()</a> or <a class="el" href="classmdt_port_manager.html#addd5dcae9644cea42a9871205af41796" title="Get all readen data.">readenFrames()</a> is called. </p>

<p>Definition at line <a class="el" href="mdt_port_manager_8cpp_source.html#l00278">278</a> of file <a class="el" href="mdt_port_manager_8cpp_source.html">mdtPortManager.cpp</a>.</p>

</div>
</div>
<a class="anchor" id="afcd156b2d0c9d340999935efb6cd8cb6"></a><!-- doxytag: member="mdtPortManager::setPort" ref="afcd156b2d0c9d340999935efb6cd8cb6" args="(mdtAbstractPort *port)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void mdtPortManager::setPort </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classmdt_abstract_port.html">mdtAbstractPort</a> *&#160;</td>
          <td class="paramname"><em>port</em></td><td>)</td>
          <td><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Set port object. </p>
<dl class="pre"><dt><b>Precondition:</b></dt><dd>port must be a valid pointer to the expected class instance (for ex: <a class="el" href="classmdt_serial_port.html">mdtSerialPort</a>). </dd>
<dd>
Port manager must be closed (see <a class="el" href="classmdt_port_manager.html#aeecbec49376838ab3547729636166d97" title="Check if port is closed.">isClosed()</a> ). </dd></dl>

<p>Definition at line <a class="el" href="mdt_port_manager_8cpp_source.html#l00072">72</a> of file <a class="el" href="mdt_port_manager_8cpp_source.html">mdtPortManager.cpp</a>.</p>

</div>
</div>
<a class="anchor" id="a7e2ef93ec2731e66aa2b2d5f7ce9bc1c"></a><!-- doxytag: member="mdtPortManager::setPortInfo" ref="a7e2ef93ec2731e66aa2b2d5f7ce9bc1c" args="(mdtPortInfo info)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void mdtPortManager::setPortInfo </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classmdt_port_info.html">mdtPortInfo</a>&#160;</td>
          <td class="paramname"><em>info</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Set port info. </p>
<p>Store given port info, and set port name to internall port object. (see <a class="el" href="classmdt_port_info.html#ad456aac33dccc9b0583ed8aa4796cdf0" title="Get the port name.">mdtPortInfo::portName()</a> ).</p>
<p>Setting a port info can be usefull if other informations are needed later in application (f.ex. <a class="el" href="classmdt_port_info.html#a38bcac67372782228a91d8e7dbf49211" title="Get the display text.">mdtPortInfo::displayText()</a> ). You can get port informations later with <a class="el" href="classmdt_port_manager.html#a88109b455fc5a5f5adf0636f7450143e" title="Get current port info.">portInfo()</a>.</p>
<dl class="pre"><dt><b>Precondition:</b></dt><dd>Port must be set before with <a class="el" href="classmdt_port_manager.html#afcd156b2d0c9d340999935efb6cd8cb6" title="Set port object.">setPort()</a> </dd>
<dd>
Port manager must be closed (see <a class="el" href="classmdt_port_manager.html#aeecbec49376838ab3547729636166d97" title="Check if port is closed.">isClosed()</a> ). </dd></dl>

<p>Definition at line <a class="el" href="mdt_port_manager_8cpp_source.html#l00245">245</a> of file <a class="el" href="mdt_port_manager_8cpp_source.html">mdtPortManager.cpp</a>.</p>

</div>
</div>
<a class="anchor" id="a2b2ed690cbba9f544c6ac1b46684e59a"></a><!-- doxytag: member="mdtPortManager::setPortName" ref="a2b2ed690cbba9f544c6ac1b46684e59a" args="(const QString &amp;portName)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void mdtPortManager::setPortName </td>
          <td>(</td>
          <td class="paramtype">const QString &amp;&#160;</td>
          <td class="paramname"><em>portName</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Set port name. </p>
<p>Set the port name to internally port object. Does nothing else. To open the port, use <a class="el" href="classmdt_port_manager.html#af1fb103ffafc227337a59c7e82f44fbc" title="Start port manager.">start()</a>.</p>
<dl class="pre"><dt><b>Precondition:</b></dt><dd>Port must be set before with <a class="el" href="classmdt_port_manager.html#afcd156b2d0c9d340999935efb6cd8cb6" title="Set port object.">setPort()</a> </dd>
<dd>
Port manager must be closed (see <a class="el" href="classmdt_port_manager.html#aeecbec49376838ab3547729636166d97" title="Check if port is closed.">isClosed()</a> ). </dd></dl>
<dl class="see"><dt><b>See also:</b></dt><dd><a class="el" href="classmdt_abstract_port.html" title="Base class for port I/O.">mdtAbstractPort</a> </dd></dl>

<p>Definition at line <a class="el" href="mdt_port_manager_8cpp_source.html#l00236">236</a> of file <a class="el" href="mdt_port_manager_8cpp_source.html">mdtPortManager.cpp</a>.</p>

</div>
</div>
<a class="anchor" id="af1fb103ffafc227337a59c7e82f44fbc"></a><!-- doxytag: member="mdtPortManager::start" ref="af1fb103ffafc227337a59c7e82f44fbc" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool mdtPortManager::start </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Start port manager. </p>
<p>Will open port and start threads. This method returns once port manager is ready (see <a class="el" href="classmdt_port_manager.html#a6dc2798324521d177fb8f79d4f6c5f0f" title="Check if port manager is ready.">isReady()</a> ). Note: event loop continues to work during wait of ready state, GUI will also not freeze</p>
<dl class="pre"><dt><b>Precondition:</b></dt><dd>Port must be set with <a class="el" href="classmdt_port_manager.html#afcd156b2d0c9d340999935efb6cd8cb6" title="Set port object.">setPort()</a> before use of this method. </dd></dl>

<p>Reimplemented in <a class="el" href="classmdt_usb_port_manager.html#ac656805c6de08c9c6a2487291cf3f347">mdtUsbPortManager</a>.</p>

<p>Definition at line <a class="el" href="mdt_port_manager_8cpp_source.html#l00182">182</a> of file <a class="el" href="mdt_port_manager_8cpp_source.html">mdtPortManager.cpp</a>.</p>

</div>
</div>
<a class="anchor" id="adeeba5a216174fcc1d01446a9537f40e"></a><!-- doxytag: member="mdtPortManager::startTransactionTimer" ref="adeeba5a216174fcc1d01446a9537f40e" args="(int timeout)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void mdtPortManager::startTransactionTimer </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>timeout</em></td><td>)</td>
          <td><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Start transaction timer. </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">timeout</td><td>Timeout [ms]</td></tr>
  </table>
  </dd>
</dl>
<dl class="see"><dt><b>See also:</b></dt><dd><a class="el" href="classmdt_port_manager.html#a04fc12f0dc02e981cac8dc56539e63d2" title="Check if a transaction timeout occured.">transactionTimeoutOccured()</a> </dd>
<dd>
<a class="el" href="classmdt_port_manager.html#a0be3429f901fc9bf4adee196035d2cee" title="Sent when a transaction timeout occured.">pmTransactionTimeoutEvent()</a> </dd>
<dd>
onTransactionTimeoutOccured() </dd>
<dd>
<a class="el" href="classmdt_port_manager.html#a1467c0bd28612ae3116f5daba08c0b84" title="Stop transaction timer.">stopTransactionTimer()</a> </dd></dl>

<p>Definition at line <a class="el" href="mdt_port_manager_8cpp_source.html#l00770">770</a> of file <a class="el" href="mdt_port_manager_8cpp_source.html">mdtPortManager.cpp</a>.</p>

</div>
</div>
<a class="anchor" id="ae00d513ed335fbd203852dcb7180005c"></a><!-- doxytag: member="mdtPortManager::stateChangedForUi" ref="ae00d513ed335fbd203852dcb7180005c" args="(int stateId, const QString &amp;stateText, int ledColorId, bool ledIsOn)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void mdtPortManager::stateChangedForUi </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>stateId</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const QString &amp;&#160;</td>
          <td class="paramname"><em>stateText</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>ledColorId</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>ledIsOn</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td><code> [signal]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Emitted only if a state that must be notified is entered. </p>
<dl class="see"><dt><b>See also:</b></dt><dd><a class="el" href="classmdt_state_machine.html" title="Extend Qt&#39;s QStateMachine.">mdtStateMachine</a> </dd></dl>

</div>
</div>
<a class="anchor" id="a6f6c6f8a8430d8631a08c765565db9ab"></a><!-- doxytag: member="mdtPortManager::statusMessageChanged" ref="a6f6c6f8a8430d8631a08c765565db9ab" args="(const QString &amp;message, const QString &amp;details, int timeout)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void mdtPortManager::statusMessageChanged </td>
          <td>(</td>
          <td class="paramtype">const QString &amp;&#160;</td>
          <td class="paramname"><em>message</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const QString &amp;&#160;</td>
          <td class="paramname"><em>details</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>timeout</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td><code> [signal]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Emitted when a new status message is to display. </p>
<p>Typically used with mdtDeviceStatusWidget. </p>

</div>
</div>
<a class="anchor" id="aacbf87cc3d9c37c87e21696f8a6514bd"></a><!-- doxytag: member="mdtPortManager::stop" ref="aacbf87cc3d9c37c87e21696f8a6514bd" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void mdtPortManager::stop </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Stop port manager. </p>
<p>Will stop threads and close port. This method returns once port manager is closed ( see <a class="el" href="classmdt_port_manager.html#aeecbec49376838ab3547729636166d97" title="Check if port is closed.">isClosed()</a> ). Note: event loop continues to work during wait of ready state, GUI will also not freeze</p>
<dl class="pre"><dt><b>Precondition:</b></dt><dd>Port must be set with <a class="el" href="classmdt_port_manager.html#afcd156b2d0c9d340999935efb6cd8cb6" title="Set port object.">setPort()</a> before use of this method. </dd></dl>

<p>Definition at line <a class="el" href="mdt_port_manager_8cpp_source.html#l00213">213</a> of file <a class="el" href="mdt_port_manager_8cpp_source.html">mdtPortManager.cpp</a>.</p>

</div>
</div>
<a class="anchor" id="a1467c0bd28612ae3116f5daba08c0b84"></a><!-- doxytag: member="mdtPortManager::stopTransactionTimer" ref="a1467c0bd28612ae3116f5daba08c0b84" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void mdtPortManager::stopTransactionTimer </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Stop transaction timer. </p>
<dl class="see"><dt><b>See also:</b></dt><dd><a class="el" href="classmdt_port_manager.html#adeeba5a216174fcc1d01446a9537f40e" title="Start transaction timer.">startTransactionTimer()</a> </dd>
<dd>
<a class="el" href="classmdt_port_manager.html#a04fc12f0dc02e981cac8dc56539e63d2" title="Check if a transaction timeout occured.">transactionTimeoutOccured()</a> </dd>
<dd>
<a class="el" href="classmdt_port_manager.html#a0be3429f901fc9bf4adee196035d2cee" title="Sent when a transaction timeout occured.">pmTransactionTimeoutEvent()</a> </dd>
<dd>
onTransactionTimeoutOccured() </dd></dl>

<p>Definition at line <a class="el" href="mdt_port_manager_8cpp_source.html#l00778">778</a> of file <a class="el" href="mdt_port_manager_8cpp_source.html">mdtPortManager.cpp</a>.</p>

</div>
</div>
<a class="anchor" id="a5869bcf6774a86fb9d3b00a0d4211bb5"></a><!-- doxytag: member="mdtPortManager::transactionDone" ref="a5869bcf6774a86fb9d3b00a0d4211bb5" args="(int id)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classmdt_port_transaction.html">mdtPortTransaction</a> * mdtPortManager::transactionDone </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>id</em></td><td>)</td>
          <td><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Take transaction from DONE queue matching id. </p>
<dl class="return"><dt><b>Returns:</b></dt><dd>A valid transaction if exists, else a Null pointer. </dd></dl>

<p>Definition at line <a class="el" href="mdt_port_manager_8cpp_source.html#l00742">742</a> of file <a class="el" href="mdt_port_manager_8cpp_source.html">mdtPortManager.cpp</a>.</p>

</div>
</div>
<a class="anchor" id="a18478707a9be7638b06cde48ced48297"></a><!-- doxytag: member="mdtPortManager::transactionPending" ref="a18478707a9be7638b06cde48ced48297" args="(int id)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classmdt_port_transaction.html">mdtPortTransaction</a> * mdtPortManager::transactionPending </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>id</em></td><td>)</td>
          <td><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Take pending transaction matching id. </p>
<dl class="return"><dt><b>Returns:</b></dt><dd>A valid transaction if exists, else a Null pointer. </dd></dl>

<p>Definition at line <a class="el" href="mdt_port_manager_8cpp_source.html#l00700">700</a> of file <a class="el" href="mdt_port_manager_8cpp_source.html">mdtPortManager.cpp</a>.</p>

</div>
</div>
<a class="anchor" id="a04fc12f0dc02e981cac8dc56539e63d2"></a><!-- doxytag: member="mdtPortManager::transactionTimeoutOccured" ref="a04fc12f0dc02e981cac8dc56539e63d2" args="() const " -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool mdtPortManager::transactionTimeoutOccured </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const<code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Check if a transaction timeout occured. </p>
<dl class="see"><dt><b>See also:</b></dt><dd><a class="el" href="classmdt_port_manager.html#a0be3429f901fc9bf4adee196035d2cee" title="Sent when a transaction timeout occured.">pmTransactionTimeoutEvent()</a> </dd>
<dd>
onTransactionTimeoutOccured() </dd>
<dd>
<a class="el" href="classmdt_port_manager.html#adeeba5a216174fcc1d01446a9537f40e" title="Start transaction timer.">startTransactionTimer()</a> </dd>
<dd>
<a class="el" href="classmdt_port_manager.html#a1467c0bd28612ae3116f5daba08c0b84" title="Stop transaction timer.">stopTransactionTimer()</a> </dd></dl>

<p>Definition at line <a class="el" href="mdt_port_manager_8cpp_source.html#l00786">786</a> of file <a class="el" href="mdt_port_manager_8cpp_source.html">mdtPortManager.cpp</a>.</p>

</div>
</div>
<a class="anchor" id="a882e6bf95dac9cd4ab8cc93ecc524874"></a><!-- doxytag: member="mdtPortManager::unlockPortMutex" ref="a882e6bf95dac9cd4ab8cc93ecc524874" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void mdtPortManager::unlockPortMutex </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Unlock port's mutex. </p>
<dl class="pre"><dt><b>Precondition:</b></dt><dd>Port must be set with setPort before using this method </dd></dl>

<p>Definition at line <a class="el" href="mdt_port_manager_8cpp_source.html#l00094">94</a> of file <a class="el" href="mdt_port_manager_8cpp_source.html">mdtPortManager.cpp</a>.</p>

</div>
</div>
<a class="anchor" id="aaa85e0200aba0e0f4392dfe01abae2cf"></a><!-- doxytag: member="mdtPortManager::wait" ref="aaa85e0200aba0e0f4392dfe01abae2cf" args="(int ms)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void mdtPortManager::wait </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>ms</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Wait for some time. </p>
<p>This will block the caller until ms milliseconds elapsed. This will not block event loop, i.e. no GUI freeze occurs.</p>
<p>Such wait method can be usfull if, for example, a device needs some time between two requests.</p>
<p>Note: this method should not be used to wait on a specific event (frame received, ...). For such problem, please considere the transaction API (in this class) and <a class="el" href="classmdt_device.html" title="Base class for a device connected to a port.">mdtDevice</a> witch give some helper methods and a API when developping new communication classes with devices.</p>
<p>Internally, a QTimer is used. Please considere Qt documentation about time precisions and limitations. Note: <a class="el" href="classmdt_port_manager.html" title="Port manager base class.">mdtPortManager</a> is not designed for real time applications, but in mind to communicate in a easy way with devices.</p>
<p>For the story, a example with a Wago 750 I/O system: In multidiagtools test suite we do set/get tests on outputs. We wait confirmation of device for each request (see <a class="el" href="classmdt_device.html" title="Base class for a device connected to a port.">mdtDevice</a> for details). Some times test failed because the get didn't return the value set just before. By mesuring set and get times, we could see that it can take about 2[ms] -&gt; 40[ms]. This can be shorter than PLC needs to update its cache (read all I/O on bus, ...), and we had a old value in get reply. </p>

<p>Definition at line <a class="el" href="mdt_port_manager_8cpp_source.html#l00479">479</a> of file <a class="el" href="mdt_port_manager_8cpp_source.html">mdtPortManager.cpp</a>.</p>

</div>
</div>
<a class="anchor" id="af60f089baded850018cbb90645c8e547"></a><!-- doxytag: member="mdtPortManager::waitOneTransactionDone" ref="af60f089baded850018cbb90645c8e547" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool mdtPortManager::waitOneTransactionDone </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Wait until current transaction is done. </p>
<p>Use this method if protocol does not support frame ID.</p>
<p>Internally, it will wait until one transaction is available in done queue.</p>
<dl class="return"><dt><b>Returns:</b></dt><dd>True if Ok, false on timeout or other error. </dd></dl>

<p>Definition at line <a class="el" href="mdt_port_manager_8cpp_source.html#l00436">436</a> of file <a class="el" href="mdt_port_manager_8cpp_source.html">mdtPortManager.cpp</a>.</p>

</div>
</div>
<a class="anchor" id="a5551802de2c08632078f2cc0e2607913"></a><!-- doxytag: member="mdtPortManager::waitTransactionDone" ref="a5551802de2c08632078f2cc0e2607913" args="(int id)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool mdtPortManager::waitTransactionDone </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>id</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Wait until a transaction is done. </p>
<p>Will return when transaction with given id is done or after timeout.</p>
<p>This wait method does not break Qt's event loop, no GUI freeze occurs.</p>
<p>This method can return if timeout occurs, or for other reason depending on specific port (port timeout, read cancelled, ...).</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">id</td><td>Frame ID. Depending on protocol, this can be a transaction ID or what else. </td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>True if Ok, false on timeout or other error. If id was not found in transactions pending lists, a warning will be generated in <a class="el" href="classmdt_error.html" title="mdtError contains informations about a error that occured">mdtError</a> system, and false will be returned. On failure, transaction is restored to pool (see <a class="el" href="classmdt_port_manager.html#a7e45b8e3475e5182ed12218616664d07" title="Manage errors comming from port threads.">onThreadsErrorOccured()</a> for details). </dd></dl>

<p>Definition at line <a class="el" href="mdt_port_manager_8cpp_source.html#l00381">381</a> of file <a class="el" href="mdt_port_manager_8cpp_source.html">mdtPortManager.cpp</a>.</p>

</div>
</div>
<a class="anchor" id="ac04a12f8aa20ba04695083afce45a6cc"></a><!-- doxytag: member="mdtPortManager::waitTransactionPossible" ref="ac04a12f8aa20ba04695083afce45a6cc" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool mdtPortManager::waitTransactionPossible </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Wait until transaction pending queue has less than maximum possible items. </p>
<dl class="return"><dt><b>Returns:</b></dt><dd>True on success, false if wait was interrupted. </dd></dl>

<p><p>qDebug() &lt;&lt; "mdtPortManager::waitTransactionPossible() - pending queue : " &lt;&lt; pvTransactionsPending &lt;&lt; " , max pending: " &lt;&lt; pvMaxTransactionsPending;</p>
<p>qDebug() &lt;&lt; "mdtPortManager::waitTransactionPossible() ..."; </p>
</p>

<p>Definition at line <a class="el" href="mdt_port_manager_8cpp_source.html#l00652">652</a> of file <a class="el" href="mdt_port_manager_8cpp_source.html">mdtPortManager.cpp</a>.</p>

</div>
</div>
<a class="anchor" id="af44b6e9876e6687b1d4fe7e05ffd5a91"></a><!-- doxytag: member="mdtPortManager::writeThread" ref="af44b6e9876e6687b1d4fe7e05ffd5a91" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classmdt_port_thread.html">mdtPortThread</a> * mdtPortManager::writeThread </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Returns instance of writer thread. </p>
<p>Note that a Null pointer can be returned </p>

<p>Definition at line <a class="el" href="mdt_port_manager_8cpp_source.html#l00151">151</a> of file <a class="el" href="mdt_port_manager_8cpp_source.html">mdtPortManager.cpp</a>.</p>

</div>
</div>
<hr/>The documentation for this class was generated from the following files:<ul>
<li>src/mdtport/<a class="el" href="mdt_port_manager_8h_source.html">mdtPortManager.h</a></li>
<li>src/mdtport/<a class="el" href="mdt_port_manager_8cpp_source.html">mdtPortManager.cpp</a></li>
</ul>
</div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Classes</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Namespaces</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Enumerator</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<hr class="footer"/><address class="footer"><small>Generated on Sun Jan 12 2014 12:42:28 for Multi diag tools by&#160;
<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.7.4 </small></address>
</body>
</html>
