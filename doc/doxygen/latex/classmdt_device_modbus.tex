\hypertarget{classmdt_device_modbus}{\section{mdt\-Device\-Modbus Class Reference}
\label{classmdt_device_modbus}\index{mdt\-Device\-Modbus@{mdt\-Device\-Modbus}}
}


Represent a M\-O\-D\-B\-U\-S device.  




{\ttfamily \#include $<$mdt\-Device\-Modbus.\-h$>$}



Inheritance diagram for mdt\-Device\-Modbus\-:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=204pt]{classmdt_device_modbus__inherit__graph}
\end{center}
\end{figure}


Collaboration diagram for mdt\-Device\-Modbus\-:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classmdt_device_modbus__coll__graph}
\end{center}
\end{figure}
\subsection*{Public Member Functions}
\begin{DoxyCompactItemize}
\item 
\hyperlink{classmdt_device_modbus_ac69cfbe26681342ba05672ab63de2a1f}{mdt\-Device\-Modbus} (\hyperlink{class_q_object}{Q\-Object} $\ast$parent=0)
\item 
virtual \hyperlink{classmdt_device_modbus_a4696f2e3855917a3e3c02a822f9664e2}{$\sim$mdt\-Device\-Modbus} ()
\item 
\hyperlink{classmdt_port_manager}{mdt\-Port\-Manager} $\ast$ \hyperlink{classmdt_device_modbus_aed892b501f8cbd372ccfda1a4fafa536}{port\-Manager} ()
\begin{DoxyCompactList}\small\item\em Get internal port manager instance. \end{DoxyCompactList}\item 
\hyperlink{classmdt_modbus_tcp_port_manager}{mdt\-Modbus\-Tcp\-Port\-Manager} $\ast$ \hyperlink{classmdt_device_modbus_ac547788aa95d46c00ddb1342eb46ef93}{modbus\-Tcp\-Port\-Manager} ()
\begin{DoxyCompactList}\small\item\em Get internal port manager instance. \end{DoxyCompactList}\item 
void \hyperlink{classmdt_device_modbus_a64bfa566dbd8511e11d76c0b14191f17}{set\-Hardware\-Node\-Id} (int hw\-Node\-Id, int bits\-Count, int start\-From=0)
\begin{DoxyCompactList}\small\item\em Set hardware node id. \end{DoxyCompactList}\item 
void \hyperlink{classmdt_device_modbus_a4ec2b55127b7b853488f102f2c5215f8}{clear\-Hardware\-Node\-Id} ()
\begin{DoxyCompactList}\small\item\em Clear hardware node id. \end{DoxyCompactList}\item 
Q\-Variant \hyperlink{classmdt_device_modbus_ab5e3f041a24d895dbe739a9229d4fd27}{hardware\-Node\-Id} () const 
\begin{DoxyCompactList}\small\item\em Get hardware node id. \end{DoxyCompactList}\item 
virtual \hyperlink{classmdt_abstract_port_ad4121bb930c95887e77f8bafa065a85e}{mdt\-Abstract\-Port\-::error\-\_\-t} \hyperlink{classmdt_device_modbus_a3ca2a84163fed1380cbc8859a6b70db0}{connect\-To\-Device} (const \hyperlink{classmdt_port_info}{mdt\-Port\-Info} \&port\-Info)
\begin{DoxyCompactList}\small\item\em Connect to physical device. \end{DoxyCompactList}\item 
\hyperlink{classmdt_abstract_port_ad4121bb930c95887e77f8bafa065a85e}{mdt\-Abstract\-Port\-::error\-\_\-t} \hyperlink{classmdt_device_modbus_a093c6407ee69c4c7696a0c71d0acd88d}{connect\-To\-Device} (const \hyperlink{classmdt_device_info}{mdt\-Device\-Info} \&dev\-Info)
\begin{DoxyCompactList}\small\item\em Search and connect to physical device. \end{DoxyCompactList}\item 
\hyperlink{classmdt_abstract_port_ad4121bb930c95887e77f8bafa065a85e}{mdt\-Abstract\-Port\-::error\-\_\-t} \hyperlink{classmdt_device_modbus_a323b16687f448a4e45eb0b313635b77f}{connect\-To\-Device} (const Q\-List$<$ \hyperlink{classmdt_port_info}{mdt\-Port\-Info} $\ast$ $>$ \&scan\-Result, int \hyperlink{classmdt_device_modbus_ab5e3f041a24d895dbe739a9229d4fd27}{hardware\-Node\-Id}, int bits\-Count, int start\-From=0)
\begin{DoxyCompactList}\small\item\em Search and connect to physical device. \end{DoxyCompactList}\item 
\hyperlink{classmdt_abstract_port_ad4121bb930c95887e77f8bafa065a85e}{mdt\-Abstract\-Port\-::error\-\_\-t} \hyperlink{classmdt_device_modbus_a08100215b37c0922ed177d1f99d07e97}{connect\-To\-Device} (const Q\-List$<$ int $>$ \&existing\-Hw\-Node\-Id\-List)
\begin{DoxyCompactList}\small\item\em Search and connect to physical device. \end{DoxyCompactList}\item 
\hyperlink{classmdt_abstract_port_ad4121bb930c95887e77f8bafa065a85e}{mdt\-Abstract\-Port\-::error\-\_\-t} \hyperlink{classmdt_device_modbus_abfcab17fbf05aab7843ae689316dd01f}{connect\-To\-Device} ()
\begin{DoxyCompactList}\small\item\em Search and connect to physical device. \end{DoxyCompactList}\item 
bool \hyperlink{classmdt_device_modbus_a89d41c6b33a3dd2a92a0956d8e6b3b14}{get\-Register\-Values} (int address, int n)
\begin{DoxyCompactList}\small\item\em Helper method for register service. \end{DoxyCompactList}\item 
const Q\-List$<$ int $>$ \& \hyperlink{classmdt_device_modbus_a83cb2a28111653fbcbbe748f7a1a2e3d}{register\-Values} () const 
\begin{DoxyCompactList}\small\item\em Helper method for register service. \end{DoxyCompactList}\item 
bool \hyperlink{classmdt_device_modbus_a4128420bde679c3666bdf8954a221a53}{set\-Register\-Values} (int start\-Address, Q\-List$<$ int $>$ \&values)
\begin{DoxyCompactList}\small\item\em Helper method for register service. \end{DoxyCompactList}\end{DoxyCompactItemize}
\subsection*{Protected Member Functions}
\begin{DoxyCompactItemize}
\item 
int \hyperlink{classmdt_device_modbus_aa2a024793ae2a5e81c7e92260a70cd9e}{read\-Analog\-Input} (\hyperlink{classmdt_port_transaction}{mdt\-Port\-Transaction} $\ast$transaction)
\begin{DoxyCompactList}\small\item\em Update (G)U\-I when device's state has changed. \end{DoxyCompactList}\item 
int \hyperlink{classmdt_device_modbus_a846af6dbf80bbf747f3f966420ef6f92}{read\-Analog\-Inputs} (\hyperlink{classmdt_port_transaction}{mdt\-Port\-Transaction} $\ast$transaction)
\begin{DoxyCompactList}\small\item\em Read all analog inputs on physical device. \end{DoxyCompactList}\item 
int \hyperlink{classmdt_device_modbus_a30c815cbe5e603e8114dcbc09849e322}{read\-Analog\-Output} (\hyperlink{classmdt_port_transaction}{mdt\-Port\-Transaction} $\ast$transaction)
\begin{DoxyCompactList}\small\item\em Read one analog output on physical device. \end{DoxyCompactList}\item 
int \hyperlink{classmdt_device_modbus_ae02dd44f1d873fcc15ff75d781b62b0b}{read\-Analog\-Outputs} (\hyperlink{classmdt_port_transaction}{mdt\-Port\-Transaction} $\ast$transaction)
\begin{DoxyCompactList}\small\item\em Read all analog outputs on physical device. \end{DoxyCompactList}\item 
int \hyperlink{classmdt_device_modbus_ac63297a31205759622f341525c34251f}{write\-Analog\-Output} (int value, \hyperlink{classmdt_port_transaction}{mdt\-Port\-Transaction} $\ast$transaction)
\begin{DoxyCompactList}\small\item\em Write value on a analog output to physical device. \end{DoxyCompactList}\item 
int \hyperlink{classmdt_device_modbus_aa09d1682bef4bbc08b59b20110e613ff}{write\-Analog\-Outputs} (\hyperlink{classmdt_port_transaction}{mdt\-Port\-Transaction} $\ast$transaction, \hyperlink{classmdt_device_ios_segment}{mdt\-Device\-Ios\-Segment} $\ast$segment)
\begin{DoxyCompactList}\small\item\em Write all analog outputs to physical device. \end{DoxyCompactList}\item 
int \hyperlink{classmdt_device_modbus_a9dd05e51223ee5bb79970fbe84c501f9}{read\-Digital\-Input} (\hyperlink{classmdt_port_transaction}{mdt\-Port\-Transaction} $\ast$transaction)
\begin{DoxyCompactList}\small\item\em Read one digital input on physical device. \end{DoxyCompactList}\item 
int \hyperlink{classmdt_device_modbus_a3fba9e113092f9da187cf684fb62b132}{read\-Digital\-Inputs} (\hyperlink{classmdt_port_transaction}{mdt\-Port\-Transaction} $\ast$transaction)
\begin{DoxyCompactList}\small\item\em Read all digital inputs on physical device. \end{DoxyCompactList}\item 
int \hyperlink{classmdt_device_modbus_a13a334ac86135751893f37064d8f548d}{read\-Digital\-Output} (\hyperlink{classmdt_port_transaction}{mdt\-Port\-Transaction} $\ast$transaction)
\begin{DoxyCompactList}\small\item\em Read one digital output on physical device. \end{DoxyCompactList}\item 
int \hyperlink{classmdt_device_modbus_a8915a036472bff0f356756992c1eae51}{read\-Digital\-Outputs} (\hyperlink{classmdt_port_transaction}{mdt\-Port\-Transaction} $\ast$transaction)
\begin{DoxyCompactList}\small\item\em Read all digital outputs on physical device. \end{DoxyCompactList}\item 
int \hyperlink{classmdt_device_modbus_a6950c10fc521b193fb3c754223879694}{write\-Digital\-Output} (bool state, \hyperlink{classmdt_port_transaction}{mdt\-Port\-Transaction} $\ast$transaction)
\begin{DoxyCompactList}\small\item\em Write state on a digital output to physical device. \end{DoxyCompactList}\item 
int \hyperlink{classmdt_device_modbus_a6713edaee0bfba48791008124299b753}{write\-Digital\-Outputs} (\hyperlink{classmdt_port_transaction}{mdt\-Port\-Transaction} $\ast$transaction, \hyperlink{classmdt_device_ios_segment}{mdt\-Device\-Ios\-Segment} $\ast$segment)
\begin{DoxyCompactList}\small\item\em Write all digital outputs to physical device. \end{DoxyCompactList}\item 
bool \hyperlink{classmdt_device_modbus_a3b83b926ed1f9c3bdf7024de2745c285}{queries\-Sequence} ()
\begin{DoxyCompactList}\small\item\em Sequence of queries to send periodically. \end{DoxyCompactList}\end{DoxyCompactItemize}
\subsection*{Protected Attributes}
\begin{DoxyCompactItemize}
\item 
\hyperlink{classmdt_modbus_tcp_port_manager}{mdt\-Modbus\-Tcp\-Port\-Manager} $\ast$ \hyperlink{classmdt_device_modbus_a9ecbac63c29b229ab01f5fdb26008c95}{pv\-Tcp\-Port\-Manager}
\item 
\hyperlink{classmdt_frame_codec_modbus}{mdt\-Frame\-Codec\-Modbus} $\ast$ \hyperlink{classmdt_device_modbus_a2171d37ea720d546934f1c841e3c4d26}{pv\-Codec}
\end{DoxyCompactItemize}
\subsection*{Additional Inherited Members}


\subsection{Detailed Description}
Represent a M\-O\-D\-B\-U\-S device. 

References\-:
\begin{DoxyItemize}
\item M\-O\-D\-B\-U\-S Application Protocol Specification V1.\-1b
\item \href{http://www.Modbus-IDA.org}{\tt http\-://www.\-Modbus-\/\-I\-D\-A.\-org} 
\end{DoxyItemize}

Definition at line 42 of file mdt\-Device\-Modbus.\-h.



\subsection{Constructor \& Destructor Documentation}
\hypertarget{classmdt_device_modbus_ac69cfbe26681342ba05672ab63de2a1f}{\index{mdt\-Device\-Modbus@{mdt\-Device\-Modbus}!mdt\-Device\-Modbus@{mdt\-Device\-Modbus}}
\index{mdt\-Device\-Modbus@{mdt\-Device\-Modbus}!mdtDeviceModbus@{mdt\-Device\-Modbus}}
\subsubsection[{mdt\-Device\-Modbus}]{\setlength{\rightskip}{0pt plus 5cm}mdt\-Device\-Modbus\-::mdt\-Device\-Modbus (
\begin{DoxyParamCaption}
\item[{{\bf Q\-Object} $\ast$}]{parent = {\ttfamily 0}}
\end{DoxyParamCaption}
)}}\label{classmdt_device_modbus_ac69cfbe26681342ba05672ab63de2a1f}
\begin{DoxyRefDesc}{Todo}
\item[\hyperlink{todo__todo000005}{Todo}]Provisoire ! \end{DoxyRefDesc}


Definition at line 34 of file mdt\-Device\-Modbus.\-cpp.



References mdt\-Port\-Manager\-::config(), mdt\-Port\-Manager\-::notify\-Current\-State(), pv\-Codec, pv\-Tcp\-Port\-Manager, mdt\-Port\-Config\-::read\-Timeout(), mdt\-Device\-::set\-Back\-To\-Ready\-State\-Timeout(), mdt\-Device\-::state\-Changed(), mdt\-Device\-::status\-Message\-Changed(), and mdt\-Port\-Config\-::write\-Timeout().

\hypertarget{classmdt_device_modbus_a4696f2e3855917a3e3c02a822f9664e2}{\index{mdt\-Device\-Modbus@{mdt\-Device\-Modbus}!$\sim$mdt\-Device\-Modbus@{$\sim$mdt\-Device\-Modbus}}
\index{$\sim$mdt\-Device\-Modbus@{$\sim$mdt\-Device\-Modbus}!mdtDeviceModbus@{mdt\-Device\-Modbus}}
\subsubsection[{$\sim$mdt\-Device\-Modbus}]{\setlength{\rightskip}{0pt plus 5cm}mdt\-Device\-Modbus\-::$\sim$mdt\-Device\-Modbus (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [virtual]}}}\label{classmdt_device_modbus_a4696f2e3855917a3e3c02a822f9664e2}


Definition at line 54 of file mdt\-Device\-Modbus.\-cpp.



References pv\-Codec, pv\-Tcp\-Port\-Manager, and mdt\-Port\-Manager\-::stop().



\subsection{Member Function Documentation}
\hypertarget{classmdt_device_modbus_a4ec2b55127b7b853488f102f2c5215f8}{\index{mdt\-Device\-Modbus@{mdt\-Device\-Modbus}!clear\-Hardware\-Node\-Id@{clear\-Hardware\-Node\-Id}}
\index{clear\-Hardware\-Node\-Id@{clear\-Hardware\-Node\-Id}!mdtDeviceModbus@{mdt\-Device\-Modbus}}
\subsubsection[{clear\-Hardware\-Node\-Id}]{\setlength{\rightskip}{0pt plus 5cm}void mdt\-Device\-Modbus\-::clear\-Hardware\-Node\-Id (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
)}}\label{classmdt_device_modbus_a4ec2b55127b7b853488f102f2c5215f8}


Clear hardware node id. 

\begin{DoxySeeAlso}{See Also}
\hyperlink{classmdt_device_modbus_a64bfa566dbd8511e11d76c0b14191f17}{set\-Hardware\-Node\-Id()} . 
\end{DoxySeeAlso}


Definition at line 80 of file mdt\-Device\-Modbus.\-cpp.

\hypertarget{classmdt_device_modbus_a3ca2a84163fed1380cbc8859a6b70db0}{\index{mdt\-Device\-Modbus@{mdt\-Device\-Modbus}!connect\-To\-Device@{connect\-To\-Device}}
\index{connect\-To\-Device@{connect\-To\-Device}!mdtDeviceModbus@{mdt\-Device\-Modbus}}
\subsubsection[{connect\-To\-Device}]{\setlength{\rightskip}{0pt plus 5cm}{\bf mdt\-Abstract\-Port\-::error\-\_\-t} mdt\-Device\-Modbus\-::connect\-To\-Device (
\begin{DoxyParamCaption}
\item[{const {\bf mdt\-Port\-Info} \&}]{port\-Info}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [virtual]}}}\label{classmdt_device_modbus_a3ca2a84163fed1380cbc8859a6b70db0}


Connect to physical device. 

This method can be reimplemented in subclass if specific tasks must be done during connection .


\begin{DoxyParams}{Parameters}
{\em port\-Info} & \hyperlink{classmdt_port_info}{mdt\-Port\-Info} object . The port\-Name attribute of port\-Info must contain host\-:port format (or ip\-:port) . \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
A error listed in \hyperlink{classmdt_abstract_port_ad4121bb930c95887e77f8bafa065a85e}{mdt\-Abstract\-Port\-::error\-\_\-t} (No\-Error on success) . 
\end{DoxyReturn}


Reimplemented in \hyperlink{classmdt_device_modbus_wago_ac15c95cee8dec98609278d0e0ab2b3ce}{mdt\-Device\-Modbus\-Wago}.



Definition at line 92 of file mdt\-Device\-Modbus.\-cpp.



References mdt\-Port\-Manager\-::is\-Closed(), mdt\-Abstract\-Port\-::\-No\-Error, mdt\-Abstract\-Port\-::\-Port\-Not\-Found, pv\-Tcp\-Port\-Manager, mdt\-Port\-Manager\-::set\-Port\-Info(), mdt\-Port\-Manager\-::start(), and mdt\-Port\-Manager\-::stop().

\hypertarget{classmdt_device_modbus_a093c6407ee69c4c7696a0c71d0acd88d}{\index{mdt\-Device\-Modbus@{mdt\-Device\-Modbus}!connect\-To\-Device@{connect\-To\-Device}}
\index{connect\-To\-Device@{connect\-To\-Device}!mdtDeviceModbus@{mdt\-Device\-Modbus}}
\subsubsection[{connect\-To\-Device}]{\setlength{\rightskip}{0pt plus 5cm}{\bf mdt\-Abstract\-Port\-::error\-\_\-t} mdt\-Device\-Modbus\-::connect\-To\-Device (
\begin{DoxyParamCaption}
\item[{const {\bf mdt\-Device\-Info} \&}]{dev\-Info}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [virtual]}}}\label{classmdt_device_modbus_a093c6407ee69c4c7696a0c71d0acd88d}


Search and connect to physical device. 

Will scan available ports and open the first port that has device attached maching request.

\begin{DoxySeeAlso}{See Also}
connect\-To\-Device(mdt\-Port\-Info\&) .
\end{DoxySeeAlso}

\begin{DoxyParams}{Parameters}
{\em dev\-Info} & Requested device's informations (can be empty, no information is used in current version). \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
A error listed in \hyperlink{classmdt_abstract_port_ad4121bb930c95887e77f8bafa065a85e}{mdt\-Abstract\-Port\-::error\-\_\-t} (No\-Error on success) 
\end{DoxyReturn}


Reimplemented from \hyperlink{classmdt_device_abab1b6e45af527880ce469ae318474c0}{mdt\-Device}.



Reimplemented in \hyperlink{classmdt_device_modbus_wago_a025f0411a708a529054a0e3c0b6461cd}{mdt\-Device\-Modbus\-Wago}.



Definition at line 106 of file mdt\-Device\-Modbus.\-cpp.



References connect\-To\-Device(), mdt\-Port\-Manager\-::is\-Closed(), mdt\-Abstract\-Port\-::\-No\-Error, mdt\-Abstract\-Port\-::\-Port\-Not\-Found, pv\-Tcp\-Port\-Manager, mdt\-Modbus\-Tcp\-Port\-Manager\-::read\-Scan\-Result(), mdt\-Modbus\-Tcp\-Port\-Manager\-::save\-Scan\-Result(), mdt\-Modbus\-Tcp\-Port\-Manager\-::scan(), and mdt\-Port\-Manager\-::stop().

\hypertarget{classmdt_device_modbus_a323b16687f448a4e45eb0b313635b77f}{\index{mdt\-Device\-Modbus@{mdt\-Device\-Modbus}!connect\-To\-Device@{connect\-To\-Device}}
\index{connect\-To\-Device@{connect\-To\-Device}!mdtDeviceModbus@{mdt\-Device\-Modbus}}
\subsubsection[{connect\-To\-Device}]{\setlength{\rightskip}{0pt plus 5cm}{\bf mdt\-Abstract\-Port\-::error\-\_\-t} mdt\-Device\-Modbus\-::connect\-To\-Device (
\begin{DoxyParamCaption}
\item[{const Q\-List$<$ {\bf mdt\-Port\-Info} $\ast$ $>$ \&}]{scan\-Result, }
\item[{int}]{hardware\-Node\-Id, }
\item[{int}]{bits\-Count, }
\item[{int}]{start\-From = {\ttfamily 0}}
\end{DoxyParamCaption}
)}}\label{classmdt_device_modbus_a323b16687f448a4e45eb0b313635b77f}


Search and connect to physical device. 

Will try to connect to device listed in scan\-Result until hardware\-Node\-Id is found.


\begin{DoxyParams}{Parameters}
{\em scan\-Result} & List of \hyperlink{classmdt_port_info}{mdt\-Port\-Info} containing a port name in format host\-:port . \\
\hline
{\em hardware\-Node\-Id} & See \hyperlink{classmdt_modbus_tcp_port_manager_a4f52a477c264f809984e25abbc856db8}{mdt\-Modbus\-Tcp\-Port\-Manager\-::get\-Hardware\-Node\-Address()} . \\
\hline
{\em bits\-Count} & See \hyperlink{classmdt_modbus_tcp_port_manager_a4f52a477c264f809984e25abbc856db8}{mdt\-Modbus\-Tcp\-Port\-Manager\-::get\-Hardware\-Node\-Address()} . \\
\hline
{\em start\-From} & See \hyperlink{classmdt_modbus_tcp_port_manager_a4f52a477c264f809984e25abbc856db8}{mdt\-Modbus\-Tcp\-Port\-Manager\-::get\-Hardware\-Node\-Address()} . \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
A error listed in \hyperlink{classmdt_abstract_port_ad4121bb930c95887e77f8bafa065a85e}{mdt\-Abstract\-Port\-::error\-\_\-t} (No\-Error on success) . 
\end{DoxyReturn}
\begin{DoxyPrecond}{Precondition}
scan\-Result must contain valid pointers . 
\end{DoxyPrecond}


Definition at line 176 of file mdt\-Device\-Modbus.\-cpp.



References connect\-To\-Device(), mdt\-Modbus\-Tcp\-Port\-Manager\-::get\-Hardware\-Node\-Address(), hardware\-Node\-Id(), mdt\-Port\-Manager\-::is\-Closed(), mdt\-Abstract\-Port\-::\-No\-Error, mdt\-Abstract\-Port\-::\-Port\-Not\-Found, pv\-Tcp\-Port\-Manager, and mdt\-Port\-Manager\-::stop().

\hypertarget{classmdt_device_modbus_a08100215b37c0922ed177d1f99d07e97}{\index{mdt\-Device\-Modbus@{mdt\-Device\-Modbus}!connect\-To\-Device@{connect\-To\-Device}}
\index{connect\-To\-Device@{connect\-To\-Device}!mdtDeviceModbus@{mdt\-Device\-Modbus}}
\subsubsection[{connect\-To\-Device}]{\setlength{\rightskip}{0pt plus 5cm}{\bf mdt\-Abstract\-Port\-::error\-\_\-t} mdt\-Device\-Modbus\-::connect\-To\-Device (
\begin{DoxyParamCaption}
\item[{const Q\-List$<$ int $>$ \&}]{existing\-Hw\-Node\-Id\-List}
\end{DoxyParamCaption}
)}}\label{classmdt_device_modbus_a08100215b37c0922ed177d1f99d07e97}


Search and connect to physical device. 

Will connect to device with hardware\-Node\-Id set with \hyperlink{classmdt_device_modbus_a64bfa566dbd8511e11d76c0b14191f17}{set\-Hardware\-Node\-Id()} . This method will beginn to scan hosts in cache file (if exists) . If expcted device was not found, the network is also scanned .


\begin{DoxyParams}{Parameters}
{\em existing\-Hw\-Node\-Id\-List} & A list of hardware\-Node\-Id to consider during scan . Once all devices contained in existing\-Hw\-Node\-Id\-List, and device with hardware\-Node\-Id, are found, scan will break . \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
A error listed in \hyperlink{classmdt_abstract_port_ad4121bb930c95887e77f8bafa065a85e}{mdt\-Abstract\-Port\-::error\-\_\-t} (No\-Error on success) . 
\end{DoxyReturn}


Definition at line 211 of file mdt\-Device\-Modbus.\-cpp.



References mdt\-Error\-::commit(), connect\-To\-Device(), mdt\-Error\-::\-Error, mdt\-Port\-Manager\-::is\-Closed(), mdt\-Device\-::last\-Error\-W(), M\-D\-T\-\_\-\-E\-R\-R\-O\-R\-\_\-\-S\-E\-T\-\_\-\-S\-R\-C, mdt\-Abstract\-Port\-::\-No\-Error, pv\-Tcp\-Port\-Manager, mdt\-Modbus\-Tcp\-Port\-Manager\-::read\-Scan\-Result(), mdt\-Modbus\-Tcp\-Port\-Manager\-::save\-Scan\-Result(), mdt\-Modbus\-Tcp\-Port\-Manager\-::scan(), mdt\-Error\-::set\-Error(), mdt\-Abstract\-Port\-::\-Setup\-Error, and mdt\-Port\-Manager\-::stop().

\hypertarget{classmdt_device_modbus_abfcab17fbf05aab7843ae689316dd01f}{\index{mdt\-Device\-Modbus@{mdt\-Device\-Modbus}!connect\-To\-Device@{connect\-To\-Device}}
\index{connect\-To\-Device@{connect\-To\-Device}!mdtDeviceModbus@{mdt\-Device\-Modbus}}
\subsubsection[{connect\-To\-Device}]{\setlength{\rightskip}{0pt plus 5cm}{\bf mdt\-Abstract\-Port\-::error\-\_\-t} mdt\-Device\-Modbus\-::connect\-To\-Device (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
)}}\label{classmdt_device_modbus_abfcab17fbf05aab7843ae689316dd01f}


Search and connect to physical device. 

Will connect to device with hardware\-Node\-Id set with \hyperlink{classmdt_device_modbus_a64bfa566dbd8511e11d76c0b14191f17}{set\-Hardware\-Node\-Id()} . This method will beginn to scan hosts in cache file (if exists) . If expcted device was not found, the network is also scanned .

If all devices that must be scanned have a known hardware\-Node\-Id, please consider using \hyperlink{classmdt_device_modbus_a08100215b37c0922ed177d1f99d07e97}{connect\-To\-Device(const Q\-List$<$int$>$\&)} , wtch can be faster .

\begin{DoxyReturn}{Returns}
A error listed in \hyperlink{classmdt_abstract_port_ad4121bb930c95887e77f8bafa065a85e}{mdt\-Abstract\-Port\-::error\-\_\-t} (No\-Error on success) .
\end{DoxyReturn}
\begin{DoxyRefDesc}{Todo}
\item[\hyperlink{todo__todo000006}{Todo}]Not implemented yet . \end{DoxyRefDesc}


Definition at line 255 of file mdt\-Device\-Modbus.\-cpp.



References mdt\-Abstract\-Port\-::\-Unhandled\-Error.



Referenced by mdt\-Device\-Modbus\-Wago\-::connect\-To\-Device(), and connect\-To\-Device().

\hypertarget{classmdt_device_modbus_a89d41c6b33a3dd2a92a0956d8e6b3b14}{\index{mdt\-Device\-Modbus@{mdt\-Device\-Modbus}!get\-Register\-Values@{get\-Register\-Values}}
\index{get\-Register\-Values@{get\-Register\-Values}!mdtDeviceModbus@{mdt\-Device\-Modbus}}
\subsubsection[{get\-Register\-Values}]{\setlength{\rightskip}{0pt plus 5cm}bool mdt\-Device\-Modbus\-::get\-Register\-Values (
\begin{DoxyParamCaption}
\item[{int}]{address, }
\item[{int}]{n}
\end{DoxyParamCaption}
)}}\label{classmdt_device_modbus_a89d41c6b33a3dd2a92a0956d8e6b3b14}


Helper method for register service. 

Usefull to get resgister values (f.\-ex. configurations regsisters, ...).

Note\-: to get analog I/\-O values, the \hyperlink{classmdt_device}{mdt\-Device} A\-P\-I should be used.

\begin{DoxyReturn}{Returns}
True on success. Values are the available with \hyperlink{classmdt_device_modbus_a83cb2a28111653fbcbbe748f7a1a2e3d}{register\-Values()} 
\end{DoxyReturn}
\begin{DoxyPrecond}{Precondition}
address and n must be $>$ 0 
\end{DoxyPrecond}
\begin{DoxySeeAlso}{See Also}
\hyperlink{classmdt_modbus_tcp_port_manager_ab5e780409492b5f56326a870bc4262ec}{mdt\-Modbus\-Tcp\-Port\-Manager\-::get\-Register\-Values()} 
\end{DoxySeeAlso}


Definition at line 261 of file mdt\-Device\-Modbus.\-cpp.



References mdt\-Modbus\-Tcp\-Port\-Manager\-::get\-Register\-Values(), and pv\-Tcp\-Port\-Manager.



Referenced by mdt\-Device\-Modbus\-Wago\-::analog\-Inputs\-Count(), mdt\-Device\-Modbus\-Wago\-::analog\-Outputs\-Count(), mdt\-Device\-Modbus\-Wago\-::detect\-Ios(), mdt\-Device\-Modbus\-Wago\-::digital\-Inputs\-Count(), mdt\-Device\-Modbus\-Wago\-::digital\-Outputs\-Count(), mdt\-Device\-Modbus\-Wago\-::is\-Wago750(), mdt\-Device\-Modbus\-Wago\-Module\-::read\-Registers(), and mdt\-Device\-Modbus\-Wago\-Module\-::read\-Status\-Bytes().

\hypertarget{classmdt_device_modbus_ab5e3f041a24d895dbe739a9229d4fd27}{\index{mdt\-Device\-Modbus@{mdt\-Device\-Modbus}!hardware\-Node\-Id@{hardware\-Node\-Id}}
\index{hardware\-Node\-Id@{hardware\-Node\-Id}!mdtDeviceModbus@{mdt\-Device\-Modbus}}
\subsubsection[{hardware\-Node\-Id}]{\setlength{\rightskip}{0pt plus 5cm}Q\-Variant mdt\-Device\-Modbus\-::hardware\-Node\-Id (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
) const}}\label{classmdt_device_modbus_ab5e3f041a24d895dbe739a9229d4fd27}


Get hardware node id. 

\begin{DoxySeeAlso}{See Also}
\hyperlink{classmdt_device_modbus_a64bfa566dbd8511e11d76c0b14191f17}{set\-Hardware\-Node\-Id()} . 
\end{DoxySeeAlso}


Definition at line 87 of file mdt\-Device\-Modbus.\-cpp.



Referenced by connect\-To\-Device().

\hypertarget{classmdt_device_modbus_ac547788aa95d46c00ddb1342eb46ef93}{\index{mdt\-Device\-Modbus@{mdt\-Device\-Modbus}!modbus\-Tcp\-Port\-Manager@{modbus\-Tcp\-Port\-Manager}}
\index{modbus\-Tcp\-Port\-Manager@{modbus\-Tcp\-Port\-Manager}!mdtDeviceModbus@{mdt\-Device\-Modbus}}
\subsubsection[{modbus\-Tcp\-Port\-Manager}]{\setlength{\rightskip}{0pt plus 5cm}{\bf mdt\-Modbus\-Tcp\-Port\-Manager} $\ast$ mdt\-Device\-Modbus\-::modbus\-Tcp\-Port\-Manager (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
)}}\label{classmdt_device_modbus_ac547788aa95d46c00ddb1342eb46ef93}


Get internal port manager instance. 



Definition at line 68 of file mdt\-Device\-Modbus.\-cpp.



References pv\-Tcp\-Port\-Manager.



Referenced by mdt\-Modbus\-Io\-Tool\-::mdt\-Modbus\-Io\-Tool().

\hypertarget{classmdt_device_modbus_aed892b501f8cbd372ccfda1a4fafa536}{\index{mdt\-Device\-Modbus@{mdt\-Device\-Modbus}!port\-Manager@{port\-Manager}}
\index{port\-Manager@{port\-Manager}!mdtDeviceModbus@{mdt\-Device\-Modbus}}
\subsubsection[{port\-Manager}]{\setlength{\rightskip}{0pt plus 5cm}{\bf mdt\-Port\-Manager} $\ast$ mdt\-Device\-Modbus\-::port\-Manager (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [virtual]}}}\label{classmdt_device_modbus_aed892b501f8cbd372ccfda1a4fafa536}


Get internal port manager instance. 



Reimplemented from \hyperlink{classmdt_device_a06d9178b4133fd7b23084e712af20976}{mdt\-Device}.



Definition at line 63 of file mdt\-Device\-Modbus.\-cpp.



References pv\-Tcp\-Port\-Manager.



Referenced by mdt\-Modbus\-Io\-Tool\-::mdt\-Modbus\-Io\-Tool().

\hypertarget{classmdt_device_modbus_a3b83b926ed1f9c3bdf7024de2745c285}{\index{mdt\-Device\-Modbus@{mdt\-Device\-Modbus}!queries\-Sequence@{queries\-Sequence}}
\index{queries\-Sequence@{queries\-Sequence}!mdtDeviceModbus@{mdt\-Device\-Modbus}}
\subsubsection[{queries\-Sequence}]{\setlength{\rightskip}{0pt plus 5cm}bool mdt\-Device\-Modbus\-::queries\-Sequence (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [protected]}, {\ttfamily [virtual]}}}\label{classmdt_device_modbus_a3b83b926ed1f9c3bdf7024de2745c285}


Sequence of queries to send periodically. 

This method is called from \hyperlink{classmdt_device_a14634fec6cd6bae810562b3bd88a5c05}{run\-Queries()}.

\begin{DoxyReturn}{Returns}
true if all queries are sent successfully.
\end{DoxyReturn}
Subclass notes\-:\par

\begin{DoxyItemize}
\item This default implementation does nothing and allways returns false.
\item This method can be reimplemented periodic queries must be sent to device. 
\end{DoxyItemize}

Reimplemented from \hyperlink{classmdt_device_acba50968d201ad95c4eaa2ab2ed48b4f}{mdt\-Device}.



Definition at line 462 of file mdt\-Device\-Modbus.\-cpp.



References mdt\-Device\-::get\-Analog\-Inputs(), and mdt\-Device\-::get\-Digital\-Inputs().

\hypertarget{classmdt_device_modbus_aa2a024793ae2a5e81c7e92260a70cd9e}{\index{mdt\-Device\-Modbus@{mdt\-Device\-Modbus}!read\-Analog\-Input@{read\-Analog\-Input}}
\index{read\-Analog\-Input@{read\-Analog\-Input}!mdtDeviceModbus@{mdt\-Device\-Modbus}}
\subsubsection[{read\-Analog\-Input}]{\setlength{\rightskip}{0pt plus 5cm}int mdt\-Device\-Modbus\-::read\-Analog\-Input (
\begin{DoxyParamCaption}
\item[{{\bf mdt\-Port\-Transaction} $\ast$}]{transaction}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [protected]}, {\ttfamily [virtual]}}}\label{classmdt_device_modbus_aa2a024793ae2a5e81c7e92260a70cd9e}


Update (G)U\-I when device's state has changed. 

void on\-State\-Changed(int state);

Read one analog input on physical device

This is the device specific implementation to send the query. If device handled by subclass has analog inputs, this method should be implemented.

This method is called from get\-Analog\-Input().


\begin{DoxyParams}{Parameters}
{\em transaction} & Contains some flags used during query/reply process (address, id, I/\-O object, ...). \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
0 or a I\-D on success, value $<$ 0 on error (see mdt\-Port\-Manager\-::write\-Data() for details). 
\end{DoxyReturn}
\begin{DoxyPrecond}{Precondition}
I/\-O's must be set with set\-Ios(). 

transaction must be a valid pointer. 
\end{DoxyPrecond}


Reimplemented from \hyperlink{classmdt_device_acecf7934ce29b3a957accb0f4c98c746}{mdt\-Device}.



Definition at line 474 of file mdt\-Device\-Modbus.\-cpp.



References mdt\-Port\-Transaction\-::address(), mdt\-Frame\-Codec\-Modbus\-::encode\-Read\-Input\-Registers(), mdt\-Device\-::ios(), pv\-Codec, pv\-Tcp\-Port\-Manager, mdt\-Modbus\-Tcp\-Port\-Manager\-::send\-Data(), and mdt\-Port\-Transaction\-::set\-Data().

\hypertarget{classmdt_device_modbus_a846af6dbf80bbf747f3f966420ef6f92}{\index{mdt\-Device\-Modbus@{mdt\-Device\-Modbus}!read\-Analog\-Inputs@{read\-Analog\-Inputs}}
\index{read\-Analog\-Inputs@{read\-Analog\-Inputs}!mdtDeviceModbus@{mdt\-Device\-Modbus}}
\subsubsection[{read\-Analog\-Inputs}]{\setlength{\rightskip}{0pt plus 5cm}int mdt\-Device\-Modbus\-::read\-Analog\-Inputs (
\begin{DoxyParamCaption}
\item[{{\bf mdt\-Port\-Transaction} $\ast$}]{transaction}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [protected]}, {\ttfamily [virtual]}}}\label{classmdt_device_modbus_a846af6dbf80bbf747f3f966420ef6f92}


Read all analog inputs on physical device. 

This is the device specific implementation to send the query. If device handled by subclass has analog inputs, this method should be implemented.

This method is called from \hyperlink{classmdt_device_a98cba3132db15317daf54eb701388e91}{get\-Analog\-Inputs()}.


\begin{DoxyParams}{Parameters}
{\em transaction} & Contains some flags used during query/reply process (address, id, I/\-O object, ...). \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
0 or a I\-D on success, value $<$ 0 on error (see mdt\-Port\-Manager\-::write\-Data() for details) 
\end{DoxyReturn}
\begin{DoxyPrecond}{Precondition}
I/\-O's must be set with set\-Ios(). 

transaction must be a valid pointer. 
\end{DoxyPrecond}


Reimplemented from \hyperlink{classmdt_device_a40674e7bf0c367bb3edb407d73a5bd8e}{mdt\-Device}.



Definition at line 491 of file mdt\-Device\-Modbus.\-cpp.



References mdt\-Port\-Transaction\-::address(), mdt\-Frame\-Codec\-Modbus\-::encode\-Read\-Input\-Registers(), mdt\-Port\-Transaction\-::io\-Count(), mdt\-Device\-::ios(), pv\-Codec, pv\-Tcp\-Port\-Manager, mdt\-Modbus\-Tcp\-Port\-Manager\-::send\-Data(), and mdt\-Port\-Transaction\-::set\-Data().

\hypertarget{classmdt_device_modbus_a30c815cbe5e603e8114dcbc09849e322}{\index{mdt\-Device\-Modbus@{mdt\-Device\-Modbus}!read\-Analog\-Output@{read\-Analog\-Output}}
\index{read\-Analog\-Output@{read\-Analog\-Output}!mdtDeviceModbus@{mdt\-Device\-Modbus}}
\subsubsection[{read\-Analog\-Output}]{\setlength{\rightskip}{0pt plus 5cm}int mdt\-Device\-Modbus\-::read\-Analog\-Output (
\begin{DoxyParamCaption}
\item[{{\bf mdt\-Port\-Transaction} $\ast$}]{transaction}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [protected]}, {\ttfamily [virtual]}}}\label{classmdt_device_modbus_a30c815cbe5e603e8114dcbc09849e322}


Read one analog output on physical device. 

This is the device specific implementation to send the query. If device handled by subclass has analog inputs, this method should be implemented.

This method is called from \hyperlink{classmdt_device_a163ee286d905feafe50b3e4351d4bf41}{get\-Analog\-Output\-Value()}.


\begin{DoxyParams}{Parameters}
{\em transaction} & Contains some flags used during query/reply process (address, id, I/\-O object, ...). \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
0 or a I\-D on success, value $<$ 0 on error (see mdt\-Port\-Manager\-::write\-Data() for details) 
\end{DoxyReturn}
\begin{DoxyPrecond}{Precondition}
I/\-O's must be set with set\-Ios(). 

transaction must be a valid pointer. 
\end{DoxyPrecond}


Reimplemented from \hyperlink{classmdt_device_a7934063c3f41a742515f1232c9598c2a}{mdt\-Device}.



Definition at line 508 of file mdt\-Device\-Modbus.\-cpp.



References mdt\-Port\-Transaction\-::address(), mdt\-Frame\-Codec\-Modbus\-::encode\-Read\-Holding\-Registers(), mdt\-Device\-::ios(), pv\-Codec, pv\-Tcp\-Port\-Manager, mdt\-Modbus\-Tcp\-Port\-Manager\-::send\-Data(), and mdt\-Port\-Transaction\-::set\-Data().

\hypertarget{classmdt_device_modbus_ae02dd44f1d873fcc15ff75d781b62b0b}{\index{mdt\-Device\-Modbus@{mdt\-Device\-Modbus}!read\-Analog\-Outputs@{read\-Analog\-Outputs}}
\index{read\-Analog\-Outputs@{read\-Analog\-Outputs}!mdtDeviceModbus@{mdt\-Device\-Modbus}}
\subsubsection[{read\-Analog\-Outputs}]{\setlength{\rightskip}{0pt plus 5cm}int mdt\-Device\-Modbus\-::read\-Analog\-Outputs (
\begin{DoxyParamCaption}
\item[{{\bf mdt\-Port\-Transaction} $\ast$}]{transaction}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [protected]}, {\ttfamily [virtual]}}}\label{classmdt_device_modbus_ae02dd44f1d873fcc15ff75d781b62b0b}


Read all analog outputs on physical device. 

This is the device specific implementation to send the query. If device handled by subclass has analog inputs, this method should be implemented.

This method is called from \hyperlink{classmdt_device_a163ee286d905feafe50b3e4351d4bf41}{get\-Analog\-Output\-Value()}.


\begin{DoxyParams}{Parameters}
{\em transaction} & Contains some flags used during query/reply process (address, id, I/\-O object, ...). \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
0 or a I\-D on success, value $<$ 0 on error (see mdt\-Port\-Manager\-::write\-Data() for details) 
\end{DoxyReturn}
\begin{DoxyPrecond}{Precondition}
I/\-O's must be set with set\-Ios(). 
\end{DoxyPrecond}


Reimplemented from \hyperlink{classmdt_device_ab0232ac83c38bc93d3bc2aa91d94c291}{mdt\-Device}.



Definition at line 525 of file mdt\-Device\-Modbus.\-cpp.



References mdt\-Port\-Transaction\-::address(), mdt\-Frame\-Codec\-Modbus\-::encode\-Read\-Holding\-Registers(), mdt\-Port\-Transaction\-::io\-Count(), mdt\-Device\-::ios(), pv\-Codec, pv\-Tcp\-Port\-Manager, mdt\-Modbus\-Tcp\-Port\-Manager\-::send\-Data(), and mdt\-Port\-Transaction\-::set\-Data().

\hypertarget{classmdt_device_modbus_a9dd05e51223ee5bb79970fbe84c501f9}{\index{mdt\-Device\-Modbus@{mdt\-Device\-Modbus}!read\-Digital\-Input@{read\-Digital\-Input}}
\index{read\-Digital\-Input@{read\-Digital\-Input}!mdtDeviceModbus@{mdt\-Device\-Modbus}}
\subsubsection[{read\-Digital\-Input}]{\setlength{\rightskip}{0pt plus 5cm}int mdt\-Device\-Modbus\-::read\-Digital\-Input (
\begin{DoxyParamCaption}
\item[{{\bf mdt\-Port\-Transaction} $\ast$}]{transaction}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [protected]}, {\ttfamily [virtual]}}}\label{classmdt_device_modbus_a9dd05e51223ee5bb79970fbe84c501f9}


Read one digital input on physical device. 

This is the device specific implementation to send the query. If device handled by subclass has digital inputs, this method should be implemented.

This method is called from get\-Digital\-Input\-State().


\begin{DoxyParams}{Parameters}
{\em transaction} & Contains some flags used during query/reply process (address, id, I/\-O object, ...). \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
0 or a I\-D on success, value $<$ 0 on error (see mdt\-Port\-Manager\-::write\-Data() for details) 
\end{DoxyReturn}
\begin{DoxyPrecond}{Precondition}
I/\-O's must be set with set\-Ios(). 

transaction must be a valid pointer. 
\end{DoxyPrecond}


Reimplemented from \hyperlink{classmdt_device_af128b606050035abaf8d049bb2227015}{mdt\-Device}.



Definition at line 578 of file mdt\-Device\-Modbus.\-cpp.



References mdt\-Port\-Transaction\-::address(), mdt\-Frame\-Codec\-Modbus\-::encode\-Read\-Discrete\-Inputs(), mdt\-Device\-::ios(), pv\-Codec, pv\-Tcp\-Port\-Manager, mdt\-Modbus\-Tcp\-Port\-Manager\-::send\-Data(), and mdt\-Port\-Transaction\-::set\-Data().

\hypertarget{classmdt_device_modbus_a3fba9e113092f9da187cf684fb62b132}{\index{mdt\-Device\-Modbus@{mdt\-Device\-Modbus}!read\-Digital\-Inputs@{read\-Digital\-Inputs}}
\index{read\-Digital\-Inputs@{read\-Digital\-Inputs}!mdtDeviceModbus@{mdt\-Device\-Modbus}}
\subsubsection[{read\-Digital\-Inputs}]{\setlength{\rightskip}{0pt plus 5cm}int mdt\-Device\-Modbus\-::read\-Digital\-Inputs (
\begin{DoxyParamCaption}
\item[{{\bf mdt\-Port\-Transaction} $\ast$}]{transaction}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [protected]}, {\ttfamily [virtual]}}}\label{classmdt_device_modbus_a3fba9e113092f9da187cf684fb62b132}


Read all digital inputs on physical device. 

This is the device specific implementation to send the query. If device handled by subclass has digital inputs, this method should be implemented.

This method is called from \hyperlink{classmdt_device_a6e338b959c86591b6b3401f925c49050}{get\-Digital\-Inputs()}.


\begin{DoxyParams}{Parameters}
{\em transaction} & Contains some flags used during query/reply process (address, id, I/\-O object, ...). \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
0 or a I\-D on success, value $<$ 0 on error (see mdt\-Port\-Manager\-::write\-Data() for details) 
\end{DoxyReturn}
\begin{DoxyPrecond}{Precondition}
I/\-O's must be set with set\-Ios(). 

transaction must be a valid pointer. 
\end{DoxyPrecond}


Reimplemented from \hyperlink{classmdt_device_a150e3abae6db5bf1ad11017bf2b76c14}{mdt\-Device}.



Definition at line 595 of file mdt\-Device\-Modbus.\-cpp.



References mdt\-Port\-Transaction\-::address(), mdt\-Frame\-Codec\-Modbus\-::encode\-Read\-Discrete\-Inputs(), mdt\-Port\-Transaction\-::io\-Count(), mdt\-Device\-::ios(), pv\-Codec, pv\-Tcp\-Port\-Manager, mdt\-Modbus\-Tcp\-Port\-Manager\-::send\-Data(), and mdt\-Port\-Transaction\-::set\-Data().

\hypertarget{classmdt_device_modbus_a13a334ac86135751893f37064d8f548d}{\index{mdt\-Device\-Modbus@{mdt\-Device\-Modbus}!read\-Digital\-Output@{read\-Digital\-Output}}
\index{read\-Digital\-Output@{read\-Digital\-Output}!mdtDeviceModbus@{mdt\-Device\-Modbus}}
\subsubsection[{read\-Digital\-Output}]{\setlength{\rightskip}{0pt plus 5cm}int mdt\-Device\-Modbus\-::read\-Digital\-Output (
\begin{DoxyParamCaption}
\item[{{\bf mdt\-Port\-Transaction} $\ast$}]{transaction}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [protected]}, {\ttfamily [virtual]}}}\label{classmdt_device_modbus_a13a334ac86135751893f37064d8f548d}


Read one digital output on physical device. 

This is the device specific implementation to send the query. If device handled by subclass has digital outputs, this method should be implemented.

This method is called from get\-Digital\-Output\-State().


\begin{DoxyParams}{Parameters}
{\em transaction} & Contains some flags used during query/reply process (address, id, I/\-O object, ...). \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
0 or a I\-D on success, value $<$ 0 on error (see mdt\-Port\-Manager\-::write\-Data() for details) 
\end{DoxyReturn}
\begin{DoxyPrecond}{Precondition}
I/\-O's must be set with set\-Ios(). 

transaction must be a valid pointer. 
\end{DoxyPrecond}


Reimplemented from \hyperlink{classmdt_device_a1faee6ab31b094731211ea0943544501}{mdt\-Device}.



Definition at line 612 of file mdt\-Device\-Modbus.\-cpp.



References mdt\-Port\-Transaction\-::address(), mdt\-Frame\-Codec\-Modbus\-::encode\-Read\-Coils(), mdt\-Device\-::ios(), pv\-Codec, pv\-Tcp\-Port\-Manager, mdt\-Modbus\-Tcp\-Port\-Manager\-::send\-Data(), and mdt\-Port\-Transaction\-::set\-Data().

\hypertarget{classmdt_device_modbus_a8915a036472bff0f356756992c1eae51}{\index{mdt\-Device\-Modbus@{mdt\-Device\-Modbus}!read\-Digital\-Outputs@{read\-Digital\-Outputs}}
\index{read\-Digital\-Outputs@{read\-Digital\-Outputs}!mdtDeviceModbus@{mdt\-Device\-Modbus}}
\subsubsection[{read\-Digital\-Outputs}]{\setlength{\rightskip}{0pt plus 5cm}int mdt\-Device\-Modbus\-::read\-Digital\-Outputs (
\begin{DoxyParamCaption}
\item[{{\bf mdt\-Port\-Transaction} $\ast$}]{transaction}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [protected]}, {\ttfamily [virtual]}}}\label{classmdt_device_modbus_a8915a036472bff0f356756992c1eae51}


Read all digital outputs on physical device. 

This is the device specific implementation to send the query. If device handled by subclass has digital outputs, this method should be implemented.

This method is called from \hyperlink{classmdt_device_ab35b81b8eb68e161ac06ae882be39a25}{get\-Digital\-Outputs()}.


\begin{DoxyParams}{Parameters}
{\em transaction} & Contains some flags used during query/reply process (address, id, I/\-O object, ...). \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
0 or a I\-D on success, value $<$ 0 on error (see mdt\-Port\-Manager\-::write\-Data() for details) 
\end{DoxyReturn}
\begin{DoxyPrecond}{Precondition}
I/\-O's must be set with set\-Ios(). 

transaction must be a valid pointer. 
\end{DoxyPrecond}


Reimplemented from \hyperlink{classmdt_device_aac038c24c3b91757584bdf0d09fb8b02}{mdt\-Device}.



Definition at line 629 of file mdt\-Device\-Modbus.\-cpp.



References mdt\-Port\-Transaction\-::address(), mdt\-Frame\-Codec\-Modbus\-::encode\-Read\-Coils(), mdt\-Port\-Transaction\-::io\-Count(), mdt\-Device\-::ios(), pv\-Codec, pv\-Tcp\-Port\-Manager, mdt\-Modbus\-Tcp\-Port\-Manager\-::send\-Data(), and mdt\-Port\-Transaction\-::set\-Data().

\hypertarget{classmdt_device_modbus_a83cb2a28111653fbcbbe748f7a1a2e3d}{\index{mdt\-Device\-Modbus@{mdt\-Device\-Modbus}!register\-Values@{register\-Values}}
\index{register\-Values@{register\-Values}!mdtDeviceModbus@{mdt\-Device\-Modbus}}
\subsubsection[{register\-Values}]{\setlength{\rightskip}{0pt plus 5cm}const Q\-List$<$ int $>$ \& mdt\-Device\-Modbus\-::register\-Values (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
) const}}\label{classmdt_device_modbus_a83cb2a28111653fbcbbe748f7a1a2e3d}


Helper method for register service. 

Return result set by \hyperlink{classmdt_device_modbus_a89d41c6b33a3dd2a92a0956d8e6b3b14}{get\-Register\-Values()}. Note that values are keeped until next call of \hyperlink{classmdt_device_modbus_a89d41c6b33a3dd2a92a0956d8e6b3b14}{get\-Register\-Values()}.

\begin{DoxySeeAlso}{See Also}
\hyperlink{classmdt_modbus_tcp_port_manager_a99a13b5250a8523aa63869991581e56a}{mdt\-Modbus\-Tcp\-Port\-Manager\-::register\-Values()} 
\end{DoxySeeAlso}


Definition at line 266 of file mdt\-Device\-Modbus.\-cpp.



References pv\-Tcp\-Port\-Manager, and mdt\-Modbus\-Tcp\-Port\-Manager\-::register\-Values().



Referenced by mdt\-Device\-Modbus\-Wago\-::analog\-Inputs\-Count(), mdt\-Device\-Modbus\-Wago\-::analog\-Outputs\-Count(), mdt\-Device\-Modbus\-Wago\-::detect\-Ios(), mdt\-Device\-Modbus\-Wago\-::digital\-Inputs\-Count(), mdt\-Device\-Modbus\-Wago\-::digital\-Outputs\-Count(), mdt\-Device\-Modbus\-Wago\-::is\-Wago750(), mdt\-Device\-Modbus\-Wago\-Module\-::read\-Registers(), and mdt\-Device\-Modbus\-Wago\-Module\-::read\-Status\-Bytes().

\hypertarget{classmdt_device_modbus_a64bfa566dbd8511e11d76c0b14191f17}{\index{mdt\-Device\-Modbus@{mdt\-Device\-Modbus}!set\-Hardware\-Node\-Id@{set\-Hardware\-Node\-Id}}
\index{set\-Hardware\-Node\-Id@{set\-Hardware\-Node\-Id}!mdtDeviceModbus@{mdt\-Device\-Modbus}}
\subsubsection[{set\-Hardware\-Node\-Id}]{\setlength{\rightskip}{0pt plus 5cm}void mdt\-Device\-Modbus\-::set\-Hardware\-Node\-Id (
\begin{DoxyParamCaption}
\item[{int}]{hw\-Node\-Id, }
\item[{int}]{bits\-Count, }
\item[{int}]{start\-From = {\ttfamily 0}}
\end{DoxyParamCaption}
)}}\label{classmdt_device_modbus_a64bfa566dbd8511e11d76c0b14191f17}


Set hardware node id. 


\begin{DoxyParams}{Parameters}
{\em hardware\-Node\-Id} & See \hyperlink{classmdt_modbus_tcp_port_manager_a4f52a477c264f809984e25abbc856db8}{mdt\-Modbus\-Tcp\-Port\-Manager\-::get\-Hardware\-Node\-Address()} . \\
\hline
{\em bits\-Count} & See \hyperlink{classmdt_modbus_tcp_port_manager_a4f52a477c264f809984e25abbc856db8}{mdt\-Modbus\-Tcp\-Port\-Manager\-::get\-Hardware\-Node\-Address()} . \\
\hline
{\em start\-From} & See \hyperlink{classmdt_modbus_tcp_port_manager_a4f52a477c264f809984e25abbc856db8}{mdt\-Modbus\-Tcp\-Port\-Manager\-::get\-Hardware\-Node\-Address()} . \\
\hline
\end{DoxyParams}


Definition at line 73 of file mdt\-Device\-Modbus.\-cpp.

\hypertarget{classmdt_device_modbus_a4128420bde679c3666bdf8954a221a53}{\index{mdt\-Device\-Modbus@{mdt\-Device\-Modbus}!set\-Register\-Values@{set\-Register\-Values}}
\index{set\-Register\-Values@{set\-Register\-Values}!mdtDeviceModbus@{mdt\-Device\-Modbus}}
\subsubsection[{set\-Register\-Values}]{\setlength{\rightskip}{0pt plus 5cm}bool mdt\-Device\-Modbus\-::set\-Register\-Values (
\begin{DoxyParamCaption}
\item[{int}]{start\-Address, }
\item[{Q\-List$<$ int $>$ \&}]{values}
\end{DoxyParamCaption}
)}}\label{classmdt_device_modbus_a4128420bde679c3666bdf8954a221a53}


Helper method for register service. 

Usefull to set register values (f.\-ex. configurations regsisters, ...).

Note\-: to set analog I/\-O values, the \hyperlink{classmdt_device}{mdt\-Device} A\-P\-I should be used.

\begin{DoxyReturn}{Returns}
True on success. 
\end{DoxyReturn}
\begin{DoxyPrecond}{Precondition}
start\-Address must be $>$= 0 
\end{DoxyPrecond}
\begin{DoxySeeAlso}{See Also}
\hyperlink{classmdt_modbus_tcp_port_manager_a746211413dfafb987a93145c9fa4876f}{mdt\-Modbus\-Tcp\-Port\-Manager\-::set\-Register\-Values()} 
\end{DoxySeeAlso}


Definition at line 271 of file mdt\-Device\-Modbus.\-cpp.



References pv\-Tcp\-Port\-Manager, and mdt\-Modbus\-Tcp\-Port\-Manager\-::set\-Register\-Values().



Referenced by mdt\-Device\-Modbus\-Wago\-Module\-::write\-Control\-Bytes(), and mdt\-Device\-Modbus\-Wago\-Module\-::write\-Registers().

\hypertarget{classmdt_device_modbus_ac63297a31205759622f341525c34251f}{\index{mdt\-Device\-Modbus@{mdt\-Device\-Modbus}!write\-Analog\-Output@{write\-Analog\-Output}}
\index{write\-Analog\-Output@{write\-Analog\-Output}!mdtDeviceModbus@{mdt\-Device\-Modbus}}
\subsubsection[{write\-Analog\-Output}]{\setlength{\rightskip}{0pt plus 5cm}int mdt\-Device\-Modbus\-::write\-Analog\-Output (
\begin{DoxyParamCaption}
\item[{int}]{value, }
\item[{{\bf mdt\-Port\-Transaction} $\ast$}]{transaction}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [protected]}, {\ttfamily [virtual]}}}\label{classmdt_device_modbus_ac63297a31205759622f341525c34251f}


Write value on a analog output to physical device. 

This is the device specific implementation to send the query. If device handled by subclass has analog outputs, this method should be implemented.

This method is called from \hyperlink{classmdt_device_a766d9adcf8c2274f61f120a4a5c5c6d9}{set\-Analog\-Output\-Value()}.


\begin{DoxyParams}{Parameters}
{\em value} & Value encoded regarding device format. \\
\hline
{\em transaction} & Contains some flags used during query/reply process (address, id, I/\-O object, ...). \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
0 or a I\-D on success, value $<$ 0 on error (see mdt\-Port\-Manager\-::write\-Data() for details) 
\end{DoxyReturn}
\begin{DoxyPrecond}{Precondition}
I/\-O's must be set with set\-Ios(). 
\end{DoxyPrecond}


Reimplemented from \hyperlink{classmdt_device_ae764634bba2b321ac2b4731c0353e45f}{mdt\-Device}.



Definition at line 542 of file mdt\-Device\-Modbus.\-cpp.



References mdt\-Port\-Transaction\-::address(), mdt\-Frame\-Codec\-Modbus\-::encode\-Write\-Single\-Register(), mdt\-Device\-::ios(), pv\-Codec, pv\-Tcp\-Port\-Manager, mdt\-Modbus\-Tcp\-Port\-Manager\-::send\-Data(), and mdt\-Port\-Transaction\-::set\-Data().

\hypertarget{classmdt_device_modbus_aa09d1682bef4bbc08b59b20110e613ff}{\index{mdt\-Device\-Modbus@{mdt\-Device\-Modbus}!write\-Analog\-Outputs@{write\-Analog\-Outputs}}
\index{write\-Analog\-Outputs@{write\-Analog\-Outputs}!mdtDeviceModbus@{mdt\-Device\-Modbus}}
\subsubsection[{write\-Analog\-Outputs}]{\setlength{\rightskip}{0pt plus 5cm}int mdt\-Device\-Modbus\-::write\-Analog\-Outputs (
\begin{DoxyParamCaption}
\item[{{\bf mdt\-Port\-Transaction} $\ast$}]{transaction, }
\item[{{\bf mdt\-Device\-Ios\-Segment} $\ast$}]{segment}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [protected]}, {\ttfamily [virtual]}}}\label{classmdt_device_modbus_aa09d1682bef4bbc08b59b20110e613ff}


Write all analog outputs to physical device. 

This is the device specific implementation to send the query. If device handled by subclass has analog outputs, this method should be implemented.

This method is called from \hyperlink{classmdt_device_a57e1cee7e670469035c57e3bd2ff4c9d}{set\-Analog\-Outputs()}.


\begin{DoxyParams}{Parameters}
{\em transaction} & Contains some flags used during query/reply process (address, id, I/\-O object, ...). \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
0 or a I\-D on success, value $<$ 0 on error (see mdt\-Port\-Manager\-::write\-Data() for details) 
\end{DoxyReturn}
\begin{DoxyPrecond}{Precondition}
I/\-O's must be set with set\-Ios(). 

transaction must be a valid pointer. 
\end{DoxyPrecond}


Reimplemented from \hyperlink{classmdt_device_a2d82cb0920e4e0628186e59f9b4de7d4}{mdt\-Device}.



Definition at line 559 of file mdt\-Device\-Modbus.\-cpp.



References mdt\-Frame\-Codec\-Modbus\-::encode\-Write\-Multiple\-Registers(), mdt\-Device\-::ios(), pv\-Codec, pv\-Tcp\-Port\-Manager, mdt\-Modbus\-Tcp\-Port\-Manager\-::send\-Data(), mdt\-Port\-Transaction\-::set\-Data(), mdt\-Device\-Ios\-Segment\-::start\-Address\-Write(), and mdt\-Device\-Ios\-Segment\-::values\-Int().

\hypertarget{classmdt_device_modbus_a6950c10fc521b193fb3c754223879694}{\index{mdt\-Device\-Modbus@{mdt\-Device\-Modbus}!write\-Digital\-Output@{write\-Digital\-Output}}
\index{write\-Digital\-Output@{write\-Digital\-Output}!mdtDeviceModbus@{mdt\-Device\-Modbus}}
\subsubsection[{write\-Digital\-Output}]{\setlength{\rightskip}{0pt plus 5cm}int mdt\-Device\-Modbus\-::write\-Digital\-Output (
\begin{DoxyParamCaption}
\item[{bool}]{state, }
\item[{{\bf mdt\-Port\-Transaction} $\ast$}]{transaction}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [protected]}, {\ttfamily [virtual]}}}\label{classmdt_device_modbus_a6950c10fc521b193fb3c754223879694}


Write state on a digital output to physical device. 

This is the device specific implementation to send the query. If device handled by subclass has digital outputs, this method should be implemented.

This method is called from set\-Digital\-Output\-State().


\begin{DoxyParams}{Parameters}
{\em state} & State (O\-N/\-O\-F\-F). \\
\hline
{\em transaction} & Contains some flags used during query/reply process (address, id, I/\-O object, ...). \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
0 or a I\-D on success, value $<$ 0 on error (see mdt\-Port\-Manager\-::write\-Data() for details) 
\end{DoxyReturn}
\begin{DoxyPrecond}{Precondition}
I/\-O's must be set with set\-Ios(). 

transaction must be a valid pointer. 
\end{DoxyPrecond}


Reimplemented from \hyperlink{classmdt_device_a0fbe57503d86554829e708b2b83d73f1}{mdt\-Device}.



Definition at line 646 of file mdt\-Device\-Modbus.\-cpp.



References mdt\-Port\-Transaction\-::address(), mdt\-Frame\-Codec\-Modbus\-::encode\-Write\-Single\-Coil(), mdt\-Device\-::ios(), pv\-Codec, pv\-Tcp\-Port\-Manager, mdt\-Modbus\-Tcp\-Port\-Manager\-::send\-Data(), and mdt\-Port\-Transaction\-::set\-Data().

\hypertarget{classmdt_device_modbus_a6713edaee0bfba48791008124299b753}{\index{mdt\-Device\-Modbus@{mdt\-Device\-Modbus}!write\-Digital\-Outputs@{write\-Digital\-Outputs}}
\index{write\-Digital\-Outputs@{write\-Digital\-Outputs}!mdtDeviceModbus@{mdt\-Device\-Modbus}}
\subsubsection[{write\-Digital\-Outputs}]{\setlength{\rightskip}{0pt plus 5cm}int mdt\-Device\-Modbus\-::write\-Digital\-Outputs (
\begin{DoxyParamCaption}
\item[{{\bf mdt\-Port\-Transaction} $\ast$}]{transaction, }
\item[{{\bf mdt\-Device\-Ios\-Segment} $\ast$}]{segment}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [protected]}, {\ttfamily [virtual]}}}\label{classmdt_device_modbus_a6713edaee0bfba48791008124299b753}


Write all digital outputs to physical device. 

This is the device specific implementation to send the query. If device handled by subclass has digital outputs, this method should be implemented.

This method is called from \hyperlink{classmdt_device_a7b86a816e55a91f0d62426e1741437c6}{set\-Digital\-Outputs()}.


\begin{DoxyParams}{Parameters}
{\em transaction} & Contains some flags used during query/reply process (address, id, I/\-O object, ...). \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
0 or a I\-D on success, value $<$ 0 on error (see mdt\-Port\-Manager\-::write\-Data() for details) 
\end{DoxyReturn}
\begin{DoxyPrecond}{Precondition}
I/\-O's must be set with set\-Ios(). 

transaction must be a valid pointer. 
\end{DoxyPrecond}


Reimplemented from \hyperlink{classmdt_device_ae644ab1ef0ebb57d6d9d502829907ec1}{mdt\-Device}.



Definition at line 663 of file mdt\-Device\-Modbus.\-cpp.



References mdt\-Frame\-Codec\-Modbus\-::encode\-Write\-Multiple\-Coils(), mdt\-Device\-::ios(), pv\-Codec, pv\-Tcp\-Port\-Manager, mdt\-Modbus\-Tcp\-Port\-Manager\-::send\-Data(), mdt\-Port\-Transaction\-::set\-Data(), mdt\-Device\-Ios\-Segment\-::start\-Address\-Write(), and mdt\-Device\-Ios\-Segment\-::values\-Bool().



\subsection{Member Data Documentation}
\hypertarget{classmdt_device_modbus_a2171d37ea720d546934f1c841e3c4d26}{\index{mdt\-Device\-Modbus@{mdt\-Device\-Modbus}!pv\-Codec@{pv\-Codec}}
\index{pv\-Codec@{pv\-Codec}!mdtDeviceModbus@{mdt\-Device\-Modbus}}
\subsubsection[{pv\-Codec}]{\setlength{\rightskip}{0pt plus 5cm}{\bf mdt\-Frame\-Codec\-Modbus}$\ast$ mdt\-Device\-Modbus\-::pv\-Codec\hspace{0.3cm}{\ttfamily [protected]}}}\label{classmdt_device_modbus_a2171d37ea720d546934f1c841e3c4d26}


Definition at line 363 of file mdt\-Device\-Modbus.\-h.



Referenced by mdt\-Device\-Modbus(), read\-Analog\-Input(), read\-Analog\-Inputs(), read\-Analog\-Output(), read\-Analog\-Outputs(), read\-Digital\-Input(), read\-Digital\-Inputs(), read\-Digital\-Output(), read\-Digital\-Outputs(), write\-Analog\-Output(), write\-Analog\-Outputs(), write\-Digital\-Output(), write\-Digital\-Outputs(), and $\sim$mdt\-Device\-Modbus().

\hypertarget{classmdt_device_modbus_a9ecbac63c29b229ab01f5fdb26008c95}{\index{mdt\-Device\-Modbus@{mdt\-Device\-Modbus}!pv\-Tcp\-Port\-Manager@{pv\-Tcp\-Port\-Manager}}
\index{pv\-Tcp\-Port\-Manager@{pv\-Tcp\-Port\-Manager}!mdtDeviceModbus@{mdt\-Device\-Modbus}}
\subsubsection[{pv\-Tcp\-Port\-Manager}]{\setlength{\rightskip}{0pt plus 5cm}{\bf mdt\-Modbus\-Tcp\-Port\-Manager}$\ast$ mdt\-Device\-Modbus\-::pv\-Tcp\-Port\-Manager\hspace{0.3cm}{\ttfamily [protected]}}}\label{classmdt_device_modbus_a9ecbac63c29b229ab01f5fdb26008c95}


Definition at line 362 of file mdt\-Device\-Modbus.\-h.



Referenced by mdt\-Device\-Modbus\-Wago\-::connect\-To\-Device(), connect\-To\-Device(), get\-Register\-Values(), mdt\-Device\-Modbus(), modbus\-Tcp\-Port\-Manager(), port\-Manager(), read\-Analog\-Input(), read\-Analog\-Inputs(), read\-Analog\-Output(), read\-Analog\-Outputs(), read\-Digital\-Input(), read\-Digital\-Inputs(), read\-Digital\-Output(), read\-Digital\-Outputs(), register\-Values(), set\-Register\-Values(), write\-Analog\-Output(), write\-Analog\-Outputs(), write\-Digital\-Output(), write\-Digital\-Outputs(), and $\sim$mdt\-Device\-Modbus().



The documentation for this class was generated from the following files\-:\begin{DoxyCompactItemize}
\item 
src/mdtdevice/\hyperlink{mdt_device_modbus_8h}{mdt\-Device\-Modbus.\-h}\item 
src/mdtdevice/\hyperlink{mdt_device_modbus_8cpp}{mdt\-Device\-Modbus.\-cpp}\end{DoxyCompactItemize}
