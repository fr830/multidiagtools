\hypertarget{classmdt_usb_port}{\section{mdt\-Usb\-Port Class Reference}
\label{classmdt_usb_port}\index{mdt\-Usb\-Port@{mdt\-Usb\-Port}}
}


U\-S\-B port I/\-O port class.  




{\ttfamily \#include $<$mdt\-Usb\-Port.\-h$>$}



Inheritance diagram for mdt\-Usb\-Port\-:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=168pt]{classmdt_usb_port__inherit__graph}
\end{center}
\end{figure}


Collaboration diagram for mdt\-Usb\-Port\-:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classmdt_usb_port__coll__graph}
\end{center}
\end{figure}
\subsection*{Public Member Functions}
\begin{DoxyCompactItemize}
\item 
\hyperlink{classmdt_usb_port_a311650f4b2d29b6f16336c8777196d1c}{mdt\-Usb\-Port} (\hyperlink{class_q_object}{Q\-Object} $\ast$parent=0)
\item 
\hyperlink{classmdt_usb_port_afa9f1942ca4ae384887441e01b362c16}{$\sim$mdt\-Usb\-Port} ()
\begin{DoxyCompactList}\small\item\em Destructor. \end{DoxyCompactList}\item 
\hyperlink{classmdt_abstract_port_ad4121bb930c95887e77f8bafa065a85e}{error\-\_\-t} \hyperlink{classmdt_usb_port_af2399348faf1abc20130eab20cfc36ee}{reconnect} (int timeout)
\begin{DoxyCompactList}\small\item\em Reconnect device. \end{DoxyCompactList}\item 
void \hyperlink{classmdt_usb_port_a44ed5024a81a573b5196b8f64c42cd6a}{set\-Read\-Timeout} (int timeout)
\begin{DoxyCompactList}\small\item\em Set the read data timeout. \end{DoxyCompactList}\item 
void \hyperlink{classmdt_usb_port_a592af88bd7e7f45dd80df0ecab375ace}{set\-Write\-Timeout} (int timeout)
\begin{DoxyCompactList}\small\item\em Set the write data timeout. \end{DoxyCompactList}\item 
Q\-Queue$<$ \hyperlink{classmdt_frame_usb_control}{mdt\-Frame\-Usb\-Control} $\ast$ $>$ \& \hyperlink{classmdt_usb_port_af146b08006ddbe18fb537ae1a75b622e}{control\-Frames\-Pool} ()
\begin{DoxyCompactList}\small\item\em Get the control pool queue. \end{DoxyCompactList}\item 
Q\-Queue$<$ \hyperlink{classmdt_frame_usb_control}{mdt\-Frame\-Usb\-Control} $\ast$ $>$ \& \hyperlink{classmdt_usb_port_afbb20c403e7a5885d5e4221bab9f304e}{control\-Query\-Frames} ()
\begin{DoxyCompactList}\small\item\em Get the control query queue. \end{DoxyCompactList}\item 
void \hyperlink{classmdt_usb_port_a4fbcd0fcc179335c55c6d7ccc40a7c31}{add\-Control\-Request} (\hyperlink{classmdt_frame_usb_control}{mdt\-Frame\-Usb\-Control} $\ast$frame, bool setw\-Index\-Asb\-Interface\-Number=false)
\begin{DoxyCompactList}\small\item\em Add a control request. \end{DoxyCompactList}\item 
void \hyperlink{classmdt_usb_port_a274b6fd10bd84027bb66773ed805de2a}{submit\-Control\-Query} ()
\begin{DoxyCompactList}\small\item\em Submit a control query. \end{DoxyCompactList}\item 
\hyperlink{classmdt_abstract_port_ad4121bb930c95887e77f8bafa065a85e}{error\-\_\-t} \hyperlink{classmdt_usb_port_a6566e654df8a1c3503941702593db3c5}{cancel\-Control\-Transfer} ()
\begin{DoxyCompactList}\small\item\em Cancel current control transfer. \end{DoxyCompactList}\item 
Q\-Queue$<$ \hyperlink{classmdt_frame_usb_control}{mdt\-Frame\-Usb\-Control} $\ast$ $>$ \& \hyperlink{classmdt_usb_port_a304825c7d9173a3dcb5e26a412f1038b}{control\-Response\-Frames} ()
\begin{DoxyCompactList}\small\item\em Get the control responses queue. \end{DoxyCompactList}\item 
void \hyperlink{classmdt_usb_port_a719fc7b43461a3e2d9a4926d3e3961c2}{request\-Read\-Until\-Short\-Packet\-Received} ()
\begin{DoxyCompactList}\small\item\em Request to read until a short packet is received. \end{DoxyCompactList}\item 
bool \hyperlink{classmdt_usb_port_a3c0685d67fe608abe24c140c2858779c}{read\-Until\-Short\-Packet\-Received\-Request\-Pending} ()
\begin{DoxyCompactList}\small\item\em Check if a request to read until a short packet is received is pending. \end{DoxyCompactList}\item 
int \hyperlink{classmdt_usb_port_af546a031ed8621fee1d5e9498cbcd174}{read\-Buffer\-Size} () const 
\begin{DoxyCompactList}\small\item\em Get read buffer size. \end{DoxyCompactList}\item 
\hyperlink{classmdt_abstract_port_ad4121bb930c95887e77f8bafa065a85e}{error\-\_\-t} \hyperlink{classmdt_usb_port_a5e380852b8726f71e8558c86cba5bd1f}{init\-Read\-Transfer} (qint64 max\-Size)
\begin{DoxyCompactList}\small\item\em Submit a read transfer. \end{DoxyCompactList}\item 
\hyperlink{classmdt_abstract_port_ad4121bb930c95887e77f8bafa065a85e}{error\-\_\-t} \hyperlink{classmdt_usb_port_a3570b708f9f51408e4bbf2f61cc8c881}{cancel\-Read\-Transfer} ()
\begin{DoxyCompactList}\small\item\em Cancel current bulk/interrupt input transfer. \end{DoxyCompactList}\item 
\hyperlink{classmdt_abstract_port_ad4121bb930c95887e77f8bafa065a85e}{error\-\_\-t} \hyperlink{classmdt_usb_port_af940b6fe25e874ff0746686bc30c4f2c}{clear\-Read\-Endpoint\-Halt} ()
\begin{DoxyCompactList}\small\item\em Clear halt on read endpoint. \end{DoxyCompactList}\item 
\hyperlink{classmdt_abstract_port_ad4121bb930c95887e77f8bafa065a85e}{error\-\_\-t} \hyperlink{classmdt_usb_port_ab8ddd4ebee603ac381e8da0383a61e36}{wait\-For\-Ready\-Read} ()
\begin{DoxyCompactList}\small\item\em Wait until data is available on port. \end{DoxyCompactList}\item 
qint64 \hyperlink{classmdt_usb_port_abce257345c8af47494215cd7ee75f82d}{read} (char $\ast$data, qint64 max\-Size)
\begin{DoxyCompactList}\small\item\em Read data from port. \end{DoxyCompactList}\item 
\hyperlink{classmdt_abstract_port_ad4121bb930c95887e77f8bafa065a85e}{error\-\_\-t} \hyperlink{classmdt_usb_port_a897234cc2c7561da323cb124f57bcc28}{init\-Message\-In\-Transfer} ()
\begin{DoxyCompactList}\small\item\em Request a new interrupt input transfer for additional message input. \end{DoxyCompactList}\item 
\hyperlink{classmdt_abstract_port_ad4121bb930c95887e77f8bafa065a85e}{error\-\_\-t} \hyperlink{classmdt_usb_port_afddcb02a1e2bd87609fd2b6305534560}{cancel\-Message\-In\-Transfer} ()
\begin{DoxyCompactList}\small\item\em Cancel current interrupt message input transfer. \end{DoxyCompactList}\item 
Q\-Queue$<$ \hyperlink{classmdt_frame}{mdt\-Frame} $\ast$ $>$ \& \hyperlink{classmdt_usb_port_a3ad4385983122fcaf6d2560b6bd43acf}{message\-In\-Frames\-Pool} ()
\begin{DoxyCompactList}\small\item\em Get the message I\-N frames pool. \end{DoxyCompactList}\item 
Q\-Queue$<$ \hyperlink{classmdt_frame}{mdt\-Frame} $\ast$ $>$ \& \hyperlink{classmdt_usb_port_a3365431076a3197540cbc99278658bda}{message\-In\-Frames} ()
\begin{DoxyCompactList}\small\item\em Get the message I\-N frames. \end{DoxyCompactList}\item 
void \hyperlink{classmdt_usb_port_a38200f806037e06988e73af246e8a494}{add\-Frame\-To\-Write} (\hyperlink{classmdt_frame}{mdt\-Frame} $\ast$frame)
\begin{DoxyCompactList}\small\item\em Add a frame to write. \end{DoxyCompactList}\item 
\hyperlink{classmdt_abstract_port_ad4121bb930c95887e77f8bafa065a85e}{error\-\_\-t} \hyperlink{classmdt_usb_port_a3340dc3f53e857e39053988e4925fc97}{init\-Write\-Transfer} (const char $\ast$data, qint64 max\-Size)
\begin{DoxyCompactList}\small\item\em Request a new bulk/interrupt out transfer. \end{DoxyCompactList}\item 
\hyperlink{classmdt_abstract_port_ad4121bb930c95887e77f8bafa065a85e}{error\-\_\-t} \hyperlink{classmdt_usb_port_a7cbe1cd3649861aac5e6a14830f06cf9}{cancel\-Write\-Transfer} ()
\begin{DoxyCompactList}\small\item\em Cancel current bulk/interrupt input transfer. \end{DoxyCompactList}\item 
\hyperlink{classmdt_abstract_port_ad4121bb930c95887e77f8bafa065a85e}{error\-\_\-t} \hyperlink{classmdt_usb_port_a2dd0f7c680fda1ca1247217fa4e3f2e8}{clear\-Write\-Endpoint\-Halt} ()
\begin{DoxyCompactList}\small\item\em Clear halt on write endpoint. \end{DoxyCompactList}\item 
\hyperlink{classmdt_abstract_port_ad4121bb930c95887e77f8bafa065a85e}{error\-\_\-t} \hyperlink{classmdt_usb_port_a3be875f6f10ae94fd3a94f925bb935e7}{wait\-Event\-Write\-Ready} ()
\begin{DoxyCompactList}\small\item\em Wait until data can be written to port. \end{DoxyCompactList}\item 
qint64 \hyperlink{classmdt_usb_port_ae777e33325ff2adef326dd7f81b00838}{write} (const char $\ast$, qint64)
\begin{DoxyCompactList}\small\item\em Write data to port. \end{DoxyCompactList}\item 
void \hyperlink{classmdt_usb_port_aa857e94b4167c53b26573042ee3af280}{add\-Error} (\hyperlink{classmdt_abstract_port_ad4121bb930c95887e77f8bafa065a85e}{mdt\-Abstract\-Port\-::error\-\_\-t} error)
\begin{DoxyCompactList}\small\item\em Set error. \end{DoxyCompactList}\item 
Q\-List$<$ \hyperlink{classmdt_abstract_port_ad4121bb930c95887e77f8bafa065a85e}{error\-\_\-t} $>$ \hyperlink{classmdt_usb_port_a81855cebd9b672a74d836955236c19bf}{last\-Errors} ()
\begin{DoxyCompactList}\small\item\em Get the lis of current errors. \end{DoxyCompactList}\item 
\hyperlink{classmdt_abstract_port_ad4121bb930c95887e77f8bafa065a85e}{error\-\_\-t} \hyperlink{classmdt_usb_port_afe5b473e1df8b828c17f83a45a3902fb}{cancel\-Transfers} ()
\begin{DoxyCompactList}\small\item\em Cancel pending transfers. \end{DoxyCompactList}\item 
\hyperlink{classmdt_abstract_port_ad4121bb930c95887e77f8bafa065a85e}{error\-\_\-t} \hyperlink{classmdt_usb_port_abb66e85fc1366112eeb0a6e86f6e7e32}{handle\-Usb\-Events} ()
\begin{DoxyCompactList}\small\item\em Call libusb handle\-\_\-event() function. \end{DoxyCompactList}\item 
quint8 \hyperlink{classmdt_usb_port_a860e89069ba433e6174c032a28d0eae2}{current\-Read\-Endpoint\-Address} () const 
\begin{DoxyCompactList}\small\item\em Get current read endpoint address. \end{DoxyCompactList}\item 
quint8 \hyperlink{classmdt_usb_port_ae2319ee6ff5a2f4399410175fbac6a44}{current\-Write\-Endpoint\-Address} () const 
\begin{DoxyCompactList}\small\item\em Get current write endpoint address. \end{DoxyCompactList}\item 
Q\-Queue$<$ quint8 $>$ \& \hyperlink{classmdt_usb_port_a0ad07939f4709240b0c79c501edc9498}{expected\-Bulk\-Inb\-Tags} ()
\begin{DoxyCompactList}\small\item\em Get list of expeced incomming b\-Tags. \end{DoxyCompactList}\end{DoxyCompactItemize}
\subsection*{Static Public Member Functions}
\begin{DoxyCompactItemize}
\item 
static void \hyperlink{classmdt_usb_port_a84ddd2d0bf77b4db60358846c7da4853}{control\-Transfer\-Callback} (struct libusb\-\_\-transfer $\ast$transfer)
\begin{DoxyCompactList}\small\item\em Transfer callback for control endpoint. \end{DoxyCompactList}\item 
static void \hyperlink{classmdt_usb_port_ab4f1f0456c84f954604b192f6085c3f2}{read\-Transfer\-Callback} (struct libusb\-\_\-transfer $\ast$transfer)
\begin{DoxyCompactList}\small\item\em Transfer callback for read endpoint. \end{DoxyCompactList}\item 
static void \hyperlink{classmdt_usb_port_ae8932368e2777356695ab69f6ed08f41}{message\-In\-Transfer\-Callback} (struct libusb\-\_\-transfer $\ast$transfer)
\begin{DoxyCompactList}\small\item\em Transfer callback for message in (additional interrupt) endpoint. \end{DoxyCompactList}\item 
static void \hyperlink{classmdt_usb_port_af910071a5a5c401cd20cee3519120cc2}{write\-Transfer\-Callback} (struct libusb\-\_\-transfer $\ast$transfer)
\begin{DoxyCompactList}\small\item\em Transfer callback for write endpoint. \end{DoxyCompactList}\end{DoxyCompactItemize}
\subsection*{Additional Inherited Members}


\subsection{Detailed Description}
U\-S\-B port I/\-O port class. 

Built on top of libusb-\/1.\-x A\-P\-I

Note about the port name (set with \hyperlink{classmdt_abstract_port_a0ca143d32fc677bac7c1cf0e04144932}{set\-Port\-Name()} )\-:\par
 Because it can happen that multiple devices with same vendor I\-D and product I\-D can be attached to system, this class must provide a unique identifier when (re-\/)open the port. Because of this, the choosen format is\-: V\-I\-D=0x1234\-:P\-I\-D=0x1234\-:S\-I\-D=0x1234\-:b\-Interface\-Number=0. V\-I\-D is the Vendor I\-D, P\-I\-D the Product I\-D, S\-I\-D the Serial I\-D (also called Serial Number) and b\-Interface\-Number the interface number (some devices have mor than one interface, f.\-ex. sound cards, keboard/mouse receiver, ...). S\-I\-D and b\-Interface\-Number are optional. In this case, the first port with given vendor I\-D and device I\-D is open. In brief, following names are allowed\-:
\begin{DoxyItemize}
\item V\-I\-D=0x1234\-:P\-I\-D=0x5678 (Open the first port with given Vendor I\-D and Product I\-D. b\-Interface\-Number is 0)
\item V\-I\-D=0x1234\-:P\-I\-D=0x5678\-:S\-I\-D=A\-B\-C1234 (Open the first port with given Vendor I\-D, Product I\-D and Serial I\-D. b\-Interface\-Number is 0)
\item V\-I\-D=0x1234\-:P\-I\-D=0x5678\-:b\-Interface\-Number=1 (Open the first port with given Vendor I\-D and Product I\-D. b\-Interface\-Number is 1)
\item V\-I\-D=0x1234\-:P\-I\-D=0x5678\-:S\-I\-D=A\-B\-C1234\-:b\-Interface\-Number=1 (Open the first port with given Vendor I\-D, Product I\-D and Serial I\-D. b\-Interface\-Number is 1) The last example in the above list is the format returned by \hyperlink{classmdt_usb_port_manager_a3a2370c3a2d0353a880bf9b777728c3b}{mdt\-Usb\-Port\-Manager\-::scan()}.
\end{DoxyItemize}

For read and write of data, the \hyperlink{classmdt_abstract_port}{mdt\-Abstract\-Port}'s A\-P\-I is used, expected that \hyperlink{classmdt_usb_port_ab8ddd4ebee603ac381e8da0383a61e36}{wait\-For\-Ready\-Read()} and \hyperlink{classmdt_usb_port_a3be875f6f10ae94fd3a94f925bb935e7}{wait\-Event\-Write\-Ready()} are not used.

The control transfer is a little bit different\-:
\begin{DoxyItemize}
\item If the main thread (f.\-ex. G\-U\-I thread) wants to send a request, it locks the mutex using \hyperlink{classmdt_abstract_port_a6bf2ecdcf894da3929a22eb8793a9fe3}{lock\-Mutex()}, then it takes a frame in pool with \hyperlink{classmdt_usb_port_af146b08006ddbe18fb537ae1a75b622e}{control\-Frames\-Pool()}. Finaly, query is submitted using \hyperlink{classmdt_usb_port_a4fbcd0fcc179335c55c6d7ccc40a7c31}{add\-Control\-Request()}, witch will submit the frame, and main thread unlocks the mutex with \hyperlink{classmdt_abstract_port_a3523c72a06e4d950338f91e56c286e84}{unlock\-Mutex()}.
\item The thread periodically checks if a response is available using \hyperlink{classmdt_usb_port_a304825c7d9173a3dcb5e26a412f1038b}{control\-Response\-Frames()} queue's size, and emit control\-Response\-Readen() if a control response is available.
\end{DoxyItemize}

If a additional (to read and write) interrupt I\-N endpoint exists, it is handled as message I\-N as follow\-:
\begin{DoxyItemize}
\item The thread periodically checks if a message I\-N is available using \hyperlink{classmdt_usb_port_a3365431076a3197540cbc99278658bda}{message\-In\-Frames()} queue's size, and emit message\-In\-Readen() if a message I\-N is available.
\item A new transfer is reinitialized by thread. 
\end{DoxyItemize}

Definition at line 64 of file mdt\-Usb\-Port.\-h.



\subsection{Constructor \& Destructor Documentation}
\hypertarget{classmdt_usb_port_a311650f4b2d29b6f16336c8777196d1c}{\index{mdt\-Usb\-Port@{mdt\-Usb\-Port}!mdt\-Usb\-Port@{mdt\-Usb\-Port}}
\index{mdt\-Usb\-Port@{mdt\-Usb\-Port}!mdtUsbPort@{mdt\-Usb\-Port}}
\subsubsection[{mdt\-Usb\-Port}]{\setlength{\rightskip}{0pt plus 5cm}mdt\-Usb\-Port\-::mdt\-Usb\-Port (
\begin{DoxyParamCaption}
\item[{{\bf Q\-Object} $\ast$}]{parent = {\ttfamily 0}}
\end{DoxyParamCaption}
)}}\label{classmdt_usb_port_a311650f4b2d29b6f16336c8777196d1c}


Definition at line 40 of file mdt\-Usb\-Port.\-cpp.



References mdt\-Error\-::commit(), mdt\-Error\-::\-Error, M\-D\-T\-\_\-\-E\-R\-R\-O\-R\-\_\-\-S\-E\-T\-\_\-\-S\-R\-C, M\-D\-T\-\_\-\-U\-S\-B\-\_\-\-I\-O\-\_\-\-E\-R\-R\-O\-R, and mdt\-Error\-::set\-System\-Error().

\hypertarget{classmdt_usb_port_afa9f1942ca4ae384887441e01b362c16}{\index{mdt\-Usb\-Port@{mdt\-Usb\-Port}!$\sim$mdt\-Usb\-Port@{$\sim$mdt\-Usb\-Port}}
\index{$\sim$mdt\-Usb\-Port@{$\sim$mdt\-Usb\-Port}!mdtUsbPort@{mdt\-Usb\-Port}}
\subsubsection[{$\sim$mdt\-Usb\-Port}]{\setlength{\rightskip}{0pt plus 5cm}mdt\-Usb\-Port\-::$\sim$mdt\-Usb\-Port (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
)}}\label{classmdt_usb_port_afa9f1942ca4ae384887441e01b362c16}


Destructor. 



Definition at line 80 of file mdt\-Usb\-Port.\-cpp.



References mdt\-Abstract\-Port\-::close().



\subsection{Member Function Documentation}
\hypertarget{classmdt_usb_port_a4fbcd0fcc179335c55c6d7ccc40a7c31}{\index{mdt\-Usb\-Port@{mdt\-Usb\-Port}!add\-Control\-Request@{add\-Control\-Request}}
\index{add\-Control\-Request@{add\-Control\-Request}!mdtUsbPort@{mdt\-Usb\-Port}}
\subsubsection[{add\-Control\-Request}]{\setlength{\rightskip}{0pt plus 5cm}void mdt\-Usb\-Port\-::add\-Control\-Request (
\begin{DoxyParamCaption}
\item[{{\bf mdt\-Frame\-Usb\-Control} $\ast$}]{frame, }
\item[{bool}]{setw\-Index\-Asb\-Interface\-Number = {\ttfamily false}}
\end{DoxyParamCaption}
)}}\label{classmdt_usb_port_a4fbcd0fcc179335c55c6d7ccc40a7c31}


Add a control request. 

Add a control frame to the queries queue. Frame will be sent as soon as possible.

The mutex must be locked before calling this method, and still locked inside.


\begin{DoxyParams}{Parameters}
{\em frame} & Control frame \\
\hline
{\em setw\-Index\-Asb\-Interface\-Number} & If true, w\-Index will be set with current b\-Interface\-Number \\
\hline
\end{DoxyParams}
\begin{DoxyPrecond}{Precondition}
frame must be a valid pointer. 
\end{DoxyPrecond}


Definition at line 138 of file mdt\-Usb\-Port.\-cpp.



References mdt\-Frame\-Usb\-Control\-::setw\-Index(), and submit\-Control\-Query().



Referenced by mdt\-Usb\-Port\-Thread\-::send\-Control\-Query(), and mdt\-Usb\-Port\-Manager\-::send\-Control\-Request().

\hypertarget{classmdt_usb_port_aa857e94b4167c53b26573042ee3af280}{\index{mdt\-Usb\-Port@{mdt\-Usb\-Port}!add\-Error@{add\-Error}}
\index{add\-Error@{add\-Error}!mdtUsbPort@{mdt\-Usb\-Port}}
\subsubsection[{add\-Error}]{\setlength{\rightskip}{0pt plus 5cm}void mdt\-Usb\-Port\-::add\-Error (
\begin{DoxyParamCaption}
\item[{{\bf mdt\-Abstract\-Port\-::error\-\_\-t}}]{error}
\end{DoxyParamCaption}
)}}\label{classmdt_usb_port_aa857e94b4167c53b26573042ee3af280}


Set error. 

Used by transfer callbacks

Mutex is not handled by this method. 

Definition at line 955 of file mdt\-Usb\-Port.\-cpp.



Referenced by add\-Frame\-To\-Write(), control\-Transfer\-Callback(), message\-In\-Transfer\-Callback(), read\-Transfer\-Callback(), request\-Read\-Until\-Short\-Packet\-Received(), submit\-Control\-Query(), and write\-Transfer\-Callback().

\hypertarget{classmdt_usb_port_a38200f806037e06988e73af246e8a494}{\index{mdt\-Usb\-Port@{mdt\-Usb\-Port}!add\-Frame\-To\-Write@{add\-Frame\-To\-Write}}
\index{add\-Frame\-To\-Write@{add\-Frame\-To\-Write}!mdtUsbPort@{mdt\-Usb\-Port}}
\subsubsection[{add\-Frame\-To\-Write}]{\setlength{\rightskip}{0pt plus 5cm}void mdt\-Usb\-Port\-::add\-Frame\-To\-Write (
\begin{DoxyParamCaption}
\item[{{\bf mdt\-Frame} $\ast$}]{frame}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [virtual]}}}\label{classmdt_usb_port_a38200f806037e06988e73af246e8a494}


Add a frame to write. 

Once the frame is added to the write queue, waiting thread will be woken up (if waiting) and will send the frame.

The mutex must be locked before calling this method, and still locked inside.

\begin{DoxyPrecond}{Precondition}
frame must be a valid pointer. 
\end{DoxyPrecond}


Reimplemented from \hyperlink{classmdt_abstract_port_a9a69eb2fc07d551ab37c011487fa319d}{mdt\-Abstract\-Port}.



Definition at line 743 of file mdt\-Usb\-Port.\-cpp.



References add\-Error(), init\-Write\-Transfer(), mdt\-Abstract\-Port\-::\-No\-Error, and mdt\-Abstract\-Port\-::pv\-Write\-Frames.

\hypertarget{classmdt_usb_port_a6566e654df8a1c3503941702593db3c5}{\index{mdt\-Usb\-Port@{mdt\-Usb\-Port}!cancel\-Control\-Transfer@{cancel\-Control\-Transfer}}
\index{cancel\-Control\-Transfer@{cancel\-Control\-Transfer}!mdtUsbPort@{mdt\-Usb\-Port}}
\subsubsection[{cancel\-Control\-Transfer}]{\setlength{\rightskip}{0pt plus 5cm}{\bf mdt\-Abstract\-Port\-::error\-\_\-t} mdt\-Usb\-Port\-::cancel\-Control\-Transfer (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
)}}\label{classmdt_usb_port_a6566e654df8a1c3503941702593db3c5}


Cancel current control transfer. 

Used by \hyperlink{classmdt_usb_port_thread}{mdt\-Usb\-Port\-Thread}, should not be used else. 

Definition at line 309 of file mdt\-Usb\-Port.\-cpp.



References mdt\-Error\-::commit(), mdt\-Error\-::\-Error, handle\-Usb\-Events(), M\-D\-T\-\_\-\-E\-R\-R\-O\-R\-\_\-\-S\-E\-T\-\_\-\-S\-R\-C, M\-D\-T\-\_\-\-U\-S\-B\-\_\-\-I\-O\-\_\-\-E\-R\-R\-O\-R, mdt\-Abstract\-Port\-::\-No\-Error, mdt\-Error\-::set\-System\-Error(), and mdt\-Abstract\-Port\-::\-Unhandled\-Error.



Referenced by cancel\-Transfers().

\hypertarget{classmdt_usb_port_afddcb02a1e2bd87609fd2b6305534560}{\index{mdt\-Usb\-Port@{mdt\-Usb\-Port}!cancel\-Message\-In\-Transfer@{cancel\-Message\-In\-Transfer}}
\index{cancel\-Message\-In\-Transfer@{cancel\-Message\-In\-Transfer}!mdtUsbPort@{mdt\-Usb\-Port}}
\subsubsection[{cancel\-Message\-In\-Transfer}]{\setlength{\rightskip}{0pt plus 5cm}{\bf mdt\-Abstract\-Port\-::error\-\_\-t} mdt\-Usb\-Port\-::cancel\-Message\-In\-Transfer (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
)}}\label{classmdt_usb_port_afddcb02a1e2bd87609fd2b6305534560}


Cancel current interrupt message input transfer. 

Used by \hyperlink{classmdt_usb_port_thread}{mdt\-Usb\-Port\-Thread}, should not be used else. 

Definition at line 694 of file mdt\-Usb\-Port.\-cpp.



References mdt\-Error\-::commit(), mdt\-Error\-::\-Error, handle\-Usb\-Events(), M\-D\-T\-\_\-\-E\-R\-R\-O\-R\-\_\-\-S\-E\-T\-\_\-\-S\-R\-C, M\-D\-T\-\_\-\-U\-S\-B\-\_\-\-I\-O\-\_\-\-E\-R\-R\-O\-R, mdt\-Abstract\-Port\-::\-No\-Error, mdt\-Error\-::set\-System\-Error(), and mdt\-Abstract\-Port\-::\-Unhandled\-Error.



Referenced by cancel\-Transfers().

\hypertarget{classmdt_usb_port_a3570b708f9f51408e4bbf2f61cc8c881}{\index{mdt\-Usb\-Port@{mdt\-Usb\-Port}!cancel\-Read\-Transfer@{cancel\-Read\-Transfer}}
\index{cancel\-Read\-Transfer@{cancel\-Read\-Transfer}!mdtUsbPort@{mdt\-Usb\-Port}}
\subsubsection[{cancel\-Read\-Transfer}]{\setlength{\rightskip}{0pt plus 5cm}{\bf mdt\-Abstract\-Port\-::error\-\_\-t} mdt\-Usb\-Port\-::cancel\-Read\-Transfer (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
)}}\label{classmdt_usb_port_a3570b708f9f51408e4bbf2f61cc8c881}


Cancel current bulk/interrupt input transfer. 

Used by \hyperlink{classmdt_usb_port_thread}{mdt\-Usb\-Port\-Thread}, should not be used else. 

Definition at line 487 of file mdt\-Usb\-Port.\-cpp.



References mdt\-Error\-::commit(), mdt\-Error\-::\-Error, handle\-Usb\-Events(), M\-D\-T\-\_\-\-E\-R\-R\-O\-R\-\_\-\-S\-E\-T\-\_\-\-S\-R\-C, M\-D\-T\-\_\-\-U\-S\-B\-\_\-\-I\-O\-\_\-\-E\-R\-R\-O\-R, mdt\-Abstract\-Port\-::\-No\-Error, mdt\-Error\-::set\-System\-Error(), and mdt\-Abstract\-Port\-::\-Unhandled\-Error.



Referenced by cancel\-Transfers().

\hypertarget{classmdt_usb_port_afe5b473e1df8b828c17f83a45a3902fb}{\index{mdt\-Usb\-Port@{mdt\-Usb\-Port}!cancel\-Transfers@{cancel\-Transfers}}
\index{cancel\-Transfers@{cancel\-Transfers}!mdtUsbPort@{mdt\-Usb\-Port}}
\subsubsection[{cancel\-Transfers}]{\setlength{\rightskip}{0pt plus 5cm}{\bf mdt\-Abstract\-Port\-::error\-\_\-t} mdt\-Usb\-Port\-::cancel\-Transfers (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
)}}\label{classmdt_usb_port_afe5b473e1df8b828c17f83a45a3902fb}


Cancel pending transfers. 

Will cancel all pending transfers.

Used by \hyperlink{classmdt_usb_port_thread}{mdt\-Usb\-Port\-Thread}, should not be used else. 

Definition at line 970 of file mdt\-Usb\-Port.\-cpp.



References cancel\-Control\-Transfer(), cancel\-Message\-In\-Transfer(), cancel\-Read\-Transfer(), cancel\-Write\-Transfer(), mdt\-Abstract\-Port\-::\-Control\-Canceled, mdt\-Abstract\-Port\-::\-Message\-In\-Canceled, mdt\-Abstract\-Port\-::\-No\-Error, mdt\-Abstract\-Port\-::\-Read\-Canceled, and mdt\-Abstract\-Port\-::\-Write\-Canceled.



Referenced by reconnect().

\hypertarget{classmdt_usb_port_a7cbe1cd3649861aac5e6a14830f06cf9}{\index{mdt\-Usb\-Port@{mdt\-Usb\-Port}!cancel\-Write\-Transfer@{cancel\-Write\-Transfer}}
\index{cancel\-Write\-Transfer@{cancel\-Write\-Transfer}!mdtUsbPort@{mdt\-Usb\-Port}}
\subsubsection[{cancel\-Write\-Transfer}]{\setlength{\rightskip}{0pt plus 5cm}{\bf mdt\-Abstract\-Port\-::error\-\_\-t} mdt\-Usb\-Port\-::cancel\-Write\-Transfer (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
)}}\label{classmdt_usb_port_a7cbe1cd3649861aac5e6a14830f06cf9}


Cancel current bulk/interrupt input transfer. 

Used by \hyperlink{classmdt_usb_port_thread}{mdt\-Usb\-Port\-Thread}, should not be used else. 

Definition at line 873 of file mdt\-Usb\-Port.\-cpp.



References mdt\-Error\-::commit(), mdt\-Error\-::\-Error, handle\-Usb\-Events(), M\-D\-T\-\_\-\-E\-R\-R\-O\-R\-\_\-\-S\-E\-T\-\_\-\-S\-R\-C, M\-D\-T\-\_\-\-U\-S\-B\-\_\-\-I\-O\-\_\-\-E\-R\-R\-O\-R, mdt\-Abstract\-Port\-::\-No\-Error, mdt\-Error\-::set\-System\-Error(), and mdt\-Abstract\-Port\-::\-Unhandled\-Error.



Referenced by cancel\-Transfers().

\hypertarget{classmdt_usb_port_af940b6fe25e874ff0746686bc30c4f2c}{\index{mdt\-Usb\-Port@{mdt\-Usb\-Port}!clear\-Read\-Endpoint\-Halt@{clear\-Read\-Endpoint\-Halt}}
\index{clear\-Read\-Endpoint\-Halt@{clear\-Read\-Endpoint\-Halt}!mdtUsbPort@{mdt\-Usb\-Port}}
\subsubsection[{clear\-Read\-Endpoint\-Halt}]{\setlength{\rightskip}{0pt plus 5cm}{\bf mdt\-Abstract\-Port\-::error\-\_\-t} mdt\-Usb\-Port\-::clear\-Read\-Endpoint\-Halt (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
)}}\label{classmdt_usb_port_af940b6fe25e874ff0746686bc30c4f2c}


Clear halt on read endpoint. 

This is a blocking method, and should only be called by port thread. Active read transfers should be canceled before using this method ( see \hyperlink{classmdt_usb_port_a3570b708f9f51408e4bbf2f61cc8c881}{cancel\-Read\-Transfer()} ). 

Definition at line 527 of file mdt\-Usb\-Port.\-cpp.



References mdt\-Error\-::commit(), mdt\-Error\-::\-Error, M\-D\-T\-\_\-\-E\-R\-R\-O\-R\-\_\-\-S\-E\-T\-\_\-\-S\-R\-C, M\-D\-T\-\_\-\-U\-S\-B\-\_\-\-I\-O\-\_\-\-E\-R\-R\-O\-R, mdt\-Abstract\-Port\-::\-No\-Error, and mdt\-Error\-::set\-System\-Error().

\hypertarget{classmdt_usb_port_a2dd0f7c680fda1ca1247217fa4e3f2e8}{\index{mdt\-Usb\-Port@{mdt\-Usb\-Port}!clear\-Write\-Endpoint\-Halt@{clear\-Write\-Endpoint\-Halt}}
\index{clear\-Write\-Endpoint\-Halt@{clear\-Write\-Endpoint\-Halt}!mdtUsbPort@{mdt\-Usb\-Port}}
\subsubsection[{clear\-Write\-Endpoint\-Halt}]{\setlength{\rightskip}{0pt plus 5cm}{\bf mdt\-Abstract\-Port\-::error\-\_\-t} mdt\-Usb\-Port\-::clear\-Write\-Endpoint\-Halt (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
)}}\label{classmdt_usb_port_a2dd0f7c680fda1ca1247217fa4e3f2e8}


Clear halt on write endpoint. 

This is a blocking method, and should only be called by port thread. Active write transfers should be canceled before using this method ( see \hyperlink{classmdt_usb_port_a7cbe1cd3649861aac5e6a14830f06cf9}{cancel\-Write\-Transfer()} ). 

Definition at line 913 of file mdt\-Usb\-Port.\-cpp.



References mdt\-Error\-::commit(), mdt\-Error\-::\-Error, M\-D\-T\-\_\-\-E\-R\-R\-O\-R\-\_\-\-S\-E\-T\-\_\-\-S\-R\-C, M\-D\-T\-\_\-\-U\-S\-B\-\_\-\-I\-O\-\_\-\-E\-R\-R\-O\-R, mdt\-Abstract\-Port\-::\-No\-Error, and mdt\-Error\-::set\-System\-Error().

\hypertarget{classmdt_usb_port_af146b08006ddbe18fb537ae1a75b622e}{\index{mdt\-Usb\-Port@{mdt\-Usb\-Port}!control\-Frames\-Pool@{control\-Frames\-Pool}}
\index{control\-Frames\-Pool@{control\-Frames\-Pool}!mdtUsbPort@{mdt\-Usb\-Port}}
\subsubsection[{control\-Frames\-Pool}]{\setlength{\rightskip}{0pt plus 5cm}Q\-Queue$<$ {\bf mdt\-Frame\-Usb\-Control} $\ast$ $>$ \& mdt\-Usb\-Port\-::control\-Frames\-Pool (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
)}}\label{classmdt_usb_port_af146b08006ddbe18fb537ae1a75b622e}


Get the control pool queue. 

This queue contains the pool of control frames.

Mutex is not handled by this method. 

Definition at line 299 of file mdt\-Usb\-Port.\-cpp.



Referenced by control\-Transfer\-Callback(), mdt\-Usb\-Port\-Manager\-::from\-Thread\-Control\-Response\-Readen(), mdt\-Usb\-Port\-Manager\-::send\-Control\-Request(), submit\-Control\-Query(), and mdt\-Usb\-Port\-Thread\-::wait\-On\-Control\-Transfer\-Possible().

\hypertarget{classmdt_usb_port_afbb20c403e7a5885d5e4221bab9f304e}{\index{mdt\-Usb\-Port@{mdt\-Usb\-Port}!control\-Query\-Frames@{control\-Query\-Frames}}
\index{control\-Query\-Frames@{control\-Query\-Frames}!mdtUsbPort@{mdt\-Usb\-Port}}
\subsubsection[{control\-Query\-Frames}]{\setlength{\rightskip}{0pt plus 5cm}Q\-Queue$<$ {\bf mdt\-Frame\-Usb\-Control} $\ast$ $>$ \& mdt\-Usb\-Port\-::control\-Query\-Frames (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
)}}\label{classmdt_usb_port_afbb20c403e7a5885d5e4221bab9f304e}


Get the control query queue. 

This queue contains control query frames (control requests).

Mutex is not handled by this method. 

Definition at line 304 of file mdt\-Usb\-Port.\-cpp.

\hypertarget{classmdt_usb_port_a304825c7d9173a3dcb5e26a412f1038b}{\index{mdt\-Usb\-Port@{mdt\-Usb\-Port}!control\-Response\-Frames@{control\-Response\-Frames}}
\index{control\-Response\-Frames@{control\-Response\-Frames}!mdtUsbPort@{mdt\-Usb\-Port}}
\subsubsection[{control\-Response\-Frames}]{\setlength{\rightskip}{0pt plus 5cm}Q\-Queue$<$ {\bf mdt\-Frame\-Usb\-Control} $\ast$ $>$ \& mdt\-Usb\-Port\-::control\-Response\-Frames (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
)}}\label{classmdt_usb_port_a304825c7d9173a3dcb5e26a412f1038b}


Get the control responses queue. 

This queue contains the response frames returned from device.

Mutex is not handled by this method. 

Definition at line 348 of file mdt\-Usb\-Port.\-cpp.



Referenced by control\-Transfer\-Callback(), and mdt\-Usb\-Port\-Manager\-::from\-Thread\-Control\-Response\-Readen().

\hypertarget{classmdt_usb_port_a84ddd2d0bf77b4db60358846c7da4853}{\index{mdt\-Usb\-Port@{mdt\-Usb\-Port}!control\-Transfer\-Callback@{control\-Transfer\-Callback}}
\index{control\-Transfer\-Callback@{control\-Transfer\-Callback}!mdtUsbPort@{mdt\-Usb\-Port}}
\subsubsection[{control\-Transfer\-Callback}]{\setlength{\rightskip}{0pt plus 5cm}void mdt\-Usb\-Port\-::control\-Transfer\-Callback (
\begin{DoxyParamCaption}
\item[{struct libusb\-\_\-transfer $\ast$}]{transfer}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [static]}}}\label{classmdt_usb_port_a84ddd2d0bf77b4db60358846c7da4853}


Transfer callback for control endpoint. 

Check completion and error flags and add control frame in responses queue if ok, or in pool else. On error, \hyperlink{classmdt_usb_port_aa857e94b4167c53b26573042ee3af280}{add\-Error()} is called, so thread can notify it.

Once done, \hyperlink{classmdt_usb_port_a274b6fd10bd84027bb66773ed805de2a}{submit\-Control\-Query()} is called.

This method is called from libusb and should not be used directly.

Mutex is locked during process and unlocked befor return.

\begin{DoxyPrecond}{Precondition}
transfer must be valid 

transfer-\/$>$user\-\_\-data must be valid 
\end{DoxyPrecond}


Definition at line 198 of file mdt\-Usb\-Port.\-cpp.



References add\-Error(), mdt\-Frame\-::clear(), mdt\-Frame\-Usb\-Control\-::clear\-Sub(), mdt\-Error\-::commit(), mdt\-Abstract\-Port\-::\-Control\-Canceled, control\-Frames\-Pool(), control\-Response\-Frames(), mdt\-Abstract\-Port\-::\-Control\-Timeout, mdt\-Abstract\-Port\-::\-Disconnected, mdt\-Error\-::\-Error, mdt\-Abstract\-Port\-::lock\-Mutex(), M\-D\-T\-\_\-\-E\-R\-R\-O\-R\-\_\-\-S\-E\-T\-\_\-\-S\-R\-C, M\-D\-T\-\_\-\-U\-S\-B\-\_\-\-I\-O\-\_\-\-E\-R\-R\-O\-R, mdt\-Frame\-Usb\-Control\-::setbm\-Request\-Type(), mdt\-Frame\-Usb\-Control\-::setb\-Request(), mdt\-Frame\-Usb\-Control\-::setw\-Index(), mdt\-Frame\-Usb\-Control\-::setw\-Length(), mdt\-Frame\-Usb\-Control\-::setw\-Value(), submit\-Control\-Query(), mdt\-Abstract\-Port\-::\-Unhandled\-Error, and mdt\-Abstract\-Port\-::unlock\-Mutex().



Referenced by submit\-Control\-Query().

\hypertarget{classmdt_usb_port_a860e89069ba433e6174c032a28d0eae2}{\index{mdt\-Usb\-Port@{mdt\-Usb\-Port}!current\-Read\-Endpoint\-Address@{current\-Read\-Endpoint\-Address}}
\index{current\-Read\-Endpoint\-Address@{current\-Read\-Endpoint\-Address}!mdtUsbPort@{mdt\-Usb\-Port}}
\subsubsection[{current\-Read\-Endpoint\-Address}]{\setlength{\rightskip}{0pt plus 5cm}quint8 mdt\-Usb\-Port\-::current\-Read\-Endpoint\-Address (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
) const}}\label{classmdt_usb_port_a860e89069ba433e6174c032a28d0eae2}


Get current read endpoint address. 

Note\-: mutex is not handled by this method 

Definition at line 1028 of file mdt\-Usb\-Port.\-cpp.

\hypertarget{classmdt_usb_port_ae2319ee6ff5a2f4399410175fbac6a44}{\index{mdt\-Usb\-Port@{mdt\-Usb\-Port}!current\-Write\-Endpoint\-Address@{current\-Write\-Endpoint\-Address}}
\index{current\-Write\-Endpoint\-Address@{current\-Write\-Endpoint\-Address}!mdtUsbPort@{mdt\-Usb\-Port}}
\subsubsection[{current\-Write\-Endpoint\-Address}]{\setlength{\rightskip}{0pt plus 5cm}quint8 mdt\-Usb\-Port\-::current\-Write\-Endpoint\-Address (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
) const}}\label{classmdt_usb_port_ae2319ee6ff5a2f4399410175fbac6a44}


Get current write endpoint address. 

Note\-: mutex is not handled by this method 

Definition at line 1033 of file mdt\-Usb\-Port.\-cpp.

\hypertarget{classmdt_usb_port_a0ad07939f4709240b0c79c501edc9498}{\index{mdt\-Usb\-Port@{mdt\-Usb\-Port}!expected\-Bulk\-Inb\-Tags@{expected\-Bulk\-Inb\-Tags}}
\index{expected\-Bulk\-Inb\-Tags@{expected\-Bulk\-Inb\-Tags}!mdtUsbPort@{mdt\-Usb\-Port}}
\subsubsection[{expected\-Bulk\-Inb\-Tags}]{\setlength{\rightskip}{0pt plus 5cm}Q\-Queue$<$ quint8 $>$ \& mdt\-Usb\-Port\-::expected\-Bulk\-Inb\-Tags (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
)}}\label{classmdt_usb_port_a0ad07939f4709240b0c79c501edc9498}


Get list of expeced incomming b\-Tags. 

This method is used by \hyperlink{classmdt_usbtmc_port_manager}{mdt\-Usbtmc\-Port\-Manager} and \hyperlink{classmdt_usbtmc_port_thread}{mdt\-Usbtmc\-Port\-Thread} and should not be used else. 

Definition at line 1038 of file mdt\-Usb\-Port.\-cpp.



Referenced by mdt\-Usbtmc\-Port\-Manager\-::from\-Thread\-New\-Frame\-Readen().

\hypertarget{classmdt_usb_port_abb66e85fc1366112eeb0a6e86f6e7e32}{\index{mdt\-Usb\-Port@{mdt\-Usb\-Port}!handle\-Usb\-Events@{handle\-Usb\-Events}}
\index{handle\-Usb\-Events@{handle\-Usb\-Events}!mdtUsbPort@{mdt\-Usb\-Port}}
\subsubsection[{handle\-Usb\-Events}]{\setlength{\rightskip}{0pt plus 5cm}{\bf mdt\-Abstract\-Port\-::error\-\_\-t} mdt\-Usb\-Port\-::handle\-Usb\-Events (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
)}}\label{classmdt_usb_port_abb66e85fc1366112eeb0a6e86f6e7e32}


Call libusb handle\-\_\-event() function. 

Notes\-: must be called only by I/\-O thread (typically \hyperlink{classmdt_usb_port_thread}{mdt\-Usb\-Port\-Thread}). This method unlocks the mutex during wait (must be locked by call, is locked again before return)

\begin{DoxyReturn}{Returns}
No\-Error or \hyperlink{classmdt_abstract_port_ad4121bb930c95887e77f8bafa065a85e}{mdt\-Abstract\-Port\-::error\-\_\-t} error (Note\-: timeout is ignored here) 
\end{DoxyReturn}


Definition at line 994 of file mdt\-Usb\-Port.\-cpp.



References mdt\-Error\-::commit(), mdt\-Abstract\-Port\-::\-Disconnected, mdt\-Error\-::\-Error, mdt\-Abstract\-Port\-::lock\-Mutex(), M\-D\-T\-\_\-\-E\-R\-R\-O\-R\-\_\-\-S\-E\-T\-\_\-\-S\-R\-C, M\-D\-T\-\_\-\-U\-S\-B\-\_\-\-I\-O\-\_\-\-E\-R\-R\-O\-R, mdt\-Abstract\-Port\-::\-No\-Error, mdt\-Abstract\-Port\-::\-Port\-Access, mdt\-Error\-::set\-System\-Error(), mdt\-Abstract\-Port\-::\-Unhandled\-Error, and mdt\-Abstract\-Port\-::unlock\-Mutex().



Referenced by cancel\-Control\-Transfer(), cancel\-Message\-In\-Transfer(), cancel\-Read\-Transfer(), cancel\-Write\-Transfer(), mdt\-Usb\-Port\-Thread\-::read\-Until\-Short\-Packet\-Received(), mdt\-Usb\-Port\-Thread\-::send\-Control\-Query(), and mdt\-Usb\-Port\-Thread\-::wait\-On\-Control\-Transfer\-Possible().

\hypertarget{classmdt_usb_port_a897234cc2c7561da323cb124f57bcc28}{\index{mdt\-Usb\-Port@{mdt\-Usb\-Port}!init\-Message\-In\-Transfer@{init\-Message\-In\-Transfer}}
\index{init\-Message\-In\-Transfer@{init\-Message\-In\-Transfer}!mdtUsbPort@{mdt\-Usb\-Port}}
\subsubsection[{init\-Message\-In\-Transfer}]{\setlength{\rightskip}{0pt plus 5cm}{\bf mdt\-Abstract\-Port\-::error\-\_\-t} mdt\-Usb\-Port\-::init\-Message\-In\-Transfer (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
)}}\label{classmdt_usb_port_a897234cc2c7561da323cb124f57bcc28}


Request a new interrupt input transfer for additional message input. 

Will fill and init a new interrupt transfer and submit it to libusb.

If a transfer is pending, this method simply returns.

This method is called by U\-S\-B port thread and should not be used else.

Mutex is not handled by this method.

\begin{DoxyReturn}{Returns}
No\-Error or a error from \hyperlink{classmdt_abstract_port_ad4121bb930c95887e77f8bafa065a85e}{mdt\-Abstract\-Port\-::error\-\_\-t} 
\end{DoxyReturn}


Definition at line 577 of file mdt\-Usb\-Port.\-cpp.



References mdt\-Error\-::commit(), mdt\-Error\-::\-Error, M\-D\-T\-\_\-\-E\-R\-R\-O\-R\-\_\-\-S\-E\-T\-\_\-\-S\-R\-C, M\-D\-T\-\_\-\-U\-S\-B\-\_\-\-I\-O\-\_\-\-E\-R\-R\-O\-R, message\-In\-Transfer\-Callback(), mdt\-Abstract\-Port\-::\-No\-Error, mdt\-Error\-::set\-System\-Error(), and mdt\-Abstract\-Port\-::\-Unhandled\-Error.

\hypertarget{classmdt_usb_port_a5e380852b8726f71e8558c86cba5bd1f}{\index{mdt\-Usb\-Port@{mdt\-Usb\-Port}!init\-Read\-Transfer@{init\-Read\-Transfer}}
\index{init\-Read\-Transfer@{init\-Read\-Transfer}!mdtUsbPort@{mdt\-Usb\-Port}}
\subsubsection[{init\-Read\-Transfer}]{\setlength{\rightskip}{0pt plus 5cm}{\bf mdt\-Abstract\-Port\-::error\-\_\-t} mdt\-Usb\-Port\-::init\-Read\-Transfer (
\begin{DoxyParamCaption}
\item[{qint64}]{max\-Size}
\end{DoxyParamCaption}
)}}\label{classmdt_usb_port_a5e380852b8726f71e8558c86cba5bd1f}


Submit a read transfer. 

If a transfer is pending, this method simply returns.

This method is called by U\-S\-B port thread and should not be used else.

Mutex is not handled by this method.

\begin{DoxyReturn}{Returns}
No\-Error or a error from \hyperlink{classmdt_abstract_port_ad4121bb930c95887e77f8bafa065a85e}{mdt\-Abstract\-Port\-::error\-\_\-t} 
\end{DoxyReturn}


Definition at line 374 of file mdt\-Usb\-Port.\-cpp.



References mdt\-Error\-::commit(), mdt\-Error\-::\-Error, M\-D\-T\-\_\-\-E\-R\-R\-O\-R\-\_\-\-S\-E\-T\-\_\-\-S\-R\-C, M\-D\-T\-\_\-\-U\-S\-B\-\_\-\-I\-O\-\_\-\-E\-R\-R\-O\-R, mdt\-Abstract\-Port\-::\-No\-Error, read\-Transfer\-Callback(), mdt\-Error\-::set\-System\-Error(), and mdt\-Abstract\-Port\-::\-Unhandled\-Error.



Referenced by mdt\-Usb\-Port\-Thread\-::read\-Until\-Short\-Packet\-Received(), and request\-Read\-Until\-Short\-Packet\-Received().

\hypertarget{classmdt_usb_port_a3340dc3f53e857e39053988e4925fc97}{\index{mdt\-Usb\-Port@{mdt\-Usb\-Port}!init\-Write\-Transfer@{init\-Write\-Transfer}}
\index{init\-Write\-Transfer@{init\-Write\-Transfer}!mdtUsbPort@{mdt\-Usb\-Port}}
\subsubsection[{init\-Write\-Transfer}]{\setlength{\rightskip}{0pt plus 5cm}{\bf mdt\-Abstract\-Port\-::error\-\_\-t} mdt\-Usb\-Port\-::init\-Write\-Transfer (
\begin{DoxyParamCaption}
\item[{const char $\ast$}]{data, }
\item[{qint64}]{max\-Size}
\end{DoxyParamCaption}
)}}\label{classmdt_usb_port_a3340dc3f53e857e39053988e4925fc97}


Request a new bulk/interrupt out transfer. 

Will fill and init a new bulk/interrupt (depending setup) transfer and submit it to libusb.

If a transfer is pending, this method simply returns.

This method is called by U\-S\-B port thread and should not be used else.

Mutex is not handled by this method.

\begin{DoxyReturn}{Returns}
No\-Error or a error from \hyperlink{classmdt_abstract_port_ad4121bb930c95887e77f8bafa065a85e}{mdt\-Abstract\-Port\-::error\-\_\-t} 
\end{DoxyReturn}


Definition at line 761 of file mdt\-Usb\-Port.\-cpp.



References mdt\-Error\-::commit(), mdt\-Error\-::\-Error, M\-D\-T\-\_\-\-E\-R\-R\-O\-R\-\_\-\-S\-E\-T\-\_\-\-S\-R\-C, M\-D\-T\-\_\-\-U\-S\-B\-\_\-\-I\-O\-\_\-\-E\-R\-R\-O\-R, mdt\-Abstract\-Port\-::\-No\-Error, mdt\-Error\-::set\-System\-Error(), mdt\-Abstract\-Port\-::\-Unhandled\-Error, and write\-Transfer\-Callback().



Referenced by add\-Frame\-To\-Write().

\hypertarget{classmdt_usb_port_a81855cebd9b672a74d836955236c19bf}{\index{mdt\-Usb\-Port@{mdt\-Usb\-Port}!last\-Errors@{last\-Errors}}
\index{last\-Errors@{last\-Errors}!mdtUsbPort@{mdt\-Usb\-Port}}
\subsubsection[{last\-Errors}]{\setlength{\rightskip}{0pt plus 5cm}Q\-List$<$ {\bf mdt\-Abstract\-Port\-::error\-\_\-t} $>$ mdt\-Usb\-Port\-::last\-Errors (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
)}}\label{classmdt_usb_port_a81855cebd9b672a74d836955236c19bf}


Get the lis of current errors. 

Will clear internal list (a second call will return a empty list)

Used by \hyperlink{classmdt_usb_port_thread}{mdt\-Usb\-Port\-Thread}, should not be used else. 

Definition at line 960 of file mdt\-Usb\-Port.\-cpp.



Referenced by mdt\-Usb\-Port\-Thread\-::read\-Until\-Short\-Packet\-Received(), mdt\-Usb\-Port\-Thread\-::send\-Control\-Query(), and mdt\-Usb\-Port\-Thread\-::wait\-On\-Control\-Transfer\-Possible().

\hypertarget{classmdt_usb_port_a3365431076a3197540cbc99278658bda}{\index{mdt\-Usb\-Port@{mdt\-Usb\-Port}!message\-In\-Frames@{message\-In\-Frames}}
\index{message\-In\-Frames@{message\-In\-Frames}!mdtUsbPort@{mdt\-Usb\-Port}}
\subsubsection[{message\-In\-Frames}]{\setlength{\rightskip}{0pt plus 5cm}Q\-Queue$<$ {\bf mdt\-Frame} $\ast$ $>$ \& mdt\-Usb\-Port\-::message\-In\-Frames (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
)}}\label{classmdt_usb_port_a3365431076a3197540cbc99278658bda}


Get the message I\-N frames. 

This queue contains the message I\-N frames.

Mutex is not handled by this method. 

Definition at line 738 of file mdt\-Usb\-Port.\-cpp.

\hypertarget{classmdt_usb_port_a3ad4385983122fcaf6d2560b6bd43acf}{\index{mdt\-Usb\-Port@{mdt\-Usb\-Port}!message\-In\-Frames\-Pool@{message\-In\-Frames\-Pool}}
\index{message\-In\-Frames\-Pool@{message\-In\-Frames\-Pool}!mdtUsbPort@{mdt\-Usb\-Port}}
\subsubsection[{message\-In\-Frames\-Pool}]{\setlength{\rightskip}{0pt plus 5cm}Q\-Queue$<$ {\bf mdt\-Frame} $\ast$ $>$ \& mdt\-Usb\-Port\-::message\-In\-Frames\-Pool (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
)}}\label{classmdt_usb_port_a3ad4385983122fcaf6d2560b6bd43acf}


Get the message I\-N frames pool. 

This queue contains the pool of message I\-N frames.

Mutex is not handled by this method. 

Definition at line 733 of file mdt\-Usb\-Port.\-cpp.

\hypertarget{classmdt_usb_port_ae8932368e2777356695ab69f6ed08f41}{\index{mdt\-Usb\-Port@{mdt\-Usb\-Port}!message\-In\-Transfer\-Callback@{message\-In\-Transfer\-Callback}}
\index{message\-In\-Transfer\-Callback@{message\-In\-Transfer\-Callback}!mdtUsbPort@{mdt\-Usb\-Port}}
\subsubsection[{message\-In\-Transfer\-Callback}]{\setlength{\rightskip}{0pt plus 5cm}void mdt\-Usb\-Port\-::message\-In\-Transfer\-Callback (
\begin{DoxyParamCaption}
\item[{struct libusb\-\_\-transfer $\ast$}]{transfer}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [static]}}}\label{classmdt_usb_port_ae8932368e2777356695ab69f6ed08f41}


Transfer callback for message in (additional interrupt) endpoint. 

Check completion and error flags. On error, \hyperlink{classmdt_usb_port_aa857e94b4167c53b26573042ee3af280}{add\-Error()} is called, so thread can notify it.

This method is called from libusb and should not be used directly.

Mutex is not handled by this method.

\begin{DoxyPrecond}{Precondition}
transfer must be valid 

transfer-\/$>$user\-\_\-data must be valid 
\end{DoxyPrecond}


Definition at line 609 of file mdt\-Usb\-Port.\-cpp.



References add\-Error(), mdt\-Frame\-::clear(), mdt\-Frame\-::clear\-Sub(), mdt\-Error\-::commit(), mdt\-Abstract\-Port\-::\-Disconnected, mdt\-Error\-::\-Error, M\-D\-T\-\_\-\-E\-R\-R\-O\-R\-\_\-\-S\-E\-T\-\_\-\-S\-R\-C, M\-D\-T\-\_\-\-U\-S\-B\-\_\-\-I\-O\-\_\-\-E\-R\-R\-O\-R, mdt\-Abstract\-Port\-::\-Message\-In\-Canceled, mdt\-Abstract\-Port\-::\-Message\-In\-Timeout, mdt\-Abstract\-Port\-::\-Read\-Pool\-Empty, mdt\-Abstract\-Port\-::\-Unhandled\-Error, and mdt\-Error\-::\-Warning.



Referenced by init\-Message\-In\-Transfer().

\hypertarget{classmdt_usb_port_abce257345c8af47494215cd7ee75f82d}{\index{mdt\-Usb\-Port@{mdt\-Usb\-Port}!read@{read}}
\index{read@{read}!mdtUsbPort@{mdt\-Usb\-Port}}
\subsubsection[{read}]{\setlength{\rightskip}{0pt plus 5cm}qint64 mdt\-Usb\-Port\-::read (
\begin{DoxyParamCaption}
\item[{char $\ast$}]{data, }
\item[{qint64}]{max\-Size}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [virtual]}}}\label{classmdt_usb_port_abce257345c8af47494215cd7ee75f82d}


Read data from port. 

This method is called from \hyperlink{classmdt_usb_port_thread}{mdt\-Usb\-Port\-Thread} , and should not be used directly.

Mutex is not handled by this method.

\begin{DoxyReturn}{Returns}
Amount of readen data (can be 0 if transfer is pending or no more data are available), \hyperlink{classmdt_abstract_port_ad4121bb930c95887e77f8bafa065a85e}{mdt\-Abstract\-Port\-::error\-\_\-t} code on error. 
\end{DoxyReturn}
\begin{DoxyPrecond}{Precondition}
data must be valid 
\end{DoxyPrecond}


Implements \hyperlink{classmdt_abstract_port_a9d9c45220d5328c9856a2445557fe970}{mdt\-Abstract\-Port}.



Definition at line 548 of file mdt\-Usb\-Port.\-cpp.



References mdt\-Abstract\-Port\-::\-Unhandled\-Error.



Referenced by mdt\-Usb\-Port\-Thread\-::read\-Until\-Short\-Packet\-Received().

\hypertarget{classmdt_usb_port_af546a031ed8621fee1d5e9498cbcd174}{\index{mdt\-Usb\-Port@{mdt\-Usb\-Port}!read\-Buffer\-Size@{read\-Buffer\-Size}}
\index{read\-Buffer\-Size@{read\-Buffer\-Size}!mdtUsbPort@{mdt\-Usb\-Port}}
\subsubsection[{read\-Buffer\-Size}]{\setlength{\rightskip}{0pt plus 5cm}int mdt\-Usb\-Port\-::read\-Buffer\-Size (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
) const}}\label{classmdt_usb_port_af546a031ed8621fee1d5e9498cbcd174}


Get read buffer size. 

This is the same as w\-Max\-Packet\-Size of read endpoint.

This method is used by U\-S\-B thread, and should not be used else.

Mutex is not handled by this method. 

Definition at line 572 of file mdt\-Usb\-Port.\-cpp.



Referenced by mdt\-Usb\-Port\-Thread\-::read\-Until\-Short\-Packet\-Received().

\hypertarget{classmdt_usb_port_ab4f1f0456c84f954604b192f6085c3f2}{\index{mdt\-Usb\-Port@{mdt\-Usb\-Port}!read\-Transfer\-Callback@{read\-Transfer\-Callback}}
\index{read\-Transfer\-Callback@{read\-Transfer\-Callback}!mdtUsbPort@{mdt\-Usb\-Port}}
\subsubsection[{read\-Transfer\-Callback}]{\setlength{\rightskip}{0pt plus 5cm}void mdt\-Usb\-Port\-::read\-Transfer\-Callback (
\begin{DoxyParamCaption}
\item[{struct libusb\-\_\-transfer $\ast$}]{transfer}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [static]}}}\label{classmdt_usb_port_ab4f1f0456c84f954604b192f6085c3f2}


Transfer callback for read endpoint. 

Check completion and error flags. On error, \hyperlink{classmdt_usb_port_aa857e94b4167c53b26573042ee3af280}{add\-Error()} is called, so thread can notify it.

This method is called from libusb and should not be used directly.

Mutex is not handled by this method.

\begin{DoxyPrecond}{Precondition}
transfer must be valid 

transfer-\/$>$user\-\_\-data must be valid 
\end{DoxyPrecond}


Definition at line 426 of file mdt\-Usb\-Port.\-cpp.



References add\-Error(), mdt\-Error\-::commit(), mdt\-Abstract\-Port\-::\-Disconnected, mdt\-Error\-::\-Error, M\-D\-T\-\_\-\-E\-R\-R\-O\-R\-\_\-\-S\-E\-T\-\_\-\-S\-R\-C, M\-D\-T\-\_\-\-U\-S\-B\-\_\-\-I\-O\-\_\-\-E\-R\-R\-O\-R, mdt\-Abstract\-Port\-::\-Read\-Canceled, mdt\-Abstract\-Port\-::\-Read\-Timeout, mdt\-Abstract\-Port\-::\-Unhandled\-Error, mdt\-Abstract\-Port\-::\-Usb\-Read\-Stall, and mdt\-Error\-::\-Warning.



Referenced by init\-Read\-Transfer().

\hypertarget{classmdt_usb_port_a3c0685d67fe608abe24c140c2858779c}{\index{mdt\-Usb\-Port@{mdt\-Usb\-Port}!read\-Until\-Short\-Packet\-Received\-Request\-Pending@{read\-Until\-Short\-Packet\-Received\-Request\-Pending}}
\index{read\-Until\-Short\-Packet\-Received\-Request\-Pending@{read\-Until\-Short\-Packet\-Received\-Request\-Pending}!mdtUsbPort@{mdt\-Usb\-Port}}
\subsubsection[{read\-Until\-Short\-Packet\-Received\-Request\-Pending}]{\setlength{\rightskip}{0pt plus 5cm}bool mdt\-Usb\-Port\-::read\-Until\-Short\-Packet\-Received\-Request\-Pending (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
)}}\label{classmdt_usb_port_a3c0685d67fe608abe24c140c2858779c}


Check if a request to read until a short packet is received is pending. 

Flag will be cleared after a call of this method.

This method is used by U\-S\-B thread, and should not be used else.

Mutex is not handled by this method. 

Definition at line 365 of file mdt\-Usb\-Port.\-cpp.

\hypertarget{classmdt_usb_port_af2399348faf1abc20130eab20cfc36ee}{\index{mdt\-Usb\-Port@{mdt\-Usb\-Port}!reconnect@{reconnect}}
\index{reconnect@{reconnect}!mdtUsbPort@{mdt\-Usb\-Port}}
\subsubsection[{reconnect}]{\setlength{\rightskip}{0pt plus 5cm}{\bf mdt\-Abstract\-Port\-::error\-\_\-t} mdt\-Usb\-Port\-::reconnect (
\begin{DoxyParamCaption}
\item[{int}]{timeout}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [virtual]}}}\label{classmdt_usb_port_af2399348faf1abc20130eab20cfc36ee}


Reconnect device. 

If one of the method returns a Disconnected error, the thread will call this method to try to reconnect.


\begin{DoxyParams}{Parameters}
{\em timeout} & Timeout \mbox{[}ms\mbox{]} \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
No\-Error if connection could be done. Disconnected if connection could not be done, in wich case the thread will retry (until max retry). A Unhandled\-Error can be returned. 
\end{DoxyReturn}


Reimplemented from \hyperlink{classmdt_abstract_port_aec74b2db1a629d98a95d8f042ea96653}{mdt\-Abstract\-Port}.



Definition at line 87 of file mdt\-Usb\-Port.\-cpp.



References cancel\-Transfers(), mdt\-Abstract\-Port\-::close(), mdt\-Abstract\-Port\-::\-Disconnected, mdt\-Abstract\-Port\-::lock\-Mutex(), msleep, mdt\-Abstract\-Port\-::\-No\-Error, mdt\-Abstract\-Port\-::open(), mdt\-Abstract\-Port\-::setup(), and mdt\-Abstract\-Port\-::unlock\-Mutex().

\hypertarget{classmdt_usb_port_a719fc7b43461a3e2d9a4926d3e3961c2}{\index{mdt\-Usb\-Port@{mdt\-Usb\-Port}!request\-Read\-Until\-Short\-Packet\-Received@{request\-Read\-Until\-Short\-Packet\-Received}}
\index{request\-Read\-Until\-Short\-Packet\-Received@{request\-Read\-Until\-Short\-Packet\-Received}!mdtUsbPort@{mdt\-Usb\-Port}}
\subsubsection[{request\-Read\-Until\-Short\-Packet\-Received}]{\setlength{\rightskip}{0pt plus 5cm}void mdt\-Usb\-Port\-::request\-Read\-Until\-Short\-Packet\-Received (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
)}}\label{classmdt_usb_port_a719fc7b43461a3e2d9a4926d3e3961c2}


Request to read until a short packet is received. 

The mutex must be locked before calling this method, and still locked inside. 

Definition at line 353 of file mdt\-Usb\-Port.\-cpp.



References add\-Error(), init\-Read\-Transfer(), and mdt\-Abstract\-Port\-::\-No\-Error.



Referenced by mdt\-Usb\-Port\-Manager\-::read\-Until\-Short\-Packet\-Received().

\hypertarget{classmdt_usb_port_a44ed5024a81a573b5196b8f64c42cd6a}{\index{mdt\-Usb\-Port@{mdt\-Usb\-Port}!set\-Read\-Timeout@{set\-Read\-Timeout}}
\index{set\-Read\-Timeout@{set\-Read\-Timeout}!mdtUsbPort@{mdt\-Usb\-Port}}
\subsubsection[{set\-Read\-Timeout}]{\setlength{\rightskip}{0pt plus 5cm}void mdt\-Usb\-Port\-::set\-Read\-Timeout (
\begin{DoxyParamCaption}
\item[{int}]{timeout}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [virtual]}}}\label{classmdt_usb_port_a44ed5024a81a573b5196b8f64c42cd6a}


Set the read data timeout. 

The mutex is not handled by this method. 

Implements \hyperlink{classmdt_abstract_port_a6589b04467e0073d18ba872201bdcd84}{mdt\-Abstract\-Port}.



Definition at line 112 of file mdt\-Usb\-Port.\-cpp.

\hypertarget{classmdt_usb_port_a592af88bd7e7f45dd80df0ecab375ace}{\index{mdt\-Usb\-Port@{mdt\-Usb\-Port}!set\-Write\-Timeout@{set\-Write\-Timeout}}
\index{set\-Write\-Timeout@{set\-Write\-Timeout}!mdtUsbPort@{mdt\-Usb\-Port}}
\subsubsection[{set\-Write\-Timeout}]{\setlength{\rightskip}{0pt plus 5cm}void mdt\-Usb\-Port\-::set\-Write\-Timeout (
\begin{DoxyParamCaption}
\item[{int}]{timeout}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [virtual]}}}\label{classmdt_usb_port_a592af88bd7e7f45dd80df0ecab375ace}


Set the write data timeout. 

The mutex is not handled by this method. 

Implements \hyperlink{classmdt_abstract_port_a12eb422d52ebb09a650f8497b258c2e7}{mdt\-Abstract\-Port}.



Definition at line 125 of file mdt\-Usb\-Port.\-cpp.

\hypertarget{classmdt_usb_port_a274b6fd10bd84027bb66773ed805de2a}{\index{mdt\-Usb\-Port@{mdt\-Usb\-Port}!submit\-Control\-Query@{submit\-Control\-Query}}
\index{submit\-Control\-Query@{submit\-Control\-Query}!mdtUsbPort@{mdt\-Usb\-Port}}
\subsubsection[{submit\-Control\-Query}]{\setlength{\rightskip}{0pt plus 5cm}void mdt\-Usb\-Port\-::submit\-Control\-Query (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
)}}\label{classmdt_usb_port_a274b6fd10bd84027bb66773ed805de2a}


Submit a control query. 

If frames are available in queries queue and no control transfer is pending, a transfer will be submitted.

This method is called by \hyperlink{classmdt_usb_port_a4fbcd0fcc179335c55c6d7ccc40a7c31}{add\-Control\-Request()} and \hyperlink{classmdt_usb_port_a84ddd2d0bf77b4db60358846c7da4853}{control\-Transfer\-Callback()} and should not be used directly.

The mutex must be locked before calling this method, and still locked inside. 

Definition at line 149 of file mdt\-Usb\-Port.\-cpp.



References add\-Error(), mdt\-Error\-::commit(), control\-Frames\-Pool(), control\-Transfer\-Callback(), mdt\-Error\-::\-Error, M\-D\-T\-\_\-\-E\-R\-R\-O\-R\-\_\-\-S\-E\-T\-\_\-\-S\-R\-C, M\-D\-T\-\_\-\-U\-S\-B\-\_\-\-I\-O\-\_\-\-E\-R\-R\-O\-R, mdt\-Error\-::set\-System\-Error(), and mdt\-Abstract\-Port\-::\-Unhandled\-Error.



Referenced by add\-Control\-Request(), and control\-Transfer\-Callback().

\hypertarget{classmdt_usb_port_a3be875f6f10ae94fd3a94f925bb935e7}{\index{mdt\-Usb\-Port@{mdt\-Usb\-Port}!wait\-Event\-Write\-Ready@{wait\-Event\-Write\-Ready}}
\index{wait\-Event\-Write\-Ready@{wait\-Event\-Write\-Ready}!mdtUsbPort@{mdt\-Usb\-Port}}
\subsubsection[{wait\-Event\-Write\-Ready}]{\setlength{\rightskip}{0pt plus 5cm}{\bf mdt\-Abstract\-Port\-::error\-\_\-t} mdt\-Usb\-Port\-::wait\-Event\-Write\-Ready (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [virtual]}}}\label{classmdt_usb_port_a3be875f6f10ae94fd3a94f925bb935e7}


Wait until data can be written to port. 

This method is not implemented here and will allways return a Unhandled\-Error. 

Implements \hyperlink{classmdt_abstract_port_a35e4686f50e2c53c7e3618cf2c485d92}{mdt\-Abstract\-Port}.



Definition at line 929 of file mdt\-Usb\-Port.\-cpp.



References mdt\-Abstract\-Port\-::\-Unhandled\-Error.

\hypertarget{classmdt_usb_port_ab8ddd4ebee603ac381e8da0383a61e36}{\index{mdt\-Usb\-Port@{mdt\-Usb\-Port}!wait\-For\-Ready\-Read@{wait\-For\-Ready\-Read}}
\index{wait\-For\-Ready\-Read@{wait\-For\-Ready\-Read}!mdtUsbPort@{mdt\-Usb\-Port}}
\subsubsection[{wait\-For\-Ready\-Read}]{\setlength{\rightskip}{0pt plus 5cm}{\bf mdt\-Abstract\-Port\-::error\-\_\-t} mdt\-Usb\-Port\-::wait\-For\-Ready\-Read (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [virtual]}}}\label{classmdt_usb_port_ab8ddd4ebee603ac381e8da0383a61e36}


Wait until data is available on port. 

Not implemented, will allways return a Unhandled\-Error 

Implements \hyperlink{classmdt_abstract_port_aeda364cb191da1038a22dd1fc06a1d49}{mdt\-Abstract\-Port}.



Definition at line 543 of file mdt\-Usb\-Port.\-cpp.



References mdt\-Abstract\-Port\-::\-Unhandled\-Error.

\hypertarget{classmdt_usb_port_ae777e33325ff2adef326dd7f81b00838}{\index{mdt\-Usb\-Port@{mdt\-Usb\-Port}!write@{write}}
\index{write@{write}!mdtUsbPort@{mdt\-Usb\-Port}}
\subsubsection[{write}]{\setlength{\rightskip}{0pt plus 5cm}qint64 mdt\-Usb\-Port\-::write (
\begin{DoxyParamCaption}
\item[{const char $\ast$}]{, }
\item[{qint64}]{}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [virtual]}}}\label{classmdt_usb_port_ae777e33325ff2adef326dd7f81b00838}


Write data to port. 

This method is called from \hyperlink{classmdt_port_write_thread}{mdt\-Port\-Write\-Thread} , and should not be used directly.

Mutex is not handled by this method. 

Implements \hyperlink{classmdt_abstract_port_a64d4802975a76474b9196c91f57a6d90}{mdt\-Abstract\-Port}.



Definition at line 934 of file mdt\-Usb\-Port.\-cpp.



References mdt\-Abstract\-Port\-::\-Unhandled\-Error.

\hypertarget{classmdt_usb_port_af910071a5a5c401cd20cee3519120cc2}{\index{mdt\-Usb\-Port@{mdt\-Usb\-Port}!write\-Transfer\-Callback@{write\-Transfer\-Callback}}
\index{write\-Transfer\-Callback@{write\-Transfer\-Callback}!mdtUsbPort@{mdt\-Usb\-Port}}
\subsubsection[{write\-Transfer\-Callback}]{\setlength{\rightskip}{0pt plus 5cm}void mdt\-Usb\-Port\-::write\-Transfer\-Callback (
\begin{DoxyParamCaption}
\item[{struct libusb\-\_\-transfer $\ast$}]{transfer}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [static]}}}\label{classmdt_usb_port_af910071a5a5c401cd20cee3519120cc2}


Transfer callback for write endpoint. 

Check completion and error flags. On error, \hyperlink{classmdt_usb_port_aa857e94b4167c53b26573042ee3af280}{add\-Error()} is called, so thread can notify it.

This method is called from libusb and should not be used directly.

Mutex is not handled by this method.

\begin{DoxyPrecond}{Precondition}
transfer must be valid 

transfer-\/$>$user\-\_\-data must be valid 
\end{DoxyPrecond}


Definition at line 815 of file mdt\-Usb\-Port.\-cpp.



References add\-Error(), mdt\-Error\-::commit(), mdt\-Abstract\-Port\-::\-Disconnected, mdt\-Error\-::\-Error, M\-D\-T\-\_\-\-E\-R\-R\-O\-R\-\_\-\-S\-E\-T\-\_\-\-S\-R\-C, M\-D\-T\-\_\-\-U\-S\-B\-\_\-\-I\-O\-\_\-\-E\-R\-R\-O\-R, mdt\-Abstract\-Port\-::\-Unhandled\-Error, mdt\-Abstract\-Port\-::\-Usb\-Write\-Stall, mdt\-Abstract\-Port\-::\-Write\-Canceled, and mdt\-Abstract\-Port\-::\-Write\-Timeout.



Referenced by init\-Write\-Transfer().



The documentation for this class was generated from the following files\-:\begin{DoxyCompactItemize}
\item 
src/mdtport/\hyperlink{mdt_usb_port_8h}{mdt\-Usb\-Port.\-h}\item 
src/mdtport/\hyperlink{mdt_usb_port_8cpp}{mdt\-Usb\-Port.\-cpp}\end{DoxyCompactItemize}
