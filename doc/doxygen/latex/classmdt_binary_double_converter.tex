\hypertarget{classmdt_binary_double_converter}{\section{mdt\-Binary\-Double\-Converter$<$ T $>$ Class Template Reference}
\label{classmdt_binary_double_converter}\index{mdt\-Binary\-Double\-Converter$<$ T $>$@{mdt\-Binary\-Double\-Converter$<$ T $>$}}
}


Helper class for binary $<$-\/$>$ double conversions.  




{\ttfamily \#include $<$mdt\-Binary\-Double\-Converter.\-h$>$}



Inheritance diagram for mdt\-Binary\-Double\-Converter$<$ T $>$\-:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=238pt]{classmdt_binary_double_converter__inherit__graph}
\end{center}
\end{figure}
\subsection*{Public Member Functions}
\begin{DoxyCompactItemize}
\item 
\hyperlink{classmdt_binary_double_converter_aaddde0c66ca0e86fdb3fe8cfecb84820}{mdt\-Binary\-Double\-Converter} (bool value\-Is\-Signed=true)
\begin{DoxyCompactList}\small\item\em Constructor. \end{DoxyCompactList}\item 
void \hyperlink{classmdt_binary_double_converter_a70d19c66c956d698af371990935c4246}{set\-Range} (double min, double max, int value\-Bits\-Count, int value\-Lsb\-Index=0, bool value\-Is\-Signed=false, bool scale\-From\-Min\-To\-Max=true, double conversion\-Factor=1.\-0)
\begin{DoxyCompactList}\small\item\em Specify the range of values and conversion parameters. \end{DoxyCompactList}\item 
double \hyperlink{classmdt_binary_double_converter_aea12d22ccf1297d6086b28286d7dbeae}{minimum} () const 
\begin{DoxyCompactList}\small\item\em Get minimum value. \end{DoxyCompactList}\item 
double \hyperlink{classmdt_binary_double_converter_abe7960617f662603dd841c68855dc1af}{maximum} () const 
\begin{DoxyCompactList}\small\item\em Get maximum value. \end{DoxyCompactList}\item 
double \hyperlink{classmdt_binary_double_converter_a1369ff9f4138f8cd2158c263e5b35ec6}{binary\-To\-Double} (T m)
\begin{DoxyCompactList}\small\item\em Convert binary data to double value. \end{DoxyCompactList}\item 
T \hyperlink{classmdt_binary_double_converter_a4db906f5ab4849681f4ad2dc2fc5183d}{double\-To\-Binary} (double x)
\begin{DoxyCompactList}\small\item\em Convert double value to binary data. \end{DoxyCompactList}\end{DoxyCompactItemize}


\subsection{Detailed Description}
\subsubsection*{template$<$typename T$>$class mdt\-Binary\-Double\-Converter$<$ T $>$}

Helper class for binary $<$-\/$>$ double conversions. 

T is the type of binary format (int, int16\-\_\-t, ...) 

Definition at line 32 of file mdt\-Binary\-Double\-Converter.\-h.



\subsection{Constructor \& Destructor Documentation}
\hypertarget{classmdt_binary_double_converter_aaddde0c66ca0e86fdb3fe8cfecb84820}{\index{mdt\-Binary\-Double\-Converter@{mdt\-Binary\-Double\-Converter}!mdt\-Binary\-Double\-Converter@{mdt\-Binary\-Double\-Converter}}
\index{mdt\-Binary\-Double\-Converter@{mdt\-Binary\-Double\-Converter}!mdtBinaryDoubleConverter@{mdt\-Binary\-Double\-Converter}}
\subsubsection[{mdt\-Binary\-Double\-Converter}]{\setlength{\rightskip}{0pt plus 5cm}template$<$typename T$>$ {\bf mdt\-Binary\-Double\-Converter}$<$ T $>$\-::{\bf mdt\-Binary\-Double\-Converter} (
\begin{DoxyParamCaption}
\item[{bool}]{value\-Is\-Signed = {\ttfamily true}}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [inline]}}}\label{classmdt_binary_double_converter_aaddde0c66ca0e86fdb3fe8cfecb84820}


Constructor. 

Will set following parameters\-:
\begin{DoxyItemize}
\item minimum\-: -\/2$^\wedge$(N-\/1) with N the bits count of T
\item maximum\-: 2$^\wedge$(N-\/1)-\/1 with N the bits count of T
\item quantization step\-: 1
\item lsb\-Index\-: 0
\end{DoxyItemize}

At this state, this class does nothing helpful, and standard conversions from C/\-C++ should be used instead.

To use the converter, set conversion parameters with \hyperlink{classmdt_binary_double_converter_a70d19c66c956d698af371990935c4246}{set\-Range()} first. 

Definition at line 49 of file mdt\-Binary\-Double\-Converter.\-h.



\subsection{Member Function Documentation}
\hypertarget{classmdt_binary_double_converter_a1369ff9f4138f8cd2158c263e5b35ec6}{\index{mdt\-Binary\-Double\-Converter@{mdt\-Binary\-Double\-Converter}!binary\-To\-Double@{binary\-To\-Double}}
\index{binary\-To\-Double@{binary\-To\-Double}!mdtBinaryDoubleConverter@{mdt\-Binary\-Double\-Converter}}
\subsubsection[{binary\-To\-Double}]{\setlength{\rightskip}{0pt plus 5cm}template$<$typename T$>$ double {\bf mdt\-Binary\-Double\-Converter}$<$ T $>$\-::binary\-To\-Double (
\begin{DoxyParamCaption}
\item[{T}]{m}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [inline]}}}\label{classmdt_binary_double_converter_a1369ff9f4138f8cd2158c263e5b35ec6}


Convert binary data to double value. 



Definition at line 139 of file mdt\-Binary\-Double\-Converter.\-h.

\hypertarget{classmdt_binary_double_converter_a4db906f5ab4849681f4ad2dc2fc5183d}{\index{mdt\-Binary\-Double\-Converter@{mdt\-Binary\-Double\-Converter}!double\-To\-Binary@{double\-To\-Binary}}
\index{double\-To\-Binary@{double\-To\-Binary}!mdtBinaryDoubleConverter@{mdt\-Binary\-Double\-Converter}}
\subsubsection[{double\-To\-Binary}]{\setlength{\rightskip}{0pt plus 5cm}template$<$typename T$>$ T {\bf mdt\-Binary\-Double\-Converter}$<$ T $>$\-::double\-To\-Binary (
\begin{DoxyParamCaption}
\item[{double}]{x}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [inline]}}}\label{classmdt_binary_double_converter_a4db906f5ab4849681f4ad2dc2fc5183d}


Convert double value to binary data. 



Definition at line 168 of file mdt\-Binary\-Double\-Converter.\-h.

\hypertarget{classmdt_binary_double_converter_abe7960617f662603dd841c68855dc1af}{\index{mdt\-Binary\-Double\-Converter@{mdt\-Binary\-Double\-Converter}!maximum@{maximum}}
\index{maximum@{maximum}!mdtBinaryDoubleConverter@{mdt\-Binary\-Double\-Converter}}
\subsubsection[{maximum}]{\setlength{\rightskip}{0pt plus 5cm}template$<$typename T$>$ double {\bf mdt\-Binary\-Double\-Converter}$<$ T $>$\-::maximum (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
) const\hspace{0.3cm}{\ttfamily [inline]}}}\label{classmdt_binary_double_converter_abe7960617f662603dd841c68855dc1af}


Get maximum value. 



Definition at line 135 of file mdt\-Binary\-Double\-Converter.\-h.

\hypertarget{classmdt_binary_double_converter_aea12d22ccf1297d6086b28286d7dbeae}{\index{mdt\-Binary\-Double\-Converter@{mdt\-Binary\-Double\-Converter}!minimum@{minimum}}
\index{minimum@{minimum}!mdtBinaryDoubleConverter@{mdt\-Binary\-Double\-Converter}}
\subsubsection[{minimum}]{\setlength{\rightskip}{0pt plus 5cm}template$<$typename T$>$ double {\bf mdt\-Binary\-Double\-Converter}$<$ T $>$\-::minimum (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
) const\hspace{0.3cm}{\ttfamily [inline]}}}\label{classmdt_binary_double_converter_aea12d22ccf1297d6086b28286d7dbeae}


Get minimum value. 



Definition at line 131 of file mdt\-Binary\-Double\-Converter.\-h.

\hypertarget{classmdt_binary_double_converter_a70d19c66c956d698af371990935c4246}{\index{mdt\-Binary\-Double\-Converter@{mdt\-Binary\-Double\-Converter}!set\-Range@{set\-Range}}
\index{set\-Range@{set\-Range}!mdtBinaryDoubleConverter@{mdt\-Binary\-Double\-Converter}}
\subsubsection[{set\-Range}]{\setlength{\rightskip}{0pt plus 5cm}template$<$typename T$>$ void {\bf mdt\-Binary\-Double\-Converter}$<$ T $>$\-::set\-Range (
\begin{DoxyParamCaption}
\item[{double}]{min, }
\item[{double}]{max, }
\item[{int}]{value\-Bits\-Count, }
\item[{int}]{value\-Lsb\-Index = {\ttfamily 0}, }
\item[{bool}]{value\-Is\-Signed = {\ttfamily false}, }
\item[{bool}]{scale\-From\-Min\-To\-Max = {\ttfamily true}, }
\item[{double}]{conversion\-Factor = {\ttfamily 1.0}}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [inline]}}}\label{classmdt_binary_double_converter_a70d19c66c956d698af371990935c4246}


Specify the range of values and conversion parameters. 

For some application, binary data can contain a value and some additionnal flags. In such case, we must tell the converter witch bits contains the value itself.

Take example of Wago 750-\/457 analog module\-:
\begin{DoxyItemize}
\item Value + flags are encoded in a 16 bits word
\item Value is encoded in 12 bits, from b3 to b14 + 1 sign bit, b15
\item Value is scaled from -\/10 V to 10 V
\end{DoxyItemize}

In this example, this method must be called with min = -\/10.\-0 , max = 10.\-0 , value\-Bits\-Count = 13 , value\-Lsb\-Index = 3 , value\-Is\-Signed = true , scale\-From\-Min\-To\-Max = true , conversion\-Factor = 1.\-0 .

Here is another example with Wago 750-\/464 with Pt100 sensor and normal format\-:
\begin{DoxyItemize}
\item Value is encoded in 16 bits
\item Scaling is allready done by device
\item Value represents 0.\-1Â°\-C per digit -\/$>$ we have to apply a conversion factor of 0.\-1
\end{DoxyItemize}

In this example, this method must be called with min = -\/200.\-0 , max = 850.\-0 , value\-Bits\-Count = 16 , value\-Lsb\-Index = 0 , value\-Is\-Signed = true , scale\-From\-Min\-To\-Max = false , conversion\-Factor = 0.\-1 .


\begin{DoxyParams}{Parameters}
{\em min} & Minimum value in double format (f.\-ex. 0\-V, or 4m\-A) \\
\hline
{\em max} & Maximum value in double format (f.\-ex. 10\-V, or 20m\-A) \\
\hline
{\em value\-Bits\-Count} & Number of bits used for the value, including sign bit. \\
\hline
{\em value\-Lsb\-Index} & Index of first bit to use for value extraction. \\
\hline
{\em value\-Is\-Signed} & If true, binary value is considered as signed value, i.\-e. the most significant bit is the sign. \\
\hline
{\em scale\-From\-Min\-To\-Max} & If true, binary value will be scaled from min to max regarding L\-S\-B. L\-S\-B is determined from value\-Bits\-Count . \\
\hline
{\em conversion\-Factor} & This factor is applied as follow (min, max scaling is ignored in this example)\-:
\begin{DoxyItemize}
\item Value\-Double = binary\-Value $\ast$ L\-S\-B $\ast$ conversion\-Factor
\item binary\-Value = value\-Double / (L\-S\-B $\ast$ conversion\-Factor)\par
 L\-S\-B is determined from value\-Bits\-Count .
\end{DoxyItemize}\\
\hline
\end{DoxyParams}
\begin{DoxyPrecond}{Precondition}
max must be $>$ min 

value\-Bits\-Count must be $>$= 0 

value\-Lsb\-Index must be $>$= 0 

value\-Lsb\-Index + value\-Bits\-Count must be $<$= bits count of type T 
\end{DoxyPrecond}


Definition at line 97 of file mdt\-Binary\-Double\-Converter.\-h.



Referenced by mdt\-Binary\-Double\-Converter$<$ int $>$\-::mdt\-Binary\-Double\-Converter().



The documentation for this class was generated from the following file\-:\begin{DoxyCompactItemize}
\item 
src/mdtutils/\hyperlink{mdt_binary_double_converter_8h}{mdt\-Binary\-Double\-Converter.\-h}\end{DoxyCompactItemize}
