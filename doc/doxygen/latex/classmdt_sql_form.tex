\hypertarget{classmdt_sql_form}{
\section{mdtSqlForm Class Reference}
\label{classmdt_sql_form}\index{mdtSqlForm@{mdtSqlForm}}
}


Base class for high level SQL widgets API.  




{\ttfamily \#include $<$mdtSqlForm.h$>$}



Collaboration diagram for mdtSqlForm:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=259pt]{classmdt_sql_form__coll__graph}
\end{center}
\end{figure}
\subsection*{Public Member Functions}
\begin{DoxyCompactItemize}
\item 
\hyperlink{classmdt_sql_form_a607993f0d35207668c0f220d77bd9298}{mdtSqlForm} (QWidget $\ast$parent, QSqlDatabase db)
\begin{DoxyCompactList}\small\item\em Constructor. \end{DoxyCompactList}\item 
\hypertarget{classmdt_sql_form_ab4538979323566433a20bb71118525a5}{
virtual \hyperlink{classmdt_sql_form_ab4538979323566433a20bb71118525a5}{$\sim$mdtSqlForm} ()}
\label{classmdt_sql_form_ab4538979323566433a20bb71118525a5}

\begin{DoxyCompactList}\small\item\em Destructor. \end{DoxyCompactList}\item 
\hyperlink{classmdt_sql_form_widget}{mdtSqlFormWidget} $\ast$ \hyperlink{classmdt_sql_form_a857fc9370e2054408ae8b42e8deedbf5}{mainSqlWidget} ()
\begin{DoxyCompactList}\small\item\em Get the main SQL widget. \end{DoxyCompactList}\item 
bool \hyperlink{classmdt_sql_form_ab03dd80e9de62362dd77161ef6bd6fc2}{setMainTable} (const QString \&tableName, const QString \&userFriendlyTableName)
\begin{DoxyCompactList}\small\item\em Set the main (or parent) table of the form. \end{DoxyCompactList}\item 
bool \hyperlink{classmdt_sql_form_ac2de4ee6f27d7411c2404771585204ae}{setMainTable} (const QString \&tableName, const QString \&userFriendlyTableName, QSqlDatabase db)
\begin{DoxyCompactList}\small\item\em Set the main (or parent) table of the form. \end{DoxyCompactList}\item 
bool \hyperlink{classmdt_sql_form_a3504a54f26777ed38efce5cc151a1dbf}{addChildTable} (const QString \&tableName, const QString \&userFriendlyTableName)
\begin{DoxyCompactList}\small\item\em Add a child table to the form. \end{DoxyCompactList}\item 
bool \hyperlink{classmdt_sql_form_a2a3af0bab78caee638b89aecdc1a2f62}{addChildTable} (const QString \&tableName, const QString \&userFriendlyTableName, QSqlDatabase db)
\begin{DoxyCompactList}\small\item\em Add a child table to the form. \end{DoxyCompactList}\item 
void \hyperlink{classmdt_sql_form_a86174e002c2dd5496ab74a7eb67c614c}{addChildWidget} (QWidget $\ast$widget, const QString \&label, const QIcon \&icon=QIcon())
\begin{DoxyCompactList}\small\item\em Add a widget to the internal QTabWidget. \end{DoxyCompactList}\item 
bool \hyperlink{classmdt_sql_form_ab9bb1b548b71ef4e8547846b6aedec66}{addRelation} (const QString \&parentFieldName, const QString \&childTableName, const QString \&childFieldName, const QString \&operatorWithPreviousItem=\char`\"{}AND\char`\"{})
\begin{DoxyCompactList}\small\item\em Add a relation between main table and a child table. \end{DoxyCompactList}\item 
\hyperlink{classmdt_abstract_sql_widget}{mdtAbstractSqlWidget} $\ast$ \hyperlink{classmdt_sql_form_a1ea800b795e3ead97e6a0452ab305d65}{sqlWidget} (const QString \&tableName)
\begin{DoxyCompactList}\small\item\em Get instance of the stored SQL widget related to a table name. \end{DoxyCompactList}\item 
\hypertarget{classmdt_sql_form_a59dc3afec69c8b6a18ed7fccb42c70ad}{
\hyperlink{classmdt_sql_form_widget}{mdtSqlFormWidget} $\ast$ {\bfseries sqlFormWidget} (const QString \&tableName)}
\label{classmdt_sql_form_a59dc3afec69c8b6a18ed7fccb42c70ad}

\item 
\hypertarget{classmdt_sql_form_a6a17f32077fb7cc33139c3dc26a8d011}{
\hyperlink{classmdt_sql_table_widget}{mdtSqlTableWidget} $\ast$ {\bfseries sqlTableWidget} (const QString \&tableName)}
\label{classmdt_sql_form_a6a17f32077fb7cc33139c3dc26a8d011}

\item 
\hypertarget{classmdt_sql_form_ac8423f91a1f8a6fa7408cd61be86a89c}{
QSqlDatabase \hyperlink{classmdt_sql_form_ac8423f91a1f8a6fa7408cd61be86a89c}{database} ()}
\label{classmdt_sql_form_ac8423f91a1f8a6fa7408cd61be86a89c}

\begin{DoxyCompactList}\small\item\em Get database that was given by constructor. \end{DoxyCompactList}\item 
QSqlDatabase \hyperlink{classmdt_sql_form_aa9c2ce2607760a8ebebf3d88779637d4}{database} (const QString \&tableName)
\begin{DoxyCompactList}\small\item\em Get database that acts on given table name. \end{DoxyCompactList}\item 
QSqlTableModel $\ast$ \hyperlink{classmdt_sql_form_ac3f257a2711f66b3cdd811804c0f11b0}{model} (const QString \&tableName)
\begin{DoxyCompactList}\small\item\em Get model that acts on given table name. \end{DoxyCompactList}\item 
bool \hyperlink{classmdt_sql_form_a2a2f564fe934cc8997b07f90abb771e1}{select} ()
\begin{DoxyCompactList}\small\item\em Call select on model that acts on main table name. \end{DoxyCompactList}\item 
bool \hyperlink{classmdt_sql_form_ae9a1f8c03e5ac8ccd01fa804356abd01}{select} (const QString \&tableName)
\begin{DoxyCompactList}\small\item\em Call select on model that acts on given table name. \end{DoxyCompactList}\item 
bool \hyperlink{classmdt_sql_form_abfc6d7f49debf02f5016923cbd422f2f}{setMainTableFilter} (const QString \&fieldName, const QVariant \&matchData)
\begin{DoxyCompactList}\small\item\em Set main table's filter. \end{DoxyCompactList}\item 
\hyperlink{classmdt_error}{mdtError} \hyperlink{classmdt_sql_form_a04724293298421c404e93c58015cda5e}{lastError} () const 
\begin{DoxyCompactList}\small\item\em Get last error of model that acts on tableName. \end{DoxyCompactList}\item 
\hypertarget{classmdt_sql_form_a7521d231f24663ee1d2acb904387353b}{
void \hyperlink{classmdt_sql_form_a7521d231f24663ee1d2acb904387353b}{displayLastError} ()}
\label{classmdt_sql_form_a7521d231f24663ee1d2acb904387353b}

\begin{DoxyCompactList}\small\item\em Display last error in a message box. \end{DoxyCompactList}\item 
int \hyperlink{classmdt_sql_form_a7d50c271fc506764ed20dd88914d0ddc}{rowCount} (const QString \&tableName)
\begin{DoxyCompactList}\small\item\em Get the row count for given table name. \end{DoxyCompactList}\item 
int \hyperlink{classmdt_sql_form_a855de08e9ddb3f7898ef4ceb0b0331f9}{currentRow} (const QString \&tableName)
\begin{DoxyCompactList}\small\item\em Get the current row of given table name. \end{DoxyCompactList}\item 
bool \hyperlink{classmdt_sql_form_aa377e70f4a2e865b0b696957c0fca766}{setCurrentData} (const QString \&tableName, const QString \&fieldName, const QVariant \&data, bool submit=true)
\begin{DoxyCompactList}\small\item\em Set (update) data of current row (record) for given table and field name. \end{DoxyCompactList}\item 
QVariant \hyperlink{classmdt_sql_form_aca283557b7e2586779cb5c498d388f14}{currentData} (const QString \&tableName, const QString \&fieldName)
\begin{DoxyCompactList}\small\item\em Get current data for given table and field name. \end{DoxyCompactList}\item 
QVariant \hyperlink{classmdt_sql_form_a0c27d6a9ecbf0589f313c7193c632a62}{data} (const QString \&tableName, int row, const QString \&fieldName)
\begin{DoxyCompactList}\small\item\em Get data for given table , row and field name. \end{DoxyCompactList}\item 
virtual bool \hyperlink{classmdt_sql_form_a27fe6e45aa5d4d7782aad9833e6de20b}{setupTables} ()
\begin{DoxyCompactList}\small\item\em Setup tables. \end{DoxyCompactList}\end{DoxyCompactItemize}
\subsection*{Protected Attributes}
\begin{DoxyCompactItemize}
\item 
\hypertarget{classmdt_sql_form_afc24e8dedd1249a29708347fdff560fd}{
\hyperlink{classmdt_error}{mdtError} {\bfseries pvLastError}}
\label{classmdt_sql_form_afc24e8dedd1249a29708347fdff560fd}

\end{DoxyCompactItemize}


\subsection{Detailed Description}
Base class for high level SQL widgets API. 

To create SQL GUI's, some clases are available:
\begin{DoxyItemize}
\item \hyperlink{classmdt_sql_form_widget}{mdtSqlFormWidget}
\item \hyperlink{classmdt_sql_table_widget}{mdtSqlTableWidget}
\item \hyperlink{classmdt_sql_relation}{mdtSqlRelation}
\end{DoxyItemize}

They help to deal with several common problems, but they need several code (creating objects, configure them, handle memory, ...).

This class was made to have less code for common database GUI .

The mainSqlWidget is based on a \hyperlink{classmdt_sql_form_widget}{mdtSqlFormWidget} , and is placed on the upper part of the form . When adding child table with \hyperlink{classmdt_sql_form_a3504a54f26777ed38efce5cc151a1dbf}{addChildTable()} , a instance of \hyperlink{classmdt_sql_table_widget}{mdtSqlTableWidget} is created, and placed to a QTabWidget . It is also possible to add a non database related widget, using \hyperlink{classmdt_sql_form_a86174e002c2dd5496ab74a7eb67c614c}{addChildWidget()} . In this case, the given widget is simply added to the internal QTabWidget . 

Definition at line 61 of file mdtSqlForm.h.



\subsection{Constructor \& Destructor Documentation}
\hypertarget{classmdt_sql_form_a607993f0d35207668c0f220d77bd9298}{
\index{mdtSqlForm@{mdtSqlForm}!mdtSqlForm@{mdtSqlForm}}
\index{mdtSqlForm@{mdtSqlForm}!mdtSqlForm@{mdtSqlForm}}
\subsubsection[{mdtSqlForm}]{\setlength{\rightskip}{0pt plus 5cm}mdtSqlForm::mdtSqlForm (
\begin{DoxyParamCaption}
\item[{QWidget $\ast$}]{parent, }
\item[{QSqlDatabase}]{db}
\end{DoxyParamCaption}
)}}
\label{classmdt_sql_form_a607993f0d35207668c0f220d77bd9298}


Constructor. 

Given database will be used whenn adding new tables with \hyperlink{classmdt_sql_form_ab03dd80e9de62362dd77161ef6bd6fc2}{setMainTable(const QString\&, const QString\&)} and \hyperlink{classmdt_sql_form_a3504a54f26777ed38efce5cc151a1dbf}{addChildTable(const QString\&, const QString\&)} .

\hyperlink{classmdt_sql_form_ac8423f91a1f8a6fa7408cd61be86a89c}{database()} will also return this version . 

Definition at line 36 of file mdtSqlForm.cpp.



\subsection{Member Function Documentation}
\hypertarget{classmdt_sql_form_a3504a54f26777ed38efce5cc151a1dbf}{
\index{mdtSqlForm@{mdtSqlForm}!addChildTable@{addChildTable}}
\index{addChildTable@{addChildTable}!mdtSqlForm@{mdtSqlForm}}
\subsubsection[{addChildTable}]{\setlength{\rightskip}{0pt plus 5cm}bool mdtSqlForm::addChildTable (
\begin{DoxyParamCaption}
\item[{const QString \&}]{tableName, }
\item[{const QString \&}]{userFriendlyTableName}
\end{DoxyParamCaption}
)}}
\label{classmdt_sql_form_a3504a54f26777ed38efce5cc151a1dbf}


Add a child table to the form. 


\begin{DoxyParams}{Parameters}
{\em tableName} & Table on witch the new (internally created) widget must act. \\
\hline
{\em userFriendlyTableName} & If set, will be used at places that are visible from user. \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
True on success, false if given table name does not exist or on some other errors (database not open, access privileges, ...). False can also be returned if main table was not set (see setTable() ). 
\end{DoxyReturn}


Definition at line 92 of file mdtSqlForm.cpp.

\hypertarget{classmdt_sql_form_a2a3af0bab78caee638b89aecdc1a2f62}{
\index{mdtSqlForm@{mdtSqlForm}!addChildTable@{addChildTable}}
\index{addChildTable@{addChildTable}!mdtSqlForm@{mdtSqlForm}}
\subsubsection[{addChildTable}]{\setlength{\rightskip}{0pt plus 5cm}bool mdtSqlForm::addChildTable (
\begin{DoxyParamCaption}
\item[{const QString \&}]{tableName, }
\item[{const QString \&}]{userFriendlyTableName, }
\item[{QSqlDatabase}]{db}
\end{DoxyParamCaption}
)}}
\label{classmdt_sql_form_a2a3af0bab78caee638b89aecdc1a2f62}


Add a child table to the form. 

This method is only useful if different tables have to act on different databases .


\begin{DoxyParams}{Parameters}
{\em tableName} & Table on witch the new (internally created) widget must act. \\
\hline
{\em userFriendlyTableName} & If set, will be used at places that are visible from user. \\
\hline
{\em db} & Database to use (pass a QSqlDatabase() if only one database is used). \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
True on success, false if given table name does not exist or on some other errors (database not open, access privileges, ...). False can also be returned if main table was not set (see setTable() ). 
\end{DoxyReturn}


Definition at line 97 of file mdtSqlForm.cpp.

\hypertarget{classmdt_sql_form_a86174e002c2dd5496ab74a7eb67c614c}{
\index{mdtSqlForm@{mdtSqlForm}!addChildWidget@{addChildWidget}}
\index{addChildWidget@{addChildWidget}!mdtSqlForm@{mdtSqlForm}}
\subsubsection[{addChildWidget}]{\setlength{\rightskip}{0pt plus 5cm}void mdtSqlForm::addChildWidget (
\begin{DoxyParamCaption}
\item[{QWidget $\ast$}]{widget, }
\item[{const QString \&}]{label, }
\item[{const QIcon \&}]{icon = {\ttfamily QIcon()}}
\end{DoxyParamCaption}
)}}
\label{classmdt_sql_form_a86174e002c2dd5496ab74a7eb67c614c}


Add a widget to the internal QTabWidget. 

Can be used if a widget that is not related to a database table must be placed in the QTabWidget .

Note: the given widget will be reparented, and also deleted when the form is destroyed . 

Definition at line 141 of file mdtSqlForm.cpp.

\hypertarget{classmdt_sql_form_ab9bb1b548b71ef4e8547846b6aedec66}{
\index{mdtSqlForm@{mdtSqlForm}!addRelation@{addRelation}}
\index{addRelation@{addRelation}!mdtSqlForm@{mdtSqlForm}}
\subsubsection[{addRelation}]{\setlength{\rightskip}{0pt plus 5cm}bool mdtSqlForm::addRelation (
\begin{DoxyParamCaption}
\item[{const QString \&}]{parentFieldName, }
\item[{const QString \&}]{childTableName, }
\item[{const QString \&}]{childFieldName, }
\item[{const QString \&}]{operatorWithPreviousItem = {\ttfamily \char`\"{}AND\char`\"{}}}
\end{DoxyParamCaption}
)}}
\label{classmdt_sql_form_ab9bb1b548b71ef4e8547846b6aedec66}


Add a relation between main table and a child table. 

\begin{DoxyReturn}{Returns}
True on succes, false if childTableName or a field does not exit. 
\end{DoxyReturn}


Definition at line 157 of file mdtSqlForm.cpp.

\hypertarget{classmdt_sql_form_aca283557b7e2586779cb5c498d388f14}{
\index{mdtSqlForm@{mdtSqlForm}!currentData@{currentData}}
\index{currentData@{currentData}!mdtSqlForm@{mdtSqlForm}}
\subsubsection[{currentData}]{\setlength{\rightskip}{0pt plus 5cm}QVariant mdtSqlForm::currentData (
\begin{DoxyParamCaption}
\item[{const QString \&}]{tableName, }
\item[{const QString \&}]{fieldName}
\end{DoxyParamCaption}
)}}
\label{classmdt_sql_form_aca283557b7e2586779cb5c498d388f14}


Get current data for given table and field name. 

Note that SQL widget related to given tableName is searched at each request. If several access to currentData is needed, it can be better to get a pointer to related widget with \hyperlink{classmdt_sql_form_a1ea800b795e3ead97e6a0452ab305d65}{sqlWidget()} , and call his \hyperlink{classmdt_sql_form_aca283557b7e2586779cb5c498d388f14}{currentData()} method.

\begin{DoxyReturn}{Returns}
Current value, or a invalid QVariant on error (f.ex. table or field not found). 
\end{DoxyReturn}


Definition at line 399 of file mdtSqlForm.cpp.

\hypertarget{classmdt_sql_form_a855de08e9ddb3f7898ef4ceb0b0331f9}{
\index{mdtSqlForm@{mdtSqlForm}!currentRow@{currentRow}}
\index{currentRow@{currentRow}!mdtSqlForm@{mdtSqlForm}}
\subsubsection[{currentRow}]{\setlength{\rightskip}{0pt plus 5cm}int mdtSqlForm::currentRow (
\begin{DoxyParamCaption}
\item[{const QString \&}]{tableName}
\end{DoxyParamCaption}
)}}
\label{classmdt_sql_form_a855de08e9ddb3f7898ef4ceb0b0331f9}


Get the current row of given table name. 

Current row can be the currently selected row (case of a table view), or simply the current row that is displayed in a form view.

Note that SQL widget related to given tableName is searched at each request. If several access to currentRow is needed, it can be better to get a pointer to related widget with \hyperlink{classmdt_sql_form_a1ea800b795e3ead97e6a0452ab305d65}{sqlWidget()} , and call his \hyperlink{classmdt_sql_form_a855de08e9ddb3f7898ef4ceb0b0331f9}{currentRow()} method.

\begin{DoxyReturn}{Returns}
Current row, or value $<$ 0 on error (f.ex. table not found). 
\end{DoxyReturn}


Definition at line 367 of file mdtSqlForm.cpp.

\hypertarget{classmdt_sql_form_a0c27d6a9ecbf0589f313c7193c632a62}{
\index{mdtSqlForm@{mdtSqlForm}!data@{data}}
\index{data@{data}!mdtSqlForm@{mdtSqlForm}}
\subsubsection[{data}]{\setlength{\rightskip}{0pt plus 5cm}QVariant mdtSqlForm::data (
\begin{DoxyParamCaption}
\item[{const QString \&}]{tableName, }
\item[{int}]{row, }
\item[{const QString \&}]{fieldName}
\end{DoxyParamCaption}
)}}
\label{classmdt_sql_form_a0c27d6a9ecbf0589f313c7193c632a62}


Get data for given table , row and field name. 

Note that SQL widget related to given tableName is searched at each request. If several access to data is needed, it can be better to get a pointer to related widget with \hyperlink{classmdt_sql_form_a1ea800b795e3ead97e6a0452ab305d65}{sqlWidget()} , and call his \hyperlink{classmdt_sql_form_a0c27d6a9ecbf0589f313c7193c632a62}{data()} method.

\begin{DoxyReturn}{Returns}
Current value, or a invalid QVariant on error (f.ex. table, row or field not found). 
\end{DoxyReturn}


Definition at line 415 of file mdtSqlForm.cpp.

\hypertarget{classmdt_sql_form_aa9c2ce2607760a8ebebf3d88779637d4}{
\index{mdtSqlForm@{mdtSqlForm}!database@{database}}
\index{database@{database}!mdtSqlForm@{mdtSqlForm}}
\subsubsection[{database}]{\setlength{\rightskip}{0pt plus 5cm}QSqlDatabase mdtSqlForm::database (
\begin{DoxyParamCaption}
\item[{const QString \&}]{tableName}
\end{DoxyParamCaption}
)}}
\label{classmdt_sql_form_aa9c2ce2607760a8ebebf3d88779637d4}


Get database that acts on given table name. 

\begin{DoxyReturn}{Returns}
QSqlDatabase object that acts on given table, or \hyperlink{classmdt_sql_form_ac8423f91a1f8a6fa7408cd61be86a89c}{database()} if table was not found . 
\end{DoxyReturn}


Definition at line 225 of file mdtSqlForm.cpp.

\hypertarget{classmdt_sql_form_a04724293298421c404e93c58015cda5e}{
\index{mdtSqlForm@{mdtSqlForm}!lastError@{lastError}}
\index{lastError@{lastError}!mdtSqlForm@{mdtSqlForm}}
\subsubsection[{lastError}]{\setlength{\rightskip}{0pt plus 5cm}{\bf mdtError} mdtSqlForm::lastError (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
) const}}
\label{classmdt_sql_form_a04724293298421c404e93c58015cda5e}


Get last error of model that acts on tableName. 

\begin{DoxyReturn}{Returns}
A valid QSqlError if table was found and a error occured.QSqlError lastSqlError(const QString \&tableName);
\end{DoxyReturn}
Get last error

QSqlError mdtSqlForm::lastSqlError(const QString \&tableName) \{ QSqlTableModel $\ast$m;

m = model(tableName); if(m == 0)\{ /mdtError e(MDT\_\-DATABASE\_\-ERROR, \char`\"{}Cannot find model that acts on table '\char`\"{} + tableName + \char`\"{}'\char`\"{}, \hyperlink{classmdt_error_a5c8b1a040e2feaa848f6201d6b6f0cd7a35f5c05a7d15b6433445cdbffa6d5260}{mdtError::Error}); pvLastError.setError(tr(\char`\"{}Cannot find model that acts on table '\char`\"{}) + tableName + tr(\char`\"{}'\char`\"{}), \hyperlink{classmdt_error_a5c8b1a040e2feaa848f6201d6b6f0cd7a35f5c05a7d15b6433445cdbffa6d5260}{mdtError::Error}); MDT\_\-ERROR\_\-SET\_\-SRC(pvLastError, \char`\"{}mdtSqlForm\char`\"{}); pvLastError.commit(); return QSqlError(); \}

return m-\/$>$\hyperlink{classmdt_sql_form_a04724293298421c404e93c58015cda5e}{lastError()}; \} 

Definition at line 337 of file mdtSqlForm.cpp.

\hypertarget{classmdt_sql_form_a857fc9370e2054408ae8b42e8deedbf5}{
\index{mdtSqlForm@{mdtSqlForm}!mainSqlWidget@{mainSqlWidget}}
\index{mainSqlWidget@{mainSqlWidget}!mdtSqlForm@{mdtSqlForm}}
\subsubsection[{mainSqlWidget}]{\setlength{\rightskip}{0pt plus 5cm}{\bf mdtSqlFormWidget} $\ast$ mdtSqlForm::mainSqlWidget (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
)}}
\label{classmdt_sql_form_a857fc9370e2054408ae8b42e8deedbf5}


Get the main SQL widget. 

Use this method to get the widget to give as argument to setupUi() method of your Ui widget.

\begin{DoxyPostcond}{Postcondition}
Returns a valid object. 
\end{DoxyPostcond}


Definition at line 52 of file mdtSqlForm.cpp.

\hypertarget{classmdt_sql_form_ac3f257a2711f66b3cdd811804c0f11b0}{
\index{mdtSqlForm@{mdtSqlForm}!model@{model}}
\index{model@{model}!mdtSqlForm@{mdtSqlForm}}
\subsubsection[{model}]{\setlength{\rightskip}{0pt plus 5cm}QSqlTableModel $\ast$ mdtSqlForm::model (
\begin{DoxyParamCaption}
\item[{const QString \&}]{tableName}
\end{DoxyParamCaption}
)}}
\label{classmdt_sql_form_ac3f257a2711f66b3cdd811804c0f11b0}


Get model that acts on given table name. 

\begin{DoxyReturn}{Returns}
QSqlTableModel object or a null pointer if table was not found. 
\end{DoxyReturn}


Definition at line 237 of file mdtSqlForm.cpp.

\hypertarget{classmdt_sql_form_a7d50c271fc506764ed20dd88914d0ddc}{
\index{mdtSqlForm@{mdtSqlForm}!rowCount@{rowCount}}
\index{rowCount@{rowCount}!mdtSqlForm@{mdtSqlForm}}
\subsubsection[{rowCount}]{\setlength{\rightskip}{0pt plus 5cm}int mdtSqlForm::rowCount (
\begin{DoxyParamCaption}
\item[{const QString \&}]{tableName}
\end{DoxyParamCaption}
)}}
\label{classmdt_sql_form_a7d50c271fc506764ed20dd88914d0ddc}


Get the row count for given table name. 

Note that SQL widget related to given tableName is searched at each request. If several access to rowCount is needed, it can be better to get a pointer to related model with \hyperlink{classmdt_sql_form_ac3f257a2711f66b3cdd811804c0f11b0}{model()} , and call his \hyperlink{classmdt_sql_form_a7d50c271fc506764ed20dd88914d0ddc}{rowCount()} method.

\begin{DoxyReturn}{Returns}
Row count, or value $<$ 0 on error (f.ex. table not found). 
\end{DoxyReturn}


Definition at line 352 of file mdtSqlForm.cpp.

\hypertarget{classmdt_sql_form_ae9a1f8c03e5ac8ccd01fa804356abd01}{
\index{mdtSqlForm@{mdtSqlForm}!select@{select}}
\index{select@{select}!mdtSqlForm@{mdtSqlForm}}
\subsubsection[{select}]{\setlength{\rightskip}{0pt plus 5cm}bool mdtSqlForm::select (
\begin{DoxyParamCaption}
\item[{const QString \&}]{tableName}
\end{DoxyParamCaption}
)}}
\label{classmdt_sql_form_ae9a1f8c03e5ac8ccd01fa804356abd01}


Call select on model that acts on given table name. 

\begin{DoxyReturn}{Returns}
True on success, false if tableName was not found or other error. On failure, the last error is avaliable with \hyperlink{classmdt_sql_form_a04724293298421c404e93c58015cda5e}{lastError()} 
\end{DoxyReturn}


Definition at line 264 of file mdtSqlForm.cpp.

\hypertarget{classmdt_sql_form_a2a2f564fe934cc8997b07f90abb771e1}{
\index{mdtSqlForm@{mdtSqlForm}!select@{select}}
\index{select@{select}!mdtSqlForm@{mdtSqlForm}}
\subsubsection[{select}]{\setlength{\rightskip}{0pt plus 5cm}bool mdtSqlForm::select (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
)}}
\label{classmdt_sql_form_a2a2f564fe934cc8997b07f90abb771e1}


Call select on model that acts on main table name. 

\begin{DoxyReturn}{Returns}
True on success, false on error. On failure, the last error is avaliable with \hyperlink{classmdt_sql_form_a04724293298421c404e93c58015cda5e}{lastError()} 
\end{DoxyReturn}


Definition at line 249 of file mdtSqlForm.cpp.

\hypertarget{classmdt_sql_form_aa377e70f4a2e865b0b696957c0fca766}{
\index{mdtSqlForm@{mdtSqlForm}!setCurrentData@{setCurrentData}}
\index{setCurrentData@{setCurrentData}!mdtSqlForm@{mdtSqlForm}}
\subsubsection[{setCurrentData}]{\setlength{\rightskip}{0pt plus 5cm}bool mdtSqlForm::setCurrentData (
\begin{DoxyParamCaption}
\item[{const QString \&}]{tableName, }
\item[{const QString \&}]{fieldName, }
\item[{const QVariant \&}]{data, }
\item[{bool}]{submit = {\ttfamily true}}
\end{DoxyParamCaption}
)}}
\label{classmdt_sql_form_aa377e70f4a2e865b0b696957c0fca766}


Set (update) data of current row (record) for given table and field name. 

Note that SQL widget related to given tableName is searched at each request. If several access to setCurrentData is needed, it can be better to get a pointer to related widget with \hyperlink{classmdt_sql_form_a1ea800b795e3ead97e6a0452ab305d65}{sqlWidget()} , and call his \hyperlink{classmdt_sql_form_aa377e70f4a2e865b0b696957c0fca766}{setCurrentData()} method. 

Definition at line 383 of file mdtSqlForm.cpp.

\hypertarget{classmdt_sql_form_ab03dd80e9de62362dd77161ef6bd6fc2}{
\index{mdtSqlForm@{mdtSqlForm}!setMainTable@{setMainTable}}
\index{setMainTable@{setMainTable}!mdtSqlForm@{mdtSqlForm}}
\subsubsection[{setMainTable}]{\setlength{\rightskip}{0pt plus 5cm}bool mdtSqlForm::setMainTable (
\begin{DoxyParamCaption}
\item[{const QString \&}]{tableName, }
\item[{const QString \&}]{userFriendlyTableName}
\end{DoxyParamCaption}
)}}
\label{classmdt_sql_form_ab03dd80e9de62362dd77161ef6bd6fc2}


Set the main (or parent) table of the form. 

Note: be shure that your Ui::setupUi() was called on widget returned by \hyperlink{classmdt_sql_form_a857fc9370e2054408ae8b42e8deedbf5}{mainSqlWidget()} before.


\begin{DoxyParams}{Parameters}
{\em tableName} & Table on witch the form must act. \\
\hline
{\em userFriendlyTableName} & If set, will be used at places that are visible from user. \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
True on success, false if given table name does not exist or on some other errors (database not open, access privileges, ...) 
\end{DoxyReturn}


Definition at line 59 of file mdtSqlForm.cpp.

\hypertarget{classmdt_sql_form_ac2de4ee6f27d7411c2404771585204ae}{
\index{mdtSqlForm@{mdtSqlForm}!setMainTable@{setMainTable}}
\index{setMainTable@{setMainTable}!mdtSqlForm@{mdtSqlForm}}
\subsubsection[{setMainTable}]{\setlength{\rightskip}{0pt plus 5cm}bool mdtSqlForm::setMainTable (
\begin{DoxyParamCaption}
\item[{const QString \&}]{tableName, }
\item[{const QString \&}]{userFriendlyTableName, }
\item[{QSqlDatabase}]{db}
\end{DoxyParamCaption}
)}}
\label{classmdt_sql_form_ac2de4ee6f27d7411c2404771585204ae}


Set the main (or parent) table of the form. 

Note: be shure that your Ui::setupUi() was called on widget returned by \hyperlink{classmdt_sql_form_a857fc9370e2054408ae8b42e8deedbf5}{mainSqlWidget()} before.

This method is only useful if different tables have to act on different databases .


\begin{DoxyParams}{Parameters}
{\em tableName} & Table on witch the form must act. \\
\hline
{\em userFriendlyTableName} & If set, will be used at places that are visible from user. \\
\hline
{\em db} & Database to use (pass a QSqlDatabase() if only one database is used). \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
True on success, false if given table name does not exist or on some other errors (database not open, access privileges, ...) 
\end{DoxyReturn}


Definition at line 64 of file mdtSqlForm.cpp.

\hypertarget{classmdt_sql_form_abfc6d7f49debf02f5016923cbd422f2f}{
\index{mdtSqlForm@{mdtSqlForm}!setMainTableFilter@{setMainTableFilter}}
\index{setMainTableFilter@{setMainTableFilter}!mdtSqlForm@{mdtSqlForm}}
\subsubsection[{setMainTableFilter}]{\setlength{\rightskip}{0pt plus 5cm}bool mdtSqlForm::setMainTableFilter (
\begin{DoxyParamCaption}
\item[{const QString \&}]{fieldName, }
\item[{const QVariant \&}]{matchData}
\end{DoxyParamCaption}
)}}
\label{classmdt_sql_form_abfc6d7f49debf02f5016923cbd422f2f}


Set main table's filter. 


\begin{DoxyParams}{Parameters}
{\em fieldName} & Field that must match data \\
\hline
{\em matchData} & Match data\\
\hline
\end{DoxyParams}
Internally, a SQL statement is generated linke: fieldName = matchData 

Definition at line 279 of file mdtSqlForm.cpp.

\hypertarget{classmdt_sql_form_a27fe6e45aa5d4d7782aad9833e6de20b}{
\index{mdtSqlForm@{mdtSqlForm}!setupTables@{setupTables}}
\index{setupTables@{setupTables}!mdtSqlForm@{mdtSqlForm}}
\subsubsection[{setupTables}]{\setlength{\rightskip}{0pt plus 5cm}bool mdtSqlForm::setupTables (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily  \mbox{[}virtual\mbox{]}}}}
\label{classmdt_sql_form_a27fe6e45aa5d4d7782aad9833e6de20b}


Setup tables. 

Must be re-\/implemented in subclass, default implementation does nothing . 

Definition at line 431 of file mdtSqlForm.cpp.

\hypertarget{classmdt_sql_form_a1ea800b795e3ead97e6a0452ab305d65}{
\index{mdtSqlForm@{mdtSqlForm}!sqlWidget@{sqlWidget}}
\index{sqlWidget@{sqlWidget}!mdtSqlForm@{mdtSqlForm}}
\subsubsection[{sqlWidget}]{\setlength{\rightskip}{0pt plus 5cm}{\bf mdtAbstractSqlWidget} $\ast$ mdtSqlForm::sqlWidget (
\begin{DoxyParamCaption}
\item[{const QString \&}]{tableName}
\end{DoxyParamCaption}
)}}
\label{classmdt_sql_form_a1ea800b795e3ead97e6a0452ab305d65}


Get instance of the stored SQL widget related to a table name. 

Returns a null pointer if widget related to tableName was not found. 

Definition at line 179 of file mdtSqlForm.cpp.



The documentation for this class was generated from the following files:\begin{DoxyCompactItemize}
\item 
src/mdtdatabase/mdtSqlForm.h\item 
src/mdtdatabase/mdtSqlForm.cpp\end{DoxyCompactItemize}
