\hypertarget{classmdt_frame}{\section{mdt\-Frame Class Reference}
\label{classmdt_frame}\index{mdt\-Frame@{mdt\-Frame}}
}


Provide an array of bytes.  




{\ttfamily \#include $<$mdt\-Frame.\-h$>$}



Inheritance diagram for mdt\-Frame\-:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classmdt_frame__inherit__graph}
\end{center}
\end{figure}


Collaboration diagram for mdt\-Frame\-:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=256pt]{classmdt_frame__coll__graph}
\end{center}
\end{figure}
\subsection*{Public Types}
\begin{DoxyCompactItemize}
\item 
enum \hyperlink{classmdt_frame_af936e37d5fe4c066c0fb0161fafd4a17}{type\-\_\-t} \{ \\*
\hyperlink{classmdt_frame_af936e37d5fe4c066c0fb0161fafd4a17aeb10e33f775c33799273fcb130fee86f}{F\-T\-\_\-\-R\-A\-W}, 
\hyperlink{classmdt_frame_af936e37d5fe4c066c0fb0161fafd4a17ac91a1c1827fa634eadaddb861f805c96}{F\-T\-\_\-\-R\-A\-W\-\_\-\-T\-O\-P}, 
\hyperlink{classmdt_frame_af936e37d5fe4c066c0fb0161fafd4a17ac649559564652abbe656b97d4a84b722}{F\-T\-\_\-\-A\-S\-C\-I\-I}, 
\hyperlink{classmdt_frame_af936e37d5fe4c066c0fb0161fafd4a17a72c8ddaf29839f4037b686bdc346828a}{F\-T\-\_\-\-M\-O\-D\-B\-U\-S\-\_\-\-T\-C\-P}, 
\\*
\hyperlink{classmdt_frame_af936e37d5fe4c066c0fb0161fafd4a17aca438ff6b553a819f22090facc562c86}{F\-T\-\_\-\-U\-S\-B\-T\-M\-C}
 \}
\begin{DoxyCompactList}\small\item\em Frame type. \end{DoxyCompactList}\end{DoxyCompactItemize}
\subsection*{Public Member Functions}
\begin{DoxyCompactItemize}
\item 
\hyperlink{classmdt_frame_a5601584ff7b3fdd26ff8d10f3f290982}{mdt\-Frame} ()
\item 
virtual \hyperlink{classmdt_frame_ad0deea44f86ffd2f7914e64346d2ab8e}{$\sim$mdt\-Frame} ()
\item 
void \hyperlink{classmdt_frame_ac1a8ad77ce7bd6d08032056c3610d5c0}{set\-Ignore\-Null\-Values} (bool ignore\-Null\-Values)
\begin{DoxyCompactList}\small\item\em Set the ignore null values flag. \end{DoxyCompactList}\item 
int \hyperlink{classmdt_frame_af03d60dadc6bd33b3a333cf484463113}{put\-Until} (const char $\ast$data, char token, int max\-Len)
\begin{DoxyCompactList}\small\item\em Put data until E\-O\-F token was reached. \end{DoxyCompactList}\item 
int \hyperlink{classmdt_frame_aaa5c15df5aaf026b02f34639438036ad}{put\-Until} (const char $\ast$data, Q\-Byte\-Array \&token, int max\-Len)
\begin{DoxyCompactList}\small\item\em Put data until E\-O\-F token was reached. \end{DoxyCompactList}\item 
bool \hyperlink{classmdt_frame_ab4e0fee7198c94c16f2fa6eb4b6b1562}{is\-Full} ()
\begin{DoxyCompactList}\small\item\em Returns true if frame is full. \end{DoxyCompactList}\item 
int \hyperlink{classmdt_frame_aa1cd5c914c36efb3f441b7f6e782dc24}{remain\-Capacity} ()
\begin{DoxyCompactList}\small\item\em Returns the remain capacity. \end{DoxyCompactList}\item 
int \hyperlink{classmdt_frame_a8526b227a56562fddf8445060e8095d4}{bytes\-To\-Store} ()
\begin{DoxyCompactList}\small\item\em Returns the bytes to store into the frame. \end{DoxyCompactList}\item 
void \hyperlink{classmdt_frame_abfd6de396626f01ebf972b7d6cd26957}{set\-Directly\-Complete} (bool dc)
\begin{DoxyCompactList}\small\item\em Set the complete flag directly. \end{DoxyCompactList}\item 
void \hyperlink{classmdt_frame_ab8db9882c095091109115afb8e448b37}{set\-Complete} ()
\begin{DoxyCompactList}\small\item\em Set the frame as complete. \end{DoxyCompactList}\item 
bool \hyperlink{classmdt_frame_a2a8fb9f36c941282881bba0c538d1ce5}{is\-Complete} ()
\begin{DoxyCompactList}\small\item\em Returns true if E\-O\-F condition was reached. \end{DoxyCompactList}\item 
void \hyperlink{classmdt_frame_acdf8a921a3f36ca91af88b55b90febdc}{clear} ()
\begin{DoxyCompactList}\small\item\em Overloaded function. \end{DoxyCompactList}\item 
virtual void \hyperlink{classmdt_frame_aecc64d3846dee0049ee7b10b73a402f4}{clear\-Sub} ()
\begin{DoxyCompactList}\small\item\em \hyperlink{classmdt_frame}{mdt\-Frame} subclass specific clear \end{DoxyCompactList}\item 
virtual int \hyperlink{classmdt_frame_ae63af784d2fc54430ea5db4dc80b7ec8}{put\-Data} (const char $\ast$data, int len)
\begin{DoxyCompactList}\small\item\em Put data into the frame. \end{DoxyCompactList}\item 
virtual int \hyperlink{classmdt_frame_a0e0dcfb9d284ac0dae550db33f0fbece}{eof\-Seq\-Len} ()
\begin{DoxyCompactList}\small\item\em Get the length of the end of frame sequence. \end{DoxyCompactList}\item 
int \hyperlink{classmdt_frame_a36e4b85a3c671902ac3c8cc318ca726c}{take} (char $\ast$data, int len)
\begin{DoxyCompactList}\small\item\em Take some data. \end{DoxyCompactList}\item 
int \hyperlink{classmdt_frame_ad8b184e6eb07a26fe84deaf233c1aa9b}{take} (int len)
\begin{DoxyCompactList}\small\item\em Take some data. \end{DoxyCompactList}\item 
void \hyperlink{classmdt_frame_a3b9a331858df9061879592fab1b346f5}{set\-Wait\-An\-Answer} (bool wait)
\begin{DoxyCompactList}\small\item\em Tell a write/read thread that an answer is needed after a write frame. \end{DoxyCompactList}\item 
bool \hyperlink{classmdt_frame_ab27455f2fa3415a96482786c0ec27e55}{wait\-An\-Answer} () const 
\begin{DoxyCompactList}\small\item\em Know if an answer is needed after a write frame. \end{DoxyCompactList}\end{DoxyCompactItemize}
\subsection*{Protected Attributes}
\begin{DoxyCompactItemize}
\item 
bool \hyperlink{classmdt_frame_a883c4de8f2c961310366d5a72b6e6dd8}{pv\-Ignore\-Null\-Values}
\item 
bool \hyperlink{classmdt_frame_a1862e197bad6e9887cfedc54a768e88d}{pv\-E\-O\-Fcondition}
\item 
bool \hyperlink{classmdt_frame_aac030954a872c41f7fb917912e16a77f}{pv\-Wait\-An\-Answer}
\end{DoxyCompactItemize}


\subsection{Detailed Description}
Provide an array of bytes. 

\hyperlink{classmdt_frame}{mdt\-Frame} is based on Qt's Q\-Byte\-Array, that provide a array of bytes. To store data, the Q\-Byte\-Array's methods append() can be used.\par
 For A\-S\-C\-I\-I frames reception, the end is a special char/string on most case. \hyperlink{classmdt_frame}{mdt\-Frame} provide the functions \hyperlink{classmdt_frame_af03d60dadc6bd33b3a333cf484463113}{put\-Until()} for that purpose.\par
 During data reception, for exemple from serial port, the best way to check if more data can be stored is to use \hyperlink{classmdt_frame_a8526b227a56562fddf8445060e8095d4}{bytes\-To\-Store()}. It returns the remain capacity of the frame, and 0 if the end of frame (E\-O\-F) condition was reached. To know if the frame is complete (i.\-e. end of frame condition ok), use \hyperlink{classmdt_frame_a2a8fb9f36c941282881bba0c538d1ce5}{is\-Complete()}\par
 Here are the states of a frame with return values of both functions\-:\par
 \begin{TabularC}{3}
\hline
\rowcolor{lightgray}{\bf State}&{\bf \hyperlink{classmdt_frame_a8526b227a56562fddf8445060e8095d4}{bytes\-To\-Store()}}&{\bf \hyperlink{classmdt_frame_a2a8fb9f36c941282881bba0c538d1ce5}{is\-Complete()} }\\\cline{1-3}
Frame is not full, and E\-O\-F condition not reached&\hyperlink{classmdt_frame_aa1cd5c914c36efb3f441b7f6e782dc24}{remain\-Capacity()}&false \\\cline{1-3}
Frame is full, and E\-O\-F condition not reached&0&false \\\cline{1-3}
Frame is not full, and E\-O\-F condition reached&0&true \\\cline{1-3}
Frame is full, and E\-O\-F condition reached&0&true \\\cline{1-3}
\end{TabularC}
At this state, whenn \hyperlink{classmdt_frame_a8526b227a56562fddf8445060e8095d4}{bytes\-To\-Store()} returns 0 and \hyperlink{classmdt_frame_a2a8fb9f36c941282881bba0c538d1ce5}{is\-Complete()} is true, the received frame is ok. The next step is to decode it, according to the used protocol (modbus, ...).\par
 Note that these states are only set when using \hyperlink{classmdt_frame_af03d60dadc6bd33b3a333cf484463113}{put\-Until()} and \hyperlink{classmdt_frame_ae63af784d2fc54430ea5db4dc80b7ec8}{put\-Data()} functions. 

Definition at line 48 of file mdt\-Frame.\-h.



\subsection{Member Enumeration Documentation}
\hypertarget{classmdt_frame_af936e37d5fe4c066c0fb0161fafd4a17}{\index{mdt\-Frame@{mdt\-Frame}!type\-\_\-t@{type\-\_\-t}}
\index{type\-\_\-t@{type\-\_\-t}!mdtFrame@{mdt\-Frame}}
\subsubsection[{type\-\_\-t}]{\setlength{\rightskip}{0pt plus 5cm}enum {\bf mdt\-Frame\-::type\-\_\-t}}}\label{classmdt_frame_af936e37d5fe4c066c0fb0161fafd4a17}


Frame type. 

\begin{Desc}
\item[Enumerator]\par
\begin{description}
\index{F\-T\-\_\-\-R\-A\-W@{F\-T\-\_\-\-R\-A\-W}!mdt\-Frame@{mdt\-Frame}}\index{mdt\-Frame@{mdt\-Frame}!F\-T\-\_\-\-R\-A\-W@{F\-T\-\_\-\-R\-A\-W}}\item[{\em 
\hypertarget{classmdt_frame_af936e37d5fe4c066c0fb0161fafd4a17aeb10e33f775c33799273fcb130fee86f}{F\-T\-\_\-\-R\-A\-W}\label{classmdt_frame_af936e37d5fe4c066c0fb0161fafd4a17aeb10e33f775c33799273fcb130fee86f}
}]Raw binary data \index{F\-T\-\_\-\-R\-A\-W\-\_\-\-T\-O\-P@{F\-T\-\_\-\-R\-A\-W\-\_\-\-T\-O\-P}!mdt\-Frame@{mdt\-Frame}}\index{mdt\-Frame@{mdt\-Frame}!F\-T\-\_\-\-R\-A\-W\-\_\-\-T\-O\-P@{F\-T\-\_\-\-R\-A\-W\-\_\-\-T\-O\-P}}\item[{\em 
\hypertarget{classmdt_frame_af936e37d5fe4c066c0fb0161fafd4a17ac91a1c1827fa634eadaddb861f805c96}{F\-T\-\_\-\-R\-A\-W\-\_\-\-T\-O\-P}\label{classmdt_frame_af936e37d5fe4c066c0fb0161fafd4a17ac91a1c1827fa634eadaddb861f805c96}
}]Raw binary data for usage with timeout protocol \index{F\-T\-\_\-\-A\-S\-C\-I\-I@{F\-T\-\_\-\-A\-S\-C\-I\-I}!mdt\-Frame@{mdt\-Frame}}\index{mdt\-Frame@{mdt\-Frame}!F\-T\-\_\-\-A\-S\-C\-I\-I@{F\-T\-\_\-\-A\-S\-C\-I\-I}}\item[{\em 
\hypertarget{classmdt_frame_af936e37d5fe4c066c0fb0161fafd4a17ac649559564652abbe656b97d4a84b722}{F\-T\-\_\-\-A\-S\-C\-I\-I}\label{classmdt_frame_af936e37d5fe4c066c0fb0161fafd4a17ac649559564652abbe656b97d4a84b722}
}]A\-S\-C\-I\-I frame type \index{F\-T\-\_\-\-M\-O\-D\-B\-U\-S\-\_\-\-T\-C\-P@{F\-T\-\_\-\-M\-O\-D\-B\-U\-S\-\_\-\-T\-C\-P}!mdt\-Frame@{mdt\-Frame}}\index{mdt\-Frame@{mdt\-Frame}!F\-T\-\_\-\-M\-O\-D\-B\-U\-S\-\_\-\-T\-C\-P@{F\-T\-\_\-\-M\-O\-D\-B\-U\-S\-\_\-\-T\-C\-P}}\item[{\em 
\hypertarget{classmdt_frame_af936e37d5fe4c066c0fb0161fafd4a17a72c8ddaf29839f4037b686bdc346828a}{F\-T\-\_\-\-M\-O\-D\-B\-U\-S\-\_\-\-T\-C\-P}\label{classmdt_frame_af936e37d5fe4c066c0fb0161fafd4a17a72c8ddaf29839f4037b686bdc346828a}
}]M\-O\-D\-B\-U\-S/\-T\-C\-P frame type \index{F\-T\-\_\-\-U\-S\-B\-T\-M\-C@{F\-T\-\_\-\-U\-S\-B\-T\-M\-C}!mdt\-Frame@{mdt\-Frame}}\index{mdt\-Frame@{mdt\-Frame}!F\-T\-\_\-\-U\-S\-B\-T\-M\-C@{F\-T\-\_\-\-U\-S\-B\-T\-M\-C}}\item[{\em 
\hypertarget{classmdt_frame_af936e37d5fe4c066c0fb0161fafd4a17aca438ff6b553a819f22090facc562c86}{F\-T\-\_\-\-U\-S\-B\-T\-M\-C}\label{classmdt_frame_af936e37d5fe4c066c0fb0161fafd4a17aca438ff6b553a819f22090facc562c86}
}]U\-S\-B\-T\-M\-C frame type \end{description}
\end{Desc}


Definition at line 57 of file mdt\-Frame.\-h.



\subsection{Constructor \& Destructor Documentation}
\hypertarget{classmdt_frame_a5601584ff7b3fdd26ff8d10f3f290982}{\index{mdt\-Frame@{mdt\-Frame}!mdt\-Frame@{mdt\-Frame}}
\index{mdt\-Frame@{mdt\-Frame}!mdtFrame@{mdt\-Frame}}
\subsubsection[{mdt\-Frame}]{\setlength{\rightskip}{0pt plus 5cm}mdt\-Frame\-::mdt\-Frame (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
)}}\label{classmdt_frame_a5601584ff7b3fdd26ff8d10f3f290982}


Definition at line 24 of file mdt\-Frame.\-cpp.



References pv\-E\-O\-Fcondition, pv\-Ignore\-Null\-Values, and pv\-Wait\-An\-Answer.

\hypertarget{classmdt_frame_ad0deea44f86ffd2f7914e64346d2ab8e}{\index{mdt\-Frame@{mdt\-Frame}!$\sim$mdt\-Frame@{$\sim$mdt\-Frame}}
\index{$\sim$mdt\-Frame@{$\sim$mdt\-Frame}!mdtFrame@{mdt\-Frame}}
\subsubsection[{$\sim$mdt\-Frame}]{\setlength{\rightskip}{0pt plus 5cm}mdt\-Frame\-::$\sim$mdt\-Frame (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [virtual]}}}\label{classmdt_frame_ad0deea44f86ffd2f7914e64346d2ab8e}


Definition at line 32 of file mdt\-Frame.\-cpp.



\subsection{Member Function Documentation}
\hypertarget{classmdt_frame_a8526b227a56562fddf8445060e8095d4}{\index{mdt\-Frame@{mdt\-Frame}!bytes\-To\-Store@{bytes\-To\-Store}}
\index{bytes\-To\-Store@{bytes\-To\-Store}!mdtFrame@{mdt\-Frame}}
\subsubsection[{bytes\-To\-Store}]{\setlength{\rightskip}{0pt plus 5cm}int mdt\-Frame\-::bytes\-To\-Store (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
)}}\label{classmdt_frame_a8526b227a56562fddf8445060e8095d4}


Returns the bytes to store into the frame. 

Bytes to store can be the \hyperlink{classmdt_frame_aa1cd5c914c36efb3f441b7f6e782dc24}{remain\-Capacity()} value if frame is not full and E\-O\-F condition was not reached. Else, it returns 0. 

Definition at line 156 of file mdt\-Frame.\-cpp.



References pv\-E\-O\-Fcondition, and remain\-Capacity().



Referenced by mdt\-Frame\-Modbus\-Tcp\-::put\-Data(), mdt\-Frame\-Usb\-Tmc\-::put\-Data(), and mdt\-Port\-Thread\-Helper\-::submit\-Readen\-Data().

\hypertarget{classmdt_frame_acdf8a921a3f36ca91af88b55b90febdc}{\index{mdt\-Frame@{mdt\-Frame}!clear@{clear}}
\index{clear@{clear}!mdtFrame@{mdt\-Frame}}
\subsubsection[{clear}]{\setlength{\rightskip}{0pt plus 5cm}void mdt\-Frame\-::clear (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
)}}\label{classmdt_frame_acdf8a921a3f36ca91af88b55b90febdc}


Overloaded function. 

Internally, it calls Q\-Byte\-Array's \hyperlink{classmdt_frame_acdf8a921a3f36ca91af88b55b90febdc}{clear()} and reserve() methods. The goal is to keep the same capacity and reset some \hyperlink{classmdt_frame}{mdt\-Frame} and subclass specific flags 

Definition at line 179 of file mdt\-Frame.\-cpp.



References pv\-E\-O\-Fcondition.



Referenced by mdt\-Usb\-Port\-::control\-Transfer\-Callback(), mdt\-Frame\-Usb\-Tmc\-::encode(), mdt\-Frame\-Usb\-Control\-::encode(), mdt\-Port\-Thread\-Helper\-::handle\-Common\-Read\-Errors(), mdt\-Usb\-Port\-::message\-In\-Transfer\-Callback(), mdt\-Usb\-Port\-Manager\-::send\-Control\-Request(), mdt\-Usbtmc\-Port\-Manager\-::send\-Data(), mdt\-Modbus\-Tcp\-Port\-Manager\-::send\-Data(), mdt\-Port\-Manager\-::send\-Data(), and mdt\-Usbtmc\-Port\-Manager\-::send\-Read\-Request().

\hypertarget{classmdt_frame_aecc64d3846dee0049ee7b10b73a402f4}{\index{mdt\-Frame@{mdt\-Frame}!clear\-Sub@{clear\-Sub}}
\index{clear\-Sub@{clear\-Sub}!mdtFrame@{mdt\-Frame}}
\subsubsection[{clear\-Sub}]{\setlength{\rightskip}{0pt plus 5cm}void mdt\-Frame\-::clear\-Sub (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [virtual]}}}\label{classmdt_frame_aecc64d3846dee0049ee7b10b73a402f4}


\hyperlink{classmdt_frame}{mdt\-Frame} subclass specific clear 

This method is usefull to clear some specific flags and data in subclasses (such as \hyperlink{classmdt_frame_usb_tmc}{mdt\-Frame\-Usb\-Tmc}).

Note that Q\-Byte\-Array's flags and data are not altered.

This method is called from mdt\-Port\-Thread\-::get\-New\-Frame\-Read() . Default implementation does nothing.

This class must be implemented is subclass if needed. 

Reimplemented in \hyperlink{classmdt_frame_usb_control_a04aab4a1e3efd99d805dffd8171e78de}{mdt\-Frame\-Usb\-Control}, \hyperlink{classmdt_frame_usb_tmc_afb0b0e071e328b55ce8e2c73359153d6}{mdt\-Frame\-Usb\-Tmc}, and \hyperlink{classmdt_frame_modbus_tcp_ab1545b25b4c8864056d900c8ddce2719}{mdt\-Frame\-Modbus\-Tcp}.



Definition at line 188 of file mdt\-Frame.\-cpp.



Referenced by mdt\-Port\-Thread\-Helper\-::handle\-Common\-Read\-Errors(), mdt\-Usb\-Port\-::message\-In\-Transfer\-Callback(), and mdt\-Port\-Manager\-::send\-Data().

\hypertarget{classmdt_frame_a0e0dcfb9d284ac0dae550db33f0fbece}{\index{mdt\-Frame@{mdt\-Frame}!eof\-Seq\-Len@{eof\-Seq\-Len}}
\index{eof\-Seq\-Len@{eof\-Seq\-Len}!mdtFrame@{mdt\-Frame}}
\subsubsection[{eof\-Seq\-Len}]{\setlength{\rightskip}{0pt plus 5cm}int mdt\-Frame\-::eof\-Seq\-Len (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [virtual]}}}\label{classmdt_frame_a0e0dcfb9d284ac0dae550db33f0fbece}


Get the length of the end of frame sequence. 

Used for A\-S\-C\-I\-I frames. Default implementation returns 0 

Reimplemented in \hyperlink{classmdt_frame_ascii_a9694c60a807fd2e80e293a66c193baaa}{mdt\-Frame\-Ascii}.



Definition at line 209 of file mdt\-Frame.\-cpp.



Referenced by mdt\-Port\-Thread\-Helper\-::submit\-Readen\-Data().

\hypertarget{classmdt_frame_a2a8fb9f36c941282881bba0c538d1ce5}{\index{mdt\-Frame@{mdt\-Frame}!is\-Complete@{is\-Complete}}
\index{is\-Complete@{is\-Complete}!mdtFrame@{mdt\-Frame}}
\subsubsection[{is\-Complete}]{\setlength{\rightskip}{0pt plus 5cm}bool mdt\-Frame\-::is\-Complete (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
)}}\label{classmdt_frame_a2a8fb9f36c941282881bba0c538d1ce5}


Returns true if E\-O\-F condition was reached. 



Definition at line 174 of file mdt\-Frame.\-cpp.



References pv\-E\-O\-Fcondition.



Referenced by mdt\-Usbtmc\-Port\-Manager\-::from\-Thread\-New\-Frame\-Readen(), mdt\-Modbus\-Tcp\-Port\-Manager\-::from\-Thread\-New\-Frame\-Readen(), mdt\-Port\-Manager\-::from\-Thread\-New\-Frame\-Readen(), and put\-Until().

\hypertarget{classmdt_frame_ab4e0fee7198c94c16f2fa6eb4b6b1562}{\index{mdt\-Frame@{mdt\-Frame}!is\-Full@{is\-Full}}
\index{is\-Full@{is\-Full}!mdtFrame@{mdt\-Frame}}
\subsubsection[{is\-Full}]{\setlength{\rightskip}{0pt plus 5cm}bool mdt\-Frame\-::is\-Full (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
)}}\label{classmdt_frame_ab4e0fee7198c94c16f2fa6eb4b6b1562}


Returns true if frame is full. 



Definition at line 140 of file mdt\-Frame.\-cpp.



References remain\-Capacity().



Referenced by put\-Until().

\hypertarget{classmdt_frame_ae63af784d2fc54430ea5db4dc80b7ec8}{\index{mdt\-Frame@{mdt\-Frame}!put\-Data@{put\-Data}}
\index{put\-Data@{put\-Data}!mdtFrame@{mdt\-Frame}}
\subsubsection[{put\-Data}]{\setlength{\rightskip}{0pt plus 5cm}int mdt\-Frame\-::put\-Data (
\begin{DoxyParamCaption}
\item[{const char $\ast$}]{data, }
\item[{int}]{len}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [virtual]}}}\label{classmdt_frame_ae63af784d2fc54430ea5db4dc80b7ec8}


Put data into the frame. 

Must be implemented by specific frame subclass.

This method is called by the read thread.

Default implementation simply stores data, and set the E\-O\-F condition to true. This way, it's possible to use \hyperlink{classmdt_frame}{mdt\-Frame} for raw binary transfers.


\begin{DoxyParams}{Parameters}
{\em data} & Valid pointer to the data \\
\hline
{\em len} & Maximum number of byte to store, must not be more than data size \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
Number of bytes that could really be stored 
\end{DoxyReturn}
\begin{DoxyPrecond}{Precondition}
The data pointer must be valid, and not be the internal pointer returned by data(). 
\end{DoxyPrecond}


Reimplemented in \hyperlink{classmdt_frame_usb_tmc_a06d2743a113bd2b4cf2ee44014ecd710}{mdt\-Frame\-Usb\-Tmc}, \hyperlink{classmdt_frame_modbus_tcp_a0f684d77c03e5fb91598c9a10715bedb}{mdt\-Frame\-Modbus\-Tcp}, and \hyperlink{classmdt_frame_ascii_a9ef48ef78d9603a9d8c3be7e39b03745}{mdt\-Frame\-Ascii}.



Definition at line 192 of file mdt\-Frame.\-cpp.



References pv\-E\-O\-Fcondition, and remain\-Capacity().



Referenced by mdt\-Port\-Thread\-Helper\-::submit\-Readen\-Data().

\hypertarget{classmdt_frame_af03d60dadc6bd33b3a333cf484463113}{\index{mdt\-Frame@{mdt\-Frame}!put\-Until@{put\-Until}}
\index{put\-Until@{put\-Until}!mdtFrame@{mdt\-Frame}}
\subsubsection[{put\-Until}]{\setlength{\rightskip}{0pt plus 5cm}int mdt\-Frame\-::put\-Until (
\begin{DoxyParamCaption}
\item[{const char $\ast$}]{data, }
\item[{char}]{token, }
\item[{int}]{max\-Len}
\end{DoxyParamCaption}
)}}\label{classmdt_frame_af03d60dadc6bd33b3a333cf484463113}


Put data until E\-O\-F token was reached. 

This function is usefull for A\-S\-C\-I\-I frames reception. Whenn token is reached, the E\-O\-F condition will become true (the E\-O\-F char is not stored).\par
 When the E\-O\-F condition was reached, this function does not store any more data.\par
 Note that this function is slower than Q\-Byte\-Array's append() method, because it compares each byte with the token. 
\begin{DoxyParams}{Parameters}
{\em data} & Pointer to source data \\
\hline
{\em token} & Token that represents the E\-O\-F (End Of Frame) \\
\hline
{\em max\-Len} & Length of the array pointed by data \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
The number of bytes really stored 
\end{DoxyReturn}
\begin{DoxyPrecond}{Precondition}
The data pointer must be valid, and not be the internal pointer returned by data(). 
\end{DoxyPrecond}


Definition at line 41 of file mdt\-Frame.\-cpp.



References is\-Complete(), is\-Full(), pv\-E\-O\-Fcondition, pv\-Ignore\-Null\-Values, and remain\-Capacity().



Referenced by mdt\-Frame\-Ascii\-::put\-Data().

\hypertarget{classmdt_frame_aaa5c15df5aaf026b02f34639438036ad}{\index{mdt\-Frame@{mdt\-Frame}!put\-Until@{put\-Until}}
\index{put\-Until@{put\-Until}!mdtFrame@{mdt\-Frame}}
\subsubsection[{put\-Until}]{\setlength{\rightskip}{0pt plus 5cm}int mdt\-Frame\-::put\-Until (
\begin{DoxyParamCaption}
\item[{const char $\ast$}]{data, }
\item[{Q\-Byte\-Array \&}]{token, }
\item[{int}]{max\-Len}
\end{DoxyParamCaption}
)}}\label{classmdt_frame_aaa5c15df5aaf026b02f34639438036ad}


Put data until E\-O\-F token was reached. 

This is an overloaded function. The token can be a sequence of bytes.

\begin{DoxySeeAlso}{See Also}
\hyperlink{classmdt_frame_af03d60dadc6bd33b3a333cf484463113}{put\-Until()} 
\end{DoxySeeAlso}


Definition at line 88 of file mdt\-Frame.\-cpp.



References is\-Complete(), is\-Full(), pv\-E\-O\-Fcondition, pv\-Ignore\-Null\-Values, and remain\-Capacity().

\hypertarget{classmdt_frame_aa1cd5c914c36efb3f441b7f6e782dc24}{\index{mdt\-Frame@{mdt\-Frame}!remain\-Capacity@{remain\-Capacity}}
\index{remain\-Capacity@{remain\-Capacity}!mdtFrame@{mdt\-Frame}}
\subsubsection[{remain\-Capacity}]{\setlength{\rightskip}{0pt plus 5cm}int mdt\-Frame\-::remain\-Capacity (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
)}}\label{classmdt_frame_aa1cd5c914c36efb3f441b7f6e782dc24}


Returns the remain capacity. 



Definition at line 145 of file mdt\-Frame.\-cpp.



Referenced by bytes\-To\-Store(), is\-Full(), mdt\-Frame\-Modbus\-Tcp\-::put\-Data(), mdt\-Frame\-Usb\-Tmc\-::put\-Data(), put\-Data(), and put\-Until().

\hypertarget{classmdt_frame_ab8db9882c095091109115afb8e448b37}{\index{mdt\-Frame@{mdt\-Frame}!set\-Complete@{set\-Complete}}
\index{set\-Complete@{set\-Complete}!mdtFrame@{mdt\-Frame}}
\subsubsection[{set\-Complete}]{\setlength{\rightskip}{0pt plus 5cm}void mdt\-Frame\-::set\-Complete (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
)}}\label{classmdt_frame_ab8db9882c095091109115afb8e448b37}


Set the frame as complete. 

This is used by \hyperlink{classmdt_port_read_thread}{mdt\-Port\-Read\-Thread} with timeout protocols. 

Definition at line 169 of file mdt\-Frame.\-cpp.



References pv\-E\-O\-Fcondition.

\hypertarget{classmdt_frame_abfd6de396626f01ebf972b7d6cd26957}{\index{mdt\-Frame@{mdt\-Frame}!set\-Directly\-Complete@{set\-Directly\-Complete}}
\index{set\-Directly\-Complete@{set\-Directly\-Complete}!mdtFrame@{mdt\-Frame}}
\subsubsection[{set\-Directly\-Complete}]{\setlength{\rightskip}{0pt plus 5cm}void mdt\-Frame\-::set\-Directly\-Complete (
\begin{DoxyParamCaption}
\item[{bool}]{dc}
\end{DoxyParamCaption}
)}}\label{classmdt_frame_abfd6de396626f01ebf972b7d6cd26957}


Set the complete flag directly. 

This is usefull for raw mode transfert. If true, the frame is set complete after each call of \hyperlink{classmdt_frame_ae63af784d2fc54430ea5db4dc80b7ec8}{put\-Data()}


\begin{DoxyParams}{Parameters}
{\em dc} & The Directly complete flag \\
\hline
\end{DoxyParams}


Definition at line 164 of file mdt\-Frame.\-cpp.



Referenced by mdt\-Abstract\-Port\-::init\-Queues().

\hypertarget{classmdt_frame_ac1a8ad77ce7bd6d08032056c3610d5c0}{\index{mdt\-Frame@{mdt\-Frame}!set\-Ignore\-Null\-Values@{set\-Ignore\-Null\-Values}}
\index{set\-Ignore\-Null\-Values@{set\-Ignore\-Null\-Values}!mdtFrame@{mdt\-Frame}}
\subsubsection[{set\-Ignore\-Null\-Values}]{\setlength{\rightskip}{0pt plus 5cm}void mdt\-Frame\-::set\-Ignore\-Null\-Values (
\begin{DoxyParamCaption}
\item[{bool}]{ignore\-Null\-Values}
\end{DoxyParamCaption}
)}}\label{classmdt_frame_ac1a8ad77ce7bd6d08032056c3610d5c0}


Set the ignore null values flag. 

If set true, all null values ('\textbackslash{}0' or 0) are not stored by \hyperlink{classmdt_frame_af03d60dadc6bd33b3a333cf484463113}{put\-Until()} methods 

Definition at line 36 of file mdt\-Frame.\-cpp.



References pv\-Ignore\-Null\-Values.

\hypertarget{classmdt_frame_a3b9a331858df9061879592fab1b346f5}{\index{mdt\-Frame@{mdt\-Frame}!set\-Wait\-An\-Answer@{set\-Wait\-An\-Answer}}
\index{set\-Wait\-An\-Answer@{set\-Wait\-An\-Answer}!mdtFrame@{mdt\-Frame}}
\subsubsection[{set\-Wait\-An\-Answer}]{\setlength{\rightskip}{0pt plus 5cm}void mdt\-Frame\-::set\-Wait\-An\-Answer (
\begin{DoxyParamCaption}
\item[{bool}]{wait}
\end{DoxyParamCaption}
)}}\label{classmdt_frame_a3b9a331858df9061879592fab1b346f5}


Tell a write/read thread that an answer is needed after a write frame. 

In some case, typically U\-S\-B, the host must allways init a transaction, for read and for write. For such case, only one thread manages the write/read process\-:
\begin{DoxyItemize}
\item Wait until a frame must be sent (can be bypassed with a flag)
\item Init a write transaction, wait until transaction is finish
\item Init a read transaction, wait until something was readen. The last step can be a problem if we have to write a frame (f.\-ex. a query), but not need an answer. After that, we have to send a second query, but need wait until data was received.
\end{DoxyItemize}

To solve this problem, we must tell the thread if it must init a read transaction after a frame was written (request) or not, and this is the goal of this method.

\begin{DoxySeeAlso}{See Also}
\hyperlink{classmdt_usb_port_thread}{mdt\-Usb\-Port\-Thread} 
\end{DoxySeeAlso}


Definition at line 246 of file mdt\-Frame.\-cpp.



References pv\-Wait\-An\-Answer.



Referenced by mdt\-Usbtmc\-Port\-Manager\-::send\-Data(), mdt\-Modbus\-Tcp\-Port\-Manager\-::send\-Data(), and mdt\-Usbtmc\-Port\-Manager\-::send\-Read\-Request().

\hypertarget{classmdt_frame_a36e4b85a3c671902ac3c8cc318ca726c}{\index{mdt\-Frame@{mdt\-Frame}!take@{take}}
\index{take@{take}!mdtFrame@{mdt\-Frame}}
\subsubsection[{take}]{\setlength{\rightskip}{0pt plus 5cm}int mdt\-Frame\-::take (
\begin{DoxyParamCaption}
\item[{char $\ast$}]{data, }
\item[{int}]{len}
\end{DoxyParamCaption}
)}}\label{classmdt_frame_a36e4b85a3c671902ac3c8cc318ca726c}


Take some data. 


\begin{DoxyParams}{Parameters}
{\em data} & Pointer to data destination \\
\hline
{\em len} & Number of bytes to take \\
\hline
\end{DoxyParams}
\begin{DoxyPrecond}{Precondition}
The data pointer must be valid, and not be the internal pointer returned by data(). 
\end{DoxyPrecond}


Definition at line 214 of file mdt\-Frame.\-cpp.



Referenced by mdt\-Port\-Thread\-Helper\-Port\-::write\-Data\-To\-Port().

\hypertarget{classmdt_frame_ad8b184e6eb07a26fe84deaf233c1aa9b}{\index{mdt\-Frame@{mdt\-Frame}!take@{take}}
\index{take@{take}!mdtFrame@{mdt\-Frame}}
\subsubsection[{take}]{\setlength{\rightskip}{0pt plus 5cm}int mdt\-Frame\-::take (
\begin{DoxyParamCaption}
\item[{int}]{len}
\end{DoxyParamCaption}
)}}\label{classmdt_frame_ad8b184e6eb07a26fe84deaf233c1aa9b}


Take some data. 

This method does not copy any data, but is usefull after a copy using Q\-Byte\-Array\-::data() . The consumed bytes are removed from frame 
\begin{DoxyParams}{Parameters}
{\em data} & Pointer to data destination \\
\hline
{\em len} & Number of bytes to take \\
\hline
\end{DoxyParams}
\begin{DoxyPrecond}{Precondition}
The data pointer must be valid, and not be the internal pointer returned by data(). 
\end{DoxyPrecond}


Definition at line 232 of file mdt\-Frame.\-cpp.

\hypertarget{classmdt_frame_ab27455f2fa3415a96482786c0ec27e55}{\index{mdt\-Frame@{mdt\-Frame}!wait\-An\-Answer@{wait\-An\-Answer}}
\index{wait\-An\-Answer@{wait\-An\-Answer}!mdtFrame@{mdt\-Frame}}
\subsubsection[{wait\-An\-Answer}]{\setlength{\rightskip}{0pt plus 5cm}bool mdt\-Frame\-::wait\-An\-Answer (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
) const}}\label{classmdt_frame_ab27455f2fa3415a96482786c0ec27e55}


Know if an answer is needed after a write frame. 

\begin{DoxySeeAlso}{See Also}
\hyperlink{classmdt_frame_a3b9a331858df9061879592fab1b346f5}{set\-Wait\-An\-Answer()} 
\end{DoxySeeAlso}


Definition at line 251 of file mdt\-Frame.\-cpp.



References pv\-Wait\-An\-Answer.



\subsection{Member Data Documentation}
\hypertarget{classmdt_frame_a1862e197bad6e9887cfedc54a768e88d}{\index{mdt\-Frame@{mdt\-Frame}!pv\-E\-O\-Fcondition@{pv\-E\-O\-Fcondition}}
\index{pv\-E\-O\-Fcondition@{pv\-E\-O\-Fcondition}!mdtFrame@{mdt\-Frame}}
\subsubsection[{pv\-E\-O\-Fcondition}]{\setlength{\rightskip}{0pt plus 5cm}bool mdt\-Frame\-::pv\-E\-O\-Fcondition\hspace{0.3cm}{\ttfamily [protected]}}}\label{classmdt_frame_a1862e197bad6e9887cfedc54a768e88d}


Definition at line 214 of file mdt\-Frame.\-h.



Referenced by bytes\-To\-Store(), clear(), is\-Complete(), mdt\-Frame(), mdt\-Frame\-Modbus\-Tcp\-::put\-Data(), mdt\-Frame\-Usb\-Tmc\-::put\-Data(), put\-Data(), put\-Until(), and set\-Complete().

\hypertarget{classmdt_frame_a883c4de8f2c961310366d5a72b6e6dd8}{\index{mdt\-Frame@{mdt\-Frame}!pv\-Ignore\-Null\-Values@{pv\-Ignore\-Null\-Values}}
\index{pv\-Ignore\-Null\-Values@{pv\-Ignore\-Null\-Values}!mdtFrame@{mdt\-Frame}}
\subsubsection[{pv\-Ignore\-Null\-Values}]{\setlength{\rightskip}{0pt plus 5cm}bool mdt\-Frame\-::pv\-Ignore\-Null\-Values\hspace{0.3cm}{\ttfamily [protected]}}}\label{classmdt_frame_a883c4de8f2c961310366d5a72b6e6dd8}


Definition at line 213 of file mdt\-Frame.\-h.



Referenced by mdt\-Frame(), put\-Until(), and set\-Ignore\-Null\-Values().

\hypertarget{classmdt_frame_aac030954a872c41f7fb917912e16a77f}{\index{mdt\-Frame@{mdt\-Frame}!pv\-Wait\-An\-Answer@{pv\-Wait\-An\-Answer}}
\index{pv\-Wait\-An\-Answer@{pv\-Wait\-An\-Answer}!mdtFrame@{mdt\-Frame}}
\subsubsection[{pv\-Wait\-An\-Answer}]{\setlength{\rightskip}{0pt plus 5cm}bool mdt\-Frame\-::pv\-Wait\-An\-Answer\hspace{0.3cm}{\ttfamily [protected]}}}\label{classmdt_frame_aac030954a872c41f7fb917912e16a77f}


Definition at line 215 of file mdt\-Frame.\-h.



Referenced by mdt\-Frame(), set\-Wait\-An\-Answer(), and wait\-An\-Answer().



The documentation for this class was generated from the following files\-:\begin{DoxyCompactItemize}
\item 
src/mdtutils/\hyperlink{mdt_frame_8h}{mdt\-Frame.\-h}\item 
src/mdtutils/\hyperlink{mdt_frame_8cpp}{mdt\-Frame.\-cpp}\end{DoxyCompactItemize}
