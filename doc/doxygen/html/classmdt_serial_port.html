<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>Multi diag tools: mdtSerialPort Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body onload='searchBox.OnSelectItem(0);'>
<!-- Generated by Doxygen 1.7.4 -->
<script type="text/javascript"><!--
var searchBox = new SearchBox("searchBox", "search",false,'Search');
--></script>
<div id="top">
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">Multi diag tools</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li class="current"><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li id="searchli">
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="annotated.html"><span>Class&#160;List</span></a></li>
      <li><a href="classes.html"><span>Class&#160;Index</span></a></li>
      <li><a href="inherits.html"><span>Class&#160;Hierarchy</span></a></li>
      <li><a href="functions.html"><span>Class&#160;Members</span></a></li>
    </ul>
  </div>
</div>
<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a>  </div>
  <div class="headertitle">
<div class="title">mdtSerialPort Class Reference</div>  </div>
</div>
<div class="contents">
<!-- doxytag: class="mdtSerialPort" --><!-- doxytag: inherits="mdtAbstractSerialPort" --><div class="dynheader">
Inheritance diagram for mdtSerialPort:</div>
<div class="dyncontent">
<div class="center"><img src="classmdt_serial_port__inherit__graph.png" border="0" usemap="#mdt_serial_port_inherit__map" alt="Inheritance graph"/></div>
<map name="mdt_serial_port_inherit__map" id="mdt_serial_port_inherit__map">
<area shape="rect" id="node2" href="classmdt_abstract_serial_port.html" title="NOTE:" alt="" coords="5,83,155,112"/><area shape="rect" id="node4" href="classmdt_abstract_port.html" title="NOTE: file/port lock must be implemented ! (see Qt solution ? , sa: GtkTerm)" alt="" coords="21,5,139,35"/></map>
<center><span class="legend">[<a href="graph_legend.html">legend</a>]</span></center></div>
<div class="dynheader">
Collaboration diagram for mdtSerialPort:</div>
<div class="dyncontent">
<div class="center"><img src="classmdt_serial_port__coll__graph.png" border="0" usemap="#mdt_serial_port_coll__map" alt="Collaboration graph"/></div>
<map name="mdt_serial_port_coll__map" id="mdt_serial_port_coll__map">
<area shape="rect" id="node2" href="classmdt_abstract_serial_port.html" title="NOTE:" alt="" coords="5,181,155,211"/><area shape="rect" id="node4" href="classmdt_abstract_port.html" title="NOTE: file/port lock must be implemented ! (see Qt solution ? , sa: GtkTerm)" alt="" coords="21,101,139,131"/><area shape="rect" id="node6" href="classmdt_port_config.html" title="mdtPortConfig" alt="" coords="27,5,133,35"/><area shape="rect" id="node8" href="classmdt_port_lock.html" title="NOTE:" alt="" coords="179,181,275,211"/></map>
<center><span class="legend">[<a href="graph_legend.html">legend</a>]</span></center></div>

<p><a href="classmdt_serial_port-members.html">List of all members.</a></p>
<table class="memberdecls">
<tr><td colspan="2"><h2><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a7b2da083885e727981c1fd4414634cae"></a><!-- doxytag: member="mdtSerialPort::mdtSerialPort" ref="a7b2da083885e727981c1fd4414634cae" args="(QObject *parent=0)" -->
&#160;</td><td class="memItemRight" valign="bottom"><b>mdtSerialPort</b> (QObject *parent=0)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="classmdt_abstract_port.html#ad4121bb930c95887e77f8bafa065a85e">error_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmdt_serial_port.html#a75750b52566e8448ee2eef649903fdb0">tryOpen</a> ()</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">TODO:  <a href="#a75750b52566e8448ee2eef649903fdb0"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmdt_serial_port.html#ab045c382aa6bafd26a9c77ffc731c9ff">setAttributes</a> (const QString &amp;portName)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">NOTE:  <a href="#ab045c382aa6bafd26a9c77ffc731c9ff"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmdt_serial_port.html#a523cc099b9fff06c46ce1c251646ca20">open</a> (<a class="el" href="classmdt_serial_port_config.html">mdtSerialPortConfig</a> &amp;cfg)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Open the port.  <a href="#a523cc099b9fff06c46ce1c251646ca20"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmdt_serial_port.html#a9ce6490af9ecba3bbc8a8e7de44c3f95">close</a> ()</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Close the port.  <a href="#a9ce6490af9ecba3bbc8a8e7de44c3f95"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmdt_serial_port.html#a9105e5a3a640b56097c1156000ace933">setReadTimeout</a> (int timeout)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Set the read data timeout.  <a href="#a9105e5a3a640b56097c1156000ace933"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmdt_serial_port.html#a036f49d743838013c9a8cbf6a1dd40d1">setWriteTimeout</a> (int timeout)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Set the write data timeout.  <a href="#a036f49d743838013c9a8cbf6a1dd40d1"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmdt_serial_port.html#a0334aa073299f6161034e6be7c60939d">waitForReadyRead</a> ()</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Wait until data is available on port.  <a href="#a0334aa073299f6161034e6be7c60939d"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">qint64&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmdt_serial_port.html#a12274d7956b2af961ccdd36cfc2052cc">read</a> (char *data, qint64 maxSize)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Read data from port.  <a href="#a12274d7956b2af961ccdd36cfc2052cc"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmdt_serial_port.html#a9412faf413eca5ee3516139fdfaaf2fe">suspendTransmission</a> ()</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Request to suspend transmission.  <a href="#a9412faf413eca5ee3516139fdfaaf2fe"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmdt_serial_port.html#a02fd5ee74a7f52c3bce0545ec8a659bf">resumeTransmission</a> ()</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Request to resume transmission.  <a href="#a02fd5ee74a7f52c3bce0545ec8a659bf"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmdt_serial_port.html#a597d013bbe18b1f946b99f68a4856a87">flushIn</a> ()</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Flush read buffers.  <a href="#a597d013bbe18b1f946b99f68a4856a87"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmdt_serial_port.html#a815275951e5834daf5068ffb48fcdcb3">waitEventWriteReady</a> ()</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Wait until data can be written to port.  <a href="#a815275951e5834daf5068ffb48fcdcb3"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">qint64&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmdt_serial_port.html#a282f99035c032fbb6fa86ccd10deb597">write</a> (const char *data, qint64 maxSize)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Write data to port.  <a href="#a282f99035c032fbb6fa86ccd10deb597"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmdt_serial_port.html#a3a446c34c9f98e0c14637ab3dcab98d0">flushOut</a> ()</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Flush write buffers.  <a href="#a3a446c34c9f98e0c14637ab3dcab98d0"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmdt_serial_port.html#acc51ca593b4592f806ef4b9791486f47">waitEventCtl</a> ()</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Wait until a control (modem line) signal state changes.  <a href="#acc51ca593b4592f806ef4b9791486f47"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmdt_serial_port.html#a7893e1817fe5fc59c77ee6f3b9f13ae7">getCtlStates</a> ()</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">NOTE:  <a href="#a7893e1817fe5fc59c77ee6f3b9f13ae7"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmdt_serial_port.html#af0534e9f2e25b44a1a127d2a34b409fb">setRts</a> (bool on)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Enable/diseable the RTS (Request To Send) signal.  <a href="#af0534e9f2e25b44a1a127d2a34b409fb"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmdt_serial_port.html#a91ec8a600f09b6844d36902fe1e16592">setDtr</a> (bool on)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Enable/diseable the DTR (Data Terminal Ready) signal.  <a href="#a91ec8a600f09b6844d36902fe1e16592"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a04af6b916a955579a5317d5b76c2f643"></a><!-- doxytag: member="mdtSerialPort::defineCtlThread" ref="a04af6b916a955579a5317d5b76c2f643" args="(pthread_t ctlThread)" -->
void&#160;</td><td class="memItemRight" valign="bottom"><b>defineCtlThread</b> (pthread_t ctlThread)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="aed3a5a75d5c83d4901f0cb6e0e82e289"></a><!-- doxytag: member="mdtSerialPort::abortWaitEventCtl" ref="aed3a5a75d5c83d4901f0cb6e0e82e289" args="()" -->
void&#160;</td><td class="memItemRight" valign="bottom"><b>abortWaitEventCtl</b> ()</td></tr>
</table>
<hr/><h2>Member Function Documentation</h2>
<a class="anchor" id="a9ce6490af9ecba3bbc8a8e7de44c3f95"></a><!-- doxytag: member="mdtSerialPort::close" ref="a9ce6490af9ecba3bbc8a8e7de44c3f95" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void mdtSerialPort::close </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Close the port. </p>
<p>Subclass notes:<br/>
 This method must be re-implemented in subclass.<br/>
 To handle the port correctly, the subclass method must:</p>
<ul>
<li>Check if port is open with <a class="el" href="classmdt_abstract_port.html#a53affce84400ed1519db93ccc79888f9" title="Get port&#39;s open state.">isOpen()</a> , if false, simply return.</li>
<li>Lock the mutex with <a class="el" href="classmdt_abstract_port.html#a6bf2ecdcf894da3929a22eb8793a9fe3" title="Lock the mutex.">lockMutex()</a></li>
<li>Do the specific work</li>
<li>Call this close method (with <a class="el" href="classmdt_abstract_port.html#a1ace1a2bd1a04f16952980e247b04800" title="Close the port.">mdtAbstractPort::close()</a> ). At this last step, the queues will be deleted, mutex unocked and open flag updated. </li>
</ul>

<p>Reimplemented from <a class="el" href="classmdt_abstract_port.html#a1ace1a2bd1a04f16952980e247b04800">mdtAbstractPort</a>.</p>

</div>
</div>
<a class="anchor" id="a597d013bbe18b1f946b99f68a4856a87"></a><!-- doxytag: member="mdtSerialPort::flushIn" ref="a597d013bbe18b1f946b99f68a4856a87" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void mdtSerialPort::flushIn </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Flush read buffers. </p>
<p>Subclass notes:<br/>
 This method must be implemented in subclass.<br/>
 To handle port correctly, subclass must:</p>
<ul>
<li>Lock the mutex with <a class="el" href="classmdt_abstract_port.html#a6bf2ecdcf894da3929a22eb8793a9fe3" title="Lock the mutex.">lockMutex()</a></li>
<li>Call specific system flush function</li>
<li>Call this flush method ( with <a class="el" href="classmdt_abstract_port.html#a32329b4188db796401e4f454755acb44" title="Flush read buffers.">mdtAbstractPort::flushIn()</a> ). The last step will move all pending frames to read pool.<br/>
 Note: if subclass has nothing to do it must lock the mutex and call this method. </li>
</ul>

<p>Reimplemented from <a class="el" href="classmdt_abstract_port.html#a32329b4188db796401e4f454755acb44">mdtAbstractPort</a>.</p>

</div>
</div>
<a class="anchor" id="a3a446c34c9f98e0c14637ab3dcab98d0"></a><!-- doxytag: member="mdtSerialPort::flushOut" ref="a3a446c34c9f98e0c14637ab3dcab98d0" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void mdtSerialPort::flushOut </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Flush write buffers. </p>
<p>Subclass notes:<br/>
 This method must be implemented in subclass.<br/>
 To handle port correctly, subclass must:</p>
<ul>
<li>Lock the mutex with <a class="el" href="classmdt_abstract_port.html#a6bf2ecdcf894da3929a22eb8793a9fe3" title="Lock the mutex.">lockMutex()</a></li>
<li>Call specific system flush function</li>
<li>Call this flush method ( with <a class="el" href="classmdt_abstract_port.html#ad199c6310801893f1f7de2a2391606fc" title="Flush write buffers.">mdtAbstractPort::flushOut()</a> ). The last step will move all pending frames to read pool.<br/>
 Note: if subclass has nothing to do it must lock the mutex and call this method. </li>
</ul>

<p>Reimplemented from <a class="el" href="classmdt_abstract_port.html#ad199c6310801893f1f7de2a2391606fc">mdtAbstractPort</a>.</p>

</div>
</div>
<a class="anchor" id="a7893e1817fe5fc59c77ee6f3b9f13ae7"></a><!-- doxytag: member="mdtSerialPort::getCtlStates" ref="a7893e1817fe5fc59c77ee6f3b9f13ae7" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool mdtSerialPort::getCtlStates </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>NOTE: </p>
<dl class="todo"><dt><b><a class="el" href="todo.html#_todo000012">Todo:</a></b></dt><dd>Update name to : updateCtlStates ? </dd></dl>
<p>Get the control (modem line) signal states and update member flags</p>
<p>This method must be re-implemented in plateform specific subclass. </p>
<dl class="return"><dt><b>Returns:</b></dt><dd>False on error, in this case, the thread will be stopped. </dd></dl>

<p>Implements <a class="el" href="classmdt_abstract_serial_port.html#aaeacd26b220ab0f8c521cef74edfafdd">mdtAbstractSerialPort</a>.</p>

</div>
</div>
<a class="anchor" id="a523cc099b9fff06c46ce1c251646ca20"></a><!-- doxytag: member="mdtSerialPort::open" ref="a523cc099b9fff06c46ce1c251646ca20" args="(mdtSerialPortConfig &amp;cfg)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool mdtSerialPort::open </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classmdt_serial_port_config.html">mdtSerialPortConfig</a> &amp;&#160;</td>
          <td class="paramname"><em>cfg</em></td><td>)</td>
          <td><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Open the port. </p>
<p>This method must be re-implemented in subclass.<br/>
 To handle the port correctly, the subclass method must:</p>
<ul>
<li>Close previous opened ressource</li>
<li>Lock the mutex with <a class="el" href="classmdt_abstract_port.html#a6bf2ecdcf894da3929a22eb8793a9fe3" title="Lock the mutex.">lockMutex()</a></li>
<li>Do the specific work</li>
<li>Set the read/write timeouts. See the <a class="el" href="classmdt_serial_port_config.html">mdtSerialPortConfig</a> to know how to get these timeouts.</li>
<li>Call this open method (with <a class="el" href="classmdt_abstract_port.html#a4a8195c2bf580eb69ad5d90de86798e6" title="Set the port attributes.">mdtAbstractPort::open()</a> ). At this last step, the queues will be initialized, and mutex unocked. <dl class="return"><dt><b>Returns:</b></dt><dd>True on successfull configuration and open port </dd></dl>
<dl class="see"><dt><b>See also:</b></dt><dd><a class="el" href="classmdt_port_config.html">mdtPortConfig</a> </dd></dl>
</li>
</ul>

<p><p>if(cfg.readOnly()){ pvFd = ::open(pvPortName.toStdString().c_str(), O_RDONLY | O_NOCTTY | O_NONBLOCK); }else{ pvFd = pvPortLock-&gt;openLocked(pvPortName, O_RDWR | O_NOCTTY | O_NONBLOCK); }</p>
</p>

<p>Implements <a class="el" href="classmdt_abstract_serial_port.html#ad96a99c370c87d7e4a8b47f98cc7ce35">mdtAbstractSerialPort</a>.</p>

</div>
</div>
<a class="anchor" id="a12274d7956b2af961ccdd36cfc2052cc"></a><!-- doxytag: member="mdtSerialPort::read" ref="a12274d7956b2af961ccdd36cfc2052cc" args="(char *data, qint64 maxSize)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">qint64 mdtSerialPort::read </td>
          <td>(</td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>data</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">qint64&#160;</td>
          <td class="paramname"><em>maxSize</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Read data from port. </p>
<p>This method is called from <a class="el" href="classmdt_port_read_thread.html" title="Reader thread for port I/O.">mdtPortReadThread</a> , and should not be used directly.</p>
<p>Subclass notes:<br/>
 This method must be implemented in subclass.<br/>
 Mutex is not handled by this method.</p>
<dl class="return"><dt><b>Returns:</b></dt><dd>Number of bytes readen, or a error &lt; 0 </dd></dl>

<p>Implements <a class="el" href="classmdt_abstract_port.html#a9d9c45220d5328c9856a2445557fe970">mdtAbstractPort</a>.</p>

</div>
</div>
<a class="anchor" id="a02fd5ee74a7f52c3bce0545ec8a659bf"></a><!-- doxytag: member="mdtSerialPort::resumeTransmission" ref="a02fd5ee74a7f52c3bce0545ec8a659bf" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool mdtSerialPort::resumeTransmission </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Request to resume transmission. </p>
<p>This method is called from <a class="el" href="classmdt_port_read_thread.html" title="Reader thread for port I/O.">mdtPortReadThread</a> , and should not be used directly.<br/>
 Mutex is not handled by this method.</p>
<p>Subclass notes:<br/>
 This method must be implemented in subclass if requierd.<br/>
 Note about serial port subclass:<br/>
 the right flow control must be used regarding enabled flow control.<br/>
 Default implementation does nothing.<br/>
</p>
<dl class="return"><dt><b>Returns:</b></dt><dd>False on error, in this case, the reader thread will be stopped. </dd></dl>

<p>Reimplemented from <a class="el" href="classmdt_abstract_port.html#ad4a04c995df881593db0a309000be7a7">mdtAbstractPort</a>.</p>

</div>
</div>
<a class="anchor" id="ab045c382aa6bafd26a9c77ffc731c9ff"></a><!-- doxytag: member="mdtSerialPort::setAttributes" ref="ab045c382aa6bafd26a9c77ffc731c9ff" args="(const QString &amp;portName)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool mdtSerialPort::setAttributes </td>
          <td>(</td>
          <td class="paramtype">const QString &amp;&#160;</td>
          <td class="paramname"><em>portName</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>NOTE: </p>
<dl class="todo"><dt><b><a class="el" href="todo.html#_todo000009">Todo:</a></b></dt><dd>Split functions and remove this </dd></dl>

</div>
</div>
<a class="anchor" id="a91ec8a600f09b6844d36902fe1e16592"></a><!-- doxytag: member="mdtSerialPort::setDtr" ref="a91ec8a600f09b6844d36902fe1e16592" args="(bool on)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void mdtSerialPort::setDtr </td>
          <td>(</td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>on</em></td><td>)</td>
          <td><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Enable/diseable the DTR (Data Terminal Ready) signal. </p>
<p>This method must be re-implemented in plateform specific subclass.<br/>
 If port is not open, this method must make no system call.<br/>
 The mutex is handled in this method.</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">on</td><td>If true, DTR will be enabled, diseabled else </td></tr>
  </table>
  </dd>
</dl>

<p>Implements <a class="el" href="classmdt_abstract_serial_port.html#aa86a8bc0bb03ac2b07bf43968dfeb189">mdtAbstractSerialPort</a>.</p>

</div>
</div>
<a class="anchor" id="a9105e5a3a640b56097c1156000ace933"></a><!-- doxytag: member="mdtSerialPort::setReadTimeout" ref="a9105e5a3a640b56097c1156000ace933" args="(int timeout)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void mdtSerialPort::setReadTimeout </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>timeout</em></td><td>)</td>
          <td><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Set the read data timeout. </p>
<p>Subclass notes:<br/>
 This method must be re-implemented in subclass. The subclass can convert and store the value in system specific type (f.ex: timeval struct on Posix) </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">timeout</td><td>Timeout [ms] </td></tr>
  </table>
  </dd>
</dl>

<p>Implements <a class="el" href="classmdt_abstract_port.html#a6589b04467e0073d18ba872201bdcd84">mdtAbstractPort</a>.</p>

</div>
</div>
<a class="anchor" id="af0534e9f2e25b44a1a127d2a34b409fb"></a><!-- doxytag: member="mdtSerialPort::setRts" ref="af0534e9f2e25b44a1a127d2a34b409fb" args="(bool on)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void mdtSerialPort::setRts </td>
          <td>(</td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>on</em></td><td>)</td>
          <td><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Enable/diseable the RTS (Request To Send) signal. </p>
<p>This method must be re-implemented in plateform specific subclass.<br/>
 If port is not open, this method must make no system call.<br/>
 The mutex is handled in this method.</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">on</td><td>If true, RTS will be enabled, diseabled else </td></tr>
  </table>
  </dd>
</dl>

<p>Implements <a class="el" href="classmdt_abstract_serial_port.html#a0ef2426fbd1afbcb0701f327cc16a7cc">mdtAbstractSerialPort</a>.</p>

</div>
</div>
<a class="anchor" id="a036f49d743838013c9a8cbf6a1dd40d1"></a><!-- doxytag: member="mdtSerialPort::setWriteTimeout" ref="a036f49d743838013c9a8cbf6a1dd40d1" args="(int timeout)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void mdtSerialPort::setWriteTimeout </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>timeout</em></td><td>)</td>
          <td><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Set the write data timeout. </p>
<p>Subclass notes:<br/>
 This method must be re-implemented in subclass. The subclass can convert and store the value in system specific type (f.ex: timeval struct on Posix) </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">timeout</td><td>Timeout [ms] </td></tr>
  </table>
  </dd>
</dl>

<p>Implements <a class="el" href="classmdt_abstract_port.html#a12eb422d52ebb09a650f8497b258c2e7">mdtAbstractPort</a>.</p>

</div>
</div>
<a class="anchor" id="a9412faf413eca5ee3516139fdfaaf2fe"></a><!-- doxytag: member="mdtSerialPort::suspendTransmission" ref="a9412faf413eca5ee3516139fdfaaf2fe" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool mdtSerialPort::suspendTransmission </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Request to suspend transmission. </p>
<p>This method is called from <a class="el" href="classmdt_port_read_thread.html" title="Reader thread for port I/O.">mdtPortReadThread</a> , and should not be used directly.<br/>
 Mutex is not handled by this method.</p>
<p>Subclass notes:<br/>
 This method must be implemented in subclass if requierd.<br/>
 Note about serial port subclass:<br/>
 the right flow control must be used regarding enabled flow control.<br/>
 Default implementation does nothing.<br/>
</p>
<dl class="return"><dt><b>Returns:</b></dt><dd>False on error, in this case, the reader thread will be stopped. </dd></dl>

<p>Reimplemented from <a class="el" href="classmdt_abstract_port.html#aff3d79248baf96e670eba6d2fef700b9">mdtAbstractPort</a>.</p>

</div>
</div>
<a class="anchor" id="a75750b52566e8448ee2eef649903fdb0"></a><!-- doxytag: member="mdtSerialPort::tryOpen" ref="a75750b52566e8448ee2eef649903fdb0" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classmdt_abstract_port.html#ad4121bb930c95887e77f8bafa065a85e">mdtAbstractPort::error_t</a> mdtSerialPort::tryOpen </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>TODO: </p>
<dl class="todo"><dt><b><a class="el" href="todo.html#_todo000010">Todo:</a></b></dt><dd>activate and implement in all subclasses. </dd></dl>
<p>Try to open port.</p>
<p>Try to open port set by <a class="el" href="classmdt_abstract_port.html#a0ca143d32fc677bac7c1cf0e04144932" title="Set the port name.">setPortName()</a>. This can be usefull to enumerate real available ports on system. If port can be open successfull, NoError code is returned, and port is closed again. Note that the mutex is not handled in this method. </p>
<dl class="pre"><dt><b>Precondition:</b></dt><dd>The port must not be open whenn calling this method.</dd></dl>
<p>Subclass notes:<br/>
 This method must be implemented in subclass. To handle the port correctly, the subclass method must:</p>
<ul>
<li>Call the appropriate open function</li>
<li>Return the correct error code on failure (see the error_t enum)</li>
<li>Be sure that the port is closed again before return.</li>
<li>The <a class="el" href="classmdt_error.html">mdtError</a> system should be used to keep trace in logfile. </li>
</ul>

<p><p>pvFd = ::open(pvPortName.toStdString().c_str(), O_RDWR); </p>
</p>

<p>Implements <a class="el" href="classmdt_abstract_port.html#a44d2d57b118d2b1f7a0041fcf84958ac">mdtAbstractPort</a>.</p>

</div>
</div>
<a class="anchor" id="acc51ca593b4592f806ef4b9791486f47"></a><!-- doxytag: member="mdtSerialPort::waitEventCtl" ref="acc51ca593b4592f806ef4b9791486f47" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool mdtSerialPort::waitEventCtl </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Wait until a control (modem line) signal state changes. </p>
<p>This method must be re-implemented in plateform specific subclass.</p>
<dl class="return"><dt><b>Returns:</b></dt><dd>False on error, in this case, the thread will be stopped. </dd></dl>

<p>Implements <a class="el" href="classmdt_abstract_serial_port.html#ac27d1224db349bcf7f161329b5f53efb">mdtAbstractSerialPort</a>.</p>

</div>
</div>
<a class="anchor" id="a815275951e5834daf5068ffb48fcdcb3"></a><!-- doxytag: member="mdtSerialPort::waitEventWriteReady" ref="a815275951e5834daf5068ffb48fcdcb3" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool mdtSerialPort::waitEventWriteReady </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Wait until data can be written to port. </p>
<p>This method is called from <a class="el" href="classmdt_port_write_thread.html">mdtPortWriteThread</a> , and should not be used directly.<br/>
 Mutex must be locked before calling this method with <a class="el" href="classmdt_abstract_port.html#a6bf2ecdcf894da3929a22eb8793a9fe3" title="Lock the mutex.">lockMutex()</a>. The mutex is locked when method returns.</p>
<p>Subclass notes:<br/>
 This method must be re-implemented in subclass.<br/>
 Notes about mutex handling:</p>
<ul>
<li>Mutex must be released during wait, and relocked befor return.</li>
</ul>
<dl class="return"><dt><b>Returns:</b></dt><dd>False on error, in this case, the reader thread will be stopped. </dd></dl>

<p>Implements <a class="el" href="classmdt_abstract_port.html#a7773bc21c63ce6a275f5a0889935ac83">mdtAbstractPort</a>.</p>

</div>
</div>
<a class="anchor" id="a0334aa073299f6161034e6be7c60939d"></a><!-- doxytag: member="mdtSerialPort::waitForReadyRead" ref="a0334aa073299f6161034e6be7c60939d" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool mdtSerialPort::waitForReadyRead </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Wait until data is available on port. </p>
<p>This method is called from <a class="el" href="classmdt_port_read_thread.html" title="Reader thread for port I/O.">mdtPortReadThread</a> , and should not be used directly.<br/>
 Mutex must be locked before calling this method with <a class="el" href="classmdt_abstract_port.html#a6bf2ecdcf894da3929a22eb8793a9fe3" title="Lock the mutex.">lockMutex()</a>. The mutex is locked when method returns.</p>
<p>Subclass notes:<br/>
 This method must be re-implemented in subclass. The read timeout state must be updated with <a class="el" href="classmdt_abstract_port.html#a0fc7317e988d5dea53a999cd1bf4faa9" title="Update the read timeout state.">updateReadTimeoutState()</a><br/>
 Notes about mutex handling:</p>
<ul>
<li>Mutex must be released during wait, and relocked befor return.</li>
</ul>
<dl class="return"><dt><b>Returns:</b></dt><dd>False on error, in this case, the reader thread will emit errorOccured()</dd></dl>
<dl class="see"><dt><b>See also:</b></dt><dd><a class="el" href="classmdt_port_thread.html">mdtPortThread</a> </dd>
<dd>
<a class="el" href="classmdt_port_config.html">mdtPortConfig</a> </dd>
<dd>
<a class="el" href="classmdt_tcp_socket_thread.html">mdtTcpSocketThread</a> </dd></dl>

<p>Implements <a class="el" href="classmdt_abstract_port.html#a848e3c86aa6ec480e8c471655fbcf5c5">mdtAbstractPort</a>.</p>

</div>
</div>
<a class="anchor" id="a282f99035c032fbb6fa86ccd10deb597"></a><!-- doxytag: member="mdtSerialPort::write" ref="a282f99035c032fbb6fa86ccd10deb597" args="(const char *data, qint64 maxSize)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">qint64 mdtSerialPort::write </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>data</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">qint64&#160;</td>
          <td class="paramname"><em>maxSize</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Write data to port. </p>
<p>This method is called from <a class="el" href="classmdt_port_write_thread.html">mdtPortWriteThread</a> , and should not be used directly. Mutex is not handled by this method.</p>
<p>Subclass notes:<br/>
 This method must be implemented in subclass.<br/>
</p>
<dl class="return"><dt><b>Returns:</b></dt><dd>Number of bytes written, or &lt;0 on error </dd></dl>

<p>Implements <a class="el" href="classmdt_abstract_port.html#a64d4802975a76474b9196c91f57a6d90">mdtAbstractPort</a>.</p>

</div>
</div>
<hr/>The documentation for this class was generated from the following files:<ul>
<li>src/mdtserialport/linux/<a class="el" href="mdt_serial_port_8h_source.html">mdtSerialPort.h</a></li>
<li>src/mdtserialport/linux/mdtSerialPort.cpp</li>
</ul>
</div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Classes</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Namespaces</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Enumerator</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<hr class="footer"/><address class="footer"><small>Generated on Tue Jul 24 2012 20:17:49 for Multi diag tools by&#160;
<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.7.4 </small></address>
</body>
</html>
