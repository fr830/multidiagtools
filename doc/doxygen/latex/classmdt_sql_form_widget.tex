\hypertarget{classmdt_sql_form_widget}{\section{mdt\-Sql\-Form\-Widget Class Reference}
\label{classmdt_sql_form_widget}\index{mdt\-Sql\-Form\-Widget@{mdt\-Sql\-Form\-Widget}}
}


Widget that accept a user designed form and helps dealing with table model.  




{\ttfamily \#include $<$mdt\-Sql\-Form\-Widget.\-h$>$}



Inheritance diagram for mdt\-Sql\-Form\-Widget\-:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=194pt]{classmdt_sql_form_widget__inherit__graph}
\end{center}
\end{figure}


Collaboration diagram for mdt\-Sql\-Form\-Widget\-:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=194pt]{classmdt_sql_form_widget__coll__graph}
\end{center}
\end{figure}
\subsection*{Public Slots}
\begin{DoxyCompactItemize}
\item 
void \hyperlink{classmdt_sql_form_widget_a4bb7ddf419e845de2d1a7c1ef95e48a8}{to\-First} ()
\begin{DoxyCompactList}\small\item\em Set first record as current record. \end{DoxyCompactList}\item 
void \hyperlink{classmdt_sql_form_widget_aefbaa029ac6141ab3d12da2a27d30dda}{to\-Last} ()
\begin{DoxyCompactList}\small\item\em Set last record as current record. \end{DoxyCompactList}\item 
void \hyperlink{classmdt_sql_form_widget_a7dc4bc0b63b10d420f7ab04a43e4f371}{to\-Previous} ()
\begin{DoxyCompactList}\small\item\em Set previous record as current record. \end{DoxyCompactList}\item 
void \hyperlink{classmdt_sql_form_widget_a49496a848e015ed8335a2bfd33906000}{to\-Next} ()
\begin{DoxyCompactList}\small\item\em Set next record as current record. \end{DoxyCompactList}\item 
void \hyperlink{classmdt_sql_form_widget_a982e8e8347ec4f98bf3df6980997a2db}{set\-Current\-Index} (int row)
\begin{DoxyCompactList}\small\item\em Set row as current record. \end{DoxyCompactList}\end{DoxyCompactItemize}
\subsection*{Public Member Functions}
\begin{DoxyCompactItemize}
\item 
\hyperlink{classmdt_sql_form_widget_a53570f49eac1a7fa490546497c88ad13}{mdt\-Sql\-Form\-Widget} (\hyperlink{class_q_widget}{Q\-Widget} $\ast$parent=0)
\begin{DoxyCompactList}\small\item\em Constructor. \end{DoxyCompactList}\item 
\hyperlink{classmdt_sql_form_widget_a38df8efea5c216ea2b6f047e3280aac5}{$\sim$mdt\-Sql\-Form\-Widget} ()
\begin{DoxyCompactList}\small\item\em Destructor. \end{DoxyCompactList}\item 
void \hyperlink{classmdt_sql_form_widget_ad7933613a2d113d403d539ac8957e044}{map\-Form\-Widgets} (\hyperlink{class_q_widget}{Q\-Widget} $\ast$widget, const Q\-String \&first\-Widget\-In\-Tab\-Order=Q\-String())
\begin{DoxyCompactList}\small\item\em Map widgets to matching database fields. \end{DoxyCompactList}\item 
void \hyperlink{classmdt_sql_form_widget_ace4f7fad749a4efe1233b61d071b3926}{map\-Form\-Widgets} (const Q\-String \&first\-Widget\-In\-Tab\-Order=Q\-String())
\begin{DoxyCompactList}\small\item\em Map widgets to matching database fields. \end{DoxyCompactList}\item 
Q\-Widget\-List \hyperlink{classmdt_sql_form_widget_a92648a10dd7e830faca0989007c49b6e}{mapped\-Widgets} () const 
\begin{DoxyCompactList}\small\item\em Get a list of mapped widgets. \end{DoxyCompactList}\item 
int \hyperlink{classmdt_sql_form_widget_a9588fdc58b30440077b8dcfa3a2fb3c0}{current\-Row} () const 
\begin{DoxyCompactList}\small\item\em Get the current row. \end{DoxyCompactList}\end{DoxyCompactItemize}
\subsection*{Additional Inherited Members}


\subsection{Detailed Description}
Widget that accept a user designed form and helps dealing with table model. 

To create a database table form, Qt offers several classes. But, if we have to create many forms, we have to deal with common problems (insertion, field mapping, etc..).

It's possible to create a form, for example with Qt Designer, and add needed Widgets (Q\-Line\-Edit, Q\-Spin\-Box, ...). It's important to respect a convention here\-: For each Widget that must display/edit data from database (i.\-e. model), set the name of the field with fld\-\_\- prefix. For example, if we have a field called name, create a Q\-Line\-Edit with fld\-\_\-name as object name.

Once your form was created, call his setup\-Ui() method passing \hyperlink{classmdt_sql_form_widget}{mdt\-Sql\-Form\-Widget} object as parameter. setup\-Ui() will also create layouts and widgets with \hyperlink{classmdt_sql_form_widget}{mdt\-Sql\-Form\-Widget} object as parent. As result, \hyperlink{classmdt_sql_form_widget}{mdt\-Sql\-Form\-Widget} object will have a layout with all widgets. Finally, use \hyperlink{classmdt_sql_form_widget_ad7933613a2d113d403d539ac8957e044}{map\-Form\-Widgets()} to do the mapping between widgets and fields in database.

To use the resulting form, set it, f.\-ex. as central widget of a \hyperlink{class_q_main_window}{Q\-Main\-Window}. See the list of slots to know how to use integrated actions (navigation, insertion, ...).

Internally, \hyperlink{classmdt_sql_data_widget_mapper}{mdt\-Sql\-Data\-Widget\-Mapper} is used together with \hyperlink{classmdt_sql_field_handler}{mdt\-Sql\-Field\-Handler}. Errors and user interactions are handled by this class.

\begin{DoxySeeAlso}{See Also}
\hyperlink{classmdt_sql_window}{mdt\-Sql\-Window} 
\end{DoxySeeAlso}


Definition at line 67 of file mdt\-Sql\-Form\-Widget.\-h.



\subsection{Constructor \& Destructor Documentation}
\hypertarget{classmdt_sql_form_widget_a53570f49eac1a7fa490546497c88ad13}{\index{mdt\-Sql\-Form\-Widget@{mdt\-Sql\-Form\-Widget}!mdt\-Sql\-Form\-Widget@{mdt\-Sql\-Form\-Widget}}
\index{mdt\-Sql\-Form\-Widget@{mdt\-Sql\-Form\-Widget}!mdtSqlFormWidget@{mdt\-Sql\-Form\-Widget}}
\subsubsection[{mdt\-Sql\-Form\-Widget}]{\setlength{\rightskip}{0pt plus 5cm}mdt\-Sql\-Form\-Widget\-::mdt\-Sql\-Form\-Widget (
\begin{DoxyParamCaption}
\item[{{\bf Q\-Widget} $\ast$}]{parent = {\ttfamily 0}}
\end{DoxyParamCaption}
)}}\label{classmdt_sql_form_widget_a53570f49eac1a7fa490546497c88ad13}


Constructor. 



Definition at line 40 of file mdt\-Sql\-Form\-Widget.\-cpp.

\hypertarget{classmdt_sql_form_widget_a38df8efea5c216ea2b6f047e3280aac5}{\index{mdt\-Sql\-Form\-Widget@{mdt\-Sql\-Form\-Widget}!$\sim$mdt\-Sql\-Form\-Widget@{$\sim$mdt\-Sql\-Form\-Widget}}
\index{$\sim$mdt\-Sql\-Form\-Widget@{$\sim$mdt\-Sql\-Form\-Widget}!mdtSqlFormWidget@{mdt\-Sql\-Form\-Widget}}
\subsubsection[{$\sim$mdt\-Sql\-Form\-Widget}]{\setlength{\rightskip}{0pt plus 5cm}mdt\-Sql\-Form\-Widget\-::$\sim$mdt\-Sql\-Form\-Widget (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
)}}\label{classmdt_sql_form_widget_a38df8efea5c216ea2b6f047e3280aac5}


Destructor. 



Definition at line 48 of file mdt\-Sql\-Form\-Widget.\-cpp.



\subsection{Member Function Documentation}
\hypertarget{classmdt_sql_form_widget_a9588fdc58b30440077b8dcfa3a2fb3c0}{\index{mdt\-Sql\-Form\-Widget@{mdt\-Sql\-Form\-Widget}!current\-Row@{current\-Row}}
\index{current\-Row@{current\-Row}!mdtSqlFormWidget@{mdt\-Sql\-Form\-Widget}}
\subsubsection[{current\-Row}]{\setlength{\rightskip}{0pt plus 5cm}int mdt\-Sql\-Form\-Widget\-::current\-Row (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
) const\hspace{0.3cm}{\ttfamily [virtual]}}}\label{classmdt_sql_form_widget_a9588fdc58b30440077b8dcfa3a2fb3c0}


Get the current row. 

Current row is the row that is displayed in the form view. 

Implements \hyperlink{classmdt_abstract_sql_widget_ab48f6375f55f1eaba309fb17aaaf5770}{mdt\-Abstract\-Sql\-Widget}.



Definition at line 160 of file mdt\-Sql\-Form\-Widget.\-cpp.



Referenced by mdt\-Sql\-Form\-::add\-Relation().

\hypertarget{classmdt_sql_form_widget_ad7933613a2d113d403d539ac8957e044}{\index{mdt\-Sql\-Form\-Widget@{mdt\-Sql\-Form\-Widget}!map\-Form\-Widgets@{map\-Form\-Widgets}}
\index{map\-Form\-Widgets@{map\-Form\-Widgets}!mdtSqlFormWidget@{mdt\-Sql\-Form\-Widget}}
\subsubsection[{map\-Form\-Widgets}]{\setlength{\rightskip}{0pt plus 5cm}void mdt\-Sql\-Form\-Widget\-::map\-Form\-Widgets (
\begin{DoxyParamCaption}
\item[{{\bf Q\-Widget} $\ast$}]{widget, }
\item[{const Q\-String \&}]{first\-Widget\-In\-Tab\-Order = {\ttfamily QString()}}
\end{DoxyParamCaption}
)}}\label{classmdt_sql_form_widget_ad7933613a2d113d403d539ac8957e044}


Map widgets to matching database fields. 

Will parse all child widgets found in layout (and contained widgets layouts), extract widgets that have a fld\-\_\- prefix as object name. For each of them, corresponding field will be searched in model (database).


\begin{DoxyParams}{Parameters}
{\em widget} & Widget on witch child widgets must be searched. \\
\hline
{\em first\-Widget\-In\-Tab\-Order} & It's possible to specify the object name of the first widget in tab order. This is then used by insertion to give this widget the focus.\\
\hline
\end{DoxyParams}
\begin{DoxyPrecond}{Precondition}
The custom form's setup\-Ui() must be called on this object before using this method. Once setup\-Ui() is done, \hyperlink{classmdt_sql_form_widget}{mdt\-Sql\-Form\-Widget} object (this) will contain a layout with all widgets (Q\-Line\-Edit, Q\-Spin\-Box, ...). 

Model must be set with \hyperlink{classmdt_abstract_sql_widget_a8971862741e1ef79c79e11b37e955476}{set\-Model()} before using this method. 
\end{DoxyPrecond}


Definition at line 53 of file mdt\-Sql\-Form\-Widget.\-cpp.



References mdt\-Abstract\-Sql\-Widget\-::add\-Data\-Validator(), mdt\-Abstract\-Sql\-Widget\-::data\-Edited(), mdt\-Sql\-Schema\-Table\-::field(), M\-D\-T\-\_\-\-E\-R\-R\-O\-R\-\_\-\-S\-E\-T\-\_\-\-S\-R\-C, mdt\-Abstract\-Sql\-Widget\-::model(), mdt\-Abstract\-Sql\-Widget\-::model\-Selected(), mdt\-Abstract\-Sql\-Widget\-::row\-Count(), mdt\-Sql\-Field\-Handler\-::set\-Data\-Widget(), mdt\-Sql\-Field\-Handler\-::set\-Field(), mdt\-Sql\-Schema\-Table\-::setup\-From\-Table(), and mdt\-Error\-::\-Warning.



Referenced by map\-Form\-Widgets(), mdt\-Sql\-Form\-::set\-Main\-Table(), and mdt\-Tt\-Abstract\-Test\-Widget\-::set\-Test\-Ui\-Widget().

\hypertarget{classmdt_sql_form_widget_ace4f7fad749a4efe1233b61d071b3926}{\index{mdt\-Sql\-Form\-Widget@{mdt\-Sql\-Form\-Widget}!map\-Form\-Widgets@{map\-Form\-Widgets}}
\index{map\-Form\-Widgets@{map\-Form\-Widgets}!mdtSqlFormWidget@{mdt\-Sql\-Form\-Widget}}
\subsubsection[{map\-Form\-Widgets}]{\setlength{\rightskip}{0pt plus 5cm}void mdt\-Sql\-Form\-Widget\-::map\-Form\-Widgets (
\begin{DoxyParamCaption}
\item[{const Q\-String \&}]{first\-Widget\-In\-Tab\-Order = {\ttfamily QString()}}
\end{DoxyParamCaption}
)}}\label{classmdt_sql_form_widget_ace4f7fad749a4efe1233b61d071b3926}


Map widgets to matching database fields. 

Same than \hyperlink{classmdt_sql_form_widget_ad7933613a2d113d403d539ac8957e044}{map\-Form\-Widgets(\-Q\-Widget $\ast$widget, const Q\-String \&first\-Widget\-In\-Tab\-Order)} , but acts on this 

Definition at line 138 of file mdt\-Sql\-Form\-Widget.\-cpp.



References map\-Form\-Widgets().

\hypertarget{classmdt_sql_form_widget_a92648a10dd7e830faca0989007c49b6e}{\index{mdt\-Sql\-Form\-Widget@{mdt\-Sql\-Form\-Widget}!mapped\-Widgets@{mapped\-Widgets}}
\index{mapped\-Widgets@{mapped\-Widgets}!mdtSqlFormWidget@{mdt\-Sql\-Form\-Widget}}
\subsubsection[{mapped\-Widgets}]{\setlength{\rightskip}{0pt plus 5cm}Q\-Widget\-List mdt\-Sql\-Form\-Widget\-::mapped\-Widgets (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
) const}}\label{classmdt_sql_form_widget_a92648a10dd7e830faca0989007c49b6e}


Get a list of mapped widgets. 

Note\-: the list is built at each call of this method. 

Definition at line 143 of file mdt\-Sql\-Form\-Widget.\-cpp.



References mdt\-Sql\-Field\-Handler\-::data\-Widget().

\hypertarget{classmdt_sql_form_widget_a982e8e8347ec4f98bf3df6980997a2db}{\index{mdt\-Sql\-Form\-Widget@{mdt\-Sql\-Form\-Widget}!set\-Current\-Index@{set\-Current\-Index}}
\index{set\-Current\-Index@{set\-Current\-Index}!mdtSqlFormWidget@{mdt\-Sql\-Form\-Widget}}
\subsubsection[{set\-Current\-Index}]{\setlength{\rightskip}{0pt plus 5cm}void mdt\-Sql\-Form\-Widget\-::set\-Current\-Index (
\begin{DoxyParamCaption}
\item[{int}]{row}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [slot]}}}\label{classmdt_sql_form_widget_a982e8e8347ec4f98bf3df6980997a2db}


Set row as current record. 



Definition at line 233 of file mdt\-Sql\-Form\-Widget.\-cpp.



References mdt\-Abstract\-Sql\-Widget\-::all\-Data\-Are\-Saved().



Referenced by mdt\-Tt\-Abstract\-Test\-Widget\-::create\-Test(), mdt\-Tt\-Abstract\-Test\-Widget\-::init(), and mdt\-Tt\-Abstract\-Test\-Widget\-::set\-Test\-Ui\-Widget().

\hypertarget{classmdt_sql_form_widget_a4bb7ddf419e845de2d1a7c1ef95e48a8}{\index{mdt\-Sql\-Form\-Widget@{mdt\-Sql\-Form\-Widget}!to\-First@{to\-First}}
\index{to\-First@{to\-First}!mdtSqlFormWidget@{mdt\-Sql\-Form\-Widget}}
\subsubsection[{to\-First}]{\setlength{\rightskip}{0pt plus 5cm}void mdt\-Sql\-Form\-Widget\-::to\-First (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [slot]}}}\label{classmdt_sql_form_widget_a4bb7ddf419e845de2d1a7c1ef95e48a8}


Set first record as current record. 



Definition at line 165 of file mdt\-Sql\-Form\-Widget.\-cpp.



References mdt\-Abstract\-Sql\-Widget\-::all\-Data\-Are\-Saved().



Referenced by mdt\-Tt\-Abstract\-Test\-Widget\-::create\-Test(), and mdt\-Tt\-Abstract\-Test\-Widget\-::open\-Test().

\hypertarget{classmdt_sql_form_widget_aefbaa029ac6141ab3d12da2a27d30dda}{\index{mdt\-Sql\-Form\-Widget@{mdt\-Sql\-Form\-Widget}!to\-Last@{to\-Last}}
\index{to\-Last@{to\-Last}!mdtSqlFormWidget@{mdt\-Sql\-Form\-Widget}}
\subsubsection[{to\-Last}]{\setlength{\rightskip}{0pt plus 5cm}void mdt\-Sql\-Form\-Widget\-::to\-Last (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [slot]}}}\label{classmdt_sql_form_widget_aefbaa029ac6141ab3d12da2a27d30dda}


Set last record as current record. 



Definition at line 182 of file mdt\-Sql\-Form\-Widget.\-cpp.



References mdt\-Abstract\-Sql\-Widget\-::all\-Data\-Are\-Saved().

\hypertarget{classmdt_sql_form_widget_a49496a848e015ed8335a2bfd33906000}{\index{mdt\-Sql\-Form\-Widget@{mdt\-Sql\-Form\-Widget}!to\-Next@{to\-Next}}
\index{to\-Next@{to\-Next}!mdtSqlFormWidget@{mdt\-Sql\-Form\-Widget}}
\subsubsection[{to\-Next}]{\setlength{\rightskip}{0pt plus 5cm}void mdt\-Sql\-Form\-Widget\-::to\-Next (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [slot]}}}\label{classmdt_sql_form_widget_a49496a848e015ed8335a2bfd33906000}


Set next record as current record. 



Definition at line 216 of file mdt\-Sql\-Form\-Widget.\-cpp.



References mdt\-Abstract\-Sql\-Widget\-::all\-Data\-Are\-Saved().

\hypertarget{classmdt_sql_form_widget_a7dc4bc0b63b10d420f7ab04a43e4f371}{\index{mdt\-Sql\-Form\-Widget@{mdt\-Sql\-Form\-Widget}!to\-Previous@{to\-Previous}}
\index{to\-Previous@{to\-Previous}!mdtSqlFormWidget@{mdt\-Sql\-Form\-Widget}}
\subsubsection[{to\-Previous}]{\setlength{\rightskip}{0pt plus 5cm}void mdt\-Sql\-Form\-Widget\-::to\-Previous (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [slot]}}}\label{classmdt_sql_form_widget_a7dc4bc0b63b10d420f7ab04a43e4f371}


Set previous record as current record. 



Definition at line 199 of file mdt\-Sql\-Form\-Widget.\-cpp.



References mdt\-Abstract\-Sql\-Widget\-::all\-Data\-Are\-Saved().



The documentation for this class was generated from the following files\-:\begin{DoxyCompactItemize}
\item 
src/mdtdatabase/\hyperlink{mdt_sql_form_widget_8h}{mdt\-Sql\-Form\-Widget.\-h}\item 
src/mdtdatabase/\hyperlink{mdt_sql_form_widget_8cpp}{mdt\-Sql\-Form\-Widget.\-cpp}\end{DoxyCompactItemize}
