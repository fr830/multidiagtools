\hypertarget{classmdt_device}{
\section{mdtDevice Class Reference}
\label{classmdt_device}\index{mdtDevice@{mdtDevice}}
}


Base class for a device connected to a port.  




{\ttfamily \#include $<$mdtDevice.h$>$}



Inheritance diagram for mdtDevice:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=294pt]{classmdt_device__inherit__graph}
\end{center}
\end{figure}


Collaboration diagram for mdtDevice:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=156pt]{classmdt_device__coll__graph}
\end{center}
\end{figure}
\subsection*{Public Types}
\begin{DoxyCompactItemize}
\item 
enum \hyperlink{classmdt_device_a39c301b1fda803dba0c9ab98164a9d1e}{state\_\-t} \{ \par
\hyperlink{classmdt_device_a39c301b1fda803dba0c9ab98164a9d1ea577f509c27c399a211c5dc18c0235b69}{Ready} =  0, 
\hyperlink{classmdt_device_a39c301b1fda803dba0c9ab98164a9d1eae06fa1b4e5872df7470aeed0878a2947}{Disconnected}, 
\hyperlink{classmdt_device_a39c301b1fda803dba0c9ab98164a9d1ead8adc8658ebaa24f7525fe18558de4c1}{Connecting}, 
\hyperlink{classmdt_device_a39c301b1fda803dba0c9ab98164a9d1ea4a064f3dc9a486991b3ec09127b1c42a}{Busy}, 
\par
\hyperlink{classmdt_device_a39c301b1fda803dba0c9ab98164a9d1ea9e9410b52d18a2c4da60748530709f09}{Unknown}
 \}
\begin{DoxyCompactList}\small\item\em State of device. \end{DoxyCompactList}\end{DoxyCompactItemize}
\subsection*{Public Slots}
\begin{DoxyCompactItemize}
\item 
void \hyperlink{classmdt_device_a40234a70a37b097baa48bdfbb402cdc4}{setAnalogOutputValue} (int address)
\begin{DoxyCompactList}\small\item\em Set value on a analog output on physical device. \end{DoxyCompactList}\item 
void \hyperlink{classmdt_device_a83b170f1805a05101409bb6d8e15d03a}{setDigitalOutputState} (int address)
\begin{DoxyCompactList}\small\item\em Set state on a digital output on physical device. \end{DoxyCompactList}\item 
void \hyperlink{classmdt_device_a14634fec6cd6bae810562b3bd88a5c05}{runQueries} ()
\begin{DoxyCompactList}\small\item\em Queries to send periodically. \end{DoxyCompactList}\item 
void \hyperlink{classmdt_device_ab77eb4c1bb50201e97a4dbd8b538659a}{setStateFromPortError} (int error)
\begin{DoxyCompactList}\small\item\em Update device state regarding port error. \end{DoxyCompactList}\item 
void \hyperlink{classmdt_device_a4eeda85bf0b10ddc9955a32199c00359}{setStateReady} ()
\begin{DoxyCompactList}\small\item\em Set the ready state. \end{DoxyCompactList}\end{DoxyCompactItemize}
\subsection*{Signals}
\begin{DoxyCompactItemize}
\item 
\hypertarget{classmdt_device_aecd2d9d2cc3665f2084d0fd20eb3db2d}{
void \hyperlink{classmdt_device_aecd2d9d2cc3665f2084d0fd20eb3db2d}{stateChanged} (int state)}
\label{classmdt_device_aecd2d9d2cc3665f2084d0fd20eb3db2d}

\begin{DoxyCompactList}\small\item\em Emited when state has changed. \end{DoxyCompactList}\end{DoxyCompactItemize}
\subsection*{Public Member Functions}
\begin{DoxyCompactItemize}
\item 
\hypertarget{classmdt_device_a6d501791e7243358cc61b144254b80db}{
{\bfseries mdtDevice} (QObject $\ast$parent=0)}
\label{classmdt_device_a6d501791e7243358cc61b144254b80db}

\item 
\hypertarget{classmdt_device_a80186f1aa6fbdc13f1652de978c35518}{
void \hyperlink{classmdt_device_a80186f1aa6fbdc13f1652de978c35518}{setName} (const QString \&name)}
\label{classmdt_device_a80186f1aa6fbdc13f1652de978c35518}

\begin{DoxyCompactList}\small\item\em Set the device name. \end{DoxyCompactList}\item 
\hypertarget{classmdt_device_a7ad893c6885dbaef5a6cb980bfe627e0}{
QString \hyperlink{classmdt_device_a7ad893c6885dbaef5a6cb980bfe627e0}{name} () const }
\label{classmdt_device_a7ad893c6885dbaef5a6cb980bfe627e0}

\begin{DoxyCompactList}\small\item\em Get device name. \end{DoxyCompactList}\item 
virtual \hyperlink{classmdt_abstract_port_ad4121bb930c95887e77f8bafa065a85e}{mdtAbstractPort::error\_\-t} \hyperlink{classmdt_device_abab1b6e45af527880ce469ae318474c0}{connectToDevice} (const \hyperlink{classmdt_device_info}{mdtDeviceInfo} \&devInfo)
\begin{DoxyCompactList}\small\item\em Search and connect to physical device. \end{DoxyCompactList}\item 
void \hyperlink{classmdt_device_a9f1de62ef54974b0636dee673bd819e2}{setIos} (\hyperlink{classmdt_device_ios}{mdtDeviceIos} $\ast$ios, bool autoOutputUpdate=false)
\begin{DoxyCompactList}\small\item\em Set the I/O's container. \end{DoxyCompactList}\item 
void \hyperlink{classmdt_device_aa241c40514683254990e742cf1bbb155}{setBackToReadyStateTimeout} (int timeout)
\begin{DoxyCompactList}\small\item\em Set back to ready state timeout. \end{DoxyCompactList}\item 
void \hyperlink{classmdt_device_a3477278b4fa937f7667becb14333ef2f}{setAnalogOutputAddressOffset} (int offset)
\begin{DoxyCompactList}\small\item\em Set analog output address offset. \end{DoxyCompactList}\item 
void \hyperlink{classmdt_device_af5c2759221878a4d0306343f43e3cc45}{setDigitalOutputAddressOffset} (int offset)
\begin{DoxyCompactList}\small\item\em Set digital output address offset. \end{DoxyCompactList}\item 
virtual \hyperlink{classmdt_port_manager}{mdtPortManager} $\ast$ \hyperlink{classmdt_device_a06d9178b4133fd7b23084e712af20976}{portManager} ()
\begin{DoxyCompactList}\small\item\em Get internal port manager instance. \end{DoxyCompactList}\item 
void \hyperlink{classmdt_device_a721c5bf2cfa0eef5304333f08da182f7}{start} (int queryInterval)
\begin{DoxyCompactList}\small\item\em Start periodic device querying. \end{DoxyCompactList}\item 
\hypertarget{classmdt_device_adc7ff8f01d68506283a3d0cc6bc25407}{
void \hyperlink{classmdt_device_adc7ff8f01d68506283a3d0cc6bc25407}{stop} ()}
\label{classmdt_device_adc7ff8f01d68506283a3d0cc6bc25407}

\begin{DoxyCompactList}\small\item\em Stop periodic device querying. \end{DoxyCompactList}\item 
QVariant \hyperlink{classmdt_device_a7ff556995f38d2098eda3cf80685b542}{getAnalogInputValue} (int address, int timeout, bool realValue=true)
\begin{DoxyCompactList}\small\item\em Read one analog input on physical device and update (G)UI representation. \end{DoxyCompactList}\item 
int \hyperlink{classmdt_device_a585cc32f6aac4d5788928ecf1fdacf51}{getAnalogInputs} (int timeout)
\begin{DoxyCompactList}\small\item\em Read all analog inputs on physical device and update (G)UI representation. \end{DoxyCompactList}\item 
QVariant \hyperlink{classmdt_device_a4ec0255675f27a48f35edcfd0ba7d129}{getAnalogOutputValue} (int address, int timeout, bool convert=true)
\begin{DoxyCompactList}\small\item\em Read one analog output on physical device and update (G)UI representation. \end{DoxyCompactList}\item 
int \hyperlink{classmdt_device_a12f717202e9860d0c24b9dff8d672ef8}{getAnalogOutputs} (int timeout)
\begin{DoxyCompactList}\small\item\em Read all analog outputs on physical device and update (G)UI representation. \end{DoxyCompactList}\item 
int \hyperlink{classmdt_device_a4b01925cfbbb62e32a3e85a9c4b1538a}{setAnalogOutputValue} (int address, QVariant value, int timeout)
\begin{DoxyCompactList}\small\item\em Write one analog output to physical device and update (G)UI representation. \end{DoxyCompactList}\item 
int \hyperlink{classmdt_device_ae45c39c2ef38b5952171fdc1c3284748}{setAnalogOutputs} (int timeout)
\begin{DoxyCompactList}\small\item\em Write all analog outputs on physical device and update (G)UI representation. \end{DoxyCompactList}\item 
QVariant \hyperlink{classmdt_device_aad589d5c8c769299fdf0ea4e34d3bc0a}{getDigitalInputState} (int address, int timeout)
\begin{DoxyCompactList}\small\item\em Read one digital input on physical device and update (G)UI representation. \end{DoxyCompactList}\item 
int \hyperlink{classmdt_device_ae482b28263b2ce61735f42f1245c1e99}{getDigitalInputs} (int timeout)
\begin{DoxyCompactList}\small\item\em Read all digital inputs on physical device and update (G)UI representation. \end{DoxyCompactList}\item 
QVariant \hyperlink{classmdt_device_a719401fec13501047ffdf7f51583937c}{getDigitalOutputState} (int address, int timeout)
\begin{DoxyCompactList}\small\item\em Read one digital output on physical device and update (G)UI representation. \end{DoxyCompactList}\item 
int \hyperlink{classmdt_device_a6bd6ad4f8d07121dd8b988594927e9c8}{getDigitalOutputs} (int timeout)
\begin{DoxyCompactList}\small\item\em Read all digital outputs on physical device and update (G)UI representation. \end{DoxyCompactList}\item 
int \hyperlink{classmdt_device_a702a5f49680b03f04a9f58ae6906bf83}{setDigitalOutputState} (int address, bool state, int timeout)
\begin{DoxyCompactList}\small\item\em Write one digital output to physical device and update (G)UI representation. \end{DoxyCompactList}\item 
int \hyperlink{classmdt_device_ae68a400d5f27fe142d41b674f473bf98}{setDigitalOutputs} (int timeout)
\begin{DoxyCompactList}\small\item\em Write all digital outputs to physical device and update (G)UI representation. \end{DoxyCompactList}\item 
\hypertarget{classmdt_device_afde11f7cb1d6a932db3824011f7ccccc}{
\hyperlink{classmdt_device_a39c301b1fda803dba0c9ab98164a9d1e}{state\_\-t} \hyperlink{classmdt_device_afde11f7cb1d6a932db3824011f7ccccc}{state} () const }
\label{classmdt_device_afde11f7cb1d6a932db3824011f7ccccc}

\begin{DoxyCompactList}\small\item\em Get device state. \end{DoxyCompactList}\end{DoxyCompactItemize}
\subsection*{Protected Slots}
\begin{DoxyCompactItemize}
\item 
virtual void \hyperlink{classmdt_device_a96be3ca9235561c58c69190e9ed45ca9}{decodeReadenFrame} (int id, QByteArray data)
\begin{DoxyCompactList}\small\item\em Decode incoming frames. \end{DoxyCompactList}\end{DoxyCompactItemize}
\subsection*{Protected Member Functions}
\begin{DoxyCompactItemize}
\item 
virtual int \hyperlink{classmdt_device_ae0948ed309354e4d8b231eb911196749}{readAnalogInput} (int address)
\begin{DoxyCompactList}\small\item\em Read one analog input on physical device. \end{DoxyCompactList}\item 
virtual int \hyperlink{classmdt_device_ac0023742214c29bdadd46383ae240972}{readAnalogInputs} ()
\begin{DoxyCompactList}\small\item\em Read all analog inputs on physical device. \end{DoxyCompactList}\item 
virtual int \hyperlink{classmdt_device_abf222c1bd18ba300eeacd6037e5015df}{readAnalogOutput} (int address)
\begin{DoxyCompactList}\small\item\em Read one analog output on physical device. \end{DoxyCompactList}\item 
virtual int \hyperlink{classmdt_device_ae0a0f03cb5267232d176896acc80872c}{readAnalogOutputs} ()
\begin{DoxyCompactList}\small\item\em Read all analog outputs on physical device. \end{DoxyCompactList}\item 
virtual int \hyperlink{classmdt_device_a3d11f48e7b605a54c884977b773615e2}{writeAnalogOutput} (int address, int value)
\begin{DoxyCompactList}\small\item\em Write value on a analog output to physical device. \end{DoxyCompactList}\item 
virtual int \hyperlink{classmdt_device_a797eeb704d5104b7a4411ebeecb018c6}{writeAnalogOutputs} ()
\begin{DoxyCompactList}\small\item\em Write all analog outputs to physical device. \end{DoxyCompactList}\item 
virtual int \hyperlink{classmdt_device_a7e8f070a89d8f6f104f2cc5001f5c0d6}{readDigitalInput} (int address)
\begin{DoxyCompactList}\small\item\em Read one digital input on physical device. \end{DoxyCompactList}\item 
virtual int \hyperlink{classmdt_device_a4f4d18f217aa1cf483027c9b3c0ad09b}{readDigitalInputs} ()
\begin{DoxyCompactList}\small\item\em Read all digital inputs on physical device. \end{DoxyCompactList}\item 
virtual int \hyperlink{classmdt_device_a9d3f57d6022d2554f6f6a9f59a4984c1}{readDigitalOutput} (int address)
\begin{DoxyCompactList}\small\item\em Read one digital output on physical device. \end{DoxyCompactList}\item 
virtual int \hyperlink{classmdt_device_a7cc2f2429776f26f45d42cf49a610958}{readDigitalOutputs} ()
\begin{DoxyCompactList}\small\item\em Read all digital outputs on physical device. \end{DoxyCompactList}\item 
virtual int \hyperlink{classmdt_device_a2a1354e80bd6f3bdca3b68cc0a9a4ea1}{writeDigitalOutput} (int address, bool state)
\begin{DoxyCompactList}\small\item\em Write state on a digital output to physical device. \end{DoxyCompactList}\item 
virtual int \hyperlink{classmdt_device_ad640c81dd966ed31c46d14961fd12830}{writeDigitalOutputs} ()
\begin{DoxyCompactList}\small\item\em Write all digital outputs to physical device. \end{DoxyCompactList}\item 
virtual bool \hyperlink{classmdt_device_acba50968d201ad95c4eaa2ab2ed48b4f}{queriesSequence} ()
\begin{DoxyCompactList}\small\item\em Sequence of queries to send periodically. \end{DoxyCompactList}\item 
void \hyperlink{classmdt_device_ac3df06706c79730fde70ee6131af577c}{setStateDisconnected} ()
\begin{DoxyCompactList}\small\item\em Set the disconnected state. \end{DoxyCompactList}\item 
void \hyperlink{classmdt_device_afe240d2bb42c13182ea3b1b5deff006b}{setStateConnecting} ()
\begin{DoxyCompactList}\small\item\em Set the connecting state. \end{DoxyCompactList}\item 
void \hyperlink{classmdt_device_abf01ab213b91df9ff03ad6b7184abf88}{setStateBusy} (int retryTimeout=-\/1)
\begin{DoxyCompactList}\small\item\em Set the busy state. \end{DoxyCompactList}\item 
void \hyperlink{classmdt_device_a312bf413dfc16765328843f3fe08a4b8}{setStateUnknown} ()
\begin{DoxyCompactList}\small\item\em Set the unknown state. \end{DoxyCompactList}\item 
\hypertarget{classmdt_device_a152a866615b291d0344f24948141f9dd}{
void \hyperlink{classmdt_device_a152a866615b291d0344f24948141f9dd}{addTransaction} (int id, \hyperlink{classmdt_analog_io}{mdtAnalogIo} $\ast$io)}
\label{classmdt_device_a152a866615b291d0344f24948141f9dd}

\begin{DoxyCompactList}\small\item\em Add a query/reply transaction. \end{DoxyCompactList}\item 
\hypertarget{classmdt_device_ab7fc34f881527ded34d692da29431f85}{
void \hyperlink{classmdt_device_ab7fc34f881527ded34d692da29431f85}{addTransaction} (int id, \hyperlink{classmdt_digital_io}{mdtDigitalIo} $\ast$io)}
\label{classmdt_device_ab7fc34f881527ded34d692da29431f85}

\begin{DoxyCompactList}\small\item\em Add a query/reply transaction. \end{DoxyCompactList}\item 
\hypertarget{classmdt_device_aebee51bc9e2cbbef1614df8218be1fcd}{
void \hyperlink{classmdt_device_aebee51bc9e2cbbef1614df8218be1fcd}{addTransaction} (int id)}
\label{classmdt_device_aebee51bc9e2cbbef1614df8218be1fcd}

\begin{DoxyCompactList}\small\item\em Add a query/reply transaction. \end{DoxyCompactList}\item 
\hyperlink{classmdt_analog_io}{mdtAnalogIo} $\ast$ \hyperlink{classmdt_device_a3c363d61bf4019dbb40a15ac28fd51af}{pendingAioTransaction} (int id)
\begin{DoxyCompactList}\small\item\em Get analog I/O in pending transactions list. \end{DoxyCompactList}\item 
\hyperlink{classmdt_digital_io}{mdtDigitalIo} $\ast$ \hyperlink{classmdt_device_aa7d3959fc291e3e2ae8d712656595dcc}{pendingDioTransaction} (int id)
\begin{DoxyCompactList}\small\item\em Get digital I/O in pending transactions list. \end{DoxyCompactList}\item 
int \hyperlink{classmdt_device_a789ded0f30663dde43ca5d4067273eb7}{pendingIoTransaction} (int id)
\begin{DoxyCompactList}\small\item\em Get multiple I/O in pending transactions list. \end{DoxyCompactList}\item 
bool \hyperlink{classmdt_device_a1df875803a3a0eb7324047d33c139621}{waitTransactionDone} (int id, int timeout, int granularity=50)
\begin{DoxyCompactList}\small\item\em Wait until a transaction is done without break the GUI's event loop. \end{DoxyCompactList}\end{DoxyCompactItemize}
\subsection*{Protected Attributes}
\begin{DoxyCompactItemize}
\item 
\hypertarget{classmdt_device_aa84e01b13f98fc35476a2654f1c8d2b3}{
\hyperlink{classmdt_device_ios}{mdtDeviceIos} $\ast$ {\bfseries pvIos}}
\label{classmdt_device_aa84e01b13f98fc35476a2654f1c8d2b3}

\item 
\hypertarget{classmdt_device_a7578dfa3df390d20b1bdce1319d45dbc}{
int {\bfseries pvDigitalOutputAddressOffset}}
\label{classmdt_device_a7578dfa3df390d20b1bdce1319d45dbc}

\item 
\hypertarget{classmdt_device_a50a6824fe8b9ae2a7e7c56b8e0686a76}{
int {\bfseries pvAnalogOutputAddressOffset}}
\label{classmdt_device_a50a6824fe8b9ae2a7e7c56b8e0686a76}

\end{DoxyCompactItemize}


\subsection{Detailed Description}
Base class for a device connected to a port. 

Querying a device can be done several ways. Some devices sends a confirmation after each query.

Some queries (f.ex. read a input value or state) give a result after query. In some applications, we need to display the reult priodically. In other application, we need to send the query and wait on result before we can continue. This base class gives a interface for these two cases.

At basis, all query methods are not blocking by default. The normal way is to connect \hyperlink{classmdt_port_manager_a65d5d2e9edde76796714f737a7eaf204}{mdtPortManager::newReadenFrame()} to \hyperlink{classmdt_device_a96be3ca9235561c58c69190e9ed45ca9}{decodeReadenFrame()} slot (must be done in subclass). This way, a query will be sent to device and method returns. When device returns a result, \hyperlink{classmdt_port_manager}{mdtPortManager} will send the newReadenFrame() signal, and decoding will be processed in \hyperlink{classmdt_device_a96be3ca9235561c58c69190e9ed45ca9}{decodeReadenFrame()} and I/O's are updated.

Because the blocking behaviour is sometimes needed, the concept of transaction is implemented. At first, we tell the query method that we will wait on a reply by passing a timeout $>$ 0. Then, the query is sent to device and a transaction ID is added to a list with \hyperlink{classmdt_device_a152a866615b291d0344f24948141f9dd}{addTransaction()}. At next, \hyperlink{classmdt_device_a1df875803a3a0eb7324047d33c139621}{waitTransactionDone()} is called, and finally result is returned. Note that \hyperlink{classmdt_device_a1df875803a3a0eb7324047d33c139621}{waitTransactionDone()} will not breack the Qt's event loop because it uses the \hyperlink{classmdt_port_manager_acc5c63ad33fdd3cc153fc23e00c6e69c}{mdtPortManager::wait()} method (see documentation of \hyperlink{classmdt_port_manager}{mdtPortManager} for details).

Give some helper methods for event handling, ....

If it is needed to continiusly update the representation of device's inputs (digital/analog I/O, voltage, temperature, ...), two things can happen:
\begin{DoxyItemize}
\item 1) Used port can receive data continiusly (f.ex. RS232) and device send data automatically
\item 2) Used port need that a request is sent for each read (TCP, USB, ...) or device need such request Continous update is typical usefull for a GUI representing a real device.
\end{DoxyItemize}

A other usage is automated sequence. In this case, the sequence will tell when it need to set a output and when a input value is reuqierd.

A device can accept one or many request befor results must be read. This depends most case on used port and protocol.

It can be useful to find on witch port a device is attached (f.ex. setup of a automated test application).

A device can have several states (ready, busy, disconnected, ...). To help the application programmer to keep coherence, this states are updated in this class. 

Definition at line 88 of file mdtDevice.h.



\subsection{Member Enumeration Documentation}
\hypertarget{classmdt_device_a39c301b1fda803dba0c9ab98164a9d1e}{
\index{mdtDevice@{mdtDevice}!state\_\-t@{state\_\-t}}
\index{state\_\-t@{state\_\-t}!mdtDevice@{mdtDevice}}
\subsubsection[{state\_\-t}]{\setlength{\rightskip}{0pt plus 5cm}enum {\bf mdtDevice::state\_\-t}}}
\label{classmdt_device_a39c301b1fda803dba0c9ab98164a9d1e}


State of device. 

\begin{Desc}
\item[Enumerator: ]\par
\begin{description}
\index{Ready@{Ready}!mdtDevice@{mdtDevice}}\index{mdtDevice@{mdtDevice}!Ready@{Ready}}\item[{\em 
\hypertarget{classmdt_device_a39c301b1fda803dba0c9ab98164a9d1ea577f509c27c399a211c5dc18c0235b69}{
Ready}
\label{classmdt_device_a39c301b1fda803dba0c9ab98164a9d1ea577f509c27c399a211c5dc18c0235b69}
}]Device is connected and ready to receive queries \index{Disconnected@{Disconnected}!mdtDevice@{mdtDevice}}\index{mdtDevice@{mdtDevice}!Disconnected@{Disconnected}}\item[{\em 
\hypertarget{classmdt_device_a39c301b1fda803dba0c9ab98164a9d1eae06fa1b4e5872df7470aeed0878a2947}{
Disconnected}
\label{classmdt_device_a39c301b1fda803dba0c9ab98164a9d1eae06fa1b4e5872df7470aeed0878a2947}
}]Device is not connected \index{Connecting@{Connecting}!mdtDevice@{mdtDevice}}\index{mdtDevice@{mdtDevice}!Connecting@{Connecting}}\item[{\em 
\hypertarget{classmdt_device_a39c301b1fda803dba0c9ab98164a9d1ead8adc8658ebaa24f7525fe18558de4c1}{
Connecting}
\label{classmdt_device_a39c301b1fda803dba0c9ab98164a9d1ead8adc8658ebaa24f7525fe18558de4c1}
}]Trying to connect to device \index{Busy@{Busy}!mdtDevice@{mdtDevice}}\index{mdtDevice@{mdtDevice}!Busy@{Busy}}\item[{\em 
\hypertarget{classmdt_device_a39c301b1fda803dba0c9ab98164a9d1ea4a064f3dc9a486991b3ec09127b1c42a}{
Busy}
\label{classmdt_device_a39c301b1fda803dba0c9ab98164a9d1ea4a064f3dc9a486991b3ec09127b1c42a}
}]Device is connected but cannot accept requests for the moment \index{Unknown@{Unknown}!mdtDevice@{mdtDevice}}\index{mdtDevice@{mdtDevice}!Unknown@{Unknown}}\item[{\em 
\hypertarget{classmdt_device_a39c301b1fda803dba0c9ab98164a9d1ea9e9410b52d18a2c4da60748530709f09}{
Unknown}
\label{classmdt_device_a39c301b1fda803dba0c9ab98164a9d1ea9e9410b52d18a2c4da60748530709f09}
}]Unknown (and unhandled) state \end{description}
\end{Desc}



Definition at line 96 of file mdtDevice.h.



\subsection{Member Function Documentation}
\hypertarget{classmdt_device_abab1b6e45af527880ce469ae318474c0}{
\index{mdtDevice@{mdtDevice}!connectToDevice@{connectToDevice}}
\index{connectToDevice@{connectToDevice}!mdtDevice@{mdtDevice}}
\subsubsection[{connectToDevice}]{\setlength{\rightskip}{0pt plus 5cm}{\bf mdtAbstractPort::error\_\-t} mdtDevice::connectToDevice (
\begin{DoxyParamCaption}
\item[{const {\bf mdtDeviceInfo} \&}]{devInfo}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily  \mbox{[}virtual\mbox{]}}}}
\label{classmdt_device_abab1b6e45af527880ce469ae318474c0}


Search and connect to physical device. 

Will scan available ports and open the first port that has device attached maching request.


\begin{DoxyParams}{Parameters}
{\em devInfo} & Requested device's informations. \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
A error listed in \hyperlink{classmdt_abstract_port_ad4121bb930c95887e77f8bafa065a85e}{mdtAbstractPort::error\_\-t} (NoError on success)
\end{DoxyReturn}
Note: default implementation does nothing and returns allways a UnhandledError. See subclass documentation for more details. 

Reimplemented in \hyperlink{classmdt_device_u3606_a_acf3b48b13bc179ad4f94b3011b7d607a}{mdtDeviceU3606A}.



Definition at line 68 of file mdtDevice.cpp.

\hypertarget{classmdt_device_a96be3ca9235561c58c69190e9ed45ca9}{
\index{mdtDevice@{mdtDevice}!decodeReadenFrame@{decodeReadenFrame}}
\index{decodeReadenFrame@{decodeReadenFrame}!mdtDevice@{mdtDevice}}
\subsubsection[{decodeReadenFrame}]{\setlength{\rightskip}{0pt plus 5cm}void mdtDevice::decodeReadenFrame (
\begin{DoxyParamCaption}
\item[{int}]{id, }
\item[{QByteArray}]{data}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily  \mbox{[}protected, virtual, slot\mbox{]}}}}
\label{classmdt_device_a96be3ca9235561c58c69190e9ed45ca9}


Decode incoming frames. 

Subclass notes:\par

\begin{DoxyItemize}
\item This default implementation does nothing.
\item This slot should be connected with \hyperlink{classmdt_port_manager_a65d5d2e9edde76796714f737a7eaf204}{mdtPortManager::newReadenFrame(int, QByteArray)} signal.
\item In this class, this connection is not made, it is the sublcass responsability to do this.
\item To update (G)UI, \hyperlink{classmdt_device_ios_a82850ee99957ec5a787de71299ad785b}{mdtDeviceIos::updateAnalogInputValues()} should be used.
\item Pending transactions must be removed from respective queue (see \hyperlink{classmdt_device_a3c363d61bf4019dbb40a15ac28fd51af}{pendingAioTransaction()}, \hyperlink{classmdt_device_aa7d3959fc291e3e2ae8d712656595dcc}{pendingDioTransaction()} and \hyperlink{classmdt_device_a789ded0f30663dde43ca5d4067273eb7}{pendingIoTransaction()} ). 
\end{DoxyItemize}

Definition at line 680 of file mdtDevice.cpp.

\hypertarget{classmdt_device_a585cc32f6aac4d5788928ecf1fdacf51}{
\index{mdtDevice@{mdtDevice}!getAnalogInputs@{getAnalogInputs}}
\index{getAnalogInputs@{getAnalogInputs}!mdtDevice@{mdtDevice}}
\subsubsection[{getAnalogInputs}]{\setlength{\rightskip}{0pt plus 5cm}int mdtDevice::getAnalogInputs (
\begin{DoxyParamCaption}
\item[{int}]{timeout}
\end{DoxyParamCaption}
)}}
\label{classmdt_device_a585cc32f6aac4d5788928ecf1fdacf51}


Read all analog inputs on physical device and update (G)UI representation. 

Will call \hyperlink{classmdt_device_ac0023742214c29bdadd46383ae240972}{readAnalogInputs()}, witch also sends the request to device. Depending on result, device's state can be updated.

Behaviour of this method can vary, depending on device specific subclass. (See sublcass \hyperlink{classmdt_device_ac0023742214c29bdadd46383ae240972}{readAnalogInputs()} for details).

Once results are available, the internal analog inputs are updated. (See \hyperlink{classmdt_device_ios}{mdtDeviceIos} for details).


\begin{DoxyParams}{Parameters}
{\em timeout} & If 0, the request is sent and this method returns immediately. Else it will wait until a reply comes in, or timeout. (See \hyperlink{classmdt_device_a1df875803a3a0eb7324047d33c139621}{waitTransactionDone()} ). \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
0 or a ID on success. If no I/O's are set, on timeout ar other error, a value $<$ 0 is returned. 
\end{DoxyReturn}


Definition at line 183 of file mdtDevice.cpp.

\hypertarget{classmdt_device_a7ff556995f38d2098eda3cf80685b542}{
\index{mdtDevice@{mdtDevice}!getAnalogInputValue@{getAnalogInputValue}}
\index{getAnalogInputValue@{getAnalogInputValue}!mdtDevice@{mdtDevice}}
\subsubsection[{getAnalogInputValue}]{\setlength{\rightskip}{0pt plus 5cm}QVariant mdtDevice::getAnalogInputValue (
\begin{DoxyParamCaption}
\item[{int}]{address, }
\item[{int}]{timeout, }
\item[{bool}]{realValue = {\ttfamily true}}
\end{DoxyParamCaption}
)}}
\label{classmdt_device_a7ff556995f38d2098eda3cf80685b542}


Read one analog input on physical device and update (G)UI representation. 

Will call \hyperlink{classmdt_device_ae0948ed309354e4d8b231eb911196749}{readAnalogInput()}, witch also sends the request to device. Depending on result, device's state can be updated.

Behaviour of this method can vary, depending on device specific subclass. (See sublcass \hyperlink{classmdt_device_ae0948ed309354e4d8b231eb911196749}{readAnalogInput()} for details).

Once result is available, the internal analog input is updated. (See \hyperlink{classmdt_device_ios}{mdtDeviceIos} for details).


\begin{DoxyParams}{Parameters}
{\em address} & Depending on device organisation and protocol, this can be a relative or absolute address (f.ex. MODBUS queries), a input number, etc... \\
\hline
{\em timeout} & If 0, the request is sent and this method returns immediately. If $<$ 0, no query is sent to device and cached value is returned. Else it will wait until a reply comes in, or timeout. (See \hyperlink{classmdt_device_a1df875803a3a0eb7324047d33c139621}{waitTransactionDone()} ). \\
\hline
{\em realValue} & If true, the real value (as double) is returned, else the device's specific integer value (see \hyperlink{classmdt_analog_io_a55d3e346dd13a580dc4ac77e8e946b01}{mdtAnalogIo::value()} for details). \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
A valid value if timeout is $>$ 0 and on successfull query/reply process. (See the Qt's QVariant documentation to know how to check validity). 
\end{DoxyReturn}


Definition at line 129 of file mdtDevice.cpp.

\hypertarget{classmdt_device_a12f717202e9860d0c24b9dff8d672ef8}{
\index{mdtDevice@{mdtDevice}!getAnalogOutputs@{getAnalogOutputs}}
\index{getAnalogOutputs@{getAnalogOutputs}!mdtDevice@{mdtDevice}}
\subsubsection[{getAnalogOutputs}]{\setlength{\rightskip}{0pt plus 5cm}int mdtDevice::getAnalogOutputs (
\begin{DoxyParamCaption}
\item[{int}]{timeout}
\end{DoxyParamCaption}
)}}
\label{classmdt_device_a12f717202e9860d0c24b9dff8d672ef8}


Read all analog outputs on physical device and update (G)UI representation. 

Will call \hyperlink{classmdt_device_ae0a0f03cb5267232d176896acc80872c}{readAnalogOutputs()}, witch also sends the request to device. Depending on result, device's state can be updated.

Behaviour of this method can vary, depending on device specific subclass. (See sublcass \hyperlink{classmdt_device_ae0a0f03cb5267232d176896acc80872c}{readAnalogOutputs()} for details).

Once results are available, the internal analog outputs are updated. (See \hyperlink{classmdt_device_ios}{mdtDeviceIos} for details).


\begin{DoxyParams}{Parameters}
{\em timeout} & If 0, the request is sent and this method returns immediately. Else it will wait until a reply comes in, or timeout. (See \hyperlink{classmdt_device_a1df875803a3a0eb7324047d33c139621}{waitTransactionDone()} ). \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
0 or a ID on success. If no I/O's are set, on timeout ar other error, a value $<$ 0 is returned. 
\end{DoxyReturn}


Definition at line 261 of file mdtDevice.cpp.

\hypertarget{classmdt_device_a4ec0255675f27a48f35edcfd0ba7d129}{
\index{mdtDevice@{mdtDevice}!getAnalogOutputValue@{getAnalogOutputValue}}
\index{getAnalogOutputValue@{getAnalogOutputValue}!mdtDevice@{mdtDevice}}
\subsubsection[{getAnalogOutputValue}]{\setlength{\rightskip}{0pt plus 5cm}QVariant mdtDevice::getAnalogOutputValue (
\begin{DoxyParamCaption}
\item[{int}]{address, }
\item[{int}]{timeout, }
\item[{bool}]{convert = {\ttfamily true}}
\end{DoxyParamCaption}
)}}
\label{classmdt_device_a4ec0255675f27a48f35edcfd0ba7d129}


Read one analog output on physical device and update (G)UI representation. 

Will call \hyperlink{classmdt_device_abf222c1bd18ba300eeacd6037e5015df}{readAnalogOutput()}, witch also sends the request to device. Depending on result, device's state can be updated.

Behaviour of this method can vary, depending on device specific subclass. (See sublcass \hyperlink{classmdt_device_abf222c1bd18ba300eeacd6037e5015df}{readAnalogOutput()} for details).

Once result is available, the internal analog output is updated. (See \hyperlink{classmdt_device_ios}{mdtDeviceIos} for details).


\begin{DoxyParams}{Parameters}
{\em address} & Depending on device organisation and protocol, this can be a relative or absolute address (f.ex. MODBUS queries), a input number, etc... \\
\hline
{\em timeout} & If 0, the request is sent and this method returns immediately. If $<$ 0, no query is sent to device and cached value is returned. Else it will wait until a reply comes in, or timeout. (See \hyperlink{classmdt_device_a1df875803a3a0eb7324047d33c139621}{waitTransactionDone()} ). \\
\hline
{\em convert} & If true , the value is converted (see \hyperlink{classmdt_analog_io_a55d3e346dd13a580dc4ac77e8e946b01}{mdtAnalogIo::value()} for details). \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
A valid value if timeout is $>$ 0 and on successfull query/reply process. (See the Qt's QVariant documentation to know how to check validity). 
\end{DoxyReturn}


Definition at line 207 of file mdtDevice.cpp.

\hypertarget{classmdt_device_ae482b28263b2ce61735f42f1245c1e99}{
\index{mdtDevice@{mdtDevice}!getDigitalInputs@{getDigitalInputs}}
\index{getDigitalInputs@{getDigitalInputs}!mdtDevice@{mdtDevice}}
\subsubsection[{getDigitalInputs}]{\setlength{\rightskip}{0pt plus 5cm}int mdtDevice::getDigitalInputs (
\begin{DoxyParamCaption}
\item[{int}]{timeout}
\end{DoxyParamCaption}
)}}
\label{classmdt_device_ae482b28263b2ce61735f42f1245c1e99}


Read all digital inputs on physical device and update (G)UI representation. 

Will call \hyperlink{classmdt_device_a4f4d18f217aa1cf483027c9b3c0ad09b}{readDigitalInputs()}, witch also sends the request to device. Depending on result, device's state can be updated.

Behaviour of this method can vary, depending on device specific subclass. (See sublcass \hyperlink{classmdt_device_a4f4d18f217aa1cf483027c9b3c0ad09b}{readDigitalInputs()} for details).

Once results are available, the internal digital inputs are updated. (See \hyperlink{classmdt_device_ios}{mdtDeviceIos} for details).


\begin{DoxyParams}{Parameters}
{\em timeout} & If 0, the request is sent and this method returns immediately. Else it will wait until a reply comes in, or timeout. (See \hyperlink{classmdt_device_a1df875803a3a0eb7324047d33c139621}{waitTransactionDone()} ). \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
0 or a ID on success. If no I/O's are set, on timeout ar other error, a value $<$ 0 is returned. 
\end{DoxyReturn}


Definition at line 404 of file mdtDevice.cpp.

\hypertarget{classmdt_device_aad589d5c8c769299fdf0ea4e34d3bc0a}{
\index{mdtDevice@{mdtDevice}!getDigitalInputState@{getDigitalInputState}}
\index{getDigitalInputState@{getDigitalInputState}!mdtDevice@{mdtDevice}}
\subsubsection[{getDigitalInputState}]{\setlength{\rightskip}{0pt plus 5cm}QVariant mdtDevice::getDigitalInputState (
\begin{DoxyParamCaption}
\item[{int}]{address, }
\item[{int}]{timeout}
\end{DoxyParamCaption}
)}}
\label{classmdt_device_aad589d5c8c769299fdf0ea4e34d3bc0a}


Read one digital input on physical device and update (G)UI representation. 

Will call \hyperlink{classmdt_device_a7e8f070a89d8f6f104f2cc5001f5c0d6}{readDigitalInput()}, witch also sends the request to device. Depending on result, device's state can be updated.

Behaviour of this method can vary, depending on device specific subclass. (See sublcass \hyperlink{classmdt_device_a7e8f070a89d8f6f104f2cc5001f5c0d6}{readDigitalInput()} for details).

Once result is available, the internal digital input is updated. (See \hyperlink{classmdt_device_ios}{mdtDeviceIos} for details).


\begin{DoxyParams}{Parameters}
{\em address} & Depending on device organisation and protocol, this can be a relative or absolute address (f.ex. MODBUS queries), a input number, etc... \\
\hline
{\em timeout} & If 0, the request is sent and this method returns immediately. If $<$ 0, no query will be sent to device and the cached state is returned. Else it will wait until a reply comes in, or timeout. (See \hyperlink{classmdt_device_a1df875803a3a0eb7324047d33c139621}{waitTransactionDone()} ). \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
A valid state if timeout is $>$ 0 and on successfull query/reply process. (See the Qt's QVariant documentation to know how to check validity). 
\end{DoxyReturn}


Definition at line 359 of file mdtDevice.cpp.

\hypertarget{classmdt_device_a6bd6ad4f8d07121dd8b988594927e9c8}{
\index{mdtDevice@{mdtDevice}!getDigitalOutputs@{getDigitalOutputs}}
\index{getDigitalOutputs@{getDigitalOutputs}!mdtDevice@{mdtDevice}}
\subsubsection[{getDigitalOutputs}]{\setlength{\rightskip}{0pt plus 5cm}int mdtDevice::getDigitalOutputs (
\begin{DoxyParamCaption}
\item[{int}]{timeout}
\end{DoxyParamCaption}
)}}
\label{classmdt_device_a6bd6ad4f8d07121dd8b988594927e9c8}


Read all digital outputs on physical device and update (G)UI representation. 

Will call \hyperlink{classmdt_device_a7cc2f2429776f26f45d42cf49a610958}{readDigitalOutputs()}, witch also sends the request to device. Depending on result, device's state can be updated.

Behaviour of this method can vary, depending on device specific subclass. (See sublcass \hyperlink{classmdt_device_a7cc2f2429776f26f45d42cf49a610958}{readDigitalOutputs()} for details).

Once results are available, the internal digital outputs are updated. (See \hyperlink{classmdt_device_ios}{mdtDeviceIos} for details).


\begin{DoxyParams}{Parameters}
{\em timeout} & If 0, the request is sent and this method returns immediately. Else it will wait until a reply comes in, or timeout. (See \hyperlink{classmdt_device_a1df875803a3a0eb7324047d33c139621}{waitTransactionDone()} ). \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
0 or a ID on success. If no I/O's are set, on timeout ar other error, a value $<$ 0 is returned. 
\end{DoxyReturn}


Definition at line 473 of file mdtDevice.cpp.

\hypertarget{classmdt_device_a719401fec13501047ffdf7f51583937c}{
\index{mdtDevice@{mdtDevice}!getDigitalOutputState@{getDigitalOutputState}}
\index{getDigitalOutputState@{getDigitalOutputState}!mdtDevice@{mdtDevice}}
\subsubsection[{getDigitalOutputState}]{\setlength{\rightskip}{0pt plus 5cm}QVariant mdtDevice::getDigitalOutputState (
\begin{DoxyParamCaption}
\item[{int}]{address, }
\item[{int}]{timeout}
\end{DoxyParamCaption}
)}}
\label{classmdt_device_a719401fec13501047ffdf7f51583937c}


Read one digital output on physical device and update (G)UI representation. 

Will call \hyperlink{classmdt_device_a9d3f57d6022d2554f6f6a9f59a4984c1}{readDigitalOutput()}, witch also sends the request to device. Depending on result, device's state can be updated.

Behaviour of this method can vary, depending on device specific subclass. (See sublcass \hyperlink{classmdt_device_a9d3f57d6022d2554f6f6a9f59a4984c1}{readDigitalOutput()} for details).

Once result is available, the internal digital output is updated. (See \hyperlink{classmdt_device_ios}{mdtDeviceIos} for details).


\begin{DoxyParams}{Parameters}
{\em address} & Depending on device organisation and protocol, this can be a relative or absolute address (f.ex. MODBUS queries), a input number, etc... \\
\hline
{\em timeout} & If 0, the request is sent and this method returns immediately. If $<$ 0, no query will be sent to device and the cached state is returned. Else it will wait until a reply comes in, or timeout. (See \hyperlink{classmdt_device_a1df875803a3a0eb7324047d33c139621}{waitTransactionDone()} ). \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
A valid state if timeout is $>$ 0 and on successfull query/reply process. (See the Qt's QVariant documentation to know how to check validity). 
\end{DoxyReturn}


Definition at line 428 of file mdtDevice.cpp.

\hypertarget{classmdt_device_a3c363d61bf4019dbb40a15ac28fd51af}{
\index{mdtDevice@{mdtDevice}!pendingAioTransaction@{pendingAioTransaction}}
\index{pendingAioTransaction@{pendingAioTransaction}!mdtDevice@{mdtDevice}}
\subsubsection[{pendingAioTransaction}]{\setlength{\rightskip}{0pt plus 5cm}{\bf mdtAnalogIo} $\ast$ mdtDevice::pendingAioTransaction (
\begin{DoxyParamCaption}
\item[{int}]{id}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily  \mbox{[}protected\mbox{]}}}}
\label{classmdt_device_a3c363d61bf4019dbb40a15ac28fd51af}


Get analog I/O in pending transactions list. 

If transaction id was not found, 0 is returned 

Definition at line 853 of file mdtDevice.cpp.

\hypertarget{classmdt_device_aa7d3959fc291e3e2ae8d712656595dcc}{
\index{mdtDevice@{mdtDevice}!pendingDioTransaction@{pendingDioTransaction}}
\index{pendingDioTransaction@{pendingDioTransaction}!mdtDevice@{mdtDevice}}
\subsubsection[{pendingDioTransaction}]{\setlength{\rightskip}{0pt plus 5cm}{\bf mdtDigitalIo} $\ast$ mdtDevice::pendingDioTransaction (
\begin{DoxyParamCaption}
\item[{int}]{id}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily  \mbox{[}protected\mbox{]}}}}
\label{classmdt_device_aa7d3959fc291e3e2ae8d712656595dcc}


Get digital I/O in pending transactions list. 

If transaction id was not found, 0 is returned 

Definition at line 861 of file mdtDevice.cpp.

\hypertarget{classmdt_device_a789ded0f30663dde43ca5d4067273eb7}{
\index{mdtDevice@{mdtDevice}!pendingIoTransaction@{pendingIoTransaction}}
\index{pendingIoTransaction@{pendingIoTransaction}!mdtDevice@{mdtDevice}}
\subsubsection[{pendingIoTransaction}]{\setlength{\rightskip}{0pt plus 5cm}int mdtDevice::pendingIoTransaction (
\begin{DoxyParamCaption}
\item[{int}]{id}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily  \mbox{[}protected\mbox{]}}}}
\label{classmdt_device_a789ded0f30663dde43ca5d4067273eb7}


Get multiple I/O in pending transactions list. 

If transaction id was not found, value $<$ 0 is returned 

Definition at line 869 of file mdtDevice.cpp.

\hypertarget{classmdt_device_a06d9178b4133fd7b23084e712af20976}{
\index{mdtDevice@{mdtDevice}!portManager@{portManager}}
\index{portManager@{portManager}!mdtDevice@{mdtDevice}}
\subsubsection[{portManager}]{\setlength{\rightskip}{0pt plus 5cm}{\bf mdtPortManager} $\ast$ mdtDevice::portManager (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily  \mbox{[}virtual\mbox{]}}}}
\label{classmdt_device_a06d9178b4133fd7b23084e712af20976}


Get internal port manager instance. 

Note that port manager is set by subclass, and that a Null pointer can be returned. (See subclass documentation for details) 

Reimplemented in \hyperlink{classmdt_device_modbus_aed892b501f8cbd372ccfda1a4fafa536}{mdtDeviceModbus}.



Definition at line 111 of file mdtDevice.cpp.

\hypertarget{classmdt_device_acba50968d201ad95c4eaa2ab2ed48b4f}{
\index{mdtDevice@{mdtDevice}!queriesSequence@{queriesSequence}}
\index{queriesSequence@{queriesSequence}!mdtDevice@{mdtDevice}}
\subsubsection[{queriesSequence}]{\setlength{\rightskip}{0pt plus 5cm}bool mdtDevice::queriesSequence (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily  \mbox{[}protected, virtual\mbox{]}}}}
\label{classmdt_device_acba50968d201ad95c4eaa2ab2ed48b4f}


Sequence of queries to send periodically. 

This method is called from \hyperlink{classmdt_device_a14634fec6cd6bae810562b3bd88a5c05}{runQueries()}.

\begin{DoxyReturn}{Returns}
true if all queries are sent successfully.
\end{DoxyReturn}
Subclass notes:\par

\begin{DoxyItemize}
\item This default implementation does nothing and allways returns false.
\item This method can be reimplemented periodic queries must be sent to device. 
\end{DoxyItemize}

Definition at line 641 of file mdtDevice.cpp.

\hypertarget{classmdt_device_ae0948ed309354e4d8b231eb911196749}{
\index{mdtDevice@{mdtDevice}!readAnalogInput@{readAnalogInput}}
\index{readAnalogInput@{readAnalogInput}!mdtDevice@{mdtDevice}}
\subsubsection[{readAnalogInput}]{\setlength{\rightskip}{0pt plus 5cm}int mdtDevice::readAnalogInput (
\begin{DoxyParamCaption}
\item[{int}]{address}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily  \mbox{[}protected, virtual\mbox{]}}}}
\label{classmdt_device_ae0948ed309354e4d8b231eb911196749}


Read one analog input on physical device. 

This is the device specific implementation to send the query. If device handled by subclass has analog inputs, this method should be implemented.

This method is called from getAnalogInput().


\begin{DoxyParams}{Parameters}
{\em address} & Depending on device organisation and protocol, this can be a relative or absolute address (f.ex. MODBUS queries), a input number, etc... \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
0 or a ID on success, value $<$ 0 on error (see \hyperlink{classmdt_port_manager_a8b60d53d6e553f15dedec916f9c1614b}{mdtPortManager::writeData()} for details) 
\end{DoxyReturn}
\begin{DoxyPrecond}{Precondition}
I/O's must be set with \hyperlink{classmdt_device_a9f1de62ef54974b0636dee673bd819e2}{setIos()}. 
\end{DoxyPrecond}


Definition at line 684 of file mdtDevice.cpp.

\hypertarget{classmdt_device_ac0023742214c29bdadd46383ae240972}{
\index{mdtDevice@{mdtDevice}!readAnalogInputs@{readAnalogInputs}}
\index{readAnalogInputs@{readAnalogInputs}!mdtDevice@{mdtDevice}}
\subsubsection[{readAnalogInputs}]{\setlength{\rightskip}{0pt plus 5cm}int mdtDevice::readAnalogInputs (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily  \mbox{[}protected, virtual\mbox{]}}}}
\label{classmdt_device_ac0023742214c29bdadd46383ae240972}


Read all analog inputs on physical device. 

This is the device specific implementation to send the query. If device handled by subclass has analog inputs, this method should be implemented.

This method is called from \hyperlink{classmdt_device_a585cc32f6aac4d5788928ecf1fdacf51}{getAnalogInputs()}.

\begin{DoxyReturn}{Returns}
0 or a ID on success, value $<$ 0 on error (see \hyperlink{classmdt_port_manager_a8b60d53d6e553f15dedec916f9c1614b}{mdtPortManager::writeData()} for details) 
\end{DoxyReturn}
\begin{DoxyPrecond}{Precondition}
I/O's must be set with \hyperlink{classmdt_device_a9f1de62ef54974b0636dee673bd819e2}{setIos()}. 
\end{DoxyPrecond}


Definition at line 689 of file mdtDevice.cpp.

\hypertarget{classmdt_device_abf222c1bd18ba300eeacd6037e5015df}{
\index{mdtDevice@{mdtDevice}!readAnalogOutput@{readAnalogOutput}}
\index{readAnalogOutput@{readAnalogOutput}!mdtDevice@{mdtDevice}}
\subsubsection[{readAnalogOutput}]{\setlength{\rightskip}{0pt plus 5cm}int mdtDevice::readAnalogOutput (
\begin{DoxyParamCaption}
\item[{int}]{address}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily  \mbox{[}protected, virtual\mbox{]}}}}
\label{classmdt_device_abf222c1bd18ba300eeacd6037e5015df}


Read one analog output on physical device. 

This is the device specific implementation to send the query. If device handled by subclass has analog inputs, this method should be implemented.

This method is called from \hyperlink{classmdt_device_a4ec0255675f27a48f35edcfd0ba7d129}{getAnalogOutputValue()}.


\begin{DoxyParams}{Parameters}
{\em address} & Depending on device organisation and protocol, this can be a relative or absolute address (f.ex. MODBUS queries), a input number, etc... \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
0 or a ID on success, value $<$ 0 on error (see \hyperlink{classmdt_port_manager_a8b60d53d6e553f15dedec916f9c1614b}{mdtPortManager::writeData()} for details) 
\end{DoxyReturn}
\begin{DoxyPrecond}{Precondition}
I/O's must be set with \hyperlink{classmdt_device_a9f1de62ef54974b0636dee673bd819e2}{setIos()}. 
\end{DoxyPrecond}


Definition at line 694 of file mdtDevice.cpp.

\hypertarget{classmdt_device_ae0a0f03cb5267232d176896acc80872c}{
\index{mdtDevice@{mdtDevice}!readAnalogOutputs@{readAnalogOutputs}}
\index{readAnalogOutputs@{readAnalogOutputs}!mdtDevice@{mdtDevice}}
\subsubsection[{readAnalogOutputs}]{\setlength{\rightskip}{0pt plus 5cm}int mdtDevice::readAnalogOutputs (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily  \mbox{[}protected, virtual\mbox{]}}}}
\label{classmdt_device_ae0a0f03cb5267232d176896acc80872c}


Read all analog outputs on physical device. 

This is the device specific implementation to send the query. If device handled by subclass has analog inputs, this method should be implemented.

This method is called from \hyperlink{classmdt_device_a4ec0255675f27a48f35edcfd0ba7d129}{getAnalogOutputValue()}.


\begin{DoxyParams}{Parameters}
{\em address} & Depending on device organisation and protocol, this can be a relative or absolute address (f.ex. MODBUS queries), a input number, etc... \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
0 or a ID on success, value $<$ 0 on error (see \hyperlink{classmdt_port_manager_a8b60d53d6e553f15dedec916f9c1614b}{mdtPortManager::writeData()} for details) 
\end{DoxyReturn}
\begin{DoxyPrecond}{Precondition}
I/O's must be set with \hyperlink{classmdt_device_a9f1de62ef54974b0636dee673bd819e2}{setIos()}. 
\end{DoxyPrecond}


Definition at line 699 of file mdtDevice.cpp.

\hypertarget{classmdt_device_a7e8f070a89d8f6f104f2cc5001f5c0d6}{
\index{mdtDevice@{mdtDevice}!readDigitalInput@{readDigitalInput}}
\index{readDigitalInput@{readDigitalInput}!mdtDevice@{mdtDevice}}
\subsubsection[{readDigitalInput}]{\setlength{\rightskip}{0pt plus 5cm}int mdtDevice::readDigitalInput (
\begin{DoxyParamCaption}
\item[{int}]{address}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily  \mbox{[}protected, virtual\mbox{]}}}}
\label{classmdt_device_a7e8f070a89d8f6f104f2cc5001f5c0d6}


Read one digital input on physical device. 

This is the device specific implementation to send the query. If device handled by subclass has digital inputs, this method should be implemented.

This method is called from \hyperlink{classmdt_device_aad589d5c8c769299fdf0ea4e34d3bc0a}{getDigitalInputState()}.


\begin{DoxyParams}{Parameters}
{\em address} & Depending on device organisation and protocol, this can be a relative or absolute address (f.ex. MODBUS queries), a input number, etc... \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
0 or a ID on success, value $<$ 0 on error (see \hyperlink{classmdt_port_manager_a8b60d53d6e553f15dedec916f9c1614b}{mdtPortManager::writeData()} for details) 
\end{DoxyReturn}
\begin{DoxyPrecond}{Precondition}
I/O's must be set with \hyperlink{classmdt_device_a9f1de62ef54974b0636dee673bd819e2}{setIos()}. 
\end{DoxyPrecond}


Definition at line 714 of file mdtDevice.cpp.

\hypertarget{classmdt_device_a4f4d18f217aa1cf483027c9b3c0ad09b}{
\index{mdtDevice@{mdtDevice}!readDigitalInputs@{readDigitalInputs}}
\index{readDigitalInputs@{readDigitalInputs}!mdtDevice@{mdtDevice}}
\subsubsection[{readDigitalInputs}]{\setlength{\rightskip}{0pt plus 5cm}int mdtDevice::readDigitalInputs (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily  \mbox{[}protected, virtual\mbox{]}}}}
\label{classmdt_device_a4f4d18f217aa1cf483027c9b3c0ad09b}


Read all digital inputs on physical device. 

This is the device specific implementation to send the query. If device handled by subclass has digital inputs, this method should be implemented.

This method is called from \hyperlink{classmdt_device_ae482b28263b2ce61735f42f1245c1e99}{getDigitalInputs()}.

\begin{DoxyReturn}{Returns}
0 or a ID on success, value $<$ 0 on error (see \hyperlink{classmdt_port_manager_a8b60d53d6e553f15dedec916f9c1614b}{mdtPortManager::writeData()} for details) 
\end{DoxyReturn}
\begin{DoxyPrecond}{Precondition}
I/O's must be set with \hyperlink{classmdt_device_a9f1de62ef54974b0636dee673bd819e2}{setIos()}. 
\end{DoxyPrecond}


Definition at line 719 of file mdtDevice.cpp.

\hypertarget{classmdt_device_a9d3f57d6022d2554f6f6a9f59a4984c1}{
\index{mdtDevice@{mdtDevice}!readDigitalOutput@{readDigitalOutput}}
\index{readDigitalOutput@{readDigitalOutput}!mdtDevice@{mdtDevice}}
\subsubsection[{readDigitalOutput}]{\setlength{\rightskip}{0pt plus 5cm}int mdtDevice::readDigitalOutput (
\begin{DoxyParamCaption}
\item[{int}]{address}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily  \mbox{[}protected, virtual\mbox{]}}}}
\label{classmdt_device_a9d3f57d6022d2554f6f6a9f59a4984c1}


Read one digital output on physical device. 

This is the device specific implementation to send the query. If device handled by subclass has digital outputs, this method should be implemented.

This method is called from \hyperlink{classmdt_device_a719401fec13501047ffdf7f51583937c}{getDigitalOutputState()}.


\begin{DoxyParams}{Parameters}
{\em address} & Depending on device organisation and protocol, this can be a relative or absolute address (f.ex. MODBUS queries), a output number, etc... \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
0 or a ID on success, value $<$ 0 on error (see \hyperlink{classmdt_port_manager_a8b60d53d6e553f15dedec916f9c1614b}{mdtPortManager::writeData()} for details) 
\end{DoxyReturn}
\begin{DoxyPrecond}{Precondition}
I/O's must be set with \hyperlink{classmdt_device_a9f1de62ef54974b0636dee673bd819e2}{setIos()}. 
\end{DoxyPrecond}


Definition at line 724 of file mdtDevice.cpp.

\hypertarget{classmdt_device_a7cc2f2429776f26f45d42cf49a610958}{
\index{mdtDevice@{mdtDevice}!readDigitalOutputs@{readDigitalOutputs}}
\index{readDigitalOutputs@{readDigitalOutputs}!mdtDevice@{mdtDevice}}
\subsubsection[{readDigitalOutputs}]{\setlength{\rightskip}{0pt plus 5cm}int mdtDevice::readDigitalOutputs (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily  \mbox{[}protected, virtual\mbox{]}}}}
\label{classmdt_device_a7cc2f2429776f26f45d42cf49a610958}


Read all digital outputs on physical device. 

This is the device specific implementation to send the query. If device handled by subclass has digital outputs, this method should be implemented.

This method is called from \hyperlink{classmdt_device_a6bd6ad4f8d07121dd8b988594927e9c8}{getDigitalOutputs()}.

\begin{DoxyReturn}{Returns}
0 or a ID on success, value $<$ 0 on error (see \hyperlink{classmdt_port_manager_a8b60d53d6e553f15dedec916f9c1614b}{mdtPortManager::writeData()} for details) 
\end{DoxyReturn}
\begin{DoxyPrecond}{Precondition}
I/O's must be set with \hyperlink{classmdt_device_a9f1de62ef54974b0636dee673bd819e2}{setIos()}. 
\end{DoxyPrecond}


Definition at line 729 of file mdtDevice.cpp.

\hypertarget{classmdt_device_a14634fec6cd6bae810562b3bd88a5c05}{
\index{mdtDevice@{mdtDevice}!runQueries@{runQueries}}
\index{runQueries@{runQueries}!mdtDevice@{mdtDevice}}
\subsubsection[{runQueries}]{\setlength{\rightskip}{0pt plus 5cm}void mdtDevice::runQueries (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily  \mbox{[}slot\mbox{]}}}}
\label{classmdt_device_a14634fec6cd6bae810562b3bd88a5c05}


Queries to send periodically. 

This slot is periodically called after a call of \hyperlink{classmdt_device_a721c5bf2cfa0eef5304333f08da182f7}{start()}. 

Definition at line 632 of file mdtDevice.cpp.

\hypertarget{classmdt_device_a3477278b4fa937f7667becb14333ef2f}{
\index{mdtDevice@{mdtDevice}!setAnalogOutputAddressOffset@{setAnalogOutputAddressOffset}}
\index{setAnalogOutputAddressOffset@{setAnalogOutputAddressOffset}!mdtDevice@{mdtDevice}}
\subsubsection[{setAnalogOutputAddressOffset}]{\setlength{\rightskip}{0pt plus 5cm}void mdtDevice::setAnalogOutputAddressOffset (
\begin{DoxyParamCaption}
\item[{int}]{offset}
\end{DoxyParamCaption}
)}}
\label{classmdt_device_a3477278b4fa937f7667becb14333ef2f}


Set analog output address offset. 

Some devices has a offset for output addresses. F.ex. the Wago 750 system has a offset of 0x0200 

Definition at line 101 of file mdtDevice.cpp.

\hypertarget{classmdt_device_ae45c39c2ef38b5952171fdc1c3284748}{
\index{mdtDevice@{mdtDevice}!setAnalogOutputs@{setAnalogOutputs}}
\index{setAnalogOutputs@{setAnalogOutputs}!mdtDevice@{mdtDevice}}
\subsubsection[{setAnalogOutputs}]{\setlength{\rightskip}{0pt plus 5cm}int mdtDevice::setAnalogOutputs (
\begin{DoxyParamCaption}
\item[{int}]{timeout}
\end{DoxyParamCaption}
)}}
\label{classmdt_device_ae45c39c2ef38b5952171fdc1c3284748}


Write all analog outputs on physical device and update (G)UI representation. 

To send the analog outputs values once, it's possible to set them without sending query. See \hyperlink{classmdt_device_ios}{mdtDeviceIos} and \hyperlink{classmdt_analog_io}{mdtAnalogIo} for details. Then, call this method to sent all analog outputs values to device.

\hyperlink{classmdt_device_a797eeb704d5104b7a4411ebeecb018c6}{writeAnalogOutputs()} will be called, witch also sends the request to device. Depending on result, device's state can be updated.

Behaviour of this method can vary, depending on device specific subclass. (See sublcass \hyperlink{classmdt_device_a797eeb704d5104b7a4411ebeecb018c6}{writeAnalogOutputs()} for details).

Once results are available, the internal analog outputs are updated. (See \hyperlink{classmdt_device_ios}{mdtDeviceIos} for details).


\begin{DoxyParams}{Parameters}
{\em timeout} & If 0, the request is sent and this method returns immediately. Else it will wait until a reply comes in, or timeout. (See \hyperlink{classmdt_device_a1df875803a3a0eb7324047d33c139621}{waitTransactionDone()} ). \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
0 or a ID on success. If no I/O's are set, on timeout ar other error, a value $<$ 0 is returned. 
\end{DoxyReturn}


Definition at line 335 of file mdtDevice.cpp.

\hypertarget{classmdt_device_a40234a70a37b097baa48bdfbb402cdc4}{
\index{mdtDevice@{mdtDevice}!setAnalogOutputValue@{setAnalogOutputValue}}
\index{setAnalogOutputValue@{setAnalogOutputValue}!mdtDevice@{mdtDevice}}
\subsubsection[{setAnalogOutputValue}]{\setlength{\rightskip}{0pt plus 5cm}void mdtDevice::setAnalogOutputValue (
\begin{DoxyParamCaption}
\item[{int}]{address}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily  \mbox{[}slot\mbox{]}}}}
\label{classmdt_device_a40234a70a37b097baa48bdfbb402cdc4}


Set value on a analog output on physical device. 

Checks device's state and send request if Ready.

This slot is used by \hyperlink{classmdt_device_ios}{mdtDeviceIos} to notify that a value has changed.

Will call \hyperlink{classmdt_device_a3d11f48e7b605a54c884977b773615e2}{writeAnalogOutput()}, witch also sends the request to device. Depending on result, device's state can be updated.

Behaviour of this method can vary, depending on device specific subclass. (See sublcass \hyperlink{classmdt_device_a3d11f48e7b605a54c884977b773615e2}{writeAnalogOutput()} for details).

Once result is available, the internal analog output is updated. (See \hyperlink{classmdt_device_ios}{mdtDeviceIos} for details).


\begin{DoxyParams}{Parameters}
{\em address} & Depending on device organisation and protocol, this can be a relative or absolute address (f.ex. MODBUS queries), a output number, etc... \\
\hline
\end{DoxyParams}


Definition at line 570 of file mdtDevice.cpp.

\hypertarget{classmdt_device_a4b01925cfbbb62e32a3e85a9c4b1538a}{
\index{mdtDevice@{mdtDevice}!setAnalogOutputValue@{setAnalogOutputValue}}
\index{setAnalogOutputValue@{setAnalogOutputValue}!mdtDevice@{mdtDevice}}
\subsubsection[{setAnalogOutputValue}]{\setlength{\rightskip}{0pt plus 5cm}int mdtDevice::setAnalogOutputValue (
\begin{DoxyParamCaption}
\item[{int}]{address, }
\item[{QVariant}]{value, }
\item[{int}]{timeout}
\end{DoxyParamCaption}
)}}
\label{classmdt_device_a4b01925cfbbb62e32a3e85a9c4b1538a}


Write one analog output to physical device and update (G)UI representation. 

Will call \hyperlink{classmdt_device_a3d11f48e7b605a54c884977b773615e2}{writeAnalogOutput()}, witch also sends the request to device. Depending on result, device's state can be updated.

Behaviour of this method can vary, depending on device specific subclass. (See sublcass \hyperlink{classmdt_device_a3d11f48e7b605a54c884977b773615e2}{writeAnalogOutput()} for details).

Once result is available, the internal analog output is updated. (See \hyperlink{classmdt_device_ios}{mdtDeviceIos} for details).


\begin{DoxyParams}{Parameters}
{\em timeout} & If 0, the request is sent and this method returns immediately. If $<$ 0, the analog output is updated, but no query is sent to device. Else it will wait until a reply comes in, or timeout. (See \hyperlink{classmdt_device_a1df875803a3a0eb7324047d33c139621}{waitTransactionDone()} ). \\
\hline
{\em value} & The value to set. If type is a integer, value will be passed as is. If type is bool, it will be converted by \hyperlink{classmdt_analog_io}{mdtAnalogIo}. \\
\hline
{\em address} & Depending on device organisation and protocol, this can be a relative or absolute address (f.ex. MODBUS queries), a output number, etc... \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
0 or a ID on success. If no I/O's are set, on timeout, on invalid value or other error, a value $<$ 0 is returned. 
\end{DoxyReturn}


Definition at line 285 of file mdtDevice.cpp.

\hypertarget{classmdt_device_aa241c40514683254990e742cf1bbb155}{
\index{mdtDevice@{mdtDevice}!setBackToReadyStateTimeout@{setBackToReadyStateTimeout}}
\index{setBackToReadyStateTimeout@{setBackToReadyStateTimeout}!mdtDevice@{mdtDevice}}
\subsubsection[{setBackToReadyStateTimeout}]{\setlength{\rightskip}{0pt plus 5cm}void mdtDevice::setBackToReadyStateTimeout (
\begin{DoxyParamCaption}
\item[{int}]{timeout}
\end{DoxyParamCaption}
)}}
\label{classmdt_device_aa241c40514683254990e742cf1bbb155}


Set back to ready state timeout. 

After some event (device disconnected, response timeout, ...) the state can be changed from Ready to another.

Note: if state is different than Ready, the slots \hyperlink{classmdt_device_a40234a70a37b097baa48bdfbb402cdc4}{setAnalogOutputValue(int)} and \hyperlink{classmdt_device_a83b170f1805a05101409bb6d8e15d03a}{setDigitalOutputState(int)} will return immediately, without trying to send a request.

In some application, it can be usefull that state comes back automatically to ready.


\begin{DoxyParams}{Parameters}
{\em timeout} & Time before go back to ready state \mbox{[}ms\mbox{]} If timeout is $<$ 0, device still in current state, and \hyperlink{classmdt_device_a4eeda85bf0b10ddc9955a32199c00359}{setStateReady()} can be used. \\
\hline
\end{DoxyParams}


Definition at line 96 of file mdtDevice.cpp.

\hypertarget{classmdt_device_af5c2759221878a4d0306343f43e3cc45}{
\index{mdtDevice@{mdtDevice}!setDigitalOutputAddressOffset@{setDigitalOutputAddressOffset}}
\index{setDigitalOutputAddressOffset@{setDigitalOutputAddressOffset}!mdtDevice@{mdtDevice}}
\subsubsection[{setDigitalOutputAddressOffset}]{\setlength{\rightskip}{0pt plus 5cm}void mdtDevice::setDigitalOutputAddressOffset (
\begin{DoxyParamCaption}
\item[{int}]{offset}
\end{DoxyParamCaption}
)}}
\label{classmdt_device_af5c2759221878a4d0306343f43e3cc45}


Set digital output address offset. 

Some devices has a offset for output addresses. F.ex. the Wago 750 system has a offset of 0x0200 

Definition at line 106 of file mdtDevice.cpp.

\hypertarget{classmdt_device_ae68a400d5f27fe142d41b674f473bf98}{
\index{mdtDevice@{mdtDevice}!setDigitalOutputs@{setDigitalOutputs}}
\index{setDigitalOutputs@{setDigitalOutputs}!mdtDevice@{mdtDevice}}
\subsubsection[{setDigitalOutputs}]{\setlength{\rightskip}{0pt plus 5cm}int mdtDevice::setDigitalOutputs (
\begin{DoxyParamCaption}
\item[{int}]{timeout}
\end{DoxyParamCaption}
)}}
\label{classmdt_device_ae68a400d5f27fe142d41b674f473bf98}


Write all digital outputs to physical device and update (G)UI representation. 

To send the digital outputs states once, it's possible to set them without sending query. See \hyperlink{classmdt_device_ios}{mdtDeviceIos} and \hyperlink{classmdt_digital_io}{mdtDigitalIo} for details. Then, call this method to sent all digital outputs states to device.

\hyperlink{classmdt_device_ad640c81dd966ed31c46d14961fd12830}{writeDigitalOutputs()} will be called, witch also sends the request to device. Depending on result, device's state can be updated.

Behaviour of this method can vary, depending on device specific subclass. (See sublcass \hyperlink{classmdt_device_ad640c81dd966ed31c46d14961fd12830}{writeDigitalOutputs()} for details).

Once results are available, the internal digital outputs are updated. (See \hyperlink{classmdt_device_ios}{mdtDeviceIos} for details).


\begin{DoxyParams}{Parameters}
{\em timeout} & If 0, the request is sent and this method returns immediately. Else it will wait until a reply comes in, or timeout. (See \hyperlink{classmdt_device_a1df875803a3a0eb7324047d33c139621}{waitTransactionDone()} ). \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
0 or a ID on success. If no I/O's are set, on timeout ar other error, a value $<$ 0 is returned. 
\end{DoxyReturn}


Definition at line 541 of file mdtDevice.cpp.

\hypertarget{classmdt_device_a702a5f49680b03f04a9f58ae6906bf83}{
\index{mdtDevice@{mdtDevice}!setDigitalOutputState@{setDigitalOutputState}}
\index{setDigitalOutputState@{setDigitalOutputState}!mdtDevice@{mdtDevice}}
\subsubsection[{setDigitalOutputState}]{\setlength{\rightskip}{0pt plus 5cm}int mdtDevice::setDigitalOutputState (
\begin{DoxyParamCaption}
\item[{int}]{address, }
\item[{bool}]{state, }
\item[{int}]{timeout}
\end{DoxyParamCaption}
)}}
\label{classmdt_device_a702a5f49680b03f04a9f58ae6906bf83}


Write one digital output to physical device and update (G)UI representation. 

Will call \hyperlink{classmdt_device_a2a1354e80bd6f3bdca3b68cc0a9a4ea1}{writeDigitalOutput()}, witch also sends the request to device. Depending on result, device's state can be updated.

Behaviour of this method can vary, depending on device specific subclass. (See sublcass \hyperlink{classmdt_device_a2a1354e80bd6f3bdca3b68cc0a9a4ea1}{writeDigitalOutput()} for details).

Once result is available, the internal digital output is updated. (See \hyperlink{classmdt_device_ios}{mdtDeviceIos} for details).


\begin{DoxyParams}{Parameters}
{\em state} & The state (ON/OFF) to set. \\
\hline
{\em address} & Depending on device organisation and protocol, this can be a relative or absolute address (f.ex. MODBUS queries), a output number, etc... \\
\hline
{\em timeout} & If 0, the request is sent and this method returns immediately. If $<$ 0, the digital output is updated, but no query is sent to device. Else it will wait until a reply comes in, or timeout. (See \hyperlink{classmdt_device_a1df875803a3a0eb7324047d33c139621}{waitTransactionDone()} ). \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
0 or a ID on success. If no I/O's are set, on timeout, on invalid value or other error, a value $<$ 0 is returned. 
\end{DoxyReturn}


qDebug() $<$$<$ \char`\"{}mdtDevice::setDigitalOutputState(): Out \char`\"{} $<$$<$ address $<$$<$ \char`\"{} : \char`\"{} $<$$<$ dout-\/$>$isOn();

qDebug() $<$$<$ \char`\"{}mdtDevice::setDigitalOutputState(): Out \char`\"{} $<$$<$ address $<$$<$ \char`\"{} : \char`\"{} $<$$<$ dout-\/$>$isOn(); 



Definition at line 497 of file mdtDevice.cpp.

\hypertarget{classmdt_device_a83b170f1805a05101409bb6d8e15d03a}{
\index{mdtDevice@{mdtDevice}!setDigitalOutputState@{setDigitalOutputState}}
\index{setDigitalOutputState@{setDigitalOutputState}!mdtDevice@{mdtDevice}}
\subsubsection[{setDigitalOutputState}]{\setlength{\rightskip}{0pt plus 5cm}void mdtDevice::setDigitalOutputState (
\begin{DoxyParamCaption}
\item[{int}]{address}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily  \mbox{[}slot\mbox{]}}}}
\label{classmdt_device_a83b170f1805a05101409bb6d8e15d03a}


Set state on a digital output on physical device. 

Checks device's state and send request if Ready.

This slot is used by \hyperlink{classmdt_device_ios}{mdtDeviceIos} to notify that a state has changed.

Will call \hyperlink{classmdt_device_a2a1354e80bd6f3bdca3b68cc0a9a4ea1}{writeDigitalOutput()}, witch also sends the request to device. Depending on result, device's state can be updated.

Behaviour of this method can vary, depending on device specific subclass. (See sublcass \hyperlink{classmdt_device_a2a1354e80bd6f3bdca3b68cc0a9a4ea1}{writeDigitalOutput()} for details).

Once result is available, the internal digital output is updated. (See \hyperlink{classmdt_device_ios}{mdtDeviceIos} for details).


\begin{DoxyParams}{Parameters}
{\em address} & Depending on device organisation and protocol, this can be a relative or absolute address (f.ex. MODBUS queries), a output number, etc... \\
\hline
\end{DoxyParams}


Definition at line 601 of file mdtDevice.cpp.

\hypertarget{classmdt_device_a9f1de62ef54974b0636dee673bd819e2}{
\index{mdtDevice@{mdtDevice}!setIos@{setIos}}
\index{setIos@{setIos}!mdtDevice@{mdtDevice}}
\subsubsection[{setIos}]{\setlength{\rightskip}{0pt plus 5cm}void mdtDevice::setIos (
\begin{DoxyParamCaption}
\item[{{\bf mdtDeviceIos} $\ast$}]{ios, }
\item[{bool}]{autoOutputUpdate = {\ttfamily false}}
\end{DoxyParamCaption}
)}}
\label{classmdt_device_a9f1de62ef54974b0636dee673bd819e2}


Set the I/O's container. 


\begin{DoxyParams}{Parameters}
{\em ios} & A pointer to a \hyperlink{classmdt_device_ios}{mdtDeviceIos} object \\
\hline
{\em autoOutputUpdate} & If true, \hyperlink{classmdt_analog_io_ad658090469cc6b69fa92d9bca73d8a16}{mdtAnalogIo::valueChanged()} signal will be connected to setAnalogOutputValue(int, int) slot for each analog output and \hyperlink{classmdt_digital_io_a69c20119906682c0bd90833598127328}{mdtDigitalIo::stateChanged()} signal will be connected to setDigitalOutputState(int, bool) slot for each digital output.\\
\hline
\end{DoxyParams}
\begin{DoxyPrecond}{Precondition}
ios must be a valid pointer 
\end{DoxyPrecond}


Definition at line 73 of file mdtDevice.cpp.

\hypertarget{classmdt_device_abf01ab213b91df9ff03ad6b7184abf88}{
\index{mdtDevice@{mdtDevice}!setStateBusy@{setStateBusy}}
\index{setStateBusy@{setStateBusy}!mdtDevice@{mdtDevice}}
\subsubsection[{setStateBusy}]{\setlength{\rightskip}{0pt plus 5cm}void mdtDevice::setStateBusy (
\begin{DoxyParamCaption}
\item[{int}]{retryTimeout = {\ttfamily -\/1}}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily  \mbox{[}protected\mbox{]}}}}
\label{classmdt_device_abf01ab213b91df9ff03ad6b7184abf88}


Set the busy state. 

Busy state can be used when physical device or computer (this software) cannot process more requests. Emit \hyperlink{classmdt_device_aecd2d9d2cc3665f2084d0fd20eb3db2d}{stateChanged()} if current state was not Busy.


\begin{DoxyParams}{Parameters}
{\em retryTimeout} & If $>$= 0, device will automatically go back to ready state after this timeout \mbox{[}ms\mbox{]} \\
\hline
\end{DoxyParams}


QTimer::singleShot(retryTimeout, this, SLOT(\hyperlink{classmdt_device_a4eeda85bf0b10ddc9955a32199c00359}{setStateReady()})); 



Definition at line 774 of file mdtDevice.cpp.

\hypertarget{classmdt_device_afe240d2bb42c13182ea3b1b5deff006b}{
\index{mdtDevice@{mdtDevice}!setStateConnecting@{setStateConnecting}}
\index{setStateConnecting@{setStateConnecting}!mdtDevice@{mdtDevice}}
\subsubsection[{setStateConnecting}]{\setlength{\rightskip}{0pt plus 5cm}void mdtDevice::setStateConnecting (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily  \mbox{[}protected\mbox{]}}}}
\label{classmdt_device_afe240d2bb42c13182ea3b1b5deff006b}


Set the connecting state. 

Emit \hyperlink{classmdt_device_aecd2d9d2cc3665f2084d0fd20eb3db2d}{stateChanged()} if current state was not Connecting. 

Definition at line 758 of file mdtDevice.cpp.

\hypertarget{classmdt_device_ac3df06706c79730fde70ee6131af577c}{
\index{mdtDevice@{mdtDevice}!setStateDisconnected@{setStateDisconnected}}
\index{setStateDisconnected@{setStateDisconnected}!mdtDevice@{mdtDevice}}
\subsubsection[{setStateDisconnected}]{\setlength{\rightskip}{0pt plus 5cm}void mdtDevice::setStateDisconnected (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily  \mbox{[}protected\mbox{]}}}}
\label{classmdt_device_ac3df06706c79730fde70ee6131af577c}


Set the disconnected state. 

Emit \hyperlink{classmdt_device_aecd2d9d2cc3665f2084d0fd20eb3db2d}{stateChanged()} if current state was not Disconnected. 

Definition at line 744 of file mdtDevice.cpp.

\hypertarget{classmdt_device_ab77eb4c1bb50201e97a4dbd8b538659a}{
\index{mdtDevice@{mdtDevice}!setStateFromPortError@{setStateFromPortError}}
\index{setStateFromPortError@{setStateFromPortError}!mdtDevice@{mdtDevice}}
\subsubsection[{setStateFromPortError}]{\setlength{\rightskip}{0pt plus 5cm}void mdtDevice::setStateFromPortError (
\begin{DoxyParamCaption}
\item[{int}]{error}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily  \mbox{[}slot\mbox{]}}}}
\label{classmdt_device_ab77eb4c1bb50201e97a4dbd8b538659a}


Update device state regarding port error. 

If error is unknown, the state is changed to Unknown. 

Definition at line 646 of file mdtDevice.cpp.

\hypertarget{classmdt_device_a4eeda85bf0b10ddc9955a32199c00359}{
\index{mdtDevice@{mdtDevice}!setStateReady@{setStateReady}}
\index{setStateReady@{setStateReady}!mdtDevice@{mdtDevice}}
\subsubsection[{setStateReady}]{\setlength{\rightskip}{0pt plus 5cm}void mdtDevice::setStateReady (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily  \mbox{[}slot\mbox{]}}}}
\label{classmdt_device_a4eeda85bf0b10ddc9955a32199c00359}


Set the ready state. 

Emit \hyperlink{classmdt_device_aecd2d9d2cc3665f2084d0fd20eb3db2d}{stateChanged()} if current state was not Ready. 

Definition at line 666 of file mdtDevice.cpp.

\hypertarget{classmdt_device_a312bf413dfc16765328843f3fe08a4b8}{
\index{mdtDevice@{mdtDevice}!setStateUnknown@{setStateUnknown}}
\index{setStateUnknown@{setStateUnknown}!mdtDevice@{mdtDevice}}
\subsubsection[{setStateUnknown}]{\setlength{\rightskip}{0pt plus 5cm}void mdtDevice::setStateUnknown (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily  \mbox{[}protected\mbox{]}}}}
\label{classmdt_device_a312bf413dfc16765328843f3fe08a4b8}


Set the unknown state. 

Will add a error to \hyperlink{classmdt_error}{mdtError} system. Emit \hyperlink{classmdt_device_aecd2d9d2cc3665f2084d0fd20eb3db2d}{stateChanged()} if current state was not Unknown. 

Definition at line 793 of file mdtDevice.cpp.

\hypertarget{classmdt_device_a721c5bf2cfa0eef5304333f08da182f7}{
\index{mdtDevice@{mdtDevice}!start@{start}}
\index{start@{start}!mdtDevice@{mdtDevice}}
\subsubsection[{start}]{\setlength{\rightskip}{0pt plus 5cm}void mdtDevice::start (
\begin{DoxyParamCaption}
\item[{int}]{queryInterval}
\end{DoxyParamCaption}
)}}
\label{classmdt_device_a721c5bf2cfa0eef5304333f08da182f7}


Start periodic device querying. 

Internally, the \hyperlink{classmdt_device_a14634fec6cd6bae810562b3bd88a5c05}{runQueries()} slot will be called each queryInterval of time.


\begin{DoxyParams}{Parameters}
{\em queryInterval} & Query interval \mbox{[}ms\mbox{]} \\
\hline
\end{DoxyParams}


Definition at line 116 of file mdtDevice.cpp.

\hypertarget{classmdt_device_a1df875803a3a0eb7324047d33c139621}{
\index{mdtDevice@{mdtDevice}!waitTransactionDone@{waitTransactionDone}}
\index{waitTransactionDone@{waitTransactionDone}!mdtDevice@{mdtDevice}}
\subsubsection[{waitTransactionDone}]{\setlength{\rightskip}{0pt plus 5cm}bool mdtDevice::waitTransactionDone (
\begin{DoxyParamCaption}
\item[{int}]{id, }
\item[{int}]{timeout, }
\item[{int}]{granularity = {\ttfamily 50}}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily  \mbox{[}protected\mbox{]}}}}
\label{classmdt_device_a1df875803a3a0eb7324047d33c139621}


Wait until a transaction is done without break the GUI's event loop. 

This is a helper method that provide a blocking wait. Internally, a couple of sleep and event processing is done, avoiding freesing the GUI.


\begin{DoxyParams}{Parameters}
{\em id} & Id returned by query method \\
\hline
{\em timeout} & Timeout \mbox{[}ms\mbox{]} \\
\hline
{\em granularity} & Sleep time between each call of event processing \mbox{[}ms\mbox{]}\par
 A little value needs more CPU and big value can freese the GUI. Should be between 50 and 100, and must be $>$ 0. Note that msecs must be a multiple of granularity. \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
True on success, false on timeout. If id was not found in transactions list, a warning will be generated in \hyperlink{classmdt_error}{mdtError} system, and false will be returned. 
\end{DoxyReturn}
\begin{DoxyPrecond}{Precondition}
granularity must be $>$ 0. 
\end{DoxyPrecond}


setStateBusy(pvBackToReadyStateTimeout);

setStateBusy(pvBackToReadyStateTimeout);

setStateBusy(pvBackToReadyStateTimeout); 



Definition at line 880 of file mdtDevice.cpp.

\hypertarget{classmdt_device_a3d11f48e7b605a54c884977b773615e2}{
\index{mdtDevice@{mdtDevice}!writeAnalogOutput@{writeAnalogOutput}}
\index{writeAnalogOutput@{writeAnalogOutput}!mdtDevice@{mdtDevice}}
\subsubsection[{writeAnalogOutput}]{\setlength{\rightskip}{0pt plus 5cm}int mdtDevice::writeAnalogOutput (
\begin{DoxyParamCaption}
\item[{int}]{address, }
\item[{int}]{value}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily  \mbox{[}protected, virtual\mbox{]}}}}
\label{classmdt_device_a3d11f48e7b605a54c884977b773615e2}


Write value on a analog output to physical device. 

This is the device specific implementation to send the query. If device handled by subclass has analog outputs, this method should be implemented.

This method is called from \hyperlink{classmdt_device_a4b01925cfbbb62e32a3e85a9c4b1538a}{setAnalogOutputValue()}.


\begin{DoxyParams}{Parameters}
{\em address} & Depending on device organisation and protocol, this can be a relative or absolute address (f.ex. MODBUS queries), a input number, etc... \\
\hline
{\em value} & Value encoded regarding device format. \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
0 or a ID on success, value $<$ 0 on error (see \hyperlink{classmdt_port_manager_a8b60d53d6e553f15dedec916f9c1614b}{mdtPortManager::writeData()} for details) 
\end{DoxyReturn}
\begin{DoxyPrecond}{Precondition}
I/O's must be set with \hyperlink{classmdt_device_a9f1de62ef54974b0636dee673bd819e2}{setIos()}. 
\end{DoxyPrecond}


Definition at line 704 of file mdtDevice.cpp.

\hypertarget{classmdt_device_a797eeb704d5104b7a4411ebeecb018c6}{
\index{mdtDevice@{mdtDevice}!writeAnalogOutputs@{writeAnalogOutputs}}
\index{writeAnalogOutputs@{writeAnalogOutputs}!mdtDevice@{mdtDevice}}
\subsubsection[{writeAnalogOutputs}]{\setlength{\rightskip}{0pt plus 5cm}int mdtDevice::writeAnalogOutputs (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily  \mbox{[}protected, virtual\mbox{]}}}}
\label{classmdt_device_a797eeb704d5104b7a4411ebeecb018c6}


Write all analog outputs to physical device. 

This is the device specific implementation to send the query. If device handled by subclass has analog outputs, this method should be implemented.

This method is called from \hyperlink{classmdt_device_ae45c39c2ef38b5952171fdc1c3284748}{setAnalogOutputs()}.

\begin{DoxyReturn}{Returns}
0 or a ID on success, value $<$ 0 on error (see \hyperlink{classmdt_port_manager_a8b60d53d6e553f15dedec916f9c1614b}{mdtPortManager::writeData()} for details) 
\end{DoxyReturn}
\begin{DoxyPrecond}{Precondition}
I/O's must be set with \hyperlink{classmdt_device_a9f1de62ef54974b0636dee673bd819e2}{setIos()}. 
\end{DoxyPrecond}


Definition at line 709 of file mdtDevice.cpp.

\hypertarget{classmdt_device_a2a1354e80bd6f3bdca3b68cc0a9a4ea1}{
\index{mdtDevice@{mdtDevice}!writeDigitalOutput@{writeDigitalOutput}}
\index{writeDigitalOutput@{writeDigitalOutput}!mdtDevice@{mdtDevice}}
\subsubsection[{writeDigitalOutput}]{\setlength{\rightskip}{0pt plus 5cm}int mdtDevice::writeDigitalOutput (
\begin{DoxyParamCaption}
\item[{int}]{address, }
\item[{bool}]{state}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily  \mbox{[}protected, virtual\mbox{]}}}}
\label{classmdt_device_a2a1354e80bd6f3bdca3b68cc0a9a4ea1}


Write state on a digital output to physical device. 

This is the device specific implementation to send the query. If device handled by subclass has digital outputs, this method should be implemented.

This method is called from \hyperlink{classmdt_device_a702a5f49680b03f04a9f58ae6906bf83}{setDigitalOutputState()}.


\begin{DoxyParams}{Parameters}
{\em address} & Depending on device organisation and protocol, this can be a relative or absolute address (f.ex. MODBUS queries), a output number, etc... \\
\hline
{\em state} & State (ON/OFF). \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
0 or a ID on success, value $<$ 0 on error (see \hyperlink{classmdt_port_manager_a8b60d53d6e553f15dedec916f9c1614b}{mdtPortManager::writeData()} for details) 
\end{DoxyReturn}
\begin{DoxyPrecond}{Precondition}
I/O's must be set with \hyperlink{classmdt_device_a9f1de62ef54974b0636dee673bd819e2}{setIos()}. 
\end{DoxyPrecond}


Definition at line 734 of file mdtDevice.cpp.

\hypertarget{classmdt_device_ad640c81dd966ed31c46d14961fd12830}{
\index{mdtDevice@{mdtDevice}!writeDigitalOutputs@{writeDigitalOutputs}}
\index{writeDigitalOutputs@{writeDigitalOutputs}!mdtDevice@{mdtDevice}}
\subsubsection[{writeDigitalOutputs}]{\setlength{\rightskip}{0pt plus 5cm}int mdtDevice::writeDigitalOutputs (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily  \mbox{[}protected, virtual\mbox{]}}}}
\label{classmdt_device_ad640c81dd966ed31c46d14961fd12830}


Write all digital outputs to physical device. 

This is the device specific implementation to send the query. If device handled by subclass has digital outputs, this method should be implemented.

This method is called from \hyperlink{classmdt_device_ae68a400d5f27fe142d41b674f473bf98}{setDigitalOutputs()}.

\begin{DoxyReturn}{Returns}
0 or a ID on success, value $<$ 0 on error (see \hyperlink{classmdt_port_manager_a8b60d53d6e553f15dedec916f9c1614b}{mdtPortManager::writeData()} for details) 
\end{DoxyReturn}
\begin{DoxyPrecond}{Precondition}
I/O's must be set with \hyperlink{classmdt_device_a9f1de62ef54974b0636dee673bd819e2}{setIos()}. 
\end{DoxyPrecond}


Definition at line 739 of file mdtDevice.cpp.



The documentation for this class was generated from the following files:\begin{DoxyCompactItemize}
\item 
src/mdtdevice/mdtDevice.h\item 
src/mdtdevice/mdtDevice.cpp\end{DoxyCompactItemize}
