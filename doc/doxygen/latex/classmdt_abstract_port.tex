\hypertarget{classmdt_abstract_port}{\section{mdt\-Abstract\-Port Class Reference}
\label{classmdt_abstract_port}\index{mdt\-Abstract\-Port@{mdt\-Abstract\-Port}}
}


Base class for port I/\-O.  




{\ttfamily \#include $<$mdt\-Abstract\-Port.\-h$>$}



Inheritance diagram for mdt\-Abstract\-Port\-:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classmdt_abstract_port__inherit__graph}
\end{center}
\end{figure}


Collaboration diagram for mdt\-Abstract\-Port\-:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classmdt_abstract_port__coll__graph}
\end{center}
\end{figure}
\subsection*{Public Types}
\begin{DoxyCompactItemize}
\item 
enum \hyperlink{classmdt_abstract_port_ad4121bb930c95887e77f8bafa065a85e}{error\-\_\-t} \{ \\*
\hyperlink{classmdt_abstract_port_ad4121bb930c95887e77f8bafa065a85eab898bd273effe5cb4ed1a399a2d4baad}{No\-Error} = 0, 
\hyperlink{classmdt_abstract_port_ad4121bb930c95887e77f8bafa065a85eaedd63daf0db75794bb8e8e467da9575c}{Port\-Locked} = -\/1000, 
\hyperlink{classmdt_abstract_port_ad4121bb930c95887e77f8bafa065a85ea54a896ba3ff98896390e87bfe1f29eb0}{Port\-Not\-Found}, 
\hyperlink{classmdt_abstract_port_ad4121bb930c95887e77f8bafa065a85eaee5a84e59e9dc5fcf27cac57068bb1f4}{Port\-Access}, 
\\*
\hyperlink{classmdt_abstract_port_ad4121bb930c95887e77f8bafa065a85ea3d692317af7125319f60204df3101307}{Setup\-Error}, 
\hyperlink{classmdt_abstract_port_ad4121bb930c95887e77f8bafa065a85eae50ff4a9393507ad39005ddc7d5be42f}{Write\-Canceled}, 
\hyperlink{classmdt_abstract_port_ad4121bb930c95887e77f8bafa065a85eac910ca649b9eaa64e290be41945a61dc}{Read\-Canceled}, 
\hyperlink{classmdt_abstract_port_ad4121bb930c95887e77f8bafa065a85ea44eaa84d8f888f4f9d5c814291e54079}{Control\-Canceled}, 
\\*
\hyperlink{classmdt_abstract_port_ad4121bb930c95887e77f8bafa065a85ea487558758ab0d582d6cf497a785e40c5}{Read\-Timeout}, 
\hyperlink{classmdt_abstract_port_ad4121bb930c95887e77f8bafa065a85eac3a5cee51d4fb0b3bfb7c49604059c6a}{Write\-Timeout}, 
\hyperlink{classmdt_abstract_port_ad4121bb930c95887e77f8bafa065a85ea9611d47cf51e23aff74a6d2f41ceae2e}{Message\-In\-Timeout}, 
\hyperlink{classmdt_abstract_port_ad4121bb930c95887e77f8bafa065a85ea421ccee58528bbdba8a3b32da3ceca97}{Message\-In\-Canceled}, 
\\*
\hyperlink{classmdt_abstract_port_ad4121bb930c95887e77f8bafa065a85eabdb5a36cd2c7dd2dcf59e996fc4922c9}{Control\-Timeout}, 
\hyperlink{classmdt_abstract_port_ad4121bb930c95887e77f8bafa065a85ea8b70726d03f75a691ac4ad65722a5f3c}{Disconnected}, 
\hyperlink{classmdt_abstract_port_ad4121bb930c95887e77f8bafa065a85ea0edfb7a2f0daf9501874543ecaae8e93}{Connecting}, 
\hyperlink{classmdt_abstract_port_ad4121bb930c95887e77f8bafa065a85ea79cfce29fadf5a27dbcbc6e0cbc8d118}{Connection\-Failed}, 
\\*
\hyperlink{classmdt_abstract_port_ad4121bb930c95887e77f8bafa065a85ea6e24e272af4da51c84eef5825c5cd712}{Unhandled\-Error}, 
\hyperlink{classmdt_abstract_port_ad4121bb930c95887e77f8bafa065a85ea5059c1f30381b95b14a0b33445d2a984}{Read\-Pool\-Empty}, 
\hyperlink{classmdt_abstract_port_ad4121bb930c95887e77f8bafa065a85ea823db75227ad56b6aa74ea2f160c0693}{Write\-Pool\-Empty}, 
\hyperlink{classmdt_abstract_port_ad4121bb930c95887e77f8bafa065a85eab0a372501b8916e3953897dc82fd3b3d}{Error\-Handled}, 
\\*
\hyperlink{classmdt_abstract_port_ad4121bb930c95887e77f8bafa065a85ea2d198672405289a1a7e662492ff073f8}{Read\-Write\-Busy}, 
\hyperlink{classmdt_abstract_port_ad4121bb930c95887e77f8bafa065a85eaf89af56394b281f71247cd2eb4eaac62}{Usb\-Write\-Stall}, 
\hyperlink{classmdt_abstract_port_ad4121bb930c95887e77f8bafa065a85ea7b3edb569231d6ebd0c933974df60160}{Usb\-Read\-Stall}
 \}
\begin{DoxyCompactList}\small\item\em Error. \end{DoxyCompactList}\end{DoxyCompactItemize}
\subsection*{Public Member Functions}
\begin{DoxyCompactItemize}
\item 
\hyperlink{classmdt_abstract_port_a35e7bff9413690833c832bf115da102f}{mdt\-Abstract\-Port} (\hyperlink{class_q_object}{Q\-Object} $\ast$parent=0)
\item 
virtual \hyperlink{classmdt_abstract_port_aa40baa0c593fef984f3796acafceee15}{$\sim$mdt\-Abstract\-Port} ()
\begin{DoxyCompactList}\small\item\em Destructor. \end{DoxyCompactList}\item 
void \hyperlink{classmdt_abstract_port_a0ca143d32fc677bac7c1cf0e04144932}{set\-Port\-Name} (const Q\-String \&\hyperlink{classmdt_abstract_port_ac52fbd121f7cbb848a2f3e5d29fae615}{port\-Name})
\begin{DoxyCompactList}\small\item\em Set the port name. \end{DoxyCompactList}\item 
Q\-String \& \hyperlink{classmdt_abstract_port_ac52fbd121f7cbb848a2f3e5d29fae615}{port\-Name} ()
\begin{DoxyCompactList}\small\item\em Get port name. \end{DoxyCompactList}\item 
\hyperlink{classmdt_abstract_port_ad4121bb930c95887e77f8bafa065a85e}{error\-\_\-t} \hyperlink{classmdt_abstract_port_a4e0f0b7f9e24257677184e4bde10fdde}{open} ()
\begin{DoxyCompactList}\small\item\em Open the port given by \hyperlink{classmdt_abstract_port_a0ca143d32fc677bac7c1cf0e04144932}{set\-Port\-Name()} \end{DoxyCompactList}\item 
bool \hyperlink{classmdt_abstract_port_a2122ae3141342ff38c8388e62b244e3b}{is\-Open} () const 
\begin{DoxyCompactList}\small\item\em Get port's open state. \end{DoxyCompactList}\item 
virtual void \hyperlink{classmdt_abstract_port_a1ace1a2bd1a04f16952980e247b04800}{close} ()
\begin{DoxyCompactList}\small\item\em Close the port. \end{DoxyCompactList}\item 
void \hyperlink{classmdt_abstract_port_a48bdc0a8057c3b119763643098cf798f}{set\-Config} (\hyperlink{classmdt_port_config}{mdt\-Port\-Config} $\ast$cfg)
\begin{DoxyCompactList}\small\item\em Set configuration. \end{DoxyCompactList}\item 
\hyperlink{classmdt_port_config}{mdt\-Port\-Config} \& \hyperlink{classmdt_abstract_port_a3d105c90696f7c40f29c24fe9b6e4481}{config} ()
\begin{DoxyCompactList}\small\item\em Get the stored configuration. \end{DoxyCompactList}\item 
\hyperlink{classmdt_abstract_port_ad4121bb930c95887e77f8bafa065a85e}{error\-\_\-t} \hyperlink{classmdt_abstract_port_abc9f1154ac71c4e31ac3e7a3ff4c5182}{setup} ()
\begin{DoxyCompactList}\small\item\em Setup port with given configurations. \end{DoxyCompactList}\item 
virtual \hyperlink{classmdt_abstract_port_ad4121bb930c95887e77f8bafa065a85e}{error\-\_\-t} \hyperlink{classmdt_abstract_port_aec74b2db1a629d98a95d8f042ea96653}{reconnect} (int timeout)
\begin{DoxyCompactList}\small\item\em Reconnect device/peer. \end{DoxyCompactList}\item 
virtual void \hyperlink{classmdt_abstract_port_a6589b04467e0073d18ba872201bdcd84}{set\-Read\-Timeout} (int timeout)=0
\begin{DoxyCompactList}\small\item\em Set the read data timeout. \end{DoxyCompactList}\item 
virtual void \hyperlink{classmdt_abstract_port_a12eb422d52ebb09a650f8497b258c2e7}{set\-Write\-Timeout} (int timeout)=0
\begin{DoxyCompactList}\small\item\em Set the write data timeout. \end{DoxyCompactList}\item 
virtual \hyperlink{classmdt_abstract_port_ad4121bb930c95887e77f8bafa065a85e}{error\-\_\-t} \hyperlink{classmdt_abstract_port_aeda364cb191da1038a22dd1fc06a1d49}{wait\-For\-Ready\-Read} ()=0
\begin{DoxyCompactList}\small\item\em Wait until data is available on port. \end{DoxyCompactList}\item 
\hyperlink{classmdt_abstract_port_ad4121bb930c95887e77f8bafa065a85e}{error\-\_\-t} \hyperlink{classmdt_abstract_port_a47f4db2e72b5fd3e32162e6a898fd391}{wait\-For\-Ready\-Read} (int msecs)
\begin{DoxyCompactList}\small\item\em Wait until data is available on port. \end{DoxyCompactList}\item 
virtual qint64 \hyperlink{classmdt_abstract_port_a9d9c45220d5328c9856a2445557fe970}{read} (char $\ast$data, qint64 max\-Size)=0
\begin{DoxyCompactList}\small\item\em Read data from port. \end{DoxyCompactList}\item 
virtual bool \hyperlink{classmdt_abstract_port_aff3d79248baf96e670eba6d2fef700b9}{suspend\-Transmission} ()
\begin{DoxyCompactList}\small\item\em Request to suspend transmission. \end{DoxyCompactList}\item 
virtual bool \hyperlink{classmdt_abstract_port_ad4a04c995df881593db0a309000be7a7}{resume\-Transmission} ()
\begin{DoxyCompactList}\small\item\em Request to resume transmission. \end{DoxyCompactList}\item 
void \hyperlink{classmdt_abstract_port_a32329b4188db796401e4f454755acb44}{flush\-In} ()
\begin{DoxyCompactList}\small\item\em Flush read buffers. \end{DoxyCompactList}\item 
bool \hyperlink{classmdt_abstract_port_a54b7bfb725c91b2c292a39275b877207}{flush\-In\-Request\-Pending} ()
\begin{DoxyCompactList}\small\item\em Check if a flush in request is pending. \end{DoxyCompactList}\item 
virtual \hyperlink{classmdt_abstract_port_ad4121bb930c95887e77f8bafa065a85e}{error\-\_\-t} \hyperlink{classmdt_abstract_port_a35e4686f50e2c53c7e3618cf2c485d92}{wait\-Event\-Write\-Ready} ()=0
\begin{DoxyCompactList}\small\item\em Wait until data can be written to port. \end{DoxyCompactList}\item 
virtual qint64 \hyperlink{classmdt_abstract_port_a64d4802975a76474b9196c91f57a6d90}{write} (const char $\ast$data, qint64 max\-Size)=0
\begin{DoxyCompactList}\small\item\em Write data to port. \end{DoxyCompactList}\item 
void \hyperlink{classmdt_abstract_port_ad199c6310801893f1f7de2a2391606fc}{flush\-Out} ()
\begin{DoxyCompactList}\small\item\em Flush write buffers. \end{DoxyCompactList}\item 
bool \hyperlink{classmdt_abstract_port_a2cc79d9288bebafaa183753dcf0807f3}{flush\-Out\-Request\-Pending} ()
\begin{DoxyCompactList}\small\item\em Check if a flush out request is pending. \end{DoxyCompactList}\item 
void \hyperlink{classmdt_abstract_port_abde440c49b95833f821e1333c40a7398}{flush} ()
\begin{DoxyCompactList}\small\item\em Flush read/write buffers. \end{DoxyCompactList}\item 
void \hyperlink{classmdt_abstract_port_adf06d095d6c3e6ce939a3998bcf8b829}{init\-Queues} ()
\begin{DoxyCompactList}\small\item\em Init the read ans write queues. \end{DoxyCompactList}\item 
Q\-Queue$<$ \hyperlink{classmdt_frame}{mdt\-Frame} $\ast$ $>$ \& \hyperlink{classmdt_abstract_port_a05356a33dc546a11d2794a0419d749e0}{readen\-Frames} ()
\begin{DoxyCompactList}\small\item\em Get the readen frames Queue. \end{DoxyCompactList}\item 
Q\-Queue$<$ \hyperlink{classmdt_frame}{mdt\-Frame} $\ast$ $>$ \& \hyperlink{classmdt_abstract_port_a3850ab819a8fc5dad22af14b74c45274}{read\-Frames\-Pool} ()
\begin{DoxyCompactList}\small\item\em Get the read frames Queue pool. \end{DoxyCompactList}\item 
virtual void \hyperlink{classmdt_abstract_port_a9a69eb2fc07d551ab37c011487fa319d}{add\-Frame\-To\-Write} (\hyperlink{classmdt_frame}{mdt\-Frame} $\ast$frame)
\begin{DoxyCompactList}\small\item\em Add a frame to write. \end{DoxyCompactList}\item 
\hyperlink{classmdt_frame}{mdt\-Frame} $\ast$ \hyperlink{classmdt_abstract_port_a6c5ebd4451aec959efc4e71ab1b13941}{get\-Frame\-To\-Write} ()
\begin{DoxyCompactList}\small\item\em Wait until a frame to write is available and get it. \end{DoxyCompactList}\item 
void \hyperlink{classmdt_abstract_port_ae67c815f68317c70e398eaa86622af6b}{abort\-Frame\-To\-Write\-Wait} ()
\begin{DoxyCompactList}\small\item\em Abort the frame tp write waiting. \end{DoxyCompactList}\item 
Q\-Queue$<$ \hyperlink{classmdt_frame}{mdt\-Frame} $\ast$ $>$ \& \hyperlink{classmdt_abstract_port_a4fed10be147dfce6ca315467ff3fb968}{write\-Frames} ()
\begin{DoxyCompactList}\small\item\em Get the write frames Queue. \end{DoxyCompactList}\item 
Q\-Queue$<$ \hyperlink{classmdt_frame}{mdt\-Frame} $\ast$ $>$ \& \hyperlink{classmdt_abstract_port_abf093b67fddebffa4f3c52277b9a8cf7}{write\-Frames\-Pool} ()
\begin{DoxyCompactList}\small\item\em Get the write frames Queue pool. \end{DoxyCompactList}\item 
void \hyperlink{classmdt_abstract_port_a6bf2ecdcf894da3929a22eb8793a9fe3}{lock\-Mutex} ()
\begin{DoxyCompactList}\small\item\em Lock the mutex. \end{DoxyCompactList}\item 
void \hyperlink{classmdt_abstract_port_a3523c72a06e4d950338f91e56c286e84}{unlock\-Mutex} ()
\begin{DoxyCompactList}\small\item\em Unlock the mutex. \end{DoxyCompactList}\end{DoxyCompactItemize}
\subsection*{Protected Member Functions}
\begin{DoxyCompactItemize}
\item 
virtual \hyperlink{classmdt_abstract_port_ad4121bb930c95887e77f8bafa065a85e}{error\-\_\-t} \hyperlink{classmdt_abstract_port_ac1440ea9759cbbee9efc5ea22afcdb0a}{pv\-Open} ()=0
\begin{DoxyCompactList}\small\item\em Open the port given by \hyperlink{classmdt_abstract_port_a0ca143d32fc677bac7c1cf0e04144932}{set\-Port\-Name()} \end{DoxyCompactList}\item 
virtual void \hyperlink{classmdt_abstract_port_add29e91ccc4be62ab5c0dcb2a68ae8f0}{pv\-Close} ()=0
\begin{DoxyCompactList}\small\item\em Close port. \end{DoxyCompactList}\item 
virtual \hyperlink{classmdt_abstract_port_ad4121bb930c95887e77f8bafa065a85e}{error\-\_\-t} \hyperlink{classmdt_abstract_port_a880e5ae1699af102f9a80501bb6a0021}{pv\-Setup} ()=0
\begin{DoxyCompactList}\small\item\em Setup port with given configurations. \end{DoxyCompactList}\item 
virtual void \hyperlink{classmdt_abstract_port_a1fe88e9d56c0881b9566664b094b0958}{pv\-Flush\-In} ()=0
\begin{DoxyCompactList}\small\item\em Flush read port. \end{DoxyCompactList}\item 
virtual void \hyperlink{classmdt_abstract_port_a1667fa938d3a7578b73f54c32015c369}{pv\-Flush\-Out} ()=0
\begin{DoxyCompactList}\small\item\em Flush write port. \end{DoxyCompactList}\end{DoxyCompactItemize}
\subsection*{Protected Attributes}
\begin{DoxyCompactItemize}
\item 
Q\-Queue$<$ \hyperlink{classmdt_frame}{mdt\-Frame} $\ast$ $>$ \hyperlink{classmdt_abstract_port_a412c3e4903bf7d90914cfeb273e82623}{pv\-Readen\-Frames}
\item 
Q\-Queue$<$ \hyperlink{classmdt_frame}{mdt\-Frame} $\ast$ $>$ \hyperlink{classmdt_abstract_port_a3d6bb9b420f64776d8fd077cf2b9b873}{pv\-Read\-Frames\-Pool}
\item 
Q\-Queue$<$ \hyperlink{classmdt_frame}{mdt\-Frame} $\ast$ $>$ \hyperlink{classmdt_abstract_port_a12cd5c1ba100b018539ed909a481d6dc}{pv\-Write\-Frames}
\item 
Q\-Queue$<$ \hyperlink{classmdt_frame}{mdt\-Frame} $\ast$ $>$ \hyperlink{classmdt_abstract_port_a67a8b1965f20a55ad115926aed0234b4}{pv\-Write\-Frames\-Pool}
\item 
\hyperlink{classmdt_port_config}{mdt\-Port\-Config} $\ast$ \hyperlink{classmdt_abstract_port_a035d72bddbac47f405a8ecf0d2eeba66}{pv\-Config}
\item 
Q\-String \hyperlink{classmdt_abstract_port_afb8f8a723ff2db5141f18750020a7ee9}{pv\-Port\-Name}
\item 
Q\-Mutex \hyperlink{classmdt_abstract_port_a357bce65bc031fffa87090a26ab88a08}{pv\-Mutex}
\item 
Q\-Wait\-Condition \hyperlink{classmdt_abstract_port_a4c81c98680c98ad6802dccd30380459d}{pv\-Write\-Frame\-Available}
\end{DoxyCompactItemize}


\subsection{Detailed Description}
Base class for port I/\-O. 

\begin{DoxyRefDesc}{Todo}
\item[\hyperlink{todo__todo000019}{Todo}]Waiting\-Canceled, Write\-Canceled, Read\-Canceled are not clean defined. The only object that knows when it must stop is the thread itself ! To be a little more clean, thread should check it's running flag each time a function returns a error, and stop if requierd ! \end{DoxyRefDesc}


Definition at line 42 of file mdt\-Abstract\-Port.\-h.



\subsection{Member Enumeration Documentation}
\hypertarget{classmdt_abstract_port_ad4121bb930c95887e77f8bafa065a85e}{\index{mdt\-Abstract\-Port@{mdt\-Abstract\-Port}!error\-\_\-t@{error\-\_\-t}}
\index{error\-\_\-t@{error\-\_\-t}!mdtAbstractPort@{mdt\-Abstract\-Port}}
\subsubsection[{error\-\_\-t}]{\setlength{\rightskip}{0pt plus 5cm}enum {\bf mdt\-Abstract\-Port\-::error\-\_\-t}}}\label{classmdt_abstract_port_ad4121bb930c95887e77f8bafa065a85e}


Error. 

Each system's I/\-O A\-P\-I can return several error. Goal is here to map them to common error codes.

Note for thread implementation\-:\par
 Some errors must be handled in specific ways depending on port (serial, U\-S\-B, T\-C\-P, ...). Each time a error occurs, thread should check the pv\-Running flag, and stop if it is false (typical\-: after a stop request from main thread, \hyperlink{classmdt_abstract_port}{mdt\-Abstract\-Port} subclass will return Read\-Canceled, Write\-Canceled or Control\-Canceled. But it can happen that I/\-O process was canceled for another reason, this is port specific). \begin{Desc}
\item[Enumerator]\par
\begin{description}
\index{No\-Error@{No\-Error}!mdt\-Abstract\-Port@{mdt\-Abstract\-Port}}\index{mdt\-Abstract\-Port@{mdt\-Abstract\-Port}!No\-Error@{No\-Error}}\item[{\em 
\hypertarget{classmdt_abstract_port_ad4121bb930c95887e77f8bafa065a85eab898bd273effe5cb4ed1a399a2d4baad}{No\-Error}\label{classmdt_abstract_port_ad4121bb930c95887e77f8bafa065a85eab898bd273effe5cb4ed1a399a2d4baad}
}]No error \index{Port\-Locked@{Port\-Locked}!mdt\-Abstract\-Port@{mdt\-Abstract\-Port}}\index{mdt\-Abstract\-Port@{mdt\-Abstract\-Port}!Port\-Locked@{Port\-Locked}}\item[{\em 
\hypertarget{classmdt_abstract_port_ad4121bb930c95887e77f8bafa065a85eaedd63daf0db75794bb8e8e467da9575c}{Port\-Locked}\label{classmdt_abstract_port_ad4121bb930c95887e77f8bafa065a85eaedd63daf0db75794bb8e8e467da9575c}
}]Port is allready locked \index{Port\-Not\-Found@{Port\-Not\-Found}!mdt\-Abstract\-Port@{mdt\-Abstract\-Port}}\index{mdt\-Abstract\-Port@{mdt\-Abstract\-Port}!Port\-Not\-Found@{Port\-Not\-Found}}\item[{\em 
\hypertarget{classmdt_abstract_port_ad4121bb930c95887e77f8bafa065a85ea54a896ba3ff98896390e87bfe1f29eb0}{Port\-Not\-Found}\label{classmdt_abstract_port_ad4121bb930c95887e77f8bafa065a85ea54a896ba3ff98896390e87bfe1f29eb0}
}]Port was not found \index{Port\-Access@{Port\-Access}!mdt\-Abstract\-Port@{mdt\-Abstract\-Port}}\index{mdt\-Abstract\-Port@{mdt\-Abstract\-Port}!Port\-Access@{Port\-Access}}\item[{\em 
\hypertarget{classmdt_abstract_port_ad4121bb930c95887e77f8bafa065a85eaee5a84e59e9dc5fcf27cac57068bb1f4}{Port\-Access}\label{classmdt_abstract_port_ad4121bb930c95887e77f8bafa065a85eaee5a84e59e9dc5fcf27cac57068bb1f4}
}]Port cannot be open with requierd access (read, write) \index{Setup\-Error@{Setup\-Error}!mdt\-Abstract\-Port@{mdt\-Abstract\-Port}}\index{mdt\-Abstract\-Port@{mdt\-Abstract\-Port}!Setup\-Error@{Setup\-Error}}\item[{\em 
\hypertarget{classmdt_abstract_port_ad4121bb930c95887e77f8bafa065a85ea3d692317af7125319f60204df3101307}{Setup\-Error}\label{classmdt_abstract_port_ad4121bb930c95887e77f8bafa065a85ea3d692317af7125319f60204df3101307}
}]Setup failed on a configuration option \index{Write\-Canceled@{Write\-Canceled}!mdt\-Abstract\-Port@{mdt\-Abstract\-Port}}\index{mdt\-Abstract\-Port@{mdt\-Abstract\-Port}!Write\-Canceled@{Write\-Canceled}}\item[{\em 
\hypertarget{classmdt_abstract_port_ad4121bb930c95887e77f8bafa065a85eae50ff4a9393507ad39005ddc7d5be42f}{Write\-Canceled}\label{classmdt_abstract_port_ad4121bb930c95887e77f8bafa065a85eae50ff4a9393507ad39005ddc7d5be42f}
}]Write process was cancelled. The thread should stop the write process, restore the current frame into pool, notify the error and continue working. \index{Read\-Canceled@{Read\-Canceled}!mdt\-Abstract\-Port@{mdt\-Abstract\-Port}}\index{mdt\-Abstract\-Port@{mdt\-Abstract\-Port}!Read\-Canceled@{Read\-Canceled}}\item[{\em 
\hypertarget{classmdt_abstract_port_ad4121bb930c95887e77f8bafa065a85eac910ca649b9eaa64e290be41945a61dc}{Read\-Canceled}\label{classmdt_abstract_port_ad4121bb930c95887e77f8bafa065a85eac910ca649b9eaa64e290be41945a61dc}
}]Read process was cancelled. The thread should stop the read process, clear the current , notify the error and continue working. \index{Control\-Canceled@{Control\-Canceled}!mdt\-Abstract\-Port@{mdt\-Abstract\-Port}}\index{mdt\-Abstract\-Port@{mdt\-Abstract\-Port}!Control\-Canceled@{Control\-Canceled}}\item[{\em 
\hypertarget{classmdt_abstract_port_ad4121bb930c95887e77f8bafa065a85ea44eaa84d8f888f4f9d5c814291e54079}{Control\-Canceled}\label{classmdt_abstract_port_ad4121bb930c95887e77f8bafa065a85ea44eaa84d8f888f4f9d5c814291e54079}
}]Control process canceled (serial port's modem line, U\-S\-B control transfer) \index{Read\-Timeout@{Read\-Timeout}!mdt\-Abstract\-Port@{mdt\-Abstract\-Port}}\index{mdt\-Abstract\-Port@{mdt\-Abstract\-Port}!Read\-Timeout@{Read\-Timeout}}\item[{\em 
\hypertarget{classmdt_abstract_port_ad4121bb930c95887e77f8bafa065a85ea487558758ab0d582d6cf497a785e40c5}{Read\-Timeout}\label{classmdt_abstract_port_ad4121bb930c95887e77f8bafa065a85ea487558758ab0d582d6cf497a785e40c5}
}]Read process has timed out. Thread should clear current frame, notify this and continue working. If thread uses the read timeout protocol, no notification should be sent \index{Write\-Timeout@{Write\-Timeout}!mdt\-Abstract\-Port@{mdt\-Abstract\-Port}}\index{mdt\-Abstract\-Port@{mdt\-Abstract\-Port}!Write\-Timeout@{Write\-Timeout}}\item[{\em 
\hypertarget{classmdt_abstract_port_ad4121bb930c95887e77f8bafa065a85eac3a5cee51d4fb0b3bfb7c49604059c6a}{Write\-Timeout}\label{classmdt_abstract_port_ad4121bb930c95887e77f8bafa065a85eac3a5cee51d4fb0b3bfb7c49604059c6a}
}]Write process has timed out. Thread should notify this and continue working. If thread uses the write timeout protocol, no notification should be sent \index{Message\-In\-Timeout@{Message\-In\-Timeout}!mdt\-Abstract\-Port@{mdt\-Abstract\-Port}}\index{mdt\-Abstract\-Port@{mdt\-Abstract\-Port}!Message\-In\-Timeout@{Message\-In\-Timeout}}\item[{\em 
\hypertarget{classmdt_abstract_port_ad4121bb930c95887e77f8bafa065a85ea9611d47cf51e23aff74a6d2f41ceae2e}{Message\-In\-Timeout}\label{classmdt_abstract_port_ad4121bb930c95887e77f8bafa065a85ea9611d47cf51e23aff74a6d2f41ceae2e}
}]Used by U\-S\-B/\-U\-S\-B\-T\-M\-C for additionnal interrupt I\-N \index{Message\-In\-Canceled@{Message\-In\-Canceled}!mdt\-Abstract\-Port@{mdt\-Abstract\-Port}}\index{mdt\-Abstract\-Port@{mdt\-Abstract\-Port}!Message\-In\-Canceled@{Message\-In\-Canceled}}\item[{\em 
\hypertarget{classmdt_abstract_port_ad4121bb930c95887e77f8bafa065a85ea421ccee58528bbdba8a3b32da3ceca97}{Message\-In\-Canceled}\label{classmdt_abstract_port_ad4121bb930c95887e77f8bafa065a85ea421ccee58528bbdba8a3b32da3ceca97}
}]Used by U\-S\-B/\-U\-S\-B\-T\-M\-C for additionnal interrupt I\-N \index{Control\-Timeout@{Control\-Timeout}!mdt\-Abstract\-Port@{mdt\-Abstract\-Port}}\index{mdt\-Abstract\-Port@{mdt\-Abstract\-Port}!Control\-Timeout@{Control\-Timeout}}\item[{\em 
\hypertarget{classmdt_abstract_port_ad4121bb930c95887e77f8bafa065a85eabdb5a36cd2c7dd2dcf59e996fc4922c9}{Control\-Timeout}\label{classmdt_abstract_port_ad4121bb930c95887e77f8bafa065a85eabdb5a36cd2c7dd2dcf59e996fc4922c9}
}]Control process timed out (serial port's modem line, U\-S\-B control transfer) \index{Disconnected@{Disconnected}!mdt\-Abstract\-Port@{mdt\-Abstract\-Port}}\index{mdt\-Abstract\-Port@{mdt\-Abstract\-Port}!Disconnected@{Disconnected}}\item[{\em 
\hypertarget{classmdt_abstract_port_ad4121bb930c95887e77f8bafa065a85ea8b70726d03f75a691ac4ad65722a5f3c}{Disconnected}\label{classmdt_abstract_port_ad4121bb930c95887e77f8bafa065a85ea8b70726d03f75a691ac4ad65722a5f3c}
}]For U\-S\-B port\-: the device is disconnected. For T\-C\-P socket\-: peer has closed the connection. If this error happens, the thread will try to reconnect. If connection fails after maximum trys, a notification is sent with Connection\-Failed error. \index{Connecting@{Connecting}!mdt\-Abstract\-Port@{mdt\-Abstract\-Port}}\index{mdt\-Abstract\-Port@{mdt\-Abstract\-Port}!Connecting@{Connecting}}\item[{\em 
\hypertarget{classmdt_abstract_port_ad4121bb930c95887e77f8bafa065a85ea0edfb7a2f0daf9501874543ecaae8e93}{Connecting}\label{classmdt_abstract_port_ad4121bb930c95887e77f8bafa065a85ea0edfb7a2f0daf9501874543ecaae8e93}
}]Used to notify portmanager that connection is in progress (see \hyperlink{classmdt_port_thread_abee1d2f9b67ca37cfd13e108ca978b36}{mdt\-Port\-Thread\-::reconnect()} ) \index{Connection\-Failed@{Connection\-Failed}!mdt\-Abstract\-Port@{mdt\-Abstract\-Port}}\index{mdt\-Abstract\-Port@{mdt\-Abstract\-Port}!Connection\-Failed@{Connection\-Failed}}\item[{\em 
\hypertarget{classmdt_abstract_port_ad4121bb930c95887e77f8bafa065a85ea79cfce29fadf5a27dbcbc6e0cbc8d118}{Connection\-Failed}\label{classmdt_abstract_port_ad4121bb930c95887e77f8bafa065a85ea79cfce29fadf5a27dbcbc6e0cbc8d118}
}]Can happen during first connection, or afetr max retry of reconnection. Port manager will stop on this error \index{Unhandled\-Error@{Unhandled\-Error}!mdt\-Abstract\-Port@{mdt\-Abstract\-Port}}\index{mdt\-Abstract\-Port@{mdt\-Abstract\-Port}!Unhandled\-Error@{Unhandled\-Error}}\item[{\em 
\hypertarget{classmdt_abstract_port_ad4121bb930c95887e77f8bafa065a85ea6e24e272af4da51c84eef5825c5cd712}{Unhandled\-Error}\label{classmdt_abstract_port_ad4121bb930c95887e77f8bafa065a85ea6e24e272af4da51c84eef5825c5cd712}
}]Unhandled error happen. In this case, thread will stop working and error is reported with \hyperlink{classmdt_error}{mdt\-Error} system. Logfile could give more information, see \hyperlink{classmdt_error}{mdt\-Error} and \hyperlink{classmdt_application}{mdt\-Application} \index{Read\-Pool\-Empty@{Read\-Pool\-Empty}!mdt\-Abstract\-Port@{mdt\-Abstract\-Port}}\index{mdt\-Abstract\-Port@{mdt\-Abstract\-Port}!Read\-Pool\-Empty@{Read\-Pool\-Empty}}\item[{\em 
\hypertarget{classmdt_abstract_port_ad4121bb930c95887e77f8bafa065a85ea5059c1f30381b95b14a0b33445d2a984}{Read\-Pool\-Empty}\label{classmdt_abstract_port_ad4121bb930c95887e77f8bafa065a85ea5059c1f30381b95b14a0b33445d2a984}
}]Read frames pool is empty. Says that no data can be received for the moment \index{Write\-Pool\-Empty@{Write\-Pool\-Empty}!mdt\-Abstract\-Port@{mdt\-Abstract\-Port}}\index{mdt\-Abstract\-Port@{mdt\-Abstract\-Port}!Write\-Pool\-Empty@{Write\-Pool\-Empty}}\item[{\em 
\hypertarget{classmdt_abstract_port_ad4121bb930c95887e77f8bafa065a85ea823db75227ad56b6aa74ea2f160c0693}{Write\-Pool\-Empty}\label{classmdt_abstract_port_ad4121bb930c95887e77f8bafa065a85ea823db75227ad56b6aa74ea2f160c0693}
}]Write queue is empty. Says that no data can be sent for the moment \index{Error\-Handled@{Error\-Handled}!mdt\-Abstract\-Port@{mdt\-Abstract\-Port}}\index{mdt\-Abstract\-Port@{mdt\-Abstract\-Port}!Error\-Handled@{Error\-Handled}}\item[{\em 
\hypertarget{classmdt_abstract_port_ad4121bb930c95887e77f8bafa065a85eab0a372501b8916e3953897dc82fd3b3d}{Error\-Handled}\label{classmdt_abstract_port_ad4121bb930c95887e77f8bafa065a85eab0a372501b8916e3953897dc82fd3b3d}
}]Used by \hyperlink{classmdt_port_thread}{mdt\-Port\-Thread}'s helper methods (handle\mbox{[}Read$|$\-Write\mbox{]}Error) to tell the thread that error could be handled \index{Read\-Write\-Busy@{Read\-Write\-Busy}!mdt\-Abstract\-Port@{mdt\-Abstract\-Port}}\index{mdt\-Abstract\-Port@{mdt\-Abstract\-Port}!Read\-Write\-Busy@{Read\-Write\-Busy}}\item[{\em 
\hypertarget{classmdt_abstract_port_ad4121bb930c95887e77f8bafa065a85ea2d198672405289a1a7e662492ff073f8}{Read\-Write\-Busy}\label{classmdt_abstract_port_ad4121bb930c95887e77f8bafa065a85ea2d198672405289a1a7e662492ff073f8}
}]It's currently not possible to read from or write to port/device. This is typically used by U\-S\-B\-T\-M\-C when some control (f.\-ex. abort bilk I\-N/\-O\-U\-T) is in progress \index{Usb\-Write\-Stall@{Usb\-Write\-Stall}!mdt\-Abstract\-Port@{mdt\-Abstract\-Port}}\index{mdt\-Abstract\-Port@{mdt\-Abstract\-Port}!Usb\-Write\-Stall@{Usb\-Write\-Stall}}\item[{\em 
\hypertarget{classmdt_abstract_port_ad4121bb930c95887e77f8bafa065a85eaf89af56394b281f71247cd2eb4eaac62}{Usb\-Write\-Stall}\label{classmdt_abstract_port_ad4121bb930c95887e77f8bafa065a85eaf89af56394b281f71247cd2eb4eaac62}
}]U\-S\-B specific\-: occurs for bulk or interrupt endpoint when a halt condition was detected \index{Usb\-Read\-Stall@{Usb\-Read\-Stall}!mdt\-Abstract\-Port@{mdt\-Abstract\-Port}}\index{mdt\-Abstract\-Port@{mdt\-Abstract\-Port}!Usb\-Read\-Stall@{Usb\-Read\-Stall}}\item[{\em 
\hypertarget{classmdt_abstract_port_ad4121bb930c95887e77f8bafa065a85ea7b3edb569231d6ebd0c933974df60160}{Usb\-Read\-Stall}\label{classmdt_abstract_port_ad4121bb930c95887e77f8bafa065a85ea7b3edb569231d6ebd0c933974df60160}
}]U\-S\-B specific\-: occurs for bulk or interrupt endpoint when a halt condition was detected \end{description}
\end{Desc}


Definition at line 60 of file mdt\-Abstract\-Port.\-h.



\subsection{Constructor \& Destructor Documentation}
\hypertarget{classmdt_abstract_port_a35e7bff9413690833c832bf115da102f}{\index{mdt\-Abstract\-Port@{mdt\-Abstract\-Port}!mdt\-Abstract\-Port@{mdt\-Abstract\-Port}}
\index{mdt\-Abstract\-Port@{mdt\-Abstract\-Port}!mdtAbstractPort@{mdt\-Abstract\-Port}}
\subsubsection[{mdt\-Abstract\-Port}]{\setlength{\rightskip}{0pt plus 5cm}mdt\-Abstract\-Port\-::mdt\-Abstract\-Port (
\begin{DoxyParamCaption}
\item[{{\bf Q\-Object} $\ast$}]{parent = {\ttfamily 0}}
\end{DoxyParamCaption}
)}}\label{classmdt_abstract_port_a35e7bff9413690833c832bf115da102f}


Definition at line 24 of file mdt\-Abstract\-Port.\-cpp.



References pv\-Config.

\hypertarget{classmdt_abstract_port_aa40baa0c593fef984f3796acafceee15}{\index{mdt\-Abstract\-Port@{mdt\-Abstract\-Port}!$\sim$mdt\-Abstract\-Port@{$\sim$mdt\-Abstract\-Port}}
\index{$\sim$mdt\-Abstract\-Port@{$\sim$mdt\-Abstract\-Port}!mdtAbstractPort@{mdt\-Abstract\-Port}}
\subsubsection[{$\sim$mdt\-Abstract\-Port}]{\setlength{\rightskip}{0pt plus 5cm}mdt\-Abstract\-Port\-::$\sim$mdt\-Abstract\-Port (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [virtual]}}}\label{classmdt_abstract_port_aa40baa0c593fef984f3796acafceee15}


Destructor. 

Subclass notes\-:\par
 This destructor cannot call the \hyperlink{classmdt_abstract_port_a1ace1a2bd1a04f16952980e247b04800}{close()} method, because this will call the \hyperlink{classmdt_abstract_port_add29e91ccc4be62ab5c0dcb2a68ae8f0}{pv\-Close()} from destructed inherited object. So, the subclass must call \hyperlink{classmdt_abstract_port_a1ace1a2bd1a04f16952980e247b04800}{close()} in its own destructor. 

Definition at line 33 of file mdt\-Abstract\-Port.\-cpp.



\subsection{Member Function Documentation}
\hypertarget{classmdt_abstract_port_ae67c815f68317c70e398eaa86622af6b}{\index{mdt\-Abstract\-Port@{mdt\-Abstract\-Port}!abort\-Frame\-To\-Write\-Wait@{abort\-Frame\-To\-Write\-Wait}}
\index{abort\-Frame\-To\-Write\-Wait@{abort\-Frame\-To\-Write\-Wait}!mdtAbstractPort@{mdt\-Abstract\-Port}}
\subsubsection[{abort\-Frame\-To\-Write\-Wait}]{\setlength{\rightskip}{0pt plus 5cm}void mdt\-Abstract\-Port\-::abort\-Frame\-To\-Write\-Wait (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
)}}\label{classmdt_abstract_port_ae67c815f68317c70e398eaa86622af6b}


Abort the frame tp write waiting. 

Will wake thread(s) waiting on a frame to write with \hyperlink{classmdt_abstract_port_a6c5ebd4451aec959efc4e71ab1b13941}{get\-Frame\-To\-Write()} . This method is called from \hyperlink{classmdt_port_thread_a5746ea96689ed80179751ad1353f0b39}{mdt\-Port\-Thread\-::stop()} , and should not be called directly.

Mutex is not handled by this method. 

Definition at line 329 of file mdt\-Abstract\-Port.\-cpp.



References pv\-Write\-Frame\-Available.



Referenced by mdt\-Port\-Write\-Thread\-::stop(), and mdt\-Port\-Thread\-::stop().

\hypertarget{classmdt_abstract_port_a9a69eb2fc07d551ab37c011487fa319d}{\index{mdt\-Abstract\-Port@{mdt\-Abstract\-Port}!add\-Frame\-To\-Write@{add\-Frame\-To\-Write}}
\index{add\-Frame\-To\-Write@{add\-Frame\-To\-Write}!mdtAbstractPort@{mdt\-Abstract\-Port}}
\subsubsection[{add\-Frame\-To\-Write}]{\setlength{\rightskip}{0pt plus 5cm}void mdt\-Abstract\-Port\-::add\-Frame\-To\-Write (
\begin{DoxyParamCaption}
\item[{{\bf mdt\-Frame} $\ast$}]{frame}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [virtual]}}}\label{classmdt_abstract_port_a9a69eb2fc07d551ab37c011487fa319d}


Add a frame to write. 

Once the frame is added to the write queue, waiting thread will be woken up (if waiting) and will send the frame.

The mutex must be locked before calling this method, and still locked inside.

\begin{DoxyPrecond}{Precondition}
frame must be a valid pointer. 
\end{DoxyPrecond}


Reimplemented in \hyperlink{classmdt_usb_port_a38200f806037e06988e73af246e8a494}{mdt\-Usb\-Port}, and \hyperlink{classmdt_tcp_socket_ade57b2659836d004a1c5618f9e482b4a}{mdt\-Tcp\-Socket}.



Definition at line 298 of file mdt\-Abstract\-Port.\-cpp.



References pv\-Write\-Frame\-Available, and pv\-Write\-Frames.



Referenced by mdt\-Usbtmc\-Port\-Manager\-::send\-Data(), mdt\-Modbus\-Tcp\-Port\-Manager\-::send\-Data(), mdt\-Port\-Manager\-::send\-Data(), and mdt\-Usbtmc\-Port\-Manager\-::send\-Read\-Request().

\hypertarget{classmdt_abstract_port_a1ace1a2bd1a04f16952980e247b04800}{\index{mdt\-Abstract\-Port@{mdt\-Abstract\-Port}!close@{close}}
\index{close@{close}!mdtAbstractPort@{mdt\-Abstract\-Port}}
\subsubsection[{close}]{\setlength{\rightskip}{0pt plus 5cm}void mdt\-Abstract\-Port\-::close (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [virtual]}}}\label{classmdt_abstract_port_a1ace1a2bd1a04f16952980e247b04800}


Close the port. 

Flush and close port if it is open.

Internal queues are freed here. (If subclass handles additionnaly queues, it should delete is in his \hyperlink{classmdt_abstract_port_add29e91ccc4be62ab5c0dcb2a68ae8f0}{pv\-Close()} method).

The mutex is not handled by this method.

Subclass notes\-:\par
 Internally, this method calls \hyperlink{classmdt_abstract_port_add29e91ccc4be62ab5c0dcb2a68ae8f0}{pv\-Close()}. Once done, the flags are updated. Note that this method must be called from subclass destructor. See \hyperlink{classmdt_abstract_port_aa40baa0c593fef984f3796acafceee15}{$\sim$mdt\-Abstract\-Port()} for details. 

Reimplemented in \hyperlink{classmdt_abstract_serial_port_ae668910f98ad0e158dc6ebebf0c19805}{mdt\-Abstract\-Serial\-Port}.



Definition at line 70 of file mdt\-Abstract\-Port.\-cpp.



References is\-Open(), pv\-Close(), pv\-Flush\-In(), pv\-Flush\-Out(), pv\-Readen\-Frames, pv\-Read\-Frames\-Pool, pv\-Write\-Frames, and pv\-Write\-Frames\-Pool.



Referenced by mdt\-Abstract\-Serial\-Port\-::close(), mdt\-Port\-Manager\-::close\-Port(), open(), mdt\-Usb\-Port\-::reconnect(), setup(), mdt\-Port\-::$\sim$mdt\-Port(), mdt\-Tcp\-Socket\-::$\sim$mdt\-Tcp\-Socket(), and mdt\-Usb\-Port\-::$\sim$mdt\-Usb\-Port().

\hypertarget{classmdt_abstract_port_a3d105c90696f7c40f29c24fe9b6e4481}{\index{mdt\-Abstract\-Port@{mdt\-Abstract\-Port}!config@{config}}
\index{config@{config}!mdtAbstractPort@{mdt\-Abstract\-Port}}
\subsubsection[{config}]{\setlength{\rightskip}{0pt plus 5cm}{\bf mdt\-Port\-Config} \& mdt\-Abstract\-Port\-::config (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
)}}\label{classmdt_abstract_port_a3d105c90696f7c40f29c24fe9b6e4481}


Get the stored configuration. 

\begin{DoxyPrecond}{Precondition}
Configuration must be set with \hyperlink{classmdt_abstract_port_a48bdc0a8057c3b119763643098cf798f}{set\-Config()} before using this method. 
\end{DoxyPrecond}


Definition at line 103 of file mdt\-Abstract\-Port.\-cpp.



References pv\-Config.



Referenced by mdt\-Port\-Manager\-::config(), init\-Queues(), mdt\-Usbtmc\-Port\-Manager\-::mdt\-Usbtmc\-Port\-Manager(), mdt\-Port\-Thread\-Helper\-Socket\-::set\-Socket(), mdt\-Port\-Thread\-::start(), mdt\-Modbus\-Tcp\-Port\-Manager\-::$\sim$mdt\-Modbus\-Tcp\-Port\-Manager(), mdt\-Serial\-Port\-Manager\-::$\sim$mdt\-Serial\-Port\-Manager(), and mdt\-Usb\-Port\-Manager\-::$\sim$mdt\-Usb\-Port\-Manager().

\hypertarget{classmdt_abstract_port_abde440c49b95833f821e1333c40a7398}{\index{mdt\-Abstract\-Port@{mdt\-Abstract\-Port}!flush@{flush}}
\index{flush@{flush}!mdtAbstractPort@{mdt\-Abstract\-Port}}
\subsubsection[{flush}]{\setlength{\rightskip}{0pt plus 5cm}void mdt\-Abstract\-Port\-::flush (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
)}}\label{classmdt_abstract_port_abde440c49b95833f821e1333c40a7398}


Flush read/write buffers. 

Will do the same as calling \hyperlink{classmdt_abstract_port_a32329b4188db796401e4f454755acb44}{flush\-In()} and \hyperlink{classmdt_abstract_port_ad199c6310801893f1f7de2a2391606fc}{flush\-Out()}, but lock the mutex only once.

Mutex is locked in this method. 

Definition at line 201 of file mdt\-Abstract\-Port.\-cpp.



References lock\-Mutex(), pv\-Flush\-In(), pv\-Flush\-Out(), pv\-Readen\-Frames, pv\-Read\-Frames\-Pool, pv\-Write\-Frames, pv\-Write\-Frames\-Pool, and unlock\-Mutex().



Referenced by mdt\-Port\-Manager\-::abort(), and mdt\-Port\-Manager\-::flush().

\hypertarget{classmdt_abstract_port_a32329b4188db796401e4f454755acb44}{\index{mdt\-Abstract\-Port@{mdt\-Abstract\-Port}!flush\-In@{flush\-In}}
\index{flush\-In@{flush\-In}!mdtAbstractPort@{mdt\-Abstract\-Port}}
\subsubsection[{flush\-In}]{\setlength{\rightskip}{0pt plus 5cm}void mdt\-Abstract\-Port\-::flush\-In (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
)}}\label{classmdt_abstract_port_a32329b4188db796401e4f454755acb44}


Flush read buffers. 

Will move all readen frames to pool, and call \hyperlink{classmdt_abstract_port_a1fe88e9d56c0881b9566664b094b0958}{pv\-Flush\-In()} to flush system's buffers.

After this call, \hyperlink{classmdt_abstract_port_a54b7bfb725c91b2c292a39275b877207}{flush\-In\-Request\-Pending()} will return true.

Mutex is locked in this method. 

Definition at line 161 of file mdt\-Abstract\-Port.\-cpp.



References lock\-Mutex(), pv\-Flush\-In(), pv\-Readen\-Frames, pv\-Read\-Frames\-Pool, and unlock\-Mutex().



Referenced by mdt\-Port\-Manager\-::flush\-In().

\hypertarget{classmdt_abstract_port_a54b7bfb725c91b2c292a39275b877207}{\index{mdt\-Abstract\-Port@{mdt\-Abstract\-Port}!flush\-In\-Request\-Pending@{flush\-In\-Request\-Pending}}
\index{flush\-In\-Request\-Pending@{flush\-In\-Request\-Pending}!mdtAbstractPort@{mdt\-Abstract\-Port}}
\subsubsection[{flush\-In\-Request\-Pending}]{\setlength{\rightskip}{0pt plus 5cm}bool mdt\-Abstract\-Port\-::flush\-In\-Request\-Pending (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
)}}\label{classmdt_abstract_port_a54b7bfb725c91b2c292a39275b877207}


Check if a flush in request is pending. 

Returns true after \hyperlink{classmdt_abstract_port_a32329b4188db796401e4f454755acb44}{flush\-In()} was called.

This method is used by thread, and should not be used directly. If a request is pending, thread will put his current read frame back to pool.

A call of this method will clear the internall flag. (a second call will then return false).

Mutex is not handled by this method.

\begin{DoxyRefDesc}{Todo}
\item[\hyperlink{todo__todo000020}{Todo}]Thread are to adapt. \end{DoxyRefDesc}


Definition at line 172 of file mdt\-Abstract\-Port.\-cpp.

\hypertarget{classmdt_abstract_port_ad199c6310801893f1f7de2a2391606fc}{\index{mdt\-Abstract\-Port@{mdt\-Abstract\-Port}!flush\-Out@{flush\-Out}}
\index{flush\-Out@{flush\-Out}!mdtAbstractPort@{mdt\-Abstract\-Port}}
\subsubsection[{flush\-Out}]{\setlength{\rightskip}{0pt plus 5cm}void mdt\-Abstract\-Port\-::flush\-Out (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
)}}\label{classmdt_abstract_port_ad199c6310801893f1f7de2a2391606fc}


Flush write buffers. 

Will cancel current write operation, and all queued frames are removed.

Internally, all write frames are moved to pool. \hyperlink{classmdt_abstract_port_a1667fa938d3a7578b73f54c32015c369}{pv\-Flush\-Out()} will be called to flush system's buffers and the next call of \hyperlink{classmdt_abstract_port_a35e4686f50e2c53c7e3618cf2c485d92}{wait\-Event\-Write\-Ready()} will return the Write\-Canceled error.

Mutex is locked in this method. 

Definition at line 181 of file mdt\-Abstract\-Port.\-cpp.



References lock\-Mutex(), pv\-Flush\-Out(), pv\-Write\-Frames, pv\-Write\-Frames\-Pool, and unlock\-Mutex().



Referenced by mdt\-Port\-Manager\-::flush\-Out().

\hypertarget{classmdt_abstract_port_a2cc79d9288bebafaa183753dcf0807f3}{\index{mdt\-Abstract\-Port@{mdt\-Abstract\-Port}!flush\-Out\-Request\-Pending@{flush\-Out\-Request\-Pending}}
\index{flush\-Out\-Request\-Pending@{flush\-Out\-Request\-Pending}!mdtAbstractPort@{mdt\-Abstract\-Port}}
\subsubsection[{flush\-Out\-Request\-Pending}]{\setlength{\rightskip}{0pt plus 5cm}bool mdt\-Abstract\-Port\-::flush\-Out\-Request\-Pending (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
)}}\label{classmdt_abstract_port_a2cc79d9288bebafaa183753dcf0807f3}


Check if a flush out request is pending. 

Returns true after \hyperlink{classmdt_abstract_port_ad199c6310801893f1f7de2a2391606fc}{flush\-Out()} was called.

This method is used by thread, and should not be used directly. If a request is pending, thread will put his current write frame back to pool.

A call of this method will clear the internall flag. (a second call will then return false).

Mutex is not handled by this method.

\begin{DoxyRefDesc}{Todo}
\item[\hyperlink{todo__todo000021}{Todo}]Thread are to adapt. \end{DoxyRefDesc}


Definition at line 192 of file mdt\-Abstract\-Port.\-cpp.



Referenced by mdt\-Port\-Thread\-Helper\-Port\-::write\-To\-Port().

\hypertarget{classmdt_abstract_port_a6c5ebd4451aec959efc4e71ab1b13941}{\index{mdt\-Abstract\-Port@{mdt\-Abstract\-Port}!get\-Frame\-To\-Write@{get\-Frame\-To\-Write}}
\index{get\-Frame\-To\-Write@{get\-Frame\-To\-Write}!mdtAbstractPort@{mdt\-Abstract\-Port}}
\subsubsection[{get\-Frame\-To\-Write}]{\setlength{\rightskip}{0pt plus 5cm}{\bf mdt\-Frame} $\ast$ mdt\-Abstract\-Port\-::get\-Frame\-To\-Write (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
)}}\label{classmdt_abstract_port_a6c5ebd4451aec959efc4e71ab1b13941}


Wait until a frame to write is available and get it. 

If a frame is available in write frames queue, it will be returned. Else, thit method will block calling thread until a frame is available in write frames queue, and return one.

This method is called from \hyperlink{classmdt_port_thread}{mdt\-Port\-Thread} and should not be used directly.

The mutex must be locked before calling this method. Internally, it will be unlocked during wait, and locked again before returning.

\begin{DoxyReturn}{Returns}
A pointer to a frame, or Null (Null happens after stop request) 
\end{DoxyReturn}


Definition at line 306 of file mdt\-Abstract\-Port.\-cpp.



References pv\-Mutex, pv\-Write\-Frame\-Available, and pv\-Write\-Frames.



Referenced by mdt\-Port\-Thread\-Helper\-::get\-New\-Frame\-Write().

\hypertarget{classmdt_abstract_port_adf06d095d6c3e6ce939a3998bcf8b829}{\index{mdt\-Abstract\-Port@{mdt\-Abstract\-Port}!init\-Queues@{init\-Queues}}
\index{init\-Queues@{init\-Queues}!mdtAbstractPort@{mdt\-Abstract\-Port}}
\subsubsection[{init\-Queues}]{\setlength{\rightskip}{0pt plus 5cm}void mdt\-Abstract\-Port\-::init\-Queues (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
)}}\label{classmdt_abstract_port_adf06d095d6c3e6ce939a3998bcf8b829}


Init the read ans write queues. 

\begin{DoxyPrecond}{Precondition}
A valid configuration must be set before using this method. 
\end{DoxyPrecond}


Definition at line 217 of file mdt\-Abstract\-Port.\-cpp.



References config(), mdt\-Port\-Config\-::end\-Of\-Frame\-Seq(), mdt\-Port\-Config\-::frame\-Type(), mdt\-Frame\-::\-F\-T\-\_\-\-A\-S\-C\-I\-I, mdt\-Frame\-::\-F\-T\-\_\-\-M\-O\-D\-B\-U\-S\-\_\-\-T\-C\-P, mdt\-Frame\-::\-F\-T\-\_\-\-R\-A\-W, mdt\-Frame\-::\-F\-T\-\_\-\-R\-A\-W\-\_\-\-T\-O\-P, mdt\-Frame\-::\-F\-T\-\_\-\-U\-S\-B\-T\-M\-C, pv\-Read\-Frames\-Pool, pv\-Write\-Frames\-Pool, mdt\-Port\-Config\-::read\-Queue\-Size(), mdt\-Frame\-::set\-Directly\-Complete(), and mdt\-Port\-Config\-::write\-Queue\-Size().



Referenced by setup().

\hypertarget{classmdt_abstract_port_a2122ae3141342ff38c8388e62b244e3b}{\index{mdt\-Abstract\-Port@{mdt\-Abstract\-Port}!is\-Open@{is\-Open}}
\index{is\-Open@{is\-Open}!mdtAbstractPort@{mdt\-Abstract\-Port}}
\subsubsection[{is\-Open}]{\setlength{\rightskip}{0pt plus 5cm}bool mdt\-Abstract\-Port\-::is\-Open (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
) const}}\label{classmdt_abstract_port_a2122ae3141342ff38c8388e62b244e3b}


Get port's open state. 



Definition at line 48 of file mdt\-Abstract\-Port.\-cpp.



Referenced by mdt\-Abstract\-Serial\-Port\-::available\-Baud\-Rates(), close(), open(), mdt\-Serial\-Port\-::set\-Dtr(), mdt\-Serial\-Port\-::set\-Rts(), setup(), mdt\-Port\-Manager\-::start(), mdt\-Port\-Manager\-::stop(), and mdt\-Abstract\-Serial\-Port\-::uart\-Type().

\hypertarget{classmdt_abstract_port_a6bf2ecdcf894da3929a22eb8793a9fe3}{\index{mdt\-Abstract\-Port@{mdt\-Abstract\-Port}!lock\-Mutex@{lock\-Mutex}}
\index{lock\-Mutex@{lock\-Mutex}!mdtAbstractPort@{mdt\-Abstract\-Port}}
\subsubsection[{lock\-Mutex}]{\setlength{\rightskip}{0pt plus 5cm}void mdt\-Abstract\-Port\-::lock\-Mutex (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
)}}\label{classmdt_abstract_port_a6bf2ecdcf894da3929a22eb8793a9fe3}


Lock the mutex. 



Definition at line 344 of file mdt\-Abstract\-Port.\-cpp.



References pv\-Mutex.



Referenced by mdt\-Usb\-Port\-::control\-Transfer\-Callback(), flush(), flush\-In(), flush\-Out(), mdt\-Port\-Thread\-Helper\-::get\-New\-Frame\-Read(), mdt\-Usb\-Port\-::handle\-Usb\-Events(), mdt\-Port\-Thread\-::is\-Finished(), mdt\-Port\-Thread\-::is\-Running(), mdt\-Port\-Manager\-::lock\-Port\-Mutex(), mdt\-Usb\-Port\-::reconnect(), mdt\-Port\-Thread\-::stop(), mdt\-Usb\-Port\-Thread\-::wait\-On\-Control\-Transfer\-Possible(), and mdt\-Port\-Thread\-Helper\-Port\-::write\-To\-Port().

\hypertarget{classmdt_abstract_port_a4e0f0b7f9e24257677184e4bde10fdde}{\index{mdt\-Abstract\-Port@{mdt\-Abstract\-Port}!open@{open}}
\index{open@{open}!mdtAbstractPort@{mdt\-Abstract\-Port}}
\subsubsection[{open}]{\setlength{\rightskip}{0pt plus 5cm}{\bf mdt\-Abstract\-Port\-::error\-\_\-t} mdt\-Abstract\-Port\-::open (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
)}}\label{classmdt_abstract_port_a4e0f0b7f9e24257677184e4bde10fdde}


Open the port given by \hyperlink{classmdt_abstract_port_a0ca143d32fc677bac7c1cf0e04144932}{set\-Port\-Name()} 

If port can be open successfull, No\-Error code is returned. If port is open, it will be closed first (by calling \hyperlink{classmdt_abstract_port_a1ace1a2bd1a04f16952980e247b04800}{close()}).

The mutex is not handled by this method.

Subclass notes\-:\par
 Internally, this method calls \hyperlink{classmdt_abstract_port_ac1440ea9759cbbee9efc5ea22afcdb0a}{pv\-Open()}. Once done, the flags are updated.

\begin{DoxySeeAlso}{See Also}
\hyperlink{classmdt_abstract_port_ad4121bb930c95887e77f8bafa065a85e}{error\-\_\-t} 
\end{DoxySeeAlso}


Definition at line 53 of file mdt\-Abstract\-Port.\-cpp.



References close(), is\-Open(), No\-Error, and pv\-Open().



Referenced by mdt\-Usb\-Port\-::reconnect(), mdt\-Serial\-Port\-Manager\-::scan(), and setup().

\hypertarget{classmdt_abstract_port_ac52fbd121f7cbb848a2f3e5d29fae615}{\index{mdt\-Abstract\-Port@{mdt\-Abstract\-Port}!port\-Name@{port\-Name}}
\index{port\-Name@{port\-Name}!mdtAbstractPort@{mdt\-Abstract\-Port}}
\subsubsection[{port\-Name}]{\setlength{\rightskip}{0pt plus 5cm}Q\-String \& mdt\-Abstract\-Port\-::port\-Name (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
)}}\label{classmdt_abstract_port_ac52fbd121f7cbb848a2f3e5d29fae615}


Get port name. 



Definition at line 43 of file mdt\-Abstract\-Port.\-cpp.



References pv\-Port\-Name.



Referenced by set\-Port\-Name().

\hypertarget{classmdt_abstract_port_add29e91ccc4be62ab5c0dcb2a68ae8f0}{\index{mdt\-Abstract\-Port@{mdt\-Abstract\-Port}!pv\-Close@{pv\-Close}}
\index{pv\-Close@{pv\-Close}!mdtAbstractPort@{mdt\-Abstract\-Port}}
\subsubsection[{pv\-Close}]{\setlength{\rightskip}{0pt plus 5cm}virtual void mdt\-Abstract\-Port\-::pv\-Close (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [protected]}, {\ttfamily [pure virtual]}}}\label{classmdt_abstract_port_add29e91ccc4be62ab5c0dcb2a68ae8f0}


Close port. 

The mutex is not handled by this method.

\begin{DoxyPrecond}{Precondition}
The port must be open whenn calling this method.
\end{DoxyPrecond}
Subclass notes\-:\par
 This method must be re-\/implemented in subclass.\par
 To handle the port correctly, the subclass method must\-:
\begin{DoxyItemize}
\item Do the specific work. Note that port was open in exclusive mode. On Linux, don't forget to unlock the port with \hyperlink{classmdt_port_lock}{mdt\-Port\-Lock}.
\item The \hyperlink{classmdt_error}{mdt\-Error} system should be used (on error) to keep trace in logfile.
\item If additionnal queues are handled, they should be freed here. 
\end{DoxyItemize}

Referenced by close().

\hypertarget{classmdt_abstract_port_a1fe88e9d56c0881b9566664b094b0958}{\index{mdt\-Abstract\-Port@{mdt\-Abstract\-Port}!pv\-Flush\-In@{pv\-Flush\-In}}
\index{pv\-Flush\-In@{pv\-Flush\-In}!mdtAbstractPort@{mdt\-Abstract\-Port}}
\subsubsection[{pv\-Flush\-In}]{\setlength{\rightskip}{0pt plus 5cm}virtual void mdt\-Abstract\-Port\-::pv\-Flush\-In (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [protected]}, {\ttfamily [pure virtual]}}}\label{classmdt_abstract_port_a1fe88e9d56c0881b9566664b094b0958}


Flush read port. 

This method is called from \hyperlink{classmdt_abstract_port_a32329b4188db796401e4f454755acb44}{flush\-In()}, and is usefull if subsystem needs to be flushed. (For ex. serial port).

This method must be implemented in subclass.

The mutex is handled by \hyperlink{classmdt_abstract_port_a32329b4188db796401e4f454755acb44}{flush\-In()} and should not be handled here. 

Referenced by close(), flush(), and flush\-In().

\hypertarget{classmdt_abstract_port_a1667fa938d3a7578b73f54c32015c369}{\index{mdt\-Abstract\-Port@{mdt\-Abstract\-Port}!pv\-Flush\-Out@{pv\-Flush\-Out}}
\index{pv\-Flush\-Out@{pv\-Flush\-Out}!mdtAbstractPort@{mdt\-Abstract\-Port}}
\subsubsection[{pv\-Flush\-Out}]{\setlength{\rightskip}{0pt plus 5cm}virtual void mdt\-Abstract\-Port\-::pv\-Flush\-Out (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [protected]}, {\ttfamily [pure virtual]}}}\label{classmdt_abstract_port_a1667fa938d3a7578b73f54c32015c369}


Flush write port. 

This method is called from \hyperlink{classmdt_abstract_port_ad199c6310801893f1f7de2a2391606fc}{flush\-Out()}, and is usefull if subsystem needs to be flushed. (For ex. serial port).

The mutex is handled by \hyperlink{classmdt_abstract_port_ad199c6310801893f1f7de2a2391606fc}{flush\-Out()} and should not be handled here. 

Referenced by close(), flush(), and flush\-Out().

\hypertarget{classmdt_abstract_port_ac1440ea9759cbbee9efc5ea22afcdb0a}{\index{mdt\-Abstract\-Port@{mdt\-Abstract\-Port}!pv\-Open@{pv\-Open}}
\index{pv\-Open@{pv\-Open}!mdtAbstractPort@{mdt\-Abstract\-Port}}
\subsubsection[{pv\-Open}]{\setlength{\rightskip}{0pt plus 5cm}virtual {\bf error\-\_\-t} mdt\-Abstract\-Port\-::pv\-Open (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [protected]}, {\ttfamily [pure virtual]}}}\label{classmdt_abstract_port_ac1440ea9759cbbee9efc5ea22afcdb0a}


Open the port given by \hyperlink{classmdt_abstract_port_a0ca143d32fc677bac7c1cf0e04144932}{set\-Port\-Name()} 

If port can be open successfull, No\-Error code is returned.

The mutex is not handled by this method.

\begin{DoxyPrecond}{Precondition}
The port must not be open whenn calling this method.
\end{DoxyPrecond}
Subclass notes\-:\par
 This method must be re-\/implemented in subclass.\par
 To handle the port correctly, the subclass method must\-:
\begin{DoxyItemize}
\item Do the specific work. Note that port must be open in exclusive mode. On Linux, the \hyperlink{classmdt_port_lock}{mdt\-Port\-Lock} should be used for this.
\item The \hyperlink{classmdt_error}{mdt\-Error} system should be used (on error) to keep trace in logfile.
\item If port must be closed (f.\-ex. on error), use the \hyperlink{classmdt_abstract_port_a1ace1a2bd1a04f16952980e247b04800}{close()} method to keep flags coherent. Note that \hyperlink{classmdt_abstract_port_add29e91ccc4be62ab5c0dcb2a68ae8f0}{pv\-Close()} will not be called if this method returns something else than No\-Error. If some cleanup (witch are normally done in \hyperlink{classmdt_abstract_port_add29e91ccc4be62ab5c0dcb2a68ae8f0}{pv\-Close()} ) must be done, do it before return.
\item Return the correct error code on failure (see the error\-\_\-t enum)
\end{DoxyItemize}

\begin{DoxySeeAlso}{See Also}
\hyperlink{classmdt_abstract_port_a1ace1a2bd1a04f16952980e247b04800}{close()} 

\hyperlink{classmdt_abstract_port_ad4121bb930c95887e77f8bafa065a85e}{error\-\_\-t} 
\end{DoxySeeAlso}


Referenced by open().

\hypertarget{classmdt_abstract_port_a880e5ae1699af102f9a80501bb6a0021}{\index{mdt\-Abstract\-Port@{mdt\-Abstract\-Port}!pv\-Setup@{pv\-Setup}}
\index{pv\-Setup@{pv\-Setup}!mdtAbstractPort@{mdt\-Abstract\-Port}}
\subsubsection[{pv\-Setup}]{\setlength{\rightskip}{0pt plus 5cm}virtual {\bf error\-\_\-t} mdt\-Abstract\-Port\-::pv\-Setup (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [protected]}, {\ttfamily [pure virtual]}}}\label{classmdt_abstract_port_a880e5ae1699af102f9a80501bb6a0021}


Setup port with given configurations. 

The mutex is not handled by this method.

\begin{DoxyPrecond}{Precondition}
The port must be open whenn calling this method. 

A valid configuration must be set before calling this method.
\end{DoxyPrecond}
Subclass notes\-:\par
 This method must be re-\/implemented in subclass.\par
 To handle the port correctly, the subclass method must\-:
\begin{DoxyItemize}
\item Do the specific work
\item Set read/write timeouts using \hyperlink{classmdt_abstract_port_a6589b04467e0073d18ba872201bdcd84}{set\-Read\-Timeout()} and \hyperlink{classmdt_abstract_port_a12eb422d52ebb09a650f8497b258c2e7}{set\-Write\-Timeout()}. See \hyperlink{classmdt_port_config}{mdt\-Port\-Config} to know how to get these timeouts.
\item Return the correct error code on failure (see the error\-\_\-t enum)
\end{DoxyItemize}

Configuration is available using \hyperlink{classmdt_abstract_port_a3d105c90696f7c40f29c24fe9b6e4481}{config()}.

\begin{DoxySeeAlso}{See Also}
\hyperlink{classmdt_abstract_port_ad4121bb930c95887e77f8bafa065a85e}{error\-\_\-t} 
\end{DoxySeeAlso}


Referenced by setup().

\hypertarget{classmdt_abstract_port_a9d9c45220d5328c9856a2445557fe970}{\index{mdt\-Abstract\-Port@{mdt\-Abstract\-Port}!read@{read}}
\index{read@{read}!mdtAbstractPort@{mdt\-Abstract\-Port}}
\subsubsection[{read}]{\setlength{\rightskip}{0pt plus 5cm}virtual qint64 mdt\-Abstract\-Port\-::read (
\begin{DoxyParamCaption}
\item[{char $\ast$}]{data, }
\item[{qint64}]{max\-Size}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [pure virtual]}}}\label{classmdt_abstract_port_a9d9c45220d5328c9856a2445557fe970}


Read data from port. 

This method is called from \hyperlink{classmdt_port_read_thread}{mdt\-Port\-Read\-Thread} , and should not be used directly.

Mutex is not handled by this method.

Subclass notes\-:\par
 This method must be implemented in subclass.\par


\begin{DoxyReturn}{Returns}
Number of bytes readen, or a error $<$ 0 (see error\-\_\-t ) 
\end{DoxyReturn}


Implemented in \hyperlink{classmdt_usb_port_abce257345c8af47494215cd7ee75f82d}{mdt\-Usb\-Port}, \hyperlink{classmdt_serial_port_a12274d7956b2af961ccdd36cfc2052cc}{mdt\-Serial\-Port}, \hyperlink{classmdt_tcp_socket_a78842bc5ddcac2d96fb368ee575214cd}{mdt\-Tcp\-Socket}, and \hyperlink{classmdt_port_ad8a196bb21b6ca76dffb068a1692904a}{mdt\-Port}.



Referenced by mdt\-Port\-Thread\-Helper\-Port\-::read\-From\-Port().

\hypertarget{classmdt_abstract_port_a05356a33dc546a11d2794a0419d749e0}{\index{mdt\-Abstract\-Port@{mdt\-Abstract\-Port}!readen\-Frames@{readen\-Frames}}
\index{readen\-Frames@{readen\-Frames}!mdtAbstractPort@{mdt\-Abstract\-Port}}
\subsubsection[{readen\-Frames}]{\setlength{\rightskip}{0pt plus 5cm}Q\-Queue$<$ {\bf mdt\-Frame} $\ast$ $>$ \& mdt\-Abstract\-Port\-::readen\-Frames (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
)}}\label{classmdt_abstract_port_a05356a33dc546a11d2794a0419d749e0}


Get the readen frames Queue. 

Readen frames queue contains frames that where received from device

Mutex is not handled by this method. 

Definition at line 288 of file mdt\-Abstract\-Port.\-cpp.



References pv\-Readen\-Frames.



Referenced by mdt\-Usbtmc\-Port\-Manager\-::from\-Thread\-New\-Frame\-Readen(), mdt\-Modbus\-Tcp\-Port\-Manager\-::from\-Thread\-New\-Frame\-Readen(), mdt\-Port\-Manager\-::from\-Thread\-New\-Frame\-Readen(), and mdt\-Port\-Thread\-Helper\-::submit\-Current\-Read\-Frame().

\hypertarget{classmdt_abstract_port_a3850ab819a8fc5dad22af14b74c45274}{\index{mdt\-Abstract\-Port@{mdt\-Abstract\-Port}!read\-Frames\-Pool@{read\-Frames\-Pool}}
\index{read\-Frames\-Pool@{read\-Frames\-Pool}!mdtAbstractPort@{mdt\-Abstract\-Port}}
\subsubsection[{read\-Frames\-Pool}]{\setlength{\rightskip}{0pt plus 5cm}Q\-Queue$<$ {\bf mdt\-Frame} $\ast$ $>$ \& mdt\-Abstract\-Port\-::read\-Frames\-Pool (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
)}}\label{classmdt_abstract_port_a3850ab819a8fc5dad22af14b74c45274}


Get the read frames Queue pool. 

Read frames queue pool contains frames that are ready to use for reception

Mutex is not handled by this method. 

Definition at line 293 of file mdt\-Abstract\-Port.\-cpp.



References pv\-Read\-Frames\-Pool.



Referenced by mdt\-Usbtmc\-Port\-Manager\-::from\-Thread\-New\-Frame\-Readen(), mdt\-Modbus\-Tcp\-Port\-Manager\-::from\-Thread\-New\-Frame\-Readen(), mdt\-Port\-Manager\-::from\-Thread\-New\-Frame\-Readen(), mdt\-Port\-Thread\-Helper\-::get\-New\-Frame\-Read(), and mdt\-Port\-Thread\-Helper\-::restore\-Current\-Read\-Frame\-To\-Pool().

\hypertarget{classmdt_abstract_port_aec74b2db1a629d98a95d8f042ea96653}{\index{mdt\-Abstract\-Port@{mdt\-Abstract\-Port}!reconnect@{reconnect}}
\index{reconnect@{reconnect}!mdtAbstractPort@{mdt\-Abstract\-Port}}
\subsubsection[{reconnect}]{\setlength{\rightskip}{0pt plus 5cm}{\bf mdt\-Abstract\-Port\-::error\-\_\-t} mdt\-Abstract\-Port\-::reconnect (
\begin{DoxyParamCaption}
\item[{int}]{timeout}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [virtual]}}}\label{classmdt_abstract_port_aec74b2db1a629d98a95d8f042ea96653}


Reconnect device/peer. 

If one of the method returns a Disconnected error, the thread will call this method to try to reconnect.


\begin{DoxyParams}{Parameters}
{\em timeout} & Timeout \mbox{[}ms\mbox{]} \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
No\-Error if connection could be done. Disconnected if connection could not be done, in wich case the thread will retry (until max retry). A Unhandled\-Error can be returned.
\end{DoxyReturn}
If subclass supports device (de$|$re)-\/connection, this method must be implemented.

Default implementation returns a Unhandled\-Error.

Notes about mutex handling\-:
\begin{DoxyItemize}
\item The mutex is locked when method is called, and must be locked when returns 
\end{DoxyItemize}

Reimplemented in \hyperlink{classmdt_usb_port_af2399348faf1abc20130eab20cfc36ee}{mdt\-Usb\-Port}.



Definition at line 133 of file mdt\-Abstract\-Port.\-cpp.



References Unhandled\-Error.



Referenced by mdt\-Port\-Thread\-Helper\-Port\-::reconnect(), and mdt\-Port\-Thread\-::reconnect().

\hypertarget{classmdt_abstract_port_ad4a04c995df881593db0a309000be7a7}{\index{mdt\-Abstract\-Port@{mdt\-Abstract\-Port}!resume\-Transmission@{resume\-Transmission}}
\index{resume\-Transmission@{resume\-Transmission}!mdtAbstractPort@{mdt\-Abstract\-Port}}
\subsubsection[{resume\-Transmission}]{\setlength{\rightskip}{0pt plus 5cm}bool mdt\-Abstract\-Port\-::resume\-Transmission (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [virtual]}}}\label{classmdt_abstract_port_ad4a04c995df881593db0a309000be7a7}


Request to resume transmission. 

This method is called from \hyperlink{classmdt_port_read_thread}{mdt\-Port\-Read\-Thread} , and should not be used directly.\par
 Mutex is not handled by this method.

Subclass notes\-:\par
 This method must be implemented in subclass if requierd.\par
 Note about serial port subclass\-:\par
 the right flow control must be used regarding enabled flow control.\par
 Default implementation does nothing.\par


\begin{DoxyReturn}{Returns}
False on error, in this case, the reader thread will be stopped. 
\end{DoxyReturn}


Reimplemented in \hyperlink{classmdt_serial_port_a02fd5ee74a7f52c3bce0545ec8a659bf}{mdt\-Serial\-Port}.



Definition at line 156 of file mdt\-Abstract\-Port.\-cpp.

\hypertarget{classmdt_abstract_port_a48bdc0a8057c3b119763643098cf798f}{\index{mdt\-Abstract\-Port@{mdt\-Abstract\-Port}!set\-Config@{set\-Config}}
\index{set\-Config@{set\-Config}!mdtAbstractPort@{mdt\-Abstract\-Port}}
\subsubsection[{set\-Config}]{\setlength{\rightskip}{0pt plus 5cm}void mdt\-Abstract\-Port\-::set\-Config (
\begin{DoxyParamCaption}
\item[{{\bf mdt\-Port\-Config} $\ast$}]{cfg}
\end{DoxyParamCaption}
)}}\label{classmdt_abstract_port_a48bdc0a8057c3b119763643098cf798f}


Set configuration. 



Definition at line 98 of file mdt\-Abstract\-Port.\-cpp.



References pv\-Config.



Referenced by mdt\-Modbus\-Tcp\-Port\-Manager\-::mdt\-Modbus\-Tcp\-Port\-Manager(), mdt\-Serial\-Port\-Manager\-::mdt\-Serial\-Port\-Manager(), and mdt\-Usb\-Port\-Manager\-::mdt\-Usb\-Port\-Manager().

\hypertarget{classmdt_abstract_port_a0ca143d32fc677bac7c1cf0e04144932}{\index{mdt\-Abstract\-Port@{mdt\-Abstract\-Port}!set\-Port\-Name@{set\-Port\-Name}}
\index{set\-Port\-Name@{set\-Port\-Name}!mdtAbstractPort@{mdt\-Abstract\-Port}}
\subsubsection[{set\-Port\-Name}]{\setlength{\rightskip}{0pt plus 5cm}void mdt\-Abstract\-Port\-::set\-Port\-Name (
\begin{DoxyParamCaption}
\item[{const Q\-String \&}]{port\-Name}
\end{DoxyParamCaption}
)}}\label{classmdt_abstract_port_a0ca143d32fc677bac7c1cf0e04144932}


Set the port name. 

Port name can be, f.\-ex. /dev/tty\-S0 on Linux, or C\-O\-M1 on Windows. This method just store given port name and does nothing else. 

Definition at line 38 of file mdt\-Abstract\-Port.\-cpp.



References port\-Name(), and pv\-Port\-Name.



Referenced by mdt\-Serial\-Port\-Manager\-::scan(), mdt\-Port\-Manager\-::set\-Port\-Info(), and mdt\-Port\-Manager\-::set\-Port\-Name().

\hypertarget{classmdt_abstract_port_a6589b04467e0073d18ba872201bdcd84}{\index{mdt\-Abstract\-Port@{mdt\-Abstract\-Port}!set\-Read\-Timeout@{set\-Read\-Timeout}}
\index{set\-Read\-Timeout@{set\-Read\-Timeout}!mdtAbstractPort@{mdt\-Abstract\-Port}}
\subsubsection[{set\-Read\-Timeout}]{\setlength{\rightskip}{0pt plus 5cm}virtual void mdt\-Abstract\-Port\-::set\-Read\-Timeout (
\begin{DoxyParamCaption}
\item[{int}]{timeout}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [pure virtual]}}}\label{classmdt_abstract_port_a6589b04467e0073d18ba872201bdcd84}


Set the read data timeout. 

The mutex is not handled by this method.

Subclass notes\-:\par
 This method must be re-\/implemented in subclass. The subclass can convert and store the value in system specific type (f.\-ex\-: timeval struct on Posix)


\begin{DoxyParams}{Parameters}
{\em timeout} & Timeout \mbox{[}ms\mbox{]}. A value of -\/1 means a infinite timeout. \\
\hline
\end{DoxyParams}


Implemented in \hyperlink{classmdt_serial_port_a9105e5a3a640b56097c1156000ace933}{mdt\-Serial\-Port}, \hyperlink{classmdt_usb_port_a44ed5024a81a573b5196b8f64c42cd6a}{mdt\-Usb\-Port}, \hyperlink{classmdt_tcp_socket_aae23057f2e0ee326d0fee78ffe3f00f9}{mdt\-Tcp\-Socket}, and \hyperlink{classmdt_port_aa77b266f23744f1b53ae589f986be101}{mdt\-Port}.



Referenced by wait\-For\-Ready\-Read().

\hypertarget{classmdt_abstract_port_abc9f1154ac71c4e31ac3e7a3ff4c5182}{\index{mdt\-Abstract\-Port@{mdt\-Abstract\-Port}!setup@{setup}}
\index{setup@{setup}!mdtAbstractPort@{mdt\-Abstract\-Port}}
\subsubsection[{setup}]{\setlength{\rightskip}{0pt plus 5cm}{\bf mdt\-Abstract\-Port\-::error\-\_\-t} mdt\-Abstract\-Port\-::setup (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
)}}\label{classmdt_abstract_port_abc9f1154ac71c4e31ac3e7a3ff4c5182}


Setup port with given configurations. 

If port is not open, \hyperlink{classmdt_abstract_port_a4e0f0b7f9e24257677184e4bde10fdde}{open()} will be called first. Then, \hyperlink{classmdt_abstract_port_a880e5ae1699af102f9a80501bb6a0021}{pv\-Setup()} is called, and finally queues initialized with \hyperlink{classmdt_abstract_port_adf06d095d6c3e6ce939a3998bcf8b829}{init\-Queues()}. If somethig fails, the port is closed again, and error code returned.

The mutex is not handled by this method.

\begin{DoxyPrecond}{Precondition}
A valid configuration must be set before calling this method.
\end{DoxyPrecond}
\begin{DoxySeeAlso}{See Also}
\hyperlink{classmdt_abstract_port_ad4121bb930c95887e77f8bafa065a85e}{error\-\_\-t} 
\end{DoxySeeAlso}


Definition at line 110 of file mdt\-Abstract\-Port.\-cpp.



References close(), init\-Queues(), is\-Open(), No\-Error, open(), and pv\-Setup().



Referenced by mdt\-Port\-Manager\-::open\-Port(), and mdt\-Usb\-Port\-::reconnect().

\hypertarget{classmdt_abstract_port_a12eb422d52ebb09a650f8497b258c2e7}{\index{mdt\-Abstract\-Port@{mdt\-Abstract\-Port}!set\-Write\-Timeout@{set\-Write\-Timeout}}
\index{set\-Write\-Timeout@{set\-Write\-Timeout}!mdtAbstractPort@{mdt\-Abstract\-Port}}
\subsubsection[{set\-Write\-Timeout}]{\setlength{\rightskip}{0pt plus 5cm}virtual void mdt\-Abstract\-Port\-::set\-Write\-Timeout (
\begin{DoxyParamCaption}
\item[{int}]{timeout}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [pure virtual]}}}\label{classmdt_abstract_port_a12eb422d52ebb09a650f8497b258c2e7}


Set the write data timeout. 

The mutex is not handled by this method.

Subclass notes\-:\par
 This method must be re-\/implemented in subclass. The subclass can convert and store the value in system specific type (f.\-ex\-: timeval struct on Posix)


\begin{DoxyParams}{Parameters}
{\em timeout} & Timeout \mbox{[}ms\mbox{]}. A value of -\/1 means a infinite timeout. \\
\hline
\end{DoxyParams}


Implemented in \hyperlink{classmdt_serial_port_a036f49d743838013c9a8cbf6a1dd40d1}{mdt\-Serial\-Port}, \hyperlink{classmdt_usb_port_a592af88bd7e7f45dd80df0ecab375ace}{mdt\-Usb\-Port}, \hyperlink{classmdt_tcp_socket_ac59d2dfdf405b5382f0f20d5b9f75fd0}{mdt\-Tcp\-Socket}, and \hyperlink{classmdt_port_a2acb6e7bedacdadf78ee735dc611abfa}{mdt\-Port}.

\hypertarget{classmdt_abstract_port_aff3d79248baf96e670eba6d2fef700b9}{\index{mdt\-Abstract\-Port@{mdt\-Abstract\-Port}!suspend\-Transmission@{suspend\-Transmission}}
\index{suspend\-Transmission@{suspend\-Transmission}!mdtAbstractPort@{mdt\-Abstract\-Port}}
\subsubsection[{suspend\-Transmission}]{\setlength{\rightskip}{0pt plus 5cm}bool mdt\-Abstract\-Port\-::suspend\-Transmission (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [virtual]}}}\label{classmdt_abstract_port_aff3d79248baf96e670eba6d2fef700b9}


Request to suspend transmission. 

This method is called from \hyperlink{classmdt_port_read_thread}{mdt\-Port\-Read\-Thread} , and should not be used directly.\par
 Mutex is not handled by this method.

Subclass notes\-:\par
 This method must be implemented in subclass if requierd.\par
 Note about serial port subclass\-:\par
 the right flow control must be used regarding enabled flow control.\par
 Default implementation does nothing.\par


\begin{DoxyReturn}{Returns}
False on error, in this case, the reader thread will be stopped. 
\end{DoxyReturn}


Reimplemented in \hyperlink{classmdt_serial_port_a9412faf413eca5ee3516139fdfaaf2fe}{mdt\-Serial\-Port}.



Definition at line 151 of file mdt\-Abstract\-Port.\-cpp.

\hypertarget{classmdt_abstract_port_a3523c72a06e4d950338f91e56c286e84}{\index{mdt\-Abstract\-Port@{mdt\-Abstract\-Port}!unlock\-Mutex@{unlock\-Mutex}}
\index{unlock\-Mutex@{unlock\-Mutex}!mdtAbstractPort@{mdt\-Abstract\-Port}}
\subsubsection[{unlock\-Mutex}]{\setlength{\rightskip}{0pt plus 5cm}void mdt\-Abstract\-Port\-::unlock\-Mutex (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
)}}\label{classmdt_abstract_port_a3523c72a06e4d950338f91e56c286e84}


Unlock the mutex. 



Definition at line 349 of file mdt\-Abstract\-Port.\-cpp.



References pv\-Mutex.



Referenced by mdt\-Usb\-Port\-::control\-Transfer\-Callback(), flush(), flush\-In(), flush\-Out(), mdt\-Port\-Thread\-Helper\-::get\-New\-Frame\-Read(), mdt\-Usb\-Port\-::handle\-Usb\-Events(), mdt\-Port\-Thread\-::is\-Finished(), mdt\-Port\-Thread\-::is\-Running(), mdt\-Usb\-Port\-::reconnect(), mdt\-Port\-Thread\-::stop(), mdt\-Port\-Manager\-::unlock\-Port\-Mutex(), mdt\-Usb\-Port\-Thread\-::wait\-On\-Control\-Transfer\-Possible(), and mdt\-Port\-Thread\-Helper\-Port\-::write\-To\-Port().

\hypertarget{classmdt_abstract_port_a35e4686f50e2c53c7e3618cf2c485d92}{\index{mdt\-Abstract\-Port@{mdt\-Abstract\-Port}!wait\-Event\-Write\-Ready@{wait\-Event\-Write\-Ready}}
\index{wait\-Event\-Write\-Ready@{wait\-Event\-Write\-Ready}!mdtAbstractPort@{mdt\-Abstract\-Port}}
\subsubsection[{wait\-Event\-Write\-Ready}]{\setlength{\rightskip}{0pt plus 5cm}virtual {\bf error\-\_\-t} mdt\-Abstract\-Port\-::wait\-Event\-Write\-Ready (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [pure virtual]}}}\label{classmdt_abstract_port_a35e4686f50e2c53c7e3618cf2c485d92}


Wait until data can be written to port. 

This method is called from \hyperlink{classmdt_port_write_thread}{mdt\-Port\-Write\-Thread} , and should not be used directly.\par
 Mutex must be locked before calling this method with \hyperlink{classmdt_abstract_port_a6bf2ecdcf894da3929a22eb8793a9fe3}{lock\-Mutex()}. The mutex is locked when method returns.

Subclass notes\-:\par
 This method must be re-\/implemented in subclass. The write timeout state must be updated with update\-Write\-Timeout\-State() Notes about mutex handling\-:
\begin{DoxyItemize}
\item Mutex must be released during wait, and relocked befor return.
\end{DoxyItemize}

\begin{DoxyReturn}{Returns}
On success, No\-Error is returned. If waiting is canceled, Waiting\-Canceled is returned and the thread knows that it must end (case of stopping thread). If \hyperlink{classmdt_abstract_port_ad199c6310801893f1f7de2a2391606fc}{flush\-Out()} was called, Write\-Canceled is returned. If a port lost connection (f.\-ex. U\-S\-B port or T\-C\-P socket), Disconnected is returned. On unhandled error, Unhandled\-Error is returned. The thread also stop working, and emit a error signal (that can be handled in \hyperlink{classmdt_port_manager}{mdt\-Port\-Manager}, or in another place in application). 
\end{DoxyReturn}


Implemented in \hyperlink{classmdt_usb_port_a3be875f6f10ae94fd3a94f925bb935e7}{mdt\-Usb\-Port}, \hyperlink{classmdt_serial_port_a988825b3ff2ef93a1b43e2df316055bd}{mdt\-Serial\-Port}, \hyperlink{classmdt_tcp_socket_a33385bcde41b8065ea7eff65c754b0cb}{mdt\-Tcp\-Socket}, and \hyperlink{classmdt_port_a85e77a391f6f5782428beb2e6aee52f8}{mdt\-Port}.



Referenced by mdt\-Port\-Thread\-Helper\-Port\-::write\-To\-Port().

\hypertarget{classmdt_abstract_port_aeda364cb191da1038a22dd1fc06a1d49}{\index{mdt\-Abstract\-Port@{mdt\-Abstract\-Port}!wait\-For\-Ready\-Read@{wait\-For\-Ready\-Read}}
\index{wait\-For\-Ready\-Read@{wait\-For\-Ready\-Read}!mdtAbstractPort@{mdt\-Abstract\-Port}}
\subsubsection[{wait\-For\-Ready\-Read}]{\setlength{\rightskip}{0pt plus 5cm}virtual {\bf error\-\_\-t} mdt\-Abstract\-Port\-::wait\-For\-Ready\-Read (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [pure virtual]}}}\label{classmdt_abstract_port_aeda364cb191da1038a22dd1fc06a1d49}


Wait until data is available on port. 

This method is called from reader thread , and should not be used directly.

Mutex must be locked before calling this method with \hyperlink{classmdt_abstract_port_a6bf2ecdcf894da3929a22eb8793a9fe3}{lock\-Mutex()}. The mutex is locked when method returns.

Subclass notes\-:\par
 This method must be re-\/implemented in subclass. The read timeout state must be updated with update\-Read\-Timeout\-State()\par
 Notes about mutex handling\-:
\begin{DoxyItemize}
\item Mutex must be released during wait, and relocked befor return.
\end{DoxyItemize}

\begin{DoxyReturn}{Returns}
On success, No\-Error is returned. If waiting is canceled, Read\-Canceled is returned. If a port lost connection (f.\-ex. U\-S\-B port or T\-C\-P socket), Disconnected is returned. On unhandled error, Unhandled\-Error is returned. The thread also stop working, and emit a error signal (that can be handled in \hyperlink{classmdt_port_manager}{mdt\-Port\-Manager}, or in another place in application).
\end{DoxyReturn}
\begin{DoxySeeAlso}{See Also}
\hyperlink{classmdt_port_thread}{mdt\-Port\-Thread} 

\hyperlink{classmdt_port_config}{mdt\-Port\-Config} 

\hyperlink{classmdt_tcp_socket_thread}{mdt\-Tcp\-Socket\-Thread} 

\hyperlink{classmdt_usb_port_thread}{mdt\-Usb\-Port\-Thread} 
\end{DoxySeeAlso}


Implemented in \hyperlink{classmdt_usb_port_ab8ddd4ebee603ac381e8da0383a61e36}{mdt\-Usb\-Port}, \hyperlink{classmdt_serial_port_ad150a45c68d98a501bea2f102aeadb50}{mdt\-Serial\-Port}, \hyperlink{classmdt_tcp_socket_adb09186cdacdac15291523c59f156cd4}{mdt\-Tcp\-Socket}, and \hyperlink{classmdt_port_a84594fdb56cd455a366c69b0a9228020}{mdt\-Port}.



Referenced by wait\-For\-Ready\-Read().

\hypertarget{classmdt_abstract_port_a47f4db2e72b5fd3e32162e6a898fd391}{\index{mdt\-Abstract\-Port@{mdt\-Abstract\-Port}!wait\-For\-Ready\-Read@{wait\-For\-Ready\-Read}}
\index{wait\-For\-Ready\-Read@{wait\-For\-Ready\-Read}!mdtAbstractPort@{mdt\-Abstract\-Port}}
\subsubsection[{wait\-For\-Ready\-Read}]{\setlength{\rightskip}{0pt plus 5cm}{\bf mdt\-Abstract\-Port\-::error\-\_\-t} mdt\-Abstract\-Port\-::wait\-For\-Ready\-Read (
\begin{DoxyParamCaption}
\item[{int}]{msecs}
\end{DoxyParamCaption}
)}}\label{classmdt_abstract_port_a47f4db2e72b5fd3e32162e6a898fd391}


Wait until data is available on port. 

This method calls \hyperlink{classmdt_abstract_port_a6589b04467e0073d18ba872201bdcd84}{set\-Read\-Timeout()} , \hyperlink{classmdt_abstract_port_aeda364cb191da1038a22dd1fc06a1d49}{wait\-For\-Ready\-Read()} and \hyperlink{classmdt_abstract_port_a6589b04467e0073d18ba872201bdcd84}{set\-Read\-Timeout()} again to restore original setting. (it is a little bit slower than setting timeout one time, and call \hyperlink{classmdt_abstract_port_aeda364cb191da1038a22dd1fc06a1d49}{wait\-For\-Ready\-Read()} ).\par
 Note that the reader thread will call \hyperlink{classmdt_abstract_port_aeda364cb191da1038a22dd1fc06a1d49}{wait\-For\-Ready\-Read()} without argument.\par
 Note\-: this method is called from thread , and should not be used directly\par
 Mutex\-: see \hyperlink{classmdt_abstract_port_aeda364cb191da1038a22dd1fc06a1d49}{wait\-For\-Ready\-Read()}


\begin{DoxyParams}{Parameters}
{\em timeout} & Timeout \mbox{[}ms\mbox{]}. A value of -\/1 means a infinite timeout. \\
\hline
\end{DoxyParams}
\begin{DoxySeeAlso}{See Also}
\hyperlink{classmdt_abstract_port_aeda364cb191da1038a22dd1fc06a1d49}{wait\-For\-Ready\-Read()} 
\end{DoxySeeAlso}


Definition at line 138 of file mdt\-Abstract\-Port.\-cpp.



References pv\-Config, mdt\-Port\-Config\-::read\-Timeout(), set\-Read\-Timeout(), and wait\-For\-Ready\-Read().

\hypertarget{classmdt_abstract_port_a64d4802975a76474b9196c91f57a6d90}{\index{mdt\-Abstract\-Port@{mdt\-Abstract\-Port}!write@{write}}
\index{write@{write}!mdtAbstractPort@{mdt\-Abstract\-Port}}
\subsubsection[{write}]{\setlength{\rightskip}{0pt plus 5cm}virtual qint64 mdt\-Abstract\-Port\-::write (
\begin{DoxyParamCaption}
\item[{const char $\ast$}]{data, }
\item[{qint64}]{max\-Size}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [pure virtual]}}}\label{classmdt_abstract_port_a64d4802975a76474b9196c91f57a6d90}


Write data to port. 

This method is called from \hyperlink{classmdt_port_write_thread}{mdt\-Port\-Write\-Thread} , and should not be used directly.

Mutex is not handled by this method.

Subclass notes\-:\par
 This method must be implemented in subclass.\par


\begin{DoxyReturn}{Returns}
Number of bytes written, or error $<$ 0 (see error\-\_\-t) 
\end{DoxyReturn}


Implemented in \hyperlink{classmdt_usb_port_ae777e33325ff2adef326dd7f81b00838}{mdt\-Usb\-Port}, \hyperlink{classmdt_serial_port_a282f99035c032fbb6fa86ccd10deb597}{mdt\-Serial\-Port}, \hyperlink{classmdt_tcp_socket_adbf2db44b291127a499d9f8720beb632}{mdt\-Tcp\-Socket}, and \hyperlink{classmdt_port_a62f4a6f2c547d40d3743ce893e0f64d6}{mdt\-Port}.



Referenced by mdt\-Port\-Thread\-Helper\-Port\-::write\-Data\-To\-Port().

\hypertarget{classmdt_abstract_port_a4fed10be147dfce6ca315467ff3fb968}{\index{mdt\-Abstract\-Port@{mdt\-Abstract\-Port}!write\-Frames@{write\-Frames}}
\index{write\-Frames@{write\-Frames}!mdtAbstractPort@{mdt\-Abstract\-Port}}
\subsubsection[{write\-Frames}]{\setlength{\rightskip}{0pt plus 5cm}Q\-Queue$<$ {\bf mdt\-Frame} $\ast$ $>$ \& mdt\-Abstract\-Port\-::write\-Frames (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
)}}\label{classmdt_abstract_port_a4fed10be147dfce6ca315467ff3fb968}


Get the write frames Queue. 

Write frames queue contains frames that must be sent

Mutex is not handled by this method. 

Definition at line 334 of file mdt\-Abstract\-Port.\-cpp.



References pv\-Write\-Frames.

\hypertarget{classmdt_abstract_port_abf093b67fddebffa4f3c52277b9a8cf7}{\index{mdt\-Abstract\-Port@{mdt\-Abstract\-Port}!write\-Frames\-Pool@{write\-Frames\-Pool}}
\index{write\-Frames\-Pool@{write\-Frames\-Pool}!mdtAbstractPort@{mdt\-Abstract\-Port}}
\subsubsection[{write\-Frames\-Pool}]{\setlength{\rightskip}{0pt plus 5cm}Q\-Queue$<$ {\bf mdt\-Frame} $\ast$ $>$ \& mdt\-Abstract\-Port\-::write\-Frames\-Pool (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
)}}\label{classmdt_abstract_port_abf093b67fddebffa4f3c52277b9a8cf7}


Get the write frames Queue pool. 

Write frames queue pool contains frames that are ready to use for transmission

Mutex is not handled by this method. 

Definition at line 339 of file mdt\-Abstract\-Port.\-cpp.



References pv\-Write\-Frames\-Pool.



Referenced by mdt\-Port\-Thread\-Helper\-::restore\-Current\-Write\-Frame\-To\-Pool(), mdt\-Usbtmc\-Port\-Manager\-::send\-Data(), mdt\-Modbus\-Tcp\-Port\-Manager\-::send\-Data(), mdt\-Port\-Manager\-::send\-Data(), and mdt\-Usbtmc\-Port\-Manager\-::send\-Read\-Request().



\subsection{Member Data Documentation}
\hypertarget{classmdt_abstract_port_a035d72bddbac47f405a8ecf0d2eeba66}{\index{mdt\-Abstract\-Port@{mdt\-Abstract\-Port}!pv\-Config@{pv\-Config}}
\index{pv\-Config@{pv\-Config}!mdtAbstractPort@{mdt\-Abstract\-Port}}
\subsubsection[{pv\-Config}]{\setlength{\rightskip}{0pt plus 5cm}{\bf mdt\-Port\-Config}$\ast$ mdt\-Abstract\-Port\-::pv\-Config\hspace{0.3cm}{\ttfamily [protected]}}}\label{classmdt_abstract_port_a035d72bddbac47f405a8ecf0d2eeba66}


Definition at line 589 of file mdt\-Abstract\-Port.\-h.



Referenced by mdt\-Abstract\-Serial\-Port\-::config(), config(), mdt\-Abstract\-Port(), set\-Config(), and wait\-For\-Ready\-Read().

\hypertarget{classmdt_abstract_port_a357bce65bc031fffa87090a26ab88a08}{\index{mdt\-Abstract\-Port@{mdt\-Abstract\-Port}!pv\-Mutex@{pv\-Mutex}}
\index{pv\-Mutex@{pv\-Mutex}!mdtAbstractPort@{mdt\-Abstract\-Port}}
\subsubsection[{pv\-Mutex}]{\setlength{\rightskip}{0pt plus 5cm}Q\-Mutex mdt\-Abstract\-Port\-::pv\-Mutex\hspace{0.3cm}{\ttfamily [protected]}}}\label{classmdt_abstract_port_a357bce65bc031fffa87090a26ab88a08}


Definition at line 593 of file mdt\-Abstract\-Port.\-h.



Referenced by mdt\-Abstract\-Serial\-Port\-::car\-Is\-On(), mdt\-Abstract\-Serial\-Port\-::cts\-Is\-On(), mdt\-Abstract\-Serial\-Port\-::dsr\-Is\-On(), get\-Frame\-To\-Write(), lock\-Mutex(), mdt\-Abstract\-Serial\-Port\-::rng\-Is\-On(), mdt\-Serial\-Port\-::set\-Dtr(), mdt\-Serial\-Port\-::set\-Rts(), unlock\-Mutex(), mdt\-Serial\-Port\-::wait\-Event\-Ctl(), mdt\-Port\-::wait\-Event\-Write\-Ready(), mdt\-Serial\-Port\-::wait\-Event\-Write\-Ready(), mdt\-Port\-::wait\-For\-Ready\-Read(), and mdt\-Serial\-Port\-::wait\-For\-Ready\-Read().

\hypertarget{classmdt_abstract_port_afb8f8a723ff2db5141f18750020a7ee9}{\index{mdt\-Abstract\-Port@{mdt\-Abstract\-Port}!pv\-Port\-Name@{pv\-Port\-Name}}
\index{pv\-Port\-Name@{pv\-Port\-Name}!mdtAbstractPort@{mdt\-Abstract\-Port}}
\subsubsection[{pv\-Port\-Name}]{\setlength{\rightskip}{0pt plus 5cm}Q\-String mdt\-Abstract\-Port\-::pv\-Port\-Name\hspace{0.3cm}{\ttfamily [protected]}}}\label{classmdt_abstract_port_afb8f8a723ff2db5141f18750020a7ee9}


Definition at line 591 of file mdt\-Abstract\-Port.\-h.



Referenced by port\-Name(), and set\-Port\-Name().

\hypertarget{classmdt_abstract_port_a412c3e4903bf7d90914cfeb273e82623}{\index{mdt\-Abstract\-Port@{mdt\-Abstract\-Port}!pv\-Readen\-Frames@{pv\-Readen\-Frames}}
\index{pv\-Readen\-Frames@{pv\-Readen\-Frames}!mdtAbstractPort@{mdt\-Abstract\-Port}}
\subsubsection[{pv\-Readen\-Frames}]{\setlength{\rightskip}{0pt plus 5cm}Q\-Queue$<${\bf mdt\-Frame}$\ast$$>$ mdt\-Abstract\-Port\-::pv\-Readen\-Frames\hspace{0.3cm}{\ttfamily [protected]}}}\label{classmdt_abstract_port_a412c3e4903bf7d90914cfeb273e82623}


Definition at line 584 of file mdt\-Abstract\-Port.\-h.



Referenced by close(), flush(), flush\-In(), and readen\-Frames().

\hypertarget{classmdt_abstract_port_a3d6bb9b420f64776d8fd077cf2b9b873}{\index{mdt\-Abstract\-Port@{mdt\-Abstract\-Port}!pv\-Read\-Frames\-Pool@{pv\-Read\-Frames\-Pool}}
\index{pv\-Read\-Frames\-Pool@{pv\-Read\-Frames\-Pool}!mdtAbstractPort@{mdt\-Abstract\-Port}}
\subsubsection[{pv\-Read\-Frames\-Pool}]{\setlength{\rightskip}{0pt plus 5cm}Q\-Queue$<${\bf mdt\-Frame}$\ast$$>$ mdt\-Abstract\-Port\-::pv\-Read\-Frames\-Pool\hspace{0.3cm}{\ttfamily [protected]}}}\label{classmdt_abstract_port_a3d6bb9b420f64776d8fd077cf2b9b873}


Definition at line 585 of file mdt\-Abstract\-Port.\-h.



Referenced by close(), flush(), flush\-In(), init\-Queues(), and read\-Frames\-Pool().

\hypertarget{classmdt_abstract_port_a4c81c98680c98ad6802dccd30380459d}{\index{mdt\-Abstract\-Port@{mdt\-Abstract\-Port}!pv\-Write\-Frame\-Available@{pv\-Write\-Frame\-Available}}
\index{pv\-Write\-Frame\-Available@{pv\-Write\-Frame\-Available}!mdtAbstractPort@{mdt\-Abstract\-Port}}
\subsubsection[{pv\-Write\-Frame\-Available}]{\setlength{\rightskip}{0pt plus 5cm}Q\-Wait\-Condition mdt\-Abstract\-Port\-::pv\-Write\-Frame\-Available\hspace{0.3cm}{\ttfamily [protected]}}}\label{classmdt_abstract_port_a4c81c98680c98ad6802dccd30380459d}


Definition at line 595 of file mdt\-Abstract\-Port.\-h.



Referenced by abort\-Frame\-To\-Write\-Wait(), add\-Frame\-To\-Write(), and get\-Frame\-To\-Write().

\hypertarget{classmdt_abstract_port_a12cd5c1ba100b018539ed909a481d6dc}{\index{mdt\-Abstract\-Port@{mdt\-Abstract\-Port}!pv\-Write\-Frames@{pv\-Write\-Frames}}
\index{pv\-Write\-Frames@{pv\-Write\-Frames}!mdtAbstractPort@{mdt\-Abstract\-Port}}
\subsubsection[{pv\-Write\-Frames}]{\setlength{\rightskip}{0pt plus 5cm}Q\-Queue$<${\bf mdt\-Frame}$\ast$$>$ mdt\-Abstract\-Port\-::pv\-Write\-Frames\hspace{0.3cm}{\ttfamily [protected]}}}\label{classmdt_abstract_port_a12cd5c1ba100b018539ed909a481d6dc}


Definition at line 586 of file mdt\-Abstract\-Port.\-h.



Referenced by mdt\-Tcp\-Socket\-::add\-Frame\-To\-Write(), mdt\-Usb\-Port\-::add\-Frame\-To\-Write(), add\-Frame\-To\-Write(), close(), flush(), flush\-Out(), get\-Frame\-To\-Write(), and write\-Frames().

\hypertarget{classmdt_abstract_port_a67a8b1965f20a55ad115926aed0234b4}{\index{mdt\-Abstract\-Port@{mdt\-Abstract\-Port}!pv\-Write\-Frames\-Pool@{pv\-Write\-Frames\-Pool}}
\index{pv\-Write\-Frames\-Pool@{pv\-Write\-Frames\-Pool}!mdtAbstractPort@{mdt\-Abstract\-Port}}
\subsubsection[{pv\-Write\-Frames\-Pool}]{\setlength{\rightskip}{0pt plus 5cm}Q\-Queue$<${\bf mdt\-Frame}$\ast$$>$ mdt\-Abstract\-Port\-::pv\-Write\-Frames\-Pool\hspace{0.3cm}{\ttfamily [protected]}}}\label{classmdt_abstract_port_a67a8b1965f20a55ad115926aed0234b4}


Definition at line 587 of file mdt\-Abstract\-Port.\-h.



Referenced by close(), flush(), flush\-Out(), init\-Queues(), and write\-Frames\-Pool().



The documentation for this class was generated from the following files\-:\begin{DoxyCompactItemize}
\item 
src/mdtport/\hyperlink{mdt_abstract_port_8h}{mdt\-Abstract\-Port.\-h}\item 
src/mdtport/\hyperlink{mdt_abstract_port_8cpp}{mdt\-Abstract\-Port.\-cpp}\end{DoxyCompactItemize}
