\hypertarget{classmdt_device_modbus_wago}{
\section{mdtDeviceModbusWago Class Reference}
\label{classmdt_device_modbus_wago}\index{mdtDeviceModbusWago@{mdtDeviceModbusWago}}
}


Inheritance diagram for mdtDeviceModbusWago:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=204pt]{classmdt_device_modbus_wago__inherit__graph}
\end{center}
\end{figure}


Collaboration diagram for mdtDeviceModbusWago:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=400pt]{classmdt_device_modbus_wago__coll__graph}
\end{center}
\end{figure}
\subsection*{Public Member Functions}
\begin{DoxyCompactItemize}
\item 
\hypertarget{classmdt_device_modbus_wago_a31abb03678a8afe2e6bf7c03e5e92726}{
{\bfseries mdtDeviceModbusWago} (QObject $\ast$parent=0)}
\label{classmdt_device_modbus_wago_a31abb03678a8afe2e6bf7c03e5e92726}

\item 
\hyperlink{classmdt_abstract_port_ad4121bb930c95887e77f8bafa065a85e}{mdtAbstractPort::error\_\-t} \hyperlink{classmdt_device_modbus_wago_a025f0411a708a529054a0e3c0b6461cd}{connectToDevice} (const \hyperlink{classmdt_device_info}{mdtDeviceInfo} \&devInfo)
\begin{DoxyCompactList}\small\item\em Search and connect to physical device. \end{DoxyCompactList}\item 
\hyperlink{classmdt_abstract_port_ad4121bb930c95887e77f8bafa065a85e}{mdtAbstractPort::error\_\-t} \hyperlink{classmdt_device_modbus_wago_a12ad1f1ef34b16be5903d1d6232a7c6d}{connectToDevice} (const QList$<$ \hyperlink{classmdt_port_info}{mdtPortInfo} $\ast$ $>$ \&scanResult, int hardwareNodeId, int bitsCount, int startFrom=0)
\begin{DoxyCompactList}\small\item\em Search and connect to physical device. \end{DoxyCompactList}\item 
\hypertarget{classmdt_device_modbus_wago_a6f01ba89d90ddfbcaa0cbda1885d22f1}{
bool \hyperlink{classmdt_device_modbus_wago_a6f01ba89d90ddfbcaa0cbda1885d22f1}{isWago750} ()}
\label{classmdt_device_modbus_wago_a6f01ba89d90ddfbcaa0cbda1885d22f1}

\begin{DoxyCompactList}\small\item\em Check if device is a Wago 750 series. \end{DoxyCompactList}\item 
int \hyperlink{classmdt_device_modbus_wago_ad812b7ee3a2f2677cddde205da5ec787}{analogOutputsCount} ()
\begin{DoxyCompactList}\small\item\em Get number of analog outputs. \end{DoxyCompactList}\item 
int \hyperlink{classmdt_device_modbus_wago_a9da56c13404fd9243c5920ff2ef8bd15}{analogInputsCount} ()
\begin{DoxyCompactList}\small\item\em Get number of analog inputs. \end{DoxyCompactList}\item 
int \hyperlink{classmdt_device_modbus_wago_a6711c4e486c3b103b187102685e091cc}{digitalOutputsCount} ()
\begin{DoxyCompactList}\small\item\em Get number of digital outputs. \end{DoxyCompactList}\item 
int \hyperlink{classmdt_device_modbus_wago_ad51fd45858e62c597ba8fc2bf3e877bd}{digitalInputsCount} ()
\begin{DoxyCompactList}\small\item\em Get number of digital inputs. \end{DoxyCompactList}\item 
bool \hyperlink{classmdt_device_modbus_wago_af26af790e502e5b85498540dd215cff7}{detectIos} (\hyperlink{classmdt_device_ios}{mdtDeviceIos} $\ast$ios, const QMap$<$ int, \hyperlink{classmdt_device_modbus_wago_module}{mdtDeviceModbusWagoModule} $\ast$ $>$ specialModules=QMap$<$ int, \hyperlink{classmdt_device_modbus_wago_module}{mdtDeviceModbusWagoModule} $\ast$ $>$())
\begin{DoxyCompactList}\small\item\em Query device about filed bus + I/Os setup. \end{DoxyCompactList}\end{DoxyCompactItemize}


\subsection{Detailed Description}


Definition at line 35 of file mdtDeviceModbusWago.h.



\subsection{Member Function Documentation}
\hypertarget{classmdt_device_modbus_wago_a9da56c13404fd9243c5920ff2ef8bd15}{
\index{mdtDeviceModbusWago@{mdtDeviceModbusWago}!analogInputsCount@{analogInputsCount}}
\index{analogInputsCount@{analogInputsCount}!mdtDeviceModbusWago@{mdtDeviceModbusWago}}
\subsubsection[{analogInputsCount}]{\setlength{\rightskip}{0pt plus 5cm}int mdtDeviceModbusWago::analogInputsCount (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
)}}
\label{classmdt_device_modbus_wago_a9da56c13404fd9243c5920ff2ef8bd15}


Get number of analog inputs. 

Note: calling this method will query the device

\begin{DoxyReturn}{Returns}
Number of analog inputs, or $<$ 0 on error 
\end{DoxyReturn}


Definition at line 172 of file mdtDeviceModbusWago.cpp.

\hypertarget{classmdt_device_modbus_wago_ad812b7ee3a2f2677cddde205da5ec787}{
\index{mdtDeviceModbusWago@{mdtDeviceModbusWago}!analogOutputsCount@{analogOutputsCount}}
\index{analogOutputsCount@{analogOutputsCount}!mdtDeviceModbusWago@{mdtDeviceModbusWago}}
\subsubsection[{analogOutputsCount}]{\setlength{\rightskip}{0pt plus 5cm}int mdtDeviceModbusWago::analogOutputsCount (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
)}}
\label{classmdt_device_modbus_wago_ad812b7ee3a2f2677cddde205da5ec787}


Get number of analog outputs. 

Note: calling this method will query the device

\begin{DoxyReturn}{Returns}
Number of analog outputs, or $<$ 0 on error 
\end{DoxyReturn}


Definition at line 161 of file mdtDeviceModbusWago.cpp.

\hypertarget{classmdt_device_modbus_wago_a12ad1f1ef34b16be5903d1d6232a7c6d}{
\index{mdtDeviceModbusWago@{mdtDeviceModbusWago}!connectToDevice@{connectToDevice}}
\index{connectToDevice@{connectToDevice}!mdtDeviceModbusWago@{mdtDeviceModbusWago}}
\subsubsection[{connectToDevice}]{\setlength{\rightskip}{0pt plus 5cm}{\bf mdtAbstractPort::error\_\-t} mdtDeviceModbusWago::connectToDevice (
\begin{DoxyParamCaption}
\item[{const QList$<$ {\bf mdtPortInfo} $\ast$ $>$ \&}]{scanResult, }
\item[{int}]{hardwareNodeId, }
\item[{int}]{bitsCount, }
\item[{int}]{startFrom = {\ttfamily 0}}
\end{DoxyParamCaption}
)}}
\label{classmdt_device_modbus_wago_a12ad1f1ef34b16be5903d1d6232a7c6d}


Search and connect to physical device. 

Work as \hyperlink{classmdt_device_modbus_a323b16687f448a4e45eb0b313635b77f}{mdtDeviceModbus::connectToDevice()} , but checks that device is a Wago 750 fieldbus coupler. 

Q\_\-ASSERT(!pvTcpPortManager-\/$>$isRunning()); 



Reimplemented from \hyperlink{classmdt_device_modbus_a323b16687f448a4e45eb0b313635b77f}{mdtDeviceModbus}.



Definition at line 105 of file mdtDeviceModbusWago.cpp.

\hypertarget{classmdt_device_modbus_wago_a025f0411a708a529054a0e3c0b6461cd}{
\index{mdtDeviceModbusWago@{mdtDeviceModbusWago}!connectToDevice@{connectToDevice}}
\index{connectToDevice@{connectToDevice}!mdtDeviceModbusWago@{mdtDeviceModbusWago}}
\subsubsection[{connectToDevice}]{\setlength{\rightskip}{0pt plus 5cm}{\bf mdtAbstractPort::error\_\-t} mdtDeviceModbusWago::connectToDevice (
\begin{DoxyParamCaption}
\item[{const {\bf mdtDeviceInfo} \&}]{devInfo}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily  \mbox{[}virtual\mbox{]}}}}
\label{classmdt_device_modbus_wago_a025f0411a708a529054a0e3c0b6461cd}


Search and connect to physical device. 

Will scan available ports and open the first port that has device attached maching request.

Note: in current version, only Wago 750 system is supported.


\begin{DoxyParams}{Parameters}
{\em devInfo} & Requested device's informations (can be empty, no information is used in current version). \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
A error listed in \hyperlink{classmdt_abstract_port_ad4121bb930c95887e77f8bafa065a85e}{mdtAbstractPort::error\_\-t} (NoError on success) 
\end{DoxyReturn}


Reimplemented from \hyperlink{classmdt_device_abab1b6e45af527880ce469ae318474c0}{mdtDevice}.



Definition at line 48 of file mdtDeviceModbusWago.cpp.

\hypertarget{classmdt_device_modbus_wago_af26af790e502e5b85498540dd215cff7}{
\index{mdtDeviceModbusWago@{mdtDeviceModbusWago}!detectIos@{detectIos}}
\index{detectIos@{detectIos}!mdtDeviceModbusWago@{mdtDeviceModbusWago}}
\subsubsection[{detectIos}]{\setlength{\rightskip}{0pt plus 5cm}bool mdtDeviceModbusWago::detectIos (
\begin{DoxyParamCaption}
\item[{{\bf mdtDeviceIos} $\ast$}]{ios, }
\item[{const QMap$<$ int, {\bf mdtDeviceModbusWagoModule} $\ast$ $>$}]{specialModules = {\ttfamily QMap$<$int,~{\bf mdtDeviceModbusWagoModule}$\ast$$>$()}}
\end{DoxyParamCaption}
)}}
\label{classmdt_device_modbus_wago_af26af790e502e5b85498540dd215cff7}


Query device about filed bus + I/Os setup. 

The detected I/Os are added to given ios, but not added to internal ios container (use \hyperlink{classmdt_device_a9f1de62ef54974b0636dee673bd819e2}{setIos()} for this). Goal is to be able to detect setup without alter the internal container, so a check could be made before running really, or something else.

For some special configurable modules, channels count and process image format can vary. Because some of these parameters cannot be readen from module via MODBUS, a instance of a module object with corresponding setup must be given as argument. (It's also possible to specify only the special modules. Internally, setup regarding register word returned from fieldbus coupler will be used for positions that are not present in the map).


\begin{DoxyParams}{Parameters}
{\em ios} & I/O container in witch the result will be stored. \\
\hline
{\em specialModules} & Map with module position as key and special module object as value. Note: position 0 is the fieldbus coupler, so module position starts at 1. Module objects contained in the map are not deleted in this method. \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
True on success. A failure is mostly due to a communication error, an unsupported fieldbus coupler, a unsupported module or a mistmatch with a special module configuration. 
\end{DoxyReturn}


\begin{Desc}
\item[\hyperlink{bug__bug000001}{Bug}]If number of requested modules is $>$ 62, this hangs up with 750-\/352 filedbus (possibly a bug in mdtLib..) \end{Desc}


\begin{Desc}
\item[\hyperlink{todo__todo000006}{Todo}]Handle adrress mapping of bus coupler (can be a problem with $>$ 256 I/O on 750-\/352 f.ex.) \end{Desc}


\begin{Desc}
\item[\hyperlink{todo__todo000007}{Todo}]Provisoire !!!! \end{Desc}




Definition at line 205 of file mdtDeviceModbusWago.cpp.

\hypertarget{classmdt_device_modbus_wago_ad51fd45858e62c597ba8fc2bf3e877bd}{
\index{mdtDeviceModbusWago@{mdtDeviceModbusWago}!digitalInputsCount@{digitalInputsCount}}
\index{digitalInputsCount@{digitalInputsCount}!mdtDeviceModbusWago@{mdtDeviceModbusWago}}
\subsubsection[{digitalInputsCount}]{\setlength{\rightskip}{0pt plus 5cm}int mdtDeviceModbusWago::digitalInputsCount (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
)}}
\label{classmdt_device_modbus_wago_ad51fd45858e62c597ba8fc2bf3e877bd}


Get number of digital inputs. 

Note: calling this method will query the device

\begin{DoxyReturn}{Returns}
Number of digital inputs, or $<$ 0 on error 
\end{DoxyReturn}


Definition at line 194 of file mdtDeviceModbusWago.cpp.

\hypertarget{classmdt_device_modbus_wago_a6711c4e486c3b103b187102685e091cc}{
\index{mdtDeviceModbusWago@{mdtDeviceModbusWago}!digitalOutputsCount@{digitalOutputsCount}}
\index{digitalOutputsCount@{digitalOutputsCount}!mdtDeviceModbusWago@{mdtDeviceModbusWago}}
\subsubsection[{digitalOutputsCount}]{\setlength{\rightskip}{0pt plus 5cm}int mdtDeviceModbusWago::digitalOutputsCount (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
)}}
\label{classmdt_device_modbus_wago_a6711c4e486c3b103b187102685e091cc}


Get number of digital outputs. 

Note: calling this method will query the device

\begin{DoxyReturn}{Returns}
Number of digital outputs, or $<$ 0 on error 
\end{DoxyReturn}


Definition at line 183 of file mdtDeviceModbusWago.cpp.



The documentation for this class was generated from the following files:\begin{DoxyCompactItemize}
\item 
src/mdtdevice/mdtDeviceModbusWago.h\item 
src/mdtdevice/mdtDeviceModbusWago.cpp\end{DoxyCompactItemize}
